BEES : Real - Time Occupant Feedback and Environmental Learning Framework For Collaborative Thermal Management in Multi - Zone , Multi - Occupant Buildings Santosh K . Gupta a , ∗ , Sam Atkinson b , Ian O’Boyle b , John Drogo a , Koushik Kar a , Sandipan Mishra c , John T . Wen a a Department of Electrical , Computer , & Systems Engineering b Department of Computer Science c Department of Mechanical , Aerospace and Nuclear Engineering Rensselaer Polytechnic Institute , Troy , NY 12180 , USA . Abstract In this work we present an end - to - end framework designed for enabling occupant feedback collection and incorporating the feedback data towards energy eﬃcient operation of a building . We have designed a mobile application that occupants can use on their smart phones to provide their thermal preference feedback . When relaying the occupant feedback to the central server the mobile application also uses indoor location techniques to tie the occupant preference to their current thermal zone . Texas Instruments sensortags are used for real time zonal temperature readings . The mobile application relays the occupant preference along with the location to a central server that also hosts our learning algorithm to learn the environment and using occupant feedback calculates the optimal temperature set point . The entire process is triggered upon change of occupancy , environmental conditions , and / or occupant preference . The learning algorithm is scheduled to run at regular intervals to respond dynamically to environmental and occupancy changes . We describe results from experimental studies in two diﬀerent settings : a single family residential home setting and in a university based laboratory space setting . Keywords : Collaborative comfort management , Autonomous thermostat control , Multi - zone environment control , Smart HVAC operation , Occupant feedback interface . 1 . Introduction Energy usage in buildings , both residential and com - mercial , account for one of the major source of energy consumption . Data suggests that nearly 40 % of the total energy consumption in US , and 20 % of the total energy consumption worldwide , is attributed to the residential and commercial building usage [ 1 ] . More than 75 % of current electricity consumption is also due to the usage in buildings . Hence , global energy eﬃciency cannot be ob - tained without devising ways for energy eﬃcient operation of buildings . Heating , ventilation , and air conditioning ( HVAC ) system is one of the major energy consumers in buildings . However , even with the existing cost of HVAC systems , the occupant dissatisfaction associated with the prevailing indoor thermal conditions have been highlighted by several studies [ 2 ] , [ 3 ] . Personalized comfort level expectations pose a conﬂict - ing situation in multi - occupant spaces such as residential homes , research laboratories , corporate oﬃce buildings , student dorms etc . , where occupants have their own range of thermal comfort and other environmental settings . This range generally depends on individual occupant body type , ∗ Corresponding Author Email address : guptas7 @ rpi . edu ( Santosh K . Gupta ) external factors such as attire , physical and mental condi - tion , and level of tolerance ; and can also vary depending on other environmental factors such as time of the day , lighting conditions etc . [ 4 ] , [ 5 ] , [ 6 ] . This personalized thermal comfort range can be best captured by individ - ual occupant feedback in real time . Further , in shared multi - occupant spaces personal comfort levels are aﬀected both by the presence of co - occupants and the correlation between temperatures in diﬀerent zones and rooms occu - pied [ 7 ] , [ 8 ] , [ 9 ] . Arriving at temperature set - points to minimize the aggregate discomfort among all occupants of diﬀerent rooms or zones in a building is an important yet challenging problem . With rising energy cost and empha - sis on energy conservation , the total energy cost also needs to be accounted for when trying to determine the optimal temperature set - points in diﬀerent zones of a building . Incorporating real - time occupant feedback is key to successful operation of any multi - zone , multi - occupant space that strives to maximize aggregate comfort of all its occu - pants while limiting the total energy cost . There are mul - tiple aspects to designing an eﬃcient end - to - end system for collection of occupant feedback in real - time and incor - porating the same in thermal management of a building . It starts with providing an intuitive and user friendly in - terface for the mobile occupants to provide their feedback . When collecting the feedback the occupant preference has Preprint submitted to Energy And Buildings October 17 , 2016 to be tied to a particular zone within the building with rea - sonable accuracy . A central server that can collate feed - back from all the occupants and estimate optimal zonal temperature set points for the entire building would then be needed to complete the loop . It also requires knowledge of the comfort range information ( discomfort as a function of the temperature experienced by the occupant , more gen - erally ) , of all the occupants . In this work we present a framework to achieve this in a multi - zone multi - occupant building , where there is usually signiﬁcant thermal correla - tion ( energy ﬂows ) between diﬀerent zones , and the exact discomfort functions are held privately by each occupant . 1 . 1 . Literature Review Numerous design and solution approaches have been proposed for the control and eﬃciency of HVAC systems . The approaches taken so far can be broadly classiﬁed into those focusing on optimal energy usage through variable electricity rates [ 31 ] , [ 32 ] , [ 33 ] , [ 34 ] , active and passive ther - mal energy storage [ 33 ] , [ 34 ] , and more recently model predictive control ( MPC ) approach exploiting information through weather forecast [ 35 ] , [ 36 ] , [ 37 ] , [ 38 ] , [ 39 ] , [ 40 ] . Other set of works have studied advanced HVAC con - trol algorithms with quantiﬁcation of occupant comfort range . Some prior work [ 42 ] have tried to link the cost of building environment control to the occupant eﬃciency , health and satisfaction . To this eﬀect occupant thermal comfort modeling has been extensively researched and can be summarized into the following three major approaches : ( 1 ) the chamber study model , based on mapping thermal comfort from environmental and personal factors to a 7 - level comfort value scale , viz . the Predicted Mean Vote - Predicted Percent Dissatisﬁed ( PMV - PPD ) [ 8 ] , [ 4 ] ; ( 2 ) hu - man body physiology based models such as Gagge’s core to skin model [ 24 ] , Stolwijk’s comfort model for multi - human segments [ 25 ] , and Zhang et al . ’s sensation on human body segments [ 26 ] ; and ( 3 ) adaptive comfort models developed in ﬁeld study , viz . Humphreys [ 27 ] and [ 28 ] . The PMV index has been used as the metric for user comfort integration in multiple studies [ 10 ] , [ 11 ] , [ 12 ] . Some studies proposed sensor network solutions to increase the accuracy of PMV calculation [ 13 ] , [ 14 ] . Owing to the com - plexity of sensor network deployment , a number of stud - ies have proposed utilizing occupant feedback for thermal comfort integration into the control logic of building sys - tems . Through custom keyboards in each room , Guillemin and Morel made use of occupant preferences in the form of temperature set points [ 15 ] . Murakami et al . used bi - nary preference of warmer and cooler along with a logic to build consensus for controlling the air - conditioning set point [ 16 ] . Daum et al . utilized too hot / too cold occupant complaint along with a probabilistic approach for deter - mining user comfort proﬁles [ 17 ] . Thermovote [ 9 ] utilized a seven level occupant comfort voting to integrate with the building control logic . Purdon et al . developed a smart phone interface to receive 3 - point scale comfort feedback from occupants and determine the direction for tempera - ture drift with a system deﬁned step - size [ 41 ] . More recent work having considered thermal complaint behavior using one - class classiﬁer [ 29 ] , [ 30 ] have also been presented . Jaz - izadeh et al . used a fuzzy predictive model to learn occu - pant comfort proﬁles and a complementary control strat - egy for the HVAC control [ 19 ] . Zhao et al . conducted a simulation study tying occupant subjective thermal com - fort feedback with MPC control algorithm for the active HVAC system against a baseline rule - based control algo - rithm [ 18 ] . An important aspect of study is evaluating the pro - posed strategy for improving thermal comfort in build - ings . However , many of the proposed solutions require intrusive updates to the building HVAC system making it challenging to be evaluated in real building with occu - pants . Moreover , majority of the approaches are reactive from the occupant perspective . An occupant is expected to reactively and repetitively provide comfort feedback ( in the form of hot / cold in diﬀerent scales ) when he / she is exposed to discomfort . This leads to loss of productiv - ity and ineﬃciency . In the next section we introduce our framework designed to address the above challenges . 1 . 2 . BEES Approach As a solution to the above challenges , we present an in - tegrated framework for real time occupant feedback collec - tion and temperature control in multi - zone multi - occupant buildings and shared spaces . The solution , which we term BEES : Building Energy Eﬃciency Solutions , has the fol - lowing novel components . 1 ) It provides an intuitive and user friendly interface ( smart - phone application / website ) for occupant feedback collection in real - time . 2 ) Using a set of distributed sensors and beacons measures zonal tem - peratures and ties individual occupant feedback to their respective zone of occupancy in real - time . 3 ) It formulates and solves the collaborative building temperature control problem as a convex optimization question , such that it minimizes the sum of the aggregate occupant discomfort plus total energy cost . 4 ) It uses a model that captures the thermal correlations ( energy ﬂows ) between diﬀerent zones in a building , and ensures that the zonal temperatures are set in a coordinated manner taking such correlations into account . 5 ) The proposed algorithm is independent of the physical model of the building and of the HVAC system . The necessary parameters for the thermal mod - eling of the indoor space as required by our algorithm is learned in real - time using input from the sensors , making it a plug - n - play solution that can be retroﬁtted to exist - ing buildings without any intrusive or expensive updates . The “suﬃcient parameters” that are needed to implement the algorithm is estimated through standard measurement based learning methods periodically . Figure 1 gives a high level systems representation of the BEES solution . The acronym BEES is used to emphasize both the collaboration ( collaboration between occupants , declaring thermal comfort range in self - interest ) and coordination 2 Figure 1 : Systems level process ﬂow depiction of the BEES solution . ( the thermostat control is set in a coordinated manner , taking into account the multi - zone thermal correlations ) . The measurement - based learning aspect of BEES 1 must be distinguished from that of the increasingly popular learn - ing thermostats , such as those by Google - Nest [ 20 ] , Hon - eywell [ 21 ] and GoComfy [ 22 ] . Whereas these existing thermostats involve learning of user habits , BEES involves learning of the thermal correlations across zones , towards a coordinated thermostat control solution in a multi - zone environment . Indeed , the BEES learning and control plat - form is best utilized when overlaid on top of wireless con - trollable thermostats ( such as the Google - Nest or Honey - well thermostat ) , or a group of such thermostats , deployed in a typical building or shared space environment where multiple zones are almost always strongly thermally cor - related . The BEES software helps in integrated control of these thermostats towards creating personalized comfort levels for the occupants , as much as allowed by the inter - zone thermal dynamics , the level of control available , and the user comfort preferences . BEES can be used with a single thermostat as well ( typical in residential buildings ) , but would be more eﬀective with greater number of control points . Taken to another extreme , one can imagine “Total Temperature Control” with one thermostat per user [ 23 ] , and BEES can be eﬀective in such scenarios in creating a thermal environment that is most comfortable across all users in the shared space . Finally , it is worth noting that we speciﬁcally focus only on temperature set - point control problem in multi - zone multi - occupant settings . However , the general framework should also be applicable to col - laborative control of other factors that aﬀect human com - fort , and possibly involve trade - oﬀ between energy cost and comfort levels . 1 The collaborative and coordinated aspects of BEES , and how it relates to individual learning thermostats , can be succinctly captured as : “A bird builds a nest ( alone ) , BEES build a hive ( together ) ” . In this metaphor , an individual ‘bee’ can symbolize users who are in - duced to work together for creating an environment that is optimal in a collective sense . Alternatively , it can also symbolize the diﬀerent elements that coordinate with each other towards the complete solu - tion : the temperature sensors ( drone bees ) , the thermostats ( worker bees ) and the centralized control server ( queen bee ) . To make the solution proactive with regard to occu - pant thermal comfort , rather than reactively seeking oc - cupant discomfort feedback we take into consideration dis - comfort functions of the occupants individually - modeled as convex quadratic functions of temperature variation . Since the notion of discomfort is very personalized and subjective in nature , it is hard to quantify . We are not aware of any existing work that experimentally evaluates the discomfort function of typical occupants . Therefore our choice of quadratic discomfort function is motivated by the PMV - PPD model [ 8 ] , [ 4 ] , which suggests that the number of occupants uncomfortable at a particular tem - perature varies in a quadratic form with temperature . We adopt occupant discomfort function of the form : D i ( y j ) =   ( y j − y Ui ) 2 if y j > y Ui , 0 if y Li ≤ y j ≤ y Ui , ( y j − y Li ) 2 if y j < y Li , ( 1 ) where y Ui and y Li are the upper and lower limit temper - atures , respectively , of an occupant i located in zone j . Note that with this model the occupants just have to en - ter their upper y Ui and lower y Li limit temperature values one time . We then pose the eﬀective temperature con - trol of the building formally as an optimization problem that takes into account both the temperature dynamics as a function of the energy input and the thermal discom - fort function of the building occupants . We also want to point out that BEES is built upon our previous theoreti - cal research work [ 43 ] , [ 44 ] , [ 45 ] . However , to contrast it with our recent theoretical work the key diﬀerences can be summarized as : ( i ) the approach in this work in much simpler for the occupants as they just have to share their upper and lower limit temperatures one time without hav - ing to worry about pricing or penalty feedback from the building system , ( ii ) we are presenting a complete systems level solution in this work , ( iii ) the current work takes an approach that relies on dynamic learning of the thermal environment , and ﬁnally ( iv ) this work incorporates more of experimental study rather than theoretical approach . The rest of the paper is structured as follows . We present a comprehensive coverage of system features in Section 2 , followed by a detailed system anatomy in Sec - tion 3 . We share the experimental results in Section 4 and ﬁnally conclude in Section 5 . 2 . BEES - System Features In this section we discuss major features of the BEES solution architecture that sets it apart from the existing so - lutions on occupant feedback based thermal management systems . 2 . 1 . Occupant Feedback Collection At the core of our solution is an intuitive and user friendly interface to capture occupant thermal comfort feed - back in real - time . Figure 2 denotes the iOS smart phone 3 application interface that occupants can use to provide their thermal comfort feedback . An occupant i can simply use the central wheel to set their upper and lower limit temperatures ( y Ui and y Li from 1 ) . Alternatively , they can use the Hot and Cold buttons to indicate how they are feel - ing and the comfort range adjusts accordingly . When the Hot or Cold button is used the slider moves accordingly ( in steps of 1 ◦ F if moving towards the external ambient temperature and by 0 . 5 ◦ F when moving away from the ex - ternal ambient temperature ) to match the occupant com - fort and energy eﬃciency . We foster energy eﬃcient habit among occupants by using vibrational feedback cue when their thermal comfort choice moves away from the am - bient condition ( potentially increasing energy cost ) . The interface also conveys to the occupant their current zone of occupancy . Using the interface in Figures 3 and 4 occupants can ac - cess diﬀerent settings for the BEES system and also view the historical temperature data of diﬀerent zones . The occupants with administrator credentials can even set de - fault values for all the zones of their location when no other occupants are around . 2 . 2 . Real - time Indoor Temperature Measurement An eﬀective thermal management of a multi - zonal space requires real time temperature measurement of all the re - spective zones . Note that a typical thermostat set - point function is based on the temperature as sensed at the ther - mostat location . This fails to capture the thermal dynam - ics and correlation of the entire space , and cannot ensure temperature within acceptable range for each zone . For real time thermal modeling of the space BEES captures temperature of each zone in real time at a frequency of 30 seconds . We use Texas Instrument’s sensortag circuit [ 47 ] , which is based on CC2650 wireless MCU as shown in Figure 5 . The sensortag circuit originally uses CR2032 coin cell batteries . However , we modiﬁed it to run on AA batter - ies for longer battery life and achieve un - interrupted data . Bluetooth Low Energy ( BLE ) is used as the communica - tion protocol for relaying data from each zone sensortag to the location hub . 2 . 3 . Indoor Localization of Occupants Most of the existing occupant feedback systems require occupants to select the room / location they are in and then enter their comfort feedback . This is tedious and not oc - cupant friendly , and at the same time may deter the oc - cupants from providing feedback as they move around be - tween diﬀerent zones and locations throughout the day . BEES does real - time indoor localization of the occupants and automatically applies their comfort preference to their current zone . This is achieved using Gimbal proximity beacon series 10 [ 48 ] , as shown in Figure 6 . The iBeacon technology [ 49 ] is used to communicate with the Gimbal proximity beacon through the BEES smart phone application . Occupants with smart phone or wear - ables can be localized to a particular zone through the Received Signal Strength Indicator ( RSSI ) value of signals received from the beacons spread throughout the location in each zone . 2 . 4 . Environment Learning & Optimal Thermal Set - point Raspberry Pi 2 Model B platform [ 50 ] , as shown in Figure 7 acts as the location hub for our algorithm . It communicates directly with the sensortags through BLE , using a USB BLE adapter [ 51 ] . The real - time temperature readings are stored in a lo - cal database . It also pulls the ambient ( outside building ) temperature readings from Web API in real - time , and the data is used by the learning algorithm hosted on the plat - form to build the model at regular intervals . It then runs the optimization algorithm to calculate the optimal set - point for the location . Using the Nest API [ 52 ] , the plat - form then automatically adjusts the Nest thermostat in the location to set it to the calculated optimal set - point . 3 . BEES - System Anatomy In this section we ﬁrst provide a high level discussion of the BEES architecture . Then , we go into some in - depth descriptions of diﬀerent use cases and entity relationship . Finally , we examine the learning model and the optimiza - tion algorithm . 3 . 1 . Overall Architecture The overall systems architecture for the BEES solution is presented in Figure 8 . At the core of it is our central server that also hosts the web server for BEES . The server is responsible for authorization and authentication of oc - cupants and stores the mapping of zones and locations . Occupants can also login and manage their BEES system through the website , and can even provide comfort feed - back . At the next level of architectural hierarchy is a BEES location . Each location hosts an individual BEES system running on a Raspberry Pi platform , and is supposed to have a thermostat that can be controlled over wireless ( in our experimental study we used a Google - Nest thermo - stat ) . Note that in this work we associate each location with a single thermostat that has independent control of its air distribution system . A residential home , for instance , would qualify as a BEES location . Each location is then further granulated into multiple zones . Note that these zones are soft zones , in the sense that they are not inde - pendently controllable from the central thermostat . These soft zones are virtual zones as determined and created by the BEES system administrator for the location by using the required number of sensortags and Gimbal beacons . Any time an independent thermal control is available for a space it is referred to as a location as per the BEES archi - tecture . However , note that the BEES framework can be 4 Figure 2 : BEES iOS app interface for occu - pant thermal comfort feedback . Figure 3 : BEES iOS app interface to access and modify settings . Figure 4 : BEES iOS app interface for admin - istrator occupants to set zone defaults . Figure 5 : Texas Instrument’s sensortag circuit based on CC2650 wireless MCU , used for real time zone temperature measurement . Figure 6 : Gimbal proximity beacon series 10 , used for indoor local - ization of occupants . extended to include controllable vents , individual AC units or personal heaters that might be available separately in each soft zone . The BEES system administrator could be a home owner in case of a single family residential build - ing , or a building system operator for commercial spaces . A home owner administrator , for instance , can decide to use just two sets of sensors to create two thermal zones ( say ﬁrst and second ﬂoor ) , or can pick a set of sensors for each bedroom creating ﬁve thermal zones in a ﬁve bed - room home location . Each zone can then accommodate as many occupants as the physical space might permit . Every occupant is actively tracked by BEES system through the smart phone application or wearables . Alternately , the oc - cupants can use the web server to login and provide their information in a reactive manner . 3 . 2 . Occupant Use Cases In BEES architecture an occupant is classiﬁed as a regular occupant or an administrator occupant . Figure 9 shows the use case diagram for the BEES framework . Figure 7 : Raspberry Pi board serves as the embedded platform for each BEES location . In the BEES framework , once an occupant logs into the system his / her location is determined . Once the oc - cupant location has been obtained ( on location or away from authorized location ) , the system retrieves the autho - rization level ( regular or administrator ) and accordingly available actions are displayed to the occupant . All oc - cupants can provide their comfort feedback and view the thermal history of the location . For on location occupants the feedback is applied to the current zone of occupancy , and in case of remote occupants they have an option of changing their preference for future occupancy or apply - ing it remotely to their last occupied zone . Additionally , as an administrator for a location an occupant can set defaults for all the zones of the location and also switch between diﬀerent operating modes . 3 . 3 . Network Architecture & Entity Relationships Network architecture of the BEES system implemen - tation is shown in Figure 10 . The central server hosted as a Virtual Private Service ( VPS ) runs the central database and captures real - time system logs . The entity relation - ship diagram of the database structure is further repre - sented in Figure 11 . The server provides HTTPS APIs for diﬀerent com - ponents of the system ( smart phone application , website , thermostat , location hub ) to update and retrieve data val - ues as needed . 5 Figure 8 : Central Architecture for the BEES system . Figure 9 : Occupant use case diagram depicting diﬀerent use cases from the user perspective . 3 . 4 . Dynamic Learning Algorithm Complete model independence in the form of plug - n - play solution is achieved by BEES framework through its dynamic environmental learning algorithm . Consider a BEES location with m zones . Let vector y denote the temperature vector of the location , where y j represents the temperature of zone j within the location . The ther - mal state of the location can be represented as a function of its dependents : y = f ( Θ , T ∞ , Γ ) , ( 2 ) where Θ is the state of thermostat in the location , which in turn determines the external heating / cooling input . T ∞ is the outdoor ambient temperature and Γ represents all the other heat sources or sinks associated with the loca - tion . The function f ( . ) is highly non - linear in general and would change with changes in environmental conditions , such as opening and closing of doors and windows , mak - ing it very challenging to estimate in real - time . However , for simplicity we model temperature of each zone as a lin - ear function of the form : y j = α j Θ + β j T ∞ + γ j . ( 3 ) Figure 10 : BEES network architecture depicting information ex - change among diﬀerent components of the system . Figure 11 : Entity Relationship Diagram ( ERD ) for the BEES system representing the relationship among diﬀerent entity in the database . Due to the thermal inertia of the building , the depen - dency of the current zonal temperature ( y j ) on the external ambient ( T ∞ ) and thermostatic temperature setting ( Θ ) is in general non - linear . However , in “steady - state” ( i . e . , when the transients have died down and the zonal temper - atures have settled down to their equilibrium values ) , this dependency can be modeled as a linear relationship . This is true for the building thermal model used in our prior work [ 43 ] , [ 44 ] , [ 45 ] , which are derived from the popular electrical analogy for modeling of a building with 3R2C model approach for the walls and rooms [ 46 ] . Note that in practice , there will also be non - stationary ( time - varying ) factors that will inﬂuence this dependency . Since we es - timate the parameters α j , β j and γ j is a time - dependent manner , we expect that these parameters will capture the eﬀect of such non - stationary factors as well . In particular , the BEES system adapts the linear model in ( 3 ) for each zone of a location at every 10 minute intervals utilizing the real - time data values of y j , Θ , and T ∞ captured in the past 60 minute duration . Note that this regular refresh - ing of data helps in incorporating possible environmental changes in the location . The coeﬃcients α j , β j , and γ j can further act as indicators of abnormal behavior in a partic - ular zone over time with regard to very high correlation 6 with the ambient conditions or negligible eﬀect of changes in thermostat setting . Further , note that the coeﬃcient γ j incorporates external heat source / sink such as equipment , personal heaters / coolers , etc . This model is next utilized in the optimization algorithm for calculating the optimal thermostat setting Θ for each location . 3 . 5 . Optimization Algorithm The optimization objective for a given BEES location with m zones can be represented as : J = min Θ m (cid:88) j = 1 (cid:88) i ∈ S j D i ( y j ) + η | Θ − T ∞ | 2 , ( 4 ) where D i ( y j ) represents the discomfort function of occu - pant i in zone j given by ( 1 ) , and S j denotes the set of occupants in zone j . Note , that the value of η depends upon the choice of Comfort Mode ( η = 0 ) v / s Energy Mode ( η > 0 ) made by the location administrator occu - pant . In case of energy mode selection the user would be further asked to enter a positive value of eta . For the purpose of this study we implemented a default value of η = 1 for energy mode , but in the future version of the application the user would be asked to enter a value in an intuitive and user friendly manner . Using 3 , the objective can be further written as : J = min Θ m (cid:88) j = 1 (cid:88) i ∈ S j D i ( α j Θ + β j T ∞ + γ j ) + η | Θ − T ∞ | 2 , ( 5 ) where the coeﬃcients α j , β j , γ j are estimated in real - time using the learning algorithm . Given that the occupant discomfort functions are non - smooth and optimizing ( 5 ) through the use of standard convex optimization solvers can be ineﬃcient , we provide an eﬃcient algorithm to ﬁnd the optimal . Deﬁne ∆ Lij as : y Li = α j ∆ Lij + β j T ∞ + γ j , ( 6 ) using y j = y Li and Θ = ∆ Lij in ( 3 ) . Similarly deﬁne ∆ Uij as : , y U i = α j ∆ U ij + β j T ∞ + γ j . ( 7 ) Hence , we obtain : ∆ Lij = y Li − β j T ∞ − γ j α j , ( 8 ) and ∆ Uij = y Ui − β j T ∞ − γ j α j . ( 9 ) For a location with m zones and n occupants in each zone , we obtain a total of 2 mn values of ∆ L ij , and ∆ U ij . Note that ∆ Lij ≤ ∆ Uij , given y Li ≤ y Ui . Next , we sort the list of 2 mn values and let the sorted values be denoted as δ 1 , δ 2 , . . . , δ k , . . . , δ 2 mn . Using Θ L = δ 0 and Θ U = δ 2 mn + 1 values as the location thermostat limit values we obtain 2 mn + 1 intervals I 1 , I 2 , . . . , I k , . . . , I 2 mn + 1 , where I k is the interval between values δ k − 1 and δ k . Now , in each interval I the derivative of objective function J from ( 5 ) is of the same form , but the values diﬀer across diﬀerent intervals . Let’s compute the derivative of J over an arbitrary interval I k = [ δ k − 1 , δ k ] . Let d ij ( Θ ) = D i ( α j Θ + β j T ∞ + γ j ) , ( 10 ) then the objective in interval k can be re - written as : J k = (cid:88) i (cid:88) j d ij ( Θ ) + η | Θ − T ∞ | 2 . ( 11 ) Derivative of d ij ( Θ ) over interval I k : d (cid:48) ij ( Θ ) =   2 α j ( y j − y Ui ) if δ k − 1 ≥ y Ui , 2 α j ( y j − y Li ) if δ k ≤ y Li , 0 otherwise . ( 12 ) Or using indicator function , d (cid:48) ij ( Θ ) 2 α j = 1 ( δ k − 1 ≥ y Ui ) ( y j − y Ui ) + 1 ( δ k ≤ y Li ) ( y j − y Li ) . ( 13 ) Hence , derivative of J k in interval I k : (cid:88) i (cid:88) j 2 α j [ 1 ( δ k − 1 ≥ y Ui ) ( y j − y Ui ) + 1 ( δ k ≤ y Li ) ( y j − y Li ) ] + 2 η ( Θ − T ∞ ) . ( 14 ) For optimum Θ , this derivative in the interval I k should be zero . Let this optimum if one exists be denoted by Θ ∗ . Then , Θ ∗ k = A + B + 2 ηT ∞ C + 2 η , where A = (cid:88) i (cid:88) j 1 ( δ k − 1 ≥ y Ui ) 2 α j ( y Ui − γ j − β j T ∞ ) B = (cid:88) i (cid:88) j 1 ( δ k ≤ y Li ) 2 α j ( y Li − γ j − β j T ∞ ) C = (cid:88) i (cid:88) j 1 ( δ k − 1 ≥ y Ui ) ( 2 α 2 j ) + 1 ( δ k ≤ y Li ) ( 2 α 2 j ) . ( 15 ) If this Θ ∗ k ∈ I k = [ δ k − 1 , δ k ] , then it is a true optimum . We need to calculate the optimal value in ( 15 ) over all the intervals I k to ﬁnd the global optimum value . Since there are 2 mn + 1 such intervals , the optimum calculation requires up to 2 mn + 1 evaluations of ( 15 ) . Then based on the administrator occupant preference of energy opti - mization or comfort optimization the algorithm can make a pick of the corresponding interval for the location . Note that this optimization algorithm is triggered by the BEES framework every 10 minutes after the model is learned . Any occupant movement ( change of zone or location ) or change of occupant preference further triggers the opti - mization algorithm instantly . 7 Figure 12 : Private residence ( ﬁrst ﬂoor ) lay - out ( Waterford , NY ) with sensors and ther - mostat location . Figure 13 : Private residence ( second ﬂoor ) layout ( Waterford , NY ) . Figure 14 : Laboratory space layout ( 6 th ﬂoor - RPI JEC building ) with sensors and ther - mostat location . 4 . Experimental Study In this section we present results pertaining to experi - mental study carried out in two diﬀerent settings : Residen - tial setting and Laboratory setting . These represent two independent locations as per BEES architecture in Figure 8 . We also present some statistical analysis of the overall experimental data from occupant perspective . 4 . 1 . Residential Setting Experimental study in residential setting was conducted by installing the BEES system in one of the faculty mem - ber’s home located in the city of Waterford , NY . There is a single thermostat that controls central air based HVAC system for the entire residence . Figures 12 and 13 repre - sent the ﬁrst and second ﬂoor layout of the home with the corresponding soft zones . The experimental results are shown in Figures 15 and 16 corresponding to a 24 hour period from 11 - 22 - 2015 11am to 11 - 23 - 2015 11am . Figure 15 shows the tempera - ture variation of the four zones , along with the occupancy pattern of the occupant on the right y - axis . The occu - pancy zone of - 1 indicates the absence of the occupant from the residence . The occupant had his preference lim - its set at y L = 68 ◦ F and y U = 80 ◦ F . Figure 16 shows the corresponding thermostat set points as calculated by the BEES algorithm . The HVAC state shown in the right y - axis corresponds to the heating ( 1 ) versus idle ( 0 ) state of the HVAC system . Note how the thermostat set points fol - low the movement of the occupant and attempts to main - tain the thermal condition of the currently occupied zone within the occupant’s preference limits . Initially the occu - pant’s zone ( zone 4 ) is within the preference limits . Shortly after , when the optimization algorithm is triggered ( every 10 minutes ) , the set points change towards being energy optimal . Later when the occupant moves to zone 2 the set points are changed to ensure occupant comfort . During absence of occupant from the residence ( between 2pm to 4 : 25pm ) the set point moves to the default values of 60 ◦ F and 80 ◦ F representing energy conservation state . On re - turn of occupant the set points change and also heating is engaged to achieve occupant comfort . During the night time the occupancy is pretty unchanged ( zone 4 ) , and the thermostat set points adapt to the falling ambient tem - perature to maintain occupant comfort and save energy . Around 7am when the occupancy zone changes the set points once again change and heating is engaged to main - tain the currently occupied zone ( zone 1 and later zone2 ) at the occupant speciﬁed temperature . For comparison purpose we also present the temper - ature dynamics of the residential space for another 24 hours period ( 11 - 21 - 2015 11am to 11 - 22 - 2015 11am ) us - ing a static set point method . The thermostat set points remain ﬁxed at the lower and upper limits of 68 ◦ F and 80 ◦ F respectively , irrespective of the occupant’s current zone and even presence or absence of the occupant within the residence . Note that the two days being consecutive the ambient conditions are fairly similar , and the zone oc - cupancy pattern is also comparable . The HVAC system engagement for heating is at 14 . 1 % when BEES system is employed versus 18 . 47 % when the residence was set at static set points . This represents a relative energy saving of 23 . 6 % with the BEES system . Moreover , with multiple residents the system can be used to actively track zone occupancy and cater to that particular zone . Overall , this 24 hour period experimental data suggests that the BEES system can achieve both energy conservation and increased occupancy comfort using active indoor localization . 4 . 2 . Laboratory Setting For the purpose of experimental study in a laboratory setting , we installed the BEES system in the Networking Lab space located in the 6 th ﬂoor of JEC building in RPI campus . The layout of the lab space with the soft zones are as shown in Figure 14 . The lab space is a typical representation of cubicle farm structure in large corporate buildings . There is a central thermostat that controls an independent VAV system dedicated for this space . A total of nine research associates occupying the lab space where registered in the BEES system and authorized for the lo - cation . Figure 18 represents the results for a 12 hour experi - mental run in the laboratory setting on 11 - 19 - 2015 from 8 Figure 15 : Zonal temperature dynamics for the 24 hour experimental study in residential setting . Change of occupancy zone is indicated by dotted vertical lines and the occupied zone is indicated within each block . 9am to 9pm . Each of the subplots in the ﬁgure shows the temperature dynamics for the zones with the corre - sponding occupant’s upper and lower temperature pref - erence with the markers . The location of the markers also indicate the initial arrival and ﬁnal departure time of each occupant into their zone of primary occupancy . The ﬁfth subplot shows the upper and lower set point tempera - ture for the thermostat as calculated by the BEES system . Somewhere around 12 . 30 pm for few minutes all the occu - pants are out of the laboratory , which makes the system go to the default ( energy saving ) set point of 60 ◦ F and 80 ◦ F . By 4 . 30 pm all the occupants have left the laboratory space and the system once again goes to the energy saving de - fault set points . Throughout the duration of occupancy the system tries to adjust the set points to minimize dis - comfort of the occupants based on the thermal dynamics of the zone occupied . The summary of the experimental data is captured in Table 1 . Occupant 6 lower limit and occupant 4 upper limit ends up serving as limits for the system . They face few minutes of discomfort ( although not extreme variation from their preference ) , mainly due to set point adjustments and momentary overshoots . Note that the location of the laboratory is such that it has mini - mal ambient eﬀect ( thick walls with no windows ) . Further due to machining laboratory on the upper ﬂoor it gets a lot of external heat input . Owing to this even during winter months the temperature of the laboratory space remains pretty high with no HVAC heating input of its own . That explains the steady rise in zonal temperatures once the occupants have left the space . 4 . 3 . Occupant Data Analytics In this section we present some statistical analysis of the experimental data obtained so far . A total of 3612 occupant preference data points has been collected so far , with 3281 preference input obtained in laboratory setting and the rest 331 in residential setting . Figure 19 represents the box plot for all 3612 data points for all the ten users registered . The occupant ID 55 corresponds to the input in the residential setting . Although we don’t have a large data set yet , but it demonstrates that the occupant pref - erences do vary even under similar occupancy setting , and can further vary over time for the same user . This varia - tion in thermal preferences among occupants and even for the same occupant over time emphasizes the usefulness of a thermal comfort system based on occupants behavior , such as the proposed BEES framework . We also calculated the median of all occupant preference data , giving us values of 66 ◦ F and 74 ◦ F for the lower and upper limit respec - tively . These values can be used as default values when the system is ﬁrst launched , or as the default settings for the zones on behalf of administrator ( the administrator can later modify them as desired ) . 5 . Concluding Remarks In this work we have presented the design and archi - tecture of an end - to - end framework for enabling occupant feedback collection and incorporating the data towards en - ergy eﬃcient operation of a multi - zone , multi - occupant 9 Figure 16 : Thermostat set points as calculated by the BEES algorithm for the residential experimental study , along with the ambient variation , occupancy zone and HVAC state . HVAC state on right y - axis represents heating ( 1 ) v / s idle ( 0 ) mode . The set points adapt to occupant movement and ambient conditions , saving energy during non - occupancy . Table 1 : Occupant comfort metrics in the laboratory space over the 12 hour experimental period , along with occupancy pattern . We just present the initial arrival and ﬁnal departure time with the zone of primary occupancy . Note that the system however captures every movement of the occupants and adjusts accordingly . Occupant Preference Final Time Primary Zone Total Discomfort Caused y Li y Ui Arrival Departure % Time Max Deviation ( ◦ F ) 1 65 76 9am 4 : 10pm Zone 1 0 0 2 66 74 10 : 19am 4 : 35pm Zone 1 0 0 3 67 74 9 : 54am 3 : 30pm Zone 2 4 . 5 0 . 78 4 65 71 9 : 10am 1 : 57pm Zone 2 17 . 2 0 . 98 5 66 75 9 : 51am 3 : 56pm Zone 2 0 0 6 70 76 10 : 20am 3 : 01pm Zone 2 19 . 1 1 . 17 7 65 77 9 : 45am 4 : 10pm Zone 3 0 0 8 65 74 9 : 37am 4 : 35pm Zone 4 0 0 9 67 73 9 : 42am 2 : 40pm Zone 4 0 . 6 0 . 11 space based on indoor localization and real - time occu - pancy . First prototype of the system has been imple - mented using a combination of oﬀ - the - shelf sensors and wireless capable thermostat . Using this prototype we con - ducted experimental study in residential and laboratory space setting to establish eﬀectiveness of the proposed framework . This study - and our approach in general - suﬀers from a few limitations that will be addressed in future work . Firstly , note that our experiments have been conducted in a central air based HVAC system setting . Our overall framework however does not make this assumption , and can also be extended to a scenario where continuous con - trol of the airﬂow ( not just the thermostat temperature ) is available . Eﬃcacy of our solution in a water / steam based HVAC or electric heating systems need to be evaluated through further investigation . Moreover , for homes that are equipped with multiple AC units ( possibly one per room ) , the AC units must be operated in a coordinated manner for maximum comfort and energy eﬃciency . The 10 Figure 17 : Zonal temperature variation for the residential space with ﬁxed thermal set points at 68 ◦ F and 80 ◦ F . Compared to the BEES system it engages HVAC heating more ( BEES system has relative energy saving of 23 . 6 % ) , and the occupant comfort doesn’t necessarily adjust as per the zone occupancy . The HVAC engagement is independent of the zone occupancy and the presence of occupant in the residence . BEES framework remains to be extended and evaluated for this scenario . Secondly , while our steady - state based linear learning model works well in the experiments conducted so far , it is possible that a more complex non - linear learning model ( that takes into account transient eﬀects in the ther - mal model ) may perform better . Further , although our dynamically learned model parameters can adaptively cap - ture environmental changes , the robustness of the solution to major changes in the zonal thermal environment ( such as opening / closing of windows , turning on / oﬀ fans or per - sonal heaters ) needs to be evaluated further . In particular , future investigation is needed to understand how quickly our solution can adapt to such environmental changes . Thirdly , in this study we have considered one tempera - ture sensor per zone , and each occupant is localized to only one sensor . In smart buildings of the future , one can imagine a denser deployment of sensors where an occupant can be surrounded with many such sensors , which may al - low tracking of the thermal diﬀerences within the same zone . The question of how this multiplicity of thermal data can be eﬀectively processed ( through scalable data analytic techniques ) and utilized towards providing better comfort to the occupants , remains open for future investi - gation . Finally , on the practical side , we plan to expand the system to cover smart wearables so that we can track and localize occupants moving around without their smart phones at all times . Further note that as we run more ex - periments and collect substantial occupant data , analytics would be used to understand potential sources for diﬀer - ences in thermal comfort choices made by the occupants . References [ 1 ] L . Lombard , J . Ortiz , C . Pout , “A review on buildings energy consumption information , ” Energy and Buildings , vol . 40 , pp . 394 - 398 , 2008 . [ 2 ] W . Guo , M . Zhou , Technologies toward thermal comfort - based and energy - eﬃcient HVAC systems : a review , in : Proceedings of the IEEE International Conference on Systems , Man and Cybernetics , pp . 3883 - 3888 , San Antonio , TX , USA , Oct . 11 - 14 , 2009 . [ 3 ] S . Karjalainen , O . Koistinen , User problems with individual temperature control in oﬃces , Building and Environment , Vol . 42 , pp . 2880 - 2887 , 2007 . [ 4 ] J . V . Hoof , Forty years of Fanger’s model of thermal comfort : comfort for all ? , Indoor Air , Vol . 18 , Issue 3 , pp . 182 - 201 , 2008 . [ 5 ] M . A . Humphreys , M . Hancock , Do people like to feel neutral ? : exploring the variation of the desired thermal sensation on the ASHRAE scale , Energy and Buildings , Vol . 39 , pp . 867 - 874 , 2007 . [ 6 ] D . A . McIntyre , Chamber studies Reductio ad absurdum ? En - ergy and Buildings , Vol . 5 , pp . 89 - 96 , 1981 . [ 7 ] ASHRAE , Thermal Environmental Conditions for Human Oc - cupancy , ASHRAE Standard 55 - 2004 , ASHRAE , 2004 . [ 8 ] P . O . Fanger , Thermal comfort : Analysis and applications in environmental engineering , Danish Technical Press , 1970 . [ 9 ] V . L . Erickson , A . E . Cerpa , Thermovote : participatory sensing for eﬃcient building hvac conditioning , BuildSys ’12 Proceed - ings of the Fourth ACM Workshop on Embedded Sensing Sys - tems for Energy - Eﬃciency in Buildings Toronto , ON , Canada , 2012 . [ 10 ] D . Kolokotsa , K . Niachou , V . Geros , K . Kalaitzakis , G . S . Stavrakakis , M . Santamouris , Implementation of an integrated 11 60 80 Zone 1 ( ◦ F ) Upper Preference Lower Preference 60 70 80 Zone 2 ( ◦ F ) Upper Preference Lower Preference 60 80 Zone 3 ( ◦ F ) Upper Preference Lower Preference 60 80 Zone 4 ( ◦ F ) Upper Preference Lower Preference 9am 11am 1pm 3pm 5pm 7pm 9pm 60 80 Upper Setpoint ( ◦ F ) Lower Setpoint ( ◦ F ) Figure 18 : First four subplots represent the temperature dynamics with occupant thermal preference for each zone corresponding to 12 hour experimental study in the laboratory space within RPI building . The markers in each subplot represent the occupant preference limits along with their initial arrival and ﬁnal departure times . The last subplot shows the thermal set points adjusting as per occupancy , and default energy saving values in absence of any occupants . Unique Occupant IDs 11 18 44 45 49 52 54 55 56 58 O cc up a n t T h e r m a l P r e f e r e n ce s ( ◦ F ) 60 62 64 66 68 70 72 74 76 78 80 Figure 19 : Statistical box plot representation of the occupant ther - mal preference data from experimental study ( blue represents the lower preference ( y Li ) and red the upper preference ( y Ui ) . indoor environment and energy management system , Energy and Buildings , Vol . 37 , pp . 93 - 99 , 2005 . [ 11 ] K . Dalamagkidis , D . Kolokotsa , K . Kalaitzakis , G . S . Stavrakakis , Reinforcement learning for energy conservation and comfort in buildings , Building and Environment , Vol . 42 , pp . 2686 - 2698 , 2007 . [ 12 ] P . Bermejo , L . Redondo , D . L . Ossa , D . Rodriguez , J . Flores , C . Urea , J . A . Gamez , J . M . Puerta , Design and simulation of a thermal comfort adaptive system based on fuzzy logic and online learning , Energy and Buildings , Vol . 49 , pp . 367 - 379 , 2012 . [ 13 ] W . L . Tse , W . L . Chan , A distributed sensor network for mea - surement of human thermal comfort feelings , Sensors and Ac - tuators A : Physical , Vol . 144 , pp . 394 - 402 , 2008 . [ 14 ] J . Kang , Y . Kim , H . Kim , J . Jeong , S . Park , Comfort sens - ing system for indoor environment , International Conference on Solid State Sensors and Actuators , pp . 311 - 314 , Chicago , IL , Jun 16 - 19 , 1997 . [ 15 ] A . Guillemin , N . Morel , Experimental results of a self - adaptive integrated control system in buildings : a pilot study , Solar En - ergy , Vol . 72 , Issue 5 , pp . 397 - 403 , 2002 . [ 16 ] Y . Murakamia , M . Teranoa , K . Mizutanib , M . Haradab , S . Kunob , Field experiments on energy consumption and thermal comfort in the oﬃce environment controlled by occupants’ re - quirements from PC terminal , Building and Environment , Vol . 42 , Issue 12 , pp . 4022 - 4027 , 2007 . [ 17 ] D . Daum , F . Haldi , N . Morel , A personalized measure of ther - mal comfort for building controls , Building and Environment , Vol . 46 , pp . 3 - 11 , 2011 . [ 18 ] J . Zhao , et al . , Occupant - oriented mixed - mode Energy - Plus predictive control simulation , Energy Buildings ( 2015 ) , http : / / dx . doi . org / 10 . 1016 / j . enbuild . 2015 . 09 . 027 . [ 19 ] F . Jazizadeh , et al . , User - led decentralized thermal comfort driven HVAC operations for improved eﬃciency in oﬃce build - ings , Energy Buildings , Vol . 70 , pp . 398 - 410 , 2014 . [ 20 ] www . nest . com [ 21 ] http : / / lyric . honeywell . com [ 22 ] www . gocomfy . com [ 23 ] https : / / nest . com / blog / 2014 / 03 / 31 / climate - control - at - 35 - 000 - feet / [ 24 ] A . P . Gagge , Y . Nishi , An eﬀective temperature scale based on a simple model of human physiological regulatory response , ASHRAE Transactions , Vol . 77 , pp . 247 - 263 , 1971 . [ 25 ] J . A . J . Stolwijk , Mathematical model of thermo regulation , Annals of The New York Academy of Sciences , Vol . 355 , pp . 98 - 106 , 1980 . [ 26 ] H . Zhang , E . Arensa , C . Huizengaa , T . Hanb , Thermal sen - sation and comfort models for non - uniform and transient envi - ronments , part III : Whole body sensation and comfort , Building and Environment , Vol . 45 , Issue 2 , pp . 399 - 410 , 2010 . [ 27 ] M . A . Humphreys , J . F . Nicol , I . A . Raja , Field studies of ther - mal comfort and the progress of the adaptive model , Advances in Building Energy Research , Vol . 1 , pp . 55 - 88 , 2007 . 12 [ 28 ] R . J . Dear de , G . S . Brager , Towards an Adaptive Model of Thermal Comfort and Preference , ASHRAE Transactions , Vol . 104 , Issue 1 , pp . 145 - 167 , 1998 . [ 29 ] Q . C . Zhao , Z . J . Cheng , F . L . Wang , Y . Jiang , J . L . Ding , Experimental study of group thermal comfort model , IEEE In - ternational Conference on Automation Science and Engineering , pp . 1075 - 1078 , Taipei , Taiwan , Aug . 18 - 22 , 2014 . [ 30 ] Q . C . Zhao , Y . Zhao , F . L . Wang , Y . Jiang , F . Zhang , Prelim - inary study of learning individual thermal complaint behavior using one - class classiﬁer for indoor environment control , Build - ing and Environment , Vol . 72 , pp . 201 - 211 , Feb . 2014 . [ 31 ] H . Sane , C . Haugstetter , S . Bortoﬀ , Building hvac control sys - tems - role of controls and optimization , In Proc . of ACC , 2006 . [ 32 ] J . Braun , Reducing energy costs and peak electrical demand through optimal control of building thermal storage , ASHRAE transactions , 1990 . [ 33 ] G . Henze , Energy and cost minimal control of active and pas - sive building thermal storage inventory , Journal of Solar Energy Engineering , vol . 127 , 2005 . [ 34 ] G . Henze , C . Felsmann , G . Knabe , Evaluation of optimal con - trol for active and passive building thermal storage , Interna - tional Journal of Thermal Sciences , vol . 40 , 2004 . [ 35 ] Y . Ma , G . Anderson , F . Borrelli , A distributed predictive con - trol approach to building temperature regulation , In Proc . of ACC , 2011 . [ 36 ] A . Kelman , Y . Ma , F . Borrelli , Analysis of local optima in pre - dictive control for energy eﬃcient buildings , In Proc . of 50th IEEE CDC - ECC , 2011 . [ 37 ] Y . Ma , F . Borrelli , Fast stochastic predictive control for building temperature regulation , In Proc . of ACC Montreal , Canada , 2012 . [ 38 ] N . Gatsis , G . Giannakis , Residential demand response with in - terruptible tasks : Duality and algorithms , In Proc . of 50th IEEE CDC - ECC , 2011 . [ 39 ] S . Prvaraa , J . Sirokyb , L . Ferkla , J . Ciglera , Model predictive control of a building heating system : The ﬁrst experience , En - ergy and Buildings , vol . 43 , pp . 564 - 572 , 2011 . [ 40 ] I . Hazyuka , C . Ghiausa , D . Penhouetc , Optimal temperature control of intermittently heated buildings using Model Predic - tive Control : Part I Building modeling , Building and Environ - ment , vol . 51 , pp . 379 - 387 , 2012 . [ 41 ] S . Purdon , B . Kusy , R . Jurdak , G . Challen , Model - free hvac control using occupant feedback , IEEE 38th Conf . on LCN Workshops ) Sydney , NSW , 2013 . [ 42 ] O . Seppanen , W . J . Fisk , A Model to Estimate the Cost - Eﬀectiveness of Improving Oﬃce Work through Indoor Envi - ronmental Control , ASHRAE Transactions , vol . 111 , 2005 . [ 43 ] S . K . Gupta , K . Kar , S . Mishra , J . T . Wen , Collaborative En - ergy and Thermal Comfort Management Through Distributed Consensus Algorithms , IEEE Transactions on Automation Sci - ence and Engineering , vol . 12 , pp . 1285 - 1296 , 2015 . [ 44 ] S . K . Gupta , K . Kar , S . Mishra and J . T . Wen , Distributed Consensus Algorithms for Collaborative Temperature Control in Smart Buildings , In Proc . of American Control Conference ( ACC ) , Chicago , July 1 - 3 , 2015 . [ 45 ] S . K . Gupta , K . Kar , S . Mishra , J . T . Wen , Building tem - perature control with active occupant feedback , 19th World Congress , The International Federation of Automatic Control , Cape Town , South Africa , Aug 24 - 29 , 2014 . [ 46 ] G . Fraisse , C . Viardot , O . Lafabrie , and G . Achard . Develop - ment of simpliﬁed and accurate building model based on elec - trical analogy , Energy and Buildings , Vol . 34 , pp . 1017 - 1031 , 2002 . [ 47 ] http : / / www . ti . com / tool / cc2650stk [ 48 ] https : / / store . gimbal . com / collections / beacons / products / s10 [ 49 ] https : / / developer . apple . com / ibeacon / [ 50 ] https : / / www . raspberrypi . org / products / raspberry - pi - 2 - model - b / [ 51 ] https : / / kinivo . com / product / btd - 400 - bluetooth - 4 - 0 - usb - adapter / [ 52 ] https : / / developer . nest . com / documentation / api - reference 13