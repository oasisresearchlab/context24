a r X i v : 2006 . 02854v15 [ c s . L O ] 29 D ec 2023 ANALOGICAL PROPORTIONS CHRISTIAN ANTI ´C christian . antic @ icloud . com Vienna , Austria A bstract . Analogy - making is at the core of human and artiﬁcial intelligence and creativity with ap - plications to such diverse tasks as proving mathematical theorems and building mathematical theories , common sense reasoning , learning , language acquisition , and story telling . This paper introduces from ﬁrst principles an abstract algebraic framework of analogical proportions of the form ‘ a is to b what c is to d ’ in the general setting of universal algebra . This enables us to compare mathematical objects possibly across di ﬀ erent domains in a uniform way which is crucial for AI - systems . It turns out that our notion of analogical proportions has appealing mathematical properties . As we construct our model from ﬁrst principles using only elementary concepts of universal algebra , and since our model questions some basic properties of analogical proportions presupposed in the literature , to convince the reader of the plausibility of our model we show that it can be naturally embedded into ﬁrst - order logic via model - theoretic types and prove from that perspective that analogical proportions are compatible with structure - preserving mappings . This provides conceptual evidence for its applicability . In a broader sense , this paper is a ﬁrst step towards a theory of analogical reasoning and learning systems with potential applications to fundamental AI - problems like common sense reasoning and computational learning and creativity . 1 . I ntroduction Analogy - making is at the core of human and artiﬁcial intelligence and creativity with applications to such diverse tasks as proving mathematical theorems and building mathematical theories , common sense reasoning , learning , language acquisition , and story telling ( e . g . Boden , 1998 ; Gust , Krumnack , K¨uhnberger , & Schwering , 2008 ; Hofstadter , 2001 ; Hofstadter & Sander , 2013 ; Krieger , 2003 ; P´olya , 1954 ; Sowa & Majumdar , 2003 ; Winston , 1980 ; Wos , 1993 ) . This paper introduces from ﬁrst prin - ciples an abstract algebraic framework of analogical proportions of the form ‘ a is to b what c is to d ’ in the general setting of universal algebra . This enables us to compare mathematical objects possibly across di ﬀ erent domains in a uniform way which is crucial for AI - systems . The main idea is simple and is illustrated in the following example . Example 1 . Imagine two domains , one consisting of positive integers 1 , 2 , . . . and the other made up of words ab , ba . . . et cetera . The analogical equation 2 : 4 : : ab : x ( 1 ) is asking for some word x ( here x is a variable ) which is to ab what 4 is to 2 . What can be said about the relationship between 2 and 4 ? One simple observation is that 4 is the square of 2 . Now , by analogy , what is the ‘square’ of ab ? If we interpret ‘multiplication’ of words as concatenation—a natural choice—then ( ab ) 2 is the word abab , which is a plausible solution to ( 1 ) . We can state this 1 2 ANALOGICAL PROPORTIONS more formally as follows . Let s ( z ) : = z and t ( z ) : = z 2 be two terms . We have 2 = s ( 2 ) , 4 = t ( 2 ) , and ab = s ( ab ) . ( 2 ) By continuing the pattern in ( 2 ) , what could x in ( 1 ) be equal to ? In ( 2 ) , we see that transforming 2 into 4 means transforming s ( 2 ) into t ( 2 ) . Now what does it mean to transform ab ‘in the same way’ or ‘analogously’ ? The obvious answer is to transform s ( ab ) into t ( ab ) = abab computed before . As simple as this line of reasoning may seem , it cannot be formalized by some current models of analogical proportions which restrict themselves to proportions between objects of a single domain ( cf . Stroppa & Yvon , 2006 ; Miclet , Bayoudh , & Delhay , 2008 ) and we will return to this speciﬁc analogical proportion in a more formal manner in 26 . It is important to emphasize that we do not want our model to capture only obvious analogical proportions as in the example above . To the contrary , in the more interesting and ‘creative’ cases , analogical proportions provide a tool for deriving unexpected and often hypothetical conclusions , which if necessary can afterwards be checked for plausibility in a speciﬁc context . This process is similar to non - monotonic reasoning , where this kind of ‘guess and check’ paradigm is common ( cf . Eiter , Ianni , & Krennwallner , 2009 ) . The next example illustrates the idea of formalizing aspects of creativity via unexpected analogical proportions . Example 2 . Consider the analogical equation over the integers given by 2 : 0 : : 3 : x . An intuitive solution is given , for example , by x = 1 justiﬁed via 0 = 2 − 2 and 1 = 3 − 2 . However , there is a less obvious but still reasonably justiﬁable solution to the above equation : x = 1000 ! To see why , take a look at the following analogical proportion : [ − 3 + 5 ] : [ 1000 · ( − 3 ) + 3000 ] : : [ − 2 + 5 ] : [ 1000 · ( − 2 ) + 3000 ] . Observe that we transform − 3 + 5 = 2 into − 2 + 5 = 3 by replacing − 3 with − 2 , and analogously we transform 1000 · ( − 3 ) + 3000 = 0 into 1000 · ( − 2 ) + 3000 = 1000 again by replacing − 3 with − 2 . This ( together with some technical argument ; see 55 ) justiﬁes the proportion 2 : 0 : : 3 : 1000 . We believe that ﬁnding such hidden transformations between seemingly unrelated objects is crucial for formalizing creativity ( cf . Boden , 1998 ) . We will come back to this proportion in 55 . The rest of the paper is devoted to formalizing and studying reasoning patterns as in the examples above within the abstract algebraic setting of universal algebra . The aim of this paper is to introduce our model of analogical proportions—which to the best of our knowledge is novel—in its full gener - ality . The core idea is formulated in 8 and despite its conceptual simplicity ( it consists of three parts , where the second and third parts are symmetrical variants of the ﬁrst ) it has interesting consequences with mathematically appealing proofs , which we plan to explore further in the future . Since ‘plau - sible analogical proportion’ is an informal concept , we cannot hope to formally prove the soundness and completeness of our framework—the best we can do is to prove that some desirable propor - tions are derivable within our framework ( e . g . Theorems 24 , 28 , 37 , 40 ) and that some implausible proportions cannot be derived ( e . g . Theorem 28 and Examples 39 and 45 ) . We compare our frame - work with two recently introduced frameworks of analogical proportions from the literature ( Miclet et al . , 2008 ; Stroppa & Yvon , 2006 ) —introduced for applications to artiﬁcial intelligence and machine learning , speciﬁcally for natural language processing and handwritten character recognition—within the concrete domains of sets and numbers , and in each case we either disagree with the notion from ANALOGICAL PROPORTIONS 3 the literature justiﬁed by some counter - example ( 45 ) or we can show that our model yields strictly more justiﬁable solutions ( 49 ) , which provides evidence for its applicability . Finally , in the 2 - element boolean setting , we argue in Section 7 that our model coincides with Klein’s ( Klein , 1982 ) model and that it reasonably disagrees with Miclet and Prade’s ( Miclet & Prade , 2009 ) framework , which is remarkable as our framework is not geared towards the boolean domain . Lepage ( 2003 ) proposes four axioms—namely symmetry a : b : : c : d ⇔ c : d : : a : b , central permutation a : b : : c : d ⇔ a : c : : b : d , strong inner reﬂexivity a : a : : c : d ⇒ d = c , and strong reﬂexivity a : b : : a : d ⇒ d = b —as a guideline for formal models of analogical proportions . To be more precise , Lepage ( 2003 ) introduces his axioms in the linguistic setting of words and although his axioms appear reasonable in the word domain ( but see Problem 30 ) , the following counter - examples show that they cannot be straightforwardly applied to the general case . Strong reﬂexivity fails , for instance , in cases where the relation of a to b and to d is identical , for some distinct elements b and d . Strong inner reﬂexivity fails , for instance , if the relation of a to itself is similar to the relation of c to d . In our framework , by making the underlying structures of an analogical proportion explicit , it turns out that except for symmetry none of Lepage’s axioms holds in the general case , justiﬁed by counter - examples ( Theorem 28 ) . This has critical consequences as his axioms are assumed by many authors ( e . g . Barbot , Miclet , & Prade , 2019 ; Miclet et al . , 2008 ) to hold beyond the word domain . We adapt Lepage’s list of axioms by including symmetry , and by adding inner symmetry a : b : : c : d ⇔ b : a : : d : c , inner reﬂexivity a : a : : c : c , and reﬂexivity a : b : : a : b , and determinism a : a : : a : d ⇔ a = d to the list . Notice that inner reﬂexivity and reﬂexivity are weak forms of Lepage’s strong inner reﬂexivity and strong reﬂexivity axioms , respectively , whereas inner symmetry is a variant of Lepage’s symmetry axiom which requires symmetry to hold within the respective structures . Moreover , we consider the properties of commutativity a : b : : b : a , transitivity a : b : : c : d & c : d : : e : f ⇒ a : b : : e : f , inner transitivity a : b : : c : d & b : e : : d : f ⇒ a : e : : c : f , and central transitivity a : b : : b : c & b : c : : c : d ⇒ a : b : : c : d . We prove that the inner symmetry , inner reﬂexivity , reﬂexivity , and determinism axioms are satisﬁed within our framework , whereas commutativity , transitivity , inner transitivity , and central transitivity fail in general ( Theorem 28 ) . This shows that the property of being in analogical proportion is a local property ( 31 ) . This is in contrast to category theory ( cf . Awodey , 2010 ) —the algebraic ﬁeld for formalizing mathematical analogies—where the transitivity of arrows leads to a form of ‘connectedness’ which in general is not present in analogical proportions ( see the discussion in Section 7 . 3 ) . Interestingly , analogical proportions turn out to be non - monotonic in the sense that expanding the underlying structure of an analogical proportion may prevent its derivation ( Theorem 28 ) . This may have interesting connections to non - monotonic reasoning , which itself is crucial for common sense reasoning and which has been prominently formalized within the ﬁeld of answer set programming ( Gelfond & Lifschitz , 1991 ) ( cf . Brewka , Eiter , & Truszczynski , 2011 ) ) . The functional - based view in ( Barbot et al . , 2019 ) is related to our Functional Proportion Theorem 24 on functional solutions and the preservation of functional dependencies across di ﬀ erent domains , which means that in case t ( z ) is a transformation , satisfying a mild injectivity condition and applicable in the source and target domains , we have a : t ( a ) : : c : t ( c ) . The critical di ﬀ erence is that the authors of ( Barbot et al . , 2019 ) assume Lepage’s central permutation axiom , which implies in their framework that the functional transformation t need to be bijective . Analogical proportions turn out to be compatible with structure - preserving mappings as shown in our First and Second Isomorphism Theorems 37 and 40 , respectively—a result which is in the vein of Gentner’s ( Gentner , 1983 ) Structure - Mapping Theory ( SMT ) of analogy - making ( see the brief discussion in Section 7 ) . 4 ANALOGICAL PROPORTIONS As we construct our model from ﬁrst principles using only elementary concepts of universal al - gebra , and since our model questions some fundamental properties of analogical proportions presup - posed in the literature , to convince the reader of the plausibility of our model we need to validate it either empirically or—what we prefer here—theoretically by showing that it ﬁts naturally into the overall mathematical landscape . For this , we will show in Section 6 that our purely algebraic model can be naturally embedded into ﬁrst - order logic via model - theoretic types ( cf . Hinman , 2005 , § 7 . 1 ) . More precisely , we show that sets of algebraic justiﬁcations of analogical proportions are in one - to - one correspondence with so - called ‘rewrite formulas’ and ‘rewrite types’ , which is appealing as types play a fundamental role in model theory in general and showing that our model—which is primarily motivated by simple examples—has a natural logical interpretation , provides strong evidence for its applicability . In Section 6 . 2 , we then prove from this logical perspective that analogical proportions are compatible with isomorphisms , a further desired property . In a broader sense , this paper is a ﬁrst step towards a theory of analogical reasoning and learning systems with potential applications to fundamental AI - problems like common sense reasoning and computational learning and creativity . 2 . P reliminaries Given any sequence of objects o = o 1 . . . o n , n ≥ 0 , we denote the length n of o by | o | . We denote the power set of a set U by P ( U ) . The natural numbers are denoted by N : = { 0 , 1 , 2 , . . . } , and the natural numbers not containing 0 and 1 by N 2 : = { 2 , 3 , . . . } ; the integers are denoted by Z and the rational numbers are denoted by Q . Moreover , the booleans are denoted by BOOL : = { 0 , 1 } , with conjunction 0 ∧ 0 : = 1 ∧ 0 : = 0 ∧ 1 : = 0 and 1 ∧ 1 : = 1 , and disjunction 0 ∨ 0 : = 0 and 1 ∨ 0 : = 0 ∨ 1 : = 1 ∨ 1 : = 1 . Given a ﬁnite alphabet Σ , we denote the set of all ﬁnite words over Σ containing the empty word ε by Σ ∗ and we deﬁne Σ + : = Σ ∗ − { ε } . 2 . 1 . Universal Algebra . We recall some basic notions and notations of universal algebra ( e . g . Burris & Sankappanavar , 2000 ) . 2 . 1 . 1 . Syntax . A language L of algebras consists of a set Fs L of function symbols , a set Cs L of constant symbols , a rank function rk L : Fs L → N − { 0 } , and a denumerable set V = { x , z 1 , z 2 , . . . } of variables . The sets Fs L , Cs L , and V are pairwise disjoint . Moreover , we always assume that L contains the equality relation symbol = interpreted as the equality relation in every algebra . A language L is a sublanguage of a language L ′ —in symbols , L ⊆ L ′ —i ﬀ Fs L ⊆ Fs L ′ , Cs L ⊆ Cs L ′ , and rk L is the restriction of rk L ′ to the function symbols in L . In the special case that Fs L = Fs L ′ , we say that L ′ is an extension by constants . An L - expression is any ﬁnite string of symbols from L . An L - atomic term is either a variable or a constant symbol . The set T L ( V ) of L - terms is the smallest set of L - expressions such that ( i ) every L - atomic term is an L - term ; and ( ii ) for any L - function symbol f and any L - terms t 1 , . . . , t rk L ( f ) , f ( t 1 , . . . , t rk L ( f ) ) is an L - term . We denote the set of variables occurring in a term t by V ( t ) . We say that t has rank n if V ( t ) ⊆ { z 1 , . . . , z n } . A term is ground if it contains no variables . 2 . 1 . 2 . Semantics . An L - algebra A consists of ( i ) a non - empty set A , the universe of A ; ( ii ) for each f ∈ Fs L , a function f A : A rk L ( f ) → A , the functions of A ; and ( iii ) for each c ∈ Cs L , an element c A ∈ A , the distinguished elements of A . Notation 3 . With a slight abuse of notation , we will not distinguish between an L - algebra A and its universe A in case the operations are understood from the context . This means we will write a ∈ A ANALOGICAL PROPORTIONS 5 instead of a ∈ A et cetera . Moreover , given a subset A ′ of the universe of A , the language L ( A ′ ) is the language L augmented by a constant symbol a for each element a ∈ A ′ . Given an L - algebra A and an L ′ - algebra A ′ , for some languages L ⊆ L ′ , we say that A is an L - reduct of A ′ and A ′ is an L ′ - expansion of A —in symbols , A = A ′ ↾ L —i ﬀ A = A ′ , f A = f A ′ for all f ∈ Fs L , and c A = c A ′ for all c ∈ Cs L . For any L - algebra A , an A - assignment is a function ν : V → A . For any assignment ν , let ν z 7→ a denote the assignment ν ′ such that ν ′ ( z ) : = a , and for all other variables z ′ , ν ′ ( z ′ ) : = ν ( z ′ ) . We extend the domain of the A - assignment ν from variables in V to terms in T L ( V ) inductively as follows : ( i ) for every c ∈ Cs L , ν ( c ) : = c A ; ( ii ) for every f ∈ Fs L and t 1 , . . . , t rk L ( f ) ∈ T L ( V ) , ν ( f ( t 1 , . . . , t rk L ( f ) ) ) : = f A ( ν ( t 1 ) , . . . , ν ( t rk L ( f ) ) ) . Notice that every term t induces a function on A t A : A rk L ( t ) → A given by t A ( a 1 , . . . , a | V ( t ) | ) : = ν ( a 1 , . . . , a | V ( t ) | ) ( t ) , where ν ( a 1 , . . . , a | V ( t ) | ) ( z i ) : = a i , for all 1 ≤ i ≤ | V ( t ) | . We call a term t constant in A i ﬀ t A is a constant function , and we call t injective in A i ﬀ t A is an injective function . For instance , the term t ( z ) = 0 z is constant in ( N , · , 0 ) despite containing the variable z . Terms can be interpreted as ‘generalized elements’ containing variables as placeholders for concrete elements , and they will play a central role in our algebraic formulation of analogical proportions given below . A homomorphism from A to B is a mapping H : A → B such that for any function symbol f ∈ Fs L and any elements a 1 , . . . , a rk L ( f ) , H (cid:16) f A ( a 1 , . . . , a rk L ( f ) ) (cid:17) = f B (cid:16) H ( a 1 ) , . . . , H ( a rk L ( f ) ) (cid:17) . An isomorphism is a bijective homomorphism , and we call two algebras A and B isomorphic —in symbols , A ≃ B —i ﬀ there exists an isomorphism from A to B . 2 . 2 . First - Order Logic . We recall the syntax and semantics of ﬁrst - order logic , restricted to func - tional structures containing no relation symbols , by mainly following the lines of ( Hinman , 2005 ) . 2 . 2 . 1 . Syntax . A ﬁrst - order language L is a language of algebras extended by relation symbols , the connectives ¬ and ∨ , and the existential quantiﬁer ∃ . We call L a functional language if it contains no relation symbols other than equality . Notice that there is no real di ﬀ erence between a language of algebras and a functional ﬁrst - order language ; however , we make the formal distinction here to highlight the fact that full ﬁrst - order logic and model theory containing relation symbols is strictly more expressive than plain universal algebra , summed up by Chang and Keisler ( 1973 ) as universal algebra + logic = model theory . Notation 4 . In this paper , we always assume that L is functional . An L - atomic formula has the form s = t , where s and t are L - terms and we denote the set of all such formulas by aFm L . The set of L - formulas is the smallest set of L - expressions such that ( i ) every L - atomic formula is an L - formula ; ( ii ) if ϕ and ψ are L - formulas , then so are ¬ ϕ and ϕ ∨ ψ ; ( iii ) if ϕ is an L - formula and z ∈ V is a variable , then ∃ z ϕ is an L - formula . We introduce the following abbreviations : ϕ ∧ ψ : ≡ ¬ ( ¬ ϕ ∨ ¬ ψ ) and ∀ z ϕ : ≡ ¬∃ z ¬ ϕ . A 2 - formula is a formula containing exactly two free variables . 6 ANALOGICAL PROPORTIONS 2 . 2 . 2 . Semantics . An L - structure A is the same as an L - algebra in case L is functional . We deﬁne the logical entailment relation inductively as follows : for any functional L - structure A and any A - assignment ν , ( i ) for any L - terms s and t , A | = ( s = t ) [ ν ] i ﬀ ν ( s ) = ν ( t ) ; ( ii ) for any formula ϕ , A | = ¬ ϕ [ ν ] i ﬀ A 6 | = ϕ [ ν ] ; ( iii ) for any formulas ϕ and ψ , A | = ϕ ∨ ψ [ ν ] i ﬀ A | = ϕ [ ν ] or A | = ψ [ ν ] ; ( iv ) for any formula ϕ and variable z , A | = ∃ z ϕ [ ν ] i ﬀ A | = ϕ [ ν z 7→ a ] , for some a ∈ A . With the abbreviations introduced above , we further have , for any formulas ϕ and ψ , ( i ) A | = ϕ ∧ ψ [ ν ] i ﬀ A | = ϕ [ ν ] and A | = ψ [ ν ] ; and ( ii ) A | = ∀ z ϕ [ ν ] i ﬀ A | = ϕ [ ν z 7→ a ] , for all a ∈ A . For any function H : A → B and any A - assignment ν , we deﬁne the H - induced B - assignment by H ( ν ) ( z ) : = H ( ν ( z ) ) . We say that H respects ( i ) a term t i ﬀ for each A - assignment ν , H ( ν ( t ) ) = H ( ν ) ( t ) ; or , in other words , i ﬀ for each e ∈ A rk L ( t ) , H ( t A ( e ) ) = t B ( H ( e ) ) , where H ( e ) means component - wise application ; ( ii ) a formula ϕ i ﬀ for each A - assignment ν , A | = ϕ [ ν ] i ﬀ B | = ϕ [ H ( ν ) ] . The following result will be useful in Section 6 . 2 for reproving our First Isomorphism Theorem 37 in Section 4 . 4 ; its proof can be found in ( Hinman , 2005 , Lemma 2 . 3 . 6 ) . Lemma 5 . For any A and B and any H : A → B , H respects all L - terms and formulas . 3 . A nalogical P roportions In the rest of the paper , we may assume some ‘known’ source domain A and some ‘unknown’ target domain B , both L - algebras of same language L . We may think of the source domain A as our background knowledge—a repertoire of elements we are familiar with—whereas B stands for an unfamiliar domain which we want to explore via analogical transfer from A . For this we will ﬁrst consider arrow equations of the form ‘ a transforms into b as c transforms into x ’—in symbols , a → b : · c → x —where a and b are source elements of A , c is a target element of B , and x is a variable . Solutions to arrow equations will be elements of B which are obtained from c in B as b is obtained from a in A in a mathematically precise way ( 8 ) . Speciﬁcally , we want to functionally relate elements of an algebra via term rewrite rules as follows . Recall from 1 that transforming 2 into 4 in the algebra ( N , · ) means transforming s ( 2 ) into t ( 2 ) , 1 where s ( z ) : = z and t ( z ) : = z 2 are terms . We can state this transformation more pictorially as the term rewrite rule s → t or z → z 2 . Now transforming the word ab ‘in the same way’ means to transform s ( ab ) into t ( ab ) , which again is an instance of s → t . Let us make this notation o ﬃ cial . Notation 6 . We will always write s ( z ) → t ( z ) or s → t instead of ( s , t ) , for any pair of L - terms s and t containing variables among z such that every variable in t occurs in s . We call such expressions L - rewrite rules or L - justiﬁcations where we often omit the reference to L . We denote the set of all L - justiﬁcations with variables among z by J ( L , z ) . We make the convention that → binds weaker than every other algebraic operation . Deﬁnition 7 . Deﬁne the set of justiﬁcations of two elements a , b ∈ A in A by Jus A ( a , b ) : = n s → t ∈ J ( L , z ) (cid:12)(cid:12)(cid:12) a = s A ( e ) and b = t A ( e ) , for some e ∈ A | z | o . For instance , in the example above , Jus ( N , · ) ( 2 , 4 ) and Jus ( { a , b } ∗ , · ) ( ab , abab ) both contain the justiﬁ - cation z → z 2 , witnessed by e 1 = 2 ∈ N and e 2 = ab ∈ { a , b } ∗ . Once we have a deﬁnition of a → b : · c → d , we can deﬁne a : b : · c : d and , ﬁnally , a : b : : c : d via appropriate symmetries as follows . Deﬁnition 8 . We deﬁne the analogical proportion relation in three steps : 1 To be more precise , we transform s ( N , · ) ( 2 ) into t ( N , · ) ( 2 ) . ANALOGICAL PROPORTIONS 7 ( 1 ) An arrow equation in ( A , B ) is an expression of the form ‘ a transforms into b in A as c transforms into x in B ’—in symbols , a → b : · c → x , ( 3 ) where a and b are source elements from A , c is a target element from B , and x is a variable . Given a target element d ∈ B , deﬁne the set of justiﬁcations of an arrow proportion a → b : · c → d in ( A , B ) by Jus ( A , B ) ( a → b : · c → d ) : = Jus A ( a , b ) ∩ Jus B ( c , d ) . A justiﬁcation s → t is trivial in ( A , B ) i ﬀ it justiﬁes every arrow proportion in ( A , B ) , and we say that J is a trivial set of justiﬁcations in ( A , B ) i ﬀ every justiﬁcation in J is trivial . 2 Now we call d a solution to ( 3 ) in ( A , B ) i ﬀ either Jus A ( a , b ) ∪ Jus B ( c , d ) consists only of trivial justiﬁcations , in which case there is neither a non - trivial transformation of a into b in A nor of c into d in B ; or Jus ( A , B ) ( a → b : · c → d ) is maximal with respect to subset inclusion among the sets Jus ( A , B ) ( a → b : · c → d ′ ) , d ′ ∈ B , containing at least one non - trivial justiﬁcation , that is , for any element d ′ ∈ B , ∅ ( Jus ( A , B ) ( a → b : · c → d ) ⊆ Jus ( A , B ) ( a → b : · c → d ′ ) implies ∅ ( Jus ( A , B ) ( a → b : · c → d ′ ) ⊆ Jus ( A , B ) ( a → b : · c → d ) . In this case , we say that a , b , c , d are in arrow proportion in ( A , B ) written ( A , B ) | = a → b : · c → d . We denote the set of all solutions to ( 3 ) in ( A , B ) by S ol ( A , B ) ( a → b : · c → x ) . We say that a → b : · c → d is a trivial arrow proportion in ( A , B ) i ﬀ ( A , B ) | = a → b : · c → d and Jus ( A , B ) ( a → b : · c → d ) consists only of trivial justiﬁcations . ( 2 ) A directed analogical equation in ( A , B ) is an expression of the form a : b : · c : x , ( 4 ) where a and b are again source elements from A , c is a target element from B , and x is a variable . We call d a solution to ( 4 ) in ( A , B ) i ﬀ ( A , B ) | = a → b : · c → d and ( A , B ) | = b → a : · d → c . In this case , we say that a , b , c , d are in directed analogical proportion in ( A , B ) written ( A , B ) | = a : b : · c : d . We denote the set of all solutions to ( 4 ) in ( A , B ) by S ol ( A , B ) ( a : b : · c : x ) . We say that a : b : · c : d is a trivial directed proportion in ( A , B ) i ﬀ ( A , B ) | = a : b : · c : d , and Jus ( A , B ) ( a → b : · c → d ) and Jus ( A , B ) ( b → a : · d → c ) consist only of trivial justiﬁcations . 2 See Examples 43 and 56 . 8 ANALOGICAL PROPORTIONS ( 3 ) An analogical equation in ( A , B ) is an expression of the form ‘ a is to b in A what c is to x in B ’—in symbols , a : b : : c : x , ( 5 ) where a and b are again source elements from A , c is a target element from B , and x is a variable . We call d a solution to ( 5 ) in ( A , B ) i ﬀ ( A , B ) | = a : b : · c : d and ( B , A ) | = c : d : · a : b . In this case , we say that a , b , c , d are in analogical proportion in ( A , B ) written ( A , B ) | = a : b : : c : d . We denote the set of all solutions to ( 5 ) in ( A , B ) by S ol ( A , B ) ( a : b : : c : x ) . We say that a : b : : c : d is a trivial analogical proportion in ( A , B ) i ﬀ ( A , B ) | = a : b : : c : d and Jus ( A , B ) ( a → b : · c → d ) = Jus ( B , A ) ( c → d : · a → b ) and Jus ( A , B ) ( b → a : · d → c ) = Jus ( B , A ) ( d → c : · b → a ) consist only of trivial justiﬁcations . Notation 9 . We will always write A instead of ( A , A ) . Convention 10 . In what follows , we will usually omit trivial justiﬁcations from notation . So , for example , we will write Jus ( A , B ) ( a → b : · c → d ) = ∅ instead of Jus ( A , B ) ( a → b : · c → d ) = { trivial justiﬁcations } in case a → b : · c → d has only trivial justiﬁcations in ( A , B ) , et cetera . The empty set is always a trivial set of justiﬁcations . Every justiﬁcation is meant to be non - trivial unless stated otherwise . Moreover , we will always write sets of justiﬁcations modulo renaming of variables , that is , we will write { z → z } instead of { z → z | z ∈ V } et cetera . Roughly , an element d in the target domain is a solution to an analogical equation of the form a : b : : c : x i ﬀ there is no other target element d ′ whose relation to c is more similar to the relation between a and b in the source domain ( see 12 ) , expressed in terms of maximal sets of algebraic justiﬁcations satisfying appropriate symmetries . Analogical proportions formalize the idea that analogy - making is the task of transforming di ﬀ erent objects from the source to the target domain in ‘the same way’ ; 3 or as P´olya ( P´olya , 1954 ) puts it : Two systems are analogous if they agree in clearly deﬁnable relations of their respec - tive parts . In our formulation , the ‘parts’ are the elements a , b , c , d and the ‘deﬁnable relations’ are represented by term rewrite rules relating a , b and c , d in ‘the same way’ via maximal sets of justiﬁcations . Example 11 . First consider the algebra A 1 : = ( { a , b , c , d } ) , consisting of four distinct elements with no functions and no constants ( see the forthcoming Theorem 33 ) : a b c d 3 This is why ‘copycat’ is the name of a prominent model of analogy - making ( Hofstadter & Mitchell , 1995 ) . See ( Correa , Prade , & Richard , 2012 ) . ANALOGICAL PROPORTIONS 9 Since Jus A 1 ( a ′ , b ′ ) ∪ Jus A 1 ( c ′ , d ′ ) contains only trivial justiﬁcations for any distinct elements a ′ , b ′ , c ′ , d ′ ∈ A ′ , we have , for example : A 1 | = a : b : : c : d and A 1 | = a : c : : b : d . On the other hand , since ( cf . 10 ) Jus A 1 ( a , a ) ∪ Jus A 1 ( a , d ) = { z → z } , ∅ and ∅ = Jus A 1 ( a → a : · a → d ) ( Jus A 1 ( a → a : · a → a ) = { z → z } , we have A 1 6 | = a → a : · a → d , which implies A 1 6 | = a : a : : a : d . This is an instance of the forthcoming determinism axiom ( 20 ) proved to hold within our framework in Theorem 28 . Now consider the slightly di ﬀ erent algebra A 2 : = ( { a , b , c , d } , f ) , where f is the unary function deﬁned by a b c d f f f f We expect a : b : : c : d to fail in A 2 as it has no non - trivial justiﬁcation . In fact , Jus A 2 ( a , b ) ∪ Jus A 2 ( c , d ) = n z → f ℓ ( z ) (cid:12)(cid:12)(cid:12) ℓ ≥ 1 o , ∅ and Jus A 2 ( a → b : · c → d ) = ∅ show A 2 6 | = a : b : : c : d . In the algebra A 3 given by a b c f g f , g f , g 10 ANALOGICAL PROPORTIONS we have A 3 6 | = a : b : : a : c . The intuitive reason is that a : b : : a : b is a more plausible proportion than a : b : : a : c , which is reﬂected in the computation ∅ = Jus A 3 ( a → b : · a → c ) ( Jus A 3 ( a → b : · a → b ) = { z → f ( z ) , . . . } . Remark 12 . It is important to emphasize that we interpret the expression ‘in the same way’ as ‘max - imally similar’ instead of ‘identical’ as the latter interpretation is too strict to be useful . To see why , consider , for instance , the algebra ( N , + , N ) of natural numbers with addition where each number is a distinguished element , and consider the arrow equation in ( N , + , N ) given by 2 → 4 : · 3 → x . We compute Jus ( N , + , N ) ( 2 , 4 ) = { z → z + z , z → z + 2 , . . . } and Jus ( N , + , N ) ( 3 , 5 ) = { z → z + 2 , . . . } and Jus ( N , + , N ) ( 3 , 6 ) = { z → z + z , . . . } , where we have z → z + 2 < Jus ( N , + , N ) ( 3 , 6 ) and z → z + z < Jus ( N , + , N ) ( 3 , 5 ) . Neither Jus ( N , + , N ) ( 3 , 5 ) nor Jus ( N , + , N ) ( 3 , 6 ) is thus identical to Jus ( N , + , N ) ( 2 , 4 ) , which means that under a strict interpretation , neither 5 nor 6 would be a solution to the above equation . In our interpretation , on the other hand , both 5 and 6 are justiﬁable solutions according to 8 as expected ( cf . 18 ) . Remark 13 . Section 6 provides an alternative logical interpretation of analogical proportions in terms of model - theoretic types . Deﬁnition 14 . We call an L - term s ( z ) an A - generalization of an element a in A i ﬀ a = s A ( e ) , for some e ∈ A | z | , and we denote the set of all A - generalizations of a in A by gen A ( a ) . Moreover , we deﬁne for any elements a ∈ A and c ∈ B : gen ( A , B ) ( a , c ) : = gen A ( a ) ∩ gen B ( c ) . Convention 15 . Notice that any justiﬁcation s ( z ) → t ( z ) of a → b : · c → d in ( A , B ) must satisfy a = s A ( e 1 ) and b = t A ( e 1 ) and c = s B ( e 2 ) and d = t B ( e 2 ) , ( 6 ) for some e 1 ∈ A | z | and e 2 ∈ B | z | . In particular , this means s ∈ gen ( A , B ) ( a , c ) and t ∈ gen ( A , B ) ( b , d ) . We sometimes write s e 1 → e 2 −−−−−→ t to make the witnesses e 1 , e 2 and their transition explicit . This situation can be depicted as follows : a → b : · c → d . s ( z ) t ( z ) z / e 1 z / e 2 z / e 1 z / e 2 ANALOGICAL PROPORTIONS 11 The following characterization of solutions to analogical equations in terms of solutions to directed analogical equations is an immediate consequence of 8 . Fact 16 . For any a , b ∈ A and c , d ∈ B , d is a solution to a : b : · c : x in ( A , B ) i ﬀ d is a solution to a → b : · c → x and c is a solution to b → a : · d → x in ( A , B ) . This is equivalent to S ol ( A , B ) ( a : b : · c : x ) = (cid:8) d ∈ S ol ( A , B ) ( a → b : · c → x ) (cid:12)(cid:12)(cid:12) c ∈ S ol ( A , B ) ( b → a : · d → x ) (cid:9) . Similarly , d is a solution to a : b : : c : x in ( A , B ) i ﬀ d is a solution to a : b : · c : x and b is a solution to c : d : · a : x in ( A , B ) . This is equivalent to S ol ( A , B ) ( a : b : : c : x ) = (cid:8) d ∈ S ol ( A , B ) ( a : b : · c : x ) (cid:12)(cid:12)(cid:12) b ∈ S ol ( A , B ) ( c : d : · a : x ) (cid:9) . We can visualize the derivation steps for proving a : b : : c : d as follows : a → b : · c → d b → a : · d → c a : b : · c : d c → d : · a → b d → c : · b → a c : d : · a : b a : b : : c : d This means that in order to prove a : b : : c : d , we need to check the four relations in the ﬁrst line . To guide the AI - practitioner , we shall now rewrite the above framework in a more algorithmic style . Pseudocode 17 . First of all , one has to specify the L - algebras A and B . Computing the solutions S to an analogical equation a : b : : c : x in ( A , B ) consists of the following steps : ( 1 ) Compute S 0 : = S ol ( A , B ) ( a → b : · c → x ) : ( a ) For each d ∈ B , if Jus A ( a , b ) ∪ Jus B ( c , d ) consists only of trivial justiﬁcations , then add d to S 0 . ( b ) For each L - term s ( z ) ∈ gen ( A , B ) ( a , c ) and all witnesses e 1 ∈ A | z | , e 2 ∈ B | z | satisfying ( cf . 15 ) a = s A ( e 1 ) and c = s B ( e 2 ) , and for each L - term t ( z ) ∈ gen A ( b ) containing only variables occurring in s ( z ) and satis - fying b = t A ( e 1 ) , add s → t to Jus ( A , B ) ( a → b : · c → t B ( e 2 ) ) . ( c ) Identify those non - empty sets Jus ( A , B ) ( a → b : · c → d ) which are subset maximal with respect to d and add those d ’s to S 0 . ( 2 ) For each d ∈ S 0 , check the following relations with the above procedure ( cf . 16 ) : ( a ) c ∈ S ol ( A , B ) ( b → a : · d → x ) ? ( b ) b ∈ S ol ( B , A ) ( c → d : · a → x ) ? ( c ) a ∈ S ol ( B , A ) ( d → c : · b → x ) ? Add those d ∈ S 0 to S which pass all three tests . The set S now contains all solutions to a : b : : c : x in ( A , B ) . We now want to demonstrate analogical proportions with two illustrative examples over the natural numbers . Example 18 . Consider the analogical equation 2 : 4 : : 3 : x . ( 7 ) According to 8 , solving ( 7 ) requires three steps : 12 ANALOGICAL PROPORTIONS ( 1 ) First , we need to solve the arrow equation 2 → 4 : · 3 → x . We can transform 2 into 4 in at least three di ﬀ erent ways justiﬁed by z → 2 + z , z → 2 z , and z → z 2 . Here it is important to clarify the algebras involved . The ﬁrst two justiﬁcations require addition , whereas the last justiﬁcation requires multiplication . Moreover , the ﬁrst justiﬁcation additionally presupposes that 2 is a distinguished element—this is not the case for the last two justiﬁcations as 2 z and z 2 are abbreviations for z + z and z · z , respectively , not involving 2 . Analogously , transforming 3 ‘in the same way’ as 2 can therefore mean at least three things : 3 → 2 + 3 = 5 , 3 → 3 + 3 = 6 , and 3 → 3 2 = 9 . More precisely , z → 2 + z is a justiﬁcation of 2 → 4 : · 3 → d in ( N , + , 2 ) i ﬀ d = 5 which shows that Jus ( N , + , 2 ) ( 2 → 4 : · 3 → 5 ) is a subset maximal set of justiﬁcations with respect to the last argument . This formally proves ( N , + , 2 ) | = 2 → 4 : · 3 → 5 . ( 8 ) The other two cases being analogous , we can further derive ( N , + ) | = 2 → 4 : · 3 → 6 and ( N , · ) | = 2 → 4 : · 3 → 9 . ( 2 ) We now check whether these solutions are solutions to 2 : 4 : · 3 : x as follows . Let us start with ( 8 ) . We need to check that 3 is a solution to 4 → 2 : · 5 → x in ( N , + , 2 ) . The rewrite rule 2 + z → z is a justiﬁcation of 4 → 2 : · 5 → d in ( N , + , 2 ) i ﬀ d = 3 , which shows that 3 is indeed a solution . Hence , we have ( N , + , 2 ) | = 2 : 4 : · 3 : 5 . The other cases being analogous , we can derive ( N , + ) | = 2 : 4 : · 3 : 6 and ( N , · ) | = 2 : 4 : · 3 : 9 . ( 3 ) Finally , we need to check ( N , + , 2 ) | = 3 : 5 : · 2 : 4 and ( N , + ) | = 3 : 6 : · 2 : 4 and ( N , · ) | = 3 : 9 : · 2 : 4 . This can be done by similar computations as above . Hence , we have ( N , + , 2 ) | = 2 : 4 : : 3 : 5 and ( N , + ) | = 2 : 4 : : 3 : 6 and ( N , · ) | = 2 : 4 : : 3 : 9 . Example 19 . The analogical equation 20 : 4 : : 30 : x has the solutions x 1 = 6 and x 2 = 9 in the multiplicative algebra M : = ( N 2 , · , N 2 ) as we show in 66 ( Appendix ) . The ﬁrst solution , x 1 = 6 , has an intuitive explanation as we obtain 4 from 20 by dividing by 5—analogously , dividing 30 by 5 yields 6 . In the expanded algebra of rationals , this can be written as 20 : 20 5 : : 30 : 30 5 . The second solution , x 2 = 9 , is more subtle and can be roughly justiﬁed by the following reasoning ( for the complete proof see 66 ) : ( 10 · 2 ) : 2 2 : : ( 10 · 3 ) : 3 2 . ANALOGICAL PROPORTIONS 13 This last solution is less obvious than the ﬁrst one and it therefore appears more interesting and more ‘creative’ . Finally , we shall emphasize that a similar reasoning fails : ( 10 · 2 ) : 2 2 = , ( 15 · 2 ) : 2 2 . The reason is that the arrow proportion 4 → 20 : · 4 → 30 has no justiﬁcations in M ( see 1 in 66 for details ) , which indicates that computing ( all ) solutions to an analogical equation is more complicated than 8 might suggest . 4 . P roperties of A nalogical P roportions This section studies some basic mathematical properties of analogical equations and proportions . 4 . 1 . Characteristic Sets of Justiﬁcations . Computing all justiﬁcations of an arrow proportion is di ﬃ cult in general ( see 19 ) , which fortunately can be omitted in many cases . Deﬁnition 20 . We call a set J of justiﬁcations a characteristic set of justiﬁcations of a → b : · c → d in ( A , B ) i ﬀ J is a su ﬃ cient set of justiﬁcations of a → b : · c → d in ( A , B ) , that is , i ﬀ ( 1 ) J ⊆ Jus ( A , B ) ( a → b : · c → d ) , and ( 2 ) J ⊆ Jus ( A , B ) ( a → b : · c → d ′ ) implies d ′ = d , for each d ′ ∈ B . In case J = { s → t } is a singleton set satisfying both conditions , we call s → t a characteristic justiﬁcation of a → b : · c → d in ( A , B ) . Notation 21 . In case J is a characteristic set of justiﬁcations , we will occasionally write ( A , B ) | = J a → b : · c → d to make the set of characteristic justiﬁcations J explicit . Example 22 . In 66 ( Appendix ) we argue that { z 1 z 2 → z 21 , z 1 z 2 → 2 z 1 } is a characteristic set of justiﬁcations of 20 → 4 : · 30 → 4 in M . The following lemma provides a su ﬃ cient condition of characteristic justiﬁcations in terms of mild injectivity . Lemma 23 ( Uniqueness Lemma ) . Let s ( z ) → t ( z ) be a non - trivial justiﬁcation of a → b : · c → d in ( A , B ) . ( 1 ) If there is a unique e ∈ B | z | such that c = s B ( e ) , then s → t is a characteristic justiﬁcation of a → b : · c → d in ( A , B ) . ( 2 ) Consequently , if there are unique e 1 , e 2 ∈ B | z | satisfying c = s B ( e 1 ) and d = t B ( e 2 ) , and every variable in s occurs in t , then ( A , B ) | = a : b : · c : d . ( 3 ) Moreover , if there are unique e 1 , e 2 ∈ A | z | and unique e 3 , e 4 ∈ B | z | such that a = s A ( e 1 ) and b = t A ( e 2 ) and c = s B ( e 3 ) and d = t B ( e 4 ) , and every variable in s occurs in t , then ( A , B ) | = a : b : : c : d . ( 4 ) Hence , in case s and t are injective in A and B and contain the same variables , then ( A , B ) | = a : b : : c : d . Proof . We prove each item separately : ( 1 ) Since s ( z ) → t ( z ) is a justiﬁcation of a → b : · c → d in ( A , B ) by assumption , there are sequences of elements e 1 ∈ A | z | and e 2 ∈ B | z | satisfying ( 6 ) , and e 2 is uniquely determined by assumption . Consequently , given any element d ′ ∈ B , s → t is a justiﬁcation of a → b : · c → d ′ in ( A , B ) i ﬀ d ′ = t B ( e 2 ) = d , which shows that s → t is indeed a characteristic justiﬁcation . 14 ANALOGICAL PROPORTIONS ( 2 ) Since s → t is a justiﬁcation of a → b : · c → d in ( A , B ) and there are unique e 1 , e 2 ∈ B | z | such that c = s B ( e 1 ) and d = t B ( e 2 ) by assumption , s → t and t → s ( recall that s and t contain the same variables by assumption ) are characteristic justiﬁcations of a → b : · c → d and b → a : · d → c in ( A , B ) , respectively , by the argument in 1 . ( 3 ) Analogous to 2 . ( 4 ) Direct consequence of 3 . (cid:3) 4 . 2 . Functional Proportion Theorem . The following reasoning pattern—which roughly says that functional dependencies are preserved across ( di ﬀ erent ) domains—will often be used in the rest of the paper . Theorem 24 ( Functional Proportion Theorem ) . Let t ( z ) be an L - term . ( 1 ) Given a ∈ A and c ∈ B , the rewrite rule z → t ( z ) characteristically justiﬁes ( A , B ) | = a → t A ( a ) : · c → t B ( c ) . ( 9 ) ( 2 ) Given a ∈ A and c ∈ B , if e = c ∈ B is the unique element satisfying t B ( e ) = t B ( c ) , then ( A , B ) | = t A ( a ) → a : · t B ( c ) → c , which together with ( 9 ) implies ( A , B ) | = a : t A ( a ) : · c : t B ( c ) . ( 3 ) Consequently , if e 1 = a ∈ A and e 2 = c ∈ B are unique elements satisfying t A ( e 1 ) = t A ( a ) and t B ( e 2 ) = t B ( c ) , then ( A , B ) | = a : t A ( a ) : : c : t B ( c ) . In this case , we call t B ( c ) a functional solution of a : b : : c : x in ( A , B ) characteristically justiﬁed by z → t ( z ) . Hence , if t is injective in A and B , then ( A , B ) | = a : t A ( a ) : : c : t B ( c ) . Proof . The rewrite rule z → t ( z ) is a characteristic justiﬁcation of a → t A ( a ) : · c → t B ( c ) in ( A , B ) by the Uniqueness Lemma 23 as z is injective in B . The other cases follow by analogous arguments from the Uniqueness Lemma 23 . (cid:3) Functional solutions are plausible since transforming a into t ( a ) and c into t ( c ) is a direct implemen - tation of ‘transforming a and c in the same way’ , and it is therefore surprising that functional solutions can be nonetheless unexpected and therefore ‘creative’ as will be demonstrated , for instance , in 55 . Remark 25 . An interesting consequence of Theorem 24 is that in case t is a ground term , we have the directed analogical proportion ( A , B ) | = a → t A : · c → t B , for all a ∈ A and c ∈ B , ( 10 ) characteristically justiﬁed by Theorem 24 via z → t . This can be intuitively interpreted as follows : every ground term is a ‘name’ in our language for a speciﬁc element of the algebra , which means that it is in a sense a ‘known’ element . As the framework is designed to compute ‘novel’ or ‘unknown’ el - ements in the target domain via analogy - making , ( 10 ) means that ‘known’ target elements can always be computed . The following example shows how we can solve analogical equations across di ﬀ erent domains within our framework . ANALOGICAL PROPORTIONS 15 Example 26 . We want to formally solve the analogical equation of 1 given by 2 : 4 : : ab : x . ( 11 ) For this , we ﬁrst need to specify the algebras involved . Let L be the language consisting of a single binary function symbol · , and let ( N , · ) and ( Σ + , · ) , where Σ : = { a , b } , be L - algebras . This means we interpret · as multiplication of numbers in N and as concatenation of words in Σ + . As a direct consequence of Theorem 24 with t ( z ) : = z · z , injective in ( N , · ) and ( Σ + , · ) , we can formally derive the solution abab to ( 11 ) : ( ( N , · ) , ( Σ ∗ , · ) ) | = 2 : 4 : : ab : abab . 4 . 3 . Axioms . Lepage ( 2003 ) ( cf . Miclet et al . , 2008 , pp . 796 - 797 ) introduces the following axioms in the linguistic context as a guideline for formal models of analogical proportions ( over a single universe ) , adapted here to our framework formulated above : 4 ( A , B ) | = a : b : : c : d ⇔ ( B , A ) | = c : d : : a : b ( symmetry ) , ( 12 ) A | = a : b : : c : d ⇔ A | = a : c : : b : d ( central permutation ) , ( 13 ) A | = a : a : : c : d ⇒ d = c ( strong inner reﬂexivity ) , ( 14 ) A | = a : b : : a : d ⇒ d = b ( strong reﬂexivity ) . ( 15 ) Although Lepage’s axioms appear reasonable in the word domain ( but see Problem 30 ) , they cannot be straightforwardly applied to the general case . Strong inner reﬂexivity fails , for instance , if the relation of a to itself is similar to the relation between c and d . Strong reﬂexivity fails , for example , in algebras where the relation of a to b and d is identical , for distinct elements b and d . In our framework , by making the underlying structures of an analogical proportion explicit , it turns out that except for symmetry none of Lepage’s axioms holds in the general case , justiﬁed by counter - examples ( Theorem 28 ) . This has critical consequences , as his axioms are assumed by many authors ( e . g . Barbot et al . , 2019 ; Miclet et al . , 2008 ) to hold beyond the word domain . We replace Lepage’s above list by the following list of axioms : ( A , B ) | = a : b : : c : d ⇔ ( B , A ) | = c : d : : a : b ( symmetry ) , ( 16 ) ( A , B ) | = a : b : : c : d ⇔ ( A , B ) | = b : a : : d : c ( inner symmetry ) , ( 17 ) ( A , B ) | = a : a : : c : c ( inner reﬂexivity ) , ( 18 ) A | = a : b : : a : b ( reﬂexivity ) , ( 19 ) A | = a : a : : a : d ⇔ d = a ( determinism ) . ( 20 ) Moreover , we consider the following property , for a , b contained in A and in B : ( A , B ) | = a : b : : b : a ( commutativity ) . ( 21 ) Furthermore , we consider the following properties , for L - algebras A , B , C and elements a , b ∈ A , c , d ∈ B , e , f ∈ C : ( A , B ) | = a : b : : c : d ( B , C ) | = c : d : : e : f ( transitivity ) , ( A , C ) | = a : b : : e : f and , for elements a , b , e ∈ A and c , d , f ∈ B , the property ( A , B ) | = a : b : : c : d ( A , B ) | = b : e : : d : f ( inner transitivity ) , ( A , B ) | = a : e : : c : f and , for elements a ∈ A , b in A and B , c in B and C , and d ∈ C , the property 4 Lepage ( 2003 ) formulates his axioms to hold in a single domain without any reference to an underlying structure A . 16 ANALOGICAL PROPORTIONS ( A , B ) | = a : b : : b : c ( B , C ) | = b : c : : c : d ( central transitivity ) . ( A , C ) | = a : b : : c : d Notice that central transitivity follows from transitivity . Finally , we consider the following schema , where A ′ and B ′ are L ′ - algebras , for some language L ⊆ L ′ : ( A , B ) | = a : b : : c : d A = A ′ ↾ L B = B ′ ↾ L ( monotonicity ) . ( A ′ , B ′ ) | = a : b : : c : d Remark 27 . Notice that strong inner reﬂexivity is a conditional statement , whereas inner reﬂexivity is an assertion not implied by strong inner reﬂexivity . The same applies to strong reﬂexivity and reﬂexivity . Importantly , central permutation and strong reﬂexivity imply strong inner reﬂexivity , and central permutation together with strong inner reﬂexivity imply strong reﬂexivity . We have the following analysis of the above axioms within our framework . Theorem 28 . The analogical proportion relation , as deﬁned in 8 , satisﬁes • symmetry ( 16 ) , • inner symmetry ( 17 ) , • inner reﬂexivity ( 18 ) , • reﬂexivity ( 19 ) , • determinism ( 20 ) , and , in general , it does not satisfy • central permutation ( 13 ) , • strong inner reﬂexivity ( 14 ) , • strong reﬂexivity ( 15 ) , • commutativity ( 21 ) , • transitivity , • inner transitivity , • central transitivity , • monotonicity . Proof . We have the following proofs : • Symmetry ( 16 ) and inner symmetry ( 17 ) are immediate consequences of 8 as the framework is designed to satisfy these axioms . • Inner reﬂexivity ( 18 ) is an immediate consequence of Theorem 24 with t ( z ) : = z , injective in A and B . • Next , we prove reﬂexivity ( 19 ) . If Jus A ( a , b ) ∪ Jus A ( a , b ) = Jus A ( a , b ) consists only of trivial justiﬁcations , we are done . Otherwise , there is at least one non - trivial justiﬁcation in Jus A ( a , b ) = Jus A ( a → b : · a → b ) . We proceed by showing that Jus A ( a → b : · a → b ) is subset maximal with respect to the last b . For any d ∈ A , we have Jus A ( a → b : · a → d ) = Jus A ( a , b ) ∩ Jus A ( a , d ) ⊆ Jus A ( a , b ) = Jus A ( a → b : · a → b ) , which shows that Jus A ( a → b : · a → b ) is indeed maximal . Hence , A | = a → b : · a → b . The same line of reasoning proves A | = b → a : · b → a . Hence , A | = a : b : · a : b , which ﬁnally proves A | = a : b : : a : b . ANALOGICAL PROPORTIONS 17 • Next , we prove determinism ( 20 ) . ( ⇐ ) Inner reﬂexivity ( 18 ) implies A | = a : a : : a : a . ( ⇒ ) We assume A | = a : a : : a : d . Since z → z ∈ Jus A ( a , a ) , the set Jus A ( a , a ) ∪ Jus A ( a , d ) cannot consist only of trivial justiﬁcations . Every justiﬁcation s e 1 → e 2 −−−−−→ t of a → a : · a → d can be transformed into a justiﬁcation s e 1 → e 1 −−−−−→ t ( replace e 2 by e 1 ) of a → a : · a → a . On the other hand , we have z → z ∈ Jus A ( a → a : · a → a ) whereas z → z < Jus A ( a → a : · a → d ) , for all d , a . This shows Jus A ( a → a : · a → d ) ( Jus A ( a → a : · a → a ) , which implies A 6 | = a : a : : a : d , for all d , a . • Next , we disprove central permutation ( 13 ) . For this consider the algebra A : = ( { a , b , c , d } , f ) , given by ( we omit the loops f ( o ) : = o , for o ∈ { b , c , d } , in the ﬁgure ) a b c d f We have A | = a : b : : c : d , whereas A 6 | = a : c : : b : d as there is an arrow from a to c but not from b to d in A . A second proof follows from the forthcoming Theorem 33 ( depending only on inner reﬂex - ivity already shown above ) , which yields ( { a , b , c } ) | = a : b : : a : c whereas ( { a , b , c } ) 6 | = a : a : : b : c . • Next , we disprove strong inner reﬂexivity ( 14 ) . For this consider the algebra A : = ( { a , c , d } , f ) given by a c d f f As f is injective in A , applying the Functional Proportion Theorem 24 yields A | = a : f ( a ) : : c : f ( c ) which is equivalent to A | = a : a : : c : d . • Next , we disprove strong reﬂexivity ( 15 ) . By the forthcoming Theorem 33 ( which depends only on inner reﬂexivity already proved above ) , we have ( { a , b , d } ) | = a : b : : a : d . • Commutativity fails in the algebra A : = ( { a , b } , f ) given by 18 ANALOGICAL PROPORTIONS a b f f This follows from Jus A ( a , b ) ∪ Jus A ( b , a ) = { z → f ( z ) , . . . } , ∅ whereas Jus A ( a → b : · b → a ) = ∅ . • Transitivity fails in the algebra A : = ( { a , b , c , d , e , f } , g , h ) given by ( we omit the loops g ( o ) : = o for o ∈ { b , d , e , f } , and h ( o ) : = o for o ∈ { a , b , d , f } , in the ﬁgure ) a b c d e f g g , h h The arrow proportions a → g ( a ) : · c → g ( c ) = a → b : · c → d and c → d : · a → b are immediate consequences of the Functional Proportion Theorem 24 , and the arrow proportions b → a : · d → c and d → c : · b → a follow from the fact that Jus A ( b → a : · d → c ) = n g ℓ ( z ) → z (cid:12)(cid:12)(cid:12) ℓ ≥ 0 o = Jus A ( d → c : · b → a ) are non - empty and maximal . This shows A | = a : b : : c : d . An analogous argument shows A | = c : d : : e : f . On the other hand , Jus A ( a , b ) ∪ Jus A ( e , f ) , ∅ whereas Jus A ( a → b : · e → f ) = ∅ shows A 6 | = a : b : : e : f . • Inner transitivity fails in the algebra A : = ( { a , b , c , d , e , f } , g ) given by ( we omit the loops g ( o ) : = o , for o ∈ { b , e , c , d , f } , in the ﬁgure ) a b e c d f g We have A | = a : b : : c : d and A | = b : e : : d : f by an argument analogous to the proof of Theorem 33 . On the other hand , Jus A ( a , e ) ∪ Jus A ( c , f ) , ∅ whereas Jus A ( a → e : · c → f ) = ∅ shows A 6 | = a : e : : c : f . • Central transitivity fails in the algebra A : = ( { a , b , c , d } , g , h ) given by ( we omit the loops g ( o ) : = o for o ∈ { c , d } , and h ( o ) : = o for o ∈ { a , d } , in the ﬁgure ) a b c d g g , h h The proof is analogous to the above disproof of transitivity . • Finally , we disprove monotonicity . For this , consider the algebra A : = ( { a , b , c , d } ) , consisting only of its universe . We have ( see the forthcoming Theorem 33 which depends only on inner reﬂexivity already proved above ) A | = a : b : : c : d . ANALOGICAL PROPORTIONS 19 Now consider the expansion A ′ : = ( { a , b , c , d } , f ) of A given by ( we omit the loops f ( o ) : = o , for o ∈ { b , c , d } , in the ﬁgure ) a b c d f We have A ′ 6 | = a : b : : c : d . (cid:3) Remark 29 . Notice that Lepage’s axioms ( except for symmetry ) fail in a single algebra A by Theorem 28 , which according to 9 is the special case ( A , A ) of ( A , B ) —this means that , in general , Lepage’s axioms fail in ( A , B ) as well . Lepage ( 2003 ) proposed his axioms in the linguistic setting of words . This raises the following important question which is beyond the scope of the paper and which therefore remains an open problem . Problem 30 . Do Lepage’s axioms hold within our framework in the word domain ? Remark 31 . We shall emphasize that the negative results in Theorem 28 regarding transitivity show that the property of being in analogical proportion is a local property . By this we mean that , for example , the relation between a and b , and between b and e does not fully determine the relation between a and e as inner transitivity fails in general . The same applies to ( central ) transitivity . Problem 32 . In which algebras is the analogical proportion relation transitive and therefore an equiv - alence relation ? The same question can be asked for inner and central transitivity . Finally , we have the following characterization of analogical proportions in algebras with no func - tions and no constants . Theorem 33 . Let A : = ( A ) be an algebra consisting only of its universe . For any a , b , c , d ∈ A , we have ( A ) | = a : b : : c : d ⇔ ( a = b and c = d ) or ( a , b and c , d ) . Proof . ( ⇐ ) ( i ) If a = b and c = d , then ( A ) | = a : b : : c : d holds by inner reﬂexivity ( 18 ) . ( ii ) If a , b and c , d , then ( cf . 10 ) Jus ( A ) ( a , b ) ∪ Jus ( A ) ( c , d ) = Jus ( A ) ( b , a ) ∪ Jus ( A ) ( d , c ) = ∅ , which entails ( A ) | = a : b : : c : d . ( ⇒ ) By assumption , we have ( A ) | = a → b : · c → d . We distinguish two cases : ( i ) if Jus ( A ) ( a , b ) ∪ Jus ( A ) ( c , d ) consists only of trivial justiﬁcations , then we must have a , b and c , d ( since otherwise the the non - trivial justiﬁcation z → z would be included ) ; ( ii ) otherwise , Jus ( A ) ( a → b : · c → d ) contains the only available non - trivial justiﬁcation z → z , which implies a = b and c = d . (cid:3) Corollary 34 . In addition to the positive axioms of Theorem 28 , every algebra A : = ( A ) , consisting only of its universe , satisﬁes commutativity , inner transitivity , transitivity , central transitivity , and strong inner reﬂexivity . Proof . A direct consequence of Theorem 33 . (cid:3) 20 ANALOGICAL PROPORTIONS 4 . 4 . Isomorphism Theorems . It is reasonable to expect isomorphisms—which are structure - preserving bijective mappings between algebras—to be compatible with analogical proportions . Consider the following simple example . Example 35 . Let Σ : = { a } be the alphabet consisting of the single letter a , and let Σ ∗ denote the set of all words over Σ including the empty word ε . We can identify every sequence a n = a . . . a ( n consecutive a ’s ) with the non - negative integer n , for every n ≥ 0 . Therefore , deﬁne the isomorphism H : ( N , + ) → ( Σ ∗ , · ) via H ( 0 ) : = ε and H ( n ) : = a n , n ≥ 1 . We expect the following analogical proportion to hold : ( ( N , + ) , ( Σ ∗ , · ) ) | = m : n : : a m : a n , for all m , n ≥ 0 . That this is indeed the case is the content of the First Isomorphism Theorem 37 below . Lemma 36 ( Isomorphism Lemma ) . For any isomorphism H : A → B and any elements a , b ∈ A , we have Jus A ( a , b ) = Jus B ( H ( a ) , H ( b ) ) . ( 22 ) Proof . ( ⊆ ) Let s ( z ) → t ( z ) ∈ Jus A ( a , b ) . By 7 , this means a = s A ( e ) and b = t A ( e ) , for some e ∈ A | z | . Since H is an isomorphism , we have H ( a ) = H ( s A ( e ) ) = s B ( H ( e ) ) and H ( b ) = H ( t A ( e ) ) = t B ( H ( e ) ) , which shows s → t ∈ Jus B ( H ( a ) , H ( b ) ) and consequently Jus A ( a , b ) ⊆ Jus B ( H ( a ) , H ( b ) ) . ( ⊇ ) Since H is an isomorphism , its inverse H − 1 is an isomorphism as well , and we can apply the already shown case above to prove Jus B ( H ( a ) , H ( b ) ) ⊆ Jus A ( H − 1 ( H ( a ) ) , H − 1 ( H ( b ) ) ) = Jus A ( a , b ) . (cid:3) Theorem 37 ( First Isomorphism Theorem ) . For any isomorphism H : A → B and any elements a , b ∈ A , we have ( A , B ) | = a : b : : H ( a ) : H ( b ) . ( 23 ) Proof . If Jus A ( a , b ) ∪ Jus B ( H ( a ) , H ( b ) ) consists only of trivial justiﬁcations , we are done . Otherwise , there is at least one non - trivial justiﬁcation s → t in Jus A ( a , b ) or in Jus B ( H ( a ) , H ( b ) ) , in which case the Isomorphism Lemma 36 implies that s → t is in both Jus A ( a , b ) and Jus B ( H ( a ) , H ( b ) ) , which means that Jus ( A , B ) ( a → b : · H ( a ) → H ( b ) ) contains at least one non - trivial justiﬁcation as well . We proceed by showing that Jus ( A , B ) ( a → b : · H ( a ) → H ( b ) ) is subset maximal with respect to H ( b ) : Jus ( A , B ) ( a → b : · H ( a ) → H ( b ) ) = Jus A ( a , b ) ∩ Jus B ( H ( a ) , H ( b ) ) = Jus A ( a , b ) ⊇ Jus A ( a , b ) ∩ Jus B ( H ( a ) , d ) = Jus ( A , B ) ( a → b : · H ( a ) , d ) , for every d ∈ B , ANALOGICAL PROPORTIONS 21 where the second identity follows from Lemma 36 . This shows that Jus ( A , B ) ( a → b : · H ( a ) → H ( b ) ) is indeed a subset maximal set of justiﬁcations of a → b : · H ( a ) → H ( b ) in ( A , B ) with respect to H ( b ) . An analogous argument shows the remaining directed proportions ( see 16 ) . (cid:3) Remark 38 . In Section 6 . 2 we will see a di ﬀ erent proof of the First Isomorphism Theorem 37 from the logical perspective of model - theoretic types . The following counter - example shows that the First Isomorphism Theorem 37 cannot be general - ized to homomorphisms . Example 39 . Let A : = ( { a , b , a ′ , b ′ } , f A ) and B : = ( { c , d } , f B ) , where f A and f B are unary functions deﬁned by a ′ b ′ a b d c f A f A f B H H f A f A f B One can verify that H as deﬁned by the dashed arrows in the ﬁgure above is a homomorphism from A to B . We claim ( A , B ) 6 | = a ′ : b : : H ( a ′ ) : H ( b ) . We have Jus B ( H ( a ′ ) , H ( b ) ) = n z → f ℓ ( z ) (cid:12)(cid:12)(cid:12) ℓ ≥ 1 o and therefore Jus A ( a ′ , b ) ∪ Jus B ( H ( a ′ ) , H ( b ) ) , ∅ , but Jus ( A , B ) ( a ′ → b : · H ( a ′ ) → H ( b ) ) = ∅ , which directly yields ( A , B ) 6 | = a ′ → b : · H ( a ′ ) → H ( b ) . 22 ANALOGICAL PROPORTIONS The following theorem shows that the analogical proportion relation is invariant under isomorphic transformations . Theorem 40 ( Second Isomorphism Theorem ) . For any elements a , b ∈ A and c , d ∈ B , and any isomorphisms H : A → C and G : B → D , we have ( A , B ) | = a : b : : c : d ⇔ ( C , D ) | = H ( a ) : H ( b ) : : G ( c ) : G ( d ) . Proof . An immediate consequence of the Isomorphism Lemma 36 which yields Jus A ( a , b ) = Jus C ( H ( a ) , H ( b ) ) and Jus B ( c , d ) = Jus D ( G ( c ) , G ( d ) ) . (cid:3) 5 . S ets and N umbers In this section , we demonstrate our abstract algebraic framework of analogical proportions intro - duced above by investigating some elementary properties of proportions between sets and numbers , and by comparing our model with the models in ( Miclet et al . , 2008 ; Stroppa & Yvon , 2006 ) . 5 . 1 . Set Proportions . This section studies analogical proportions between sets called set proportions . Notation 41 . In the rest of this section , let L : = { ∩ , . c } be the language of sets , interpreted in the usual way , let U and W be universes , and let A ( U , W ) : = ( P ( U ) , ∩ , . c , P ( U ) ∩ P ( W ) ) , B ( W , U ) : = ( P ( W ) , ∩ , . c , P ( U ) ∩ P ( W ) ) , be L ( P ( U ) ∩ P ( W ) ) - algebras containing the distinguished sets in P ( U ) ∩ P ( W ) as constants ( cf . 3 ) . We will write A ( U ) instead of A ( U , U ) . We introduce the following abbreviations : A ∪ B : = ( A c ∩ B c ) c and A − B : = A ∩ B c . Notice that in case A = B , every set in A is a distinguished set ; the empty set is always a distinguished set . The following proposition summarizes some elementary properties of set proportions . Proposition 42 . The following proportions hold in ( A , B ) , for all A ∈ A , C ∈ B , and B , E ∈ A ∩ B : A : A c : : C : C c , ( 24 ) A : A ∪ E : : C : C ∪ E , ( 25 ) A : A ∩ E : : C : C ∩ E , ( 26 ) A → A ∪ C : · C → A ∪ C if A , C ∈ A ∩ B , ( 27 ) A → A ∩ C : · C → A ∩ C if A , C ∈ A ∩ B , ( 28 ) A → U : · C → W , ( 29 ) A → ∅ : · C → ∅ . ( 30 ) Moreover , in case B ⊆ A and B ⊆ C , we further have the arrow proportion A → B : · C → B . ( 31 ) Proof . All proportions are immediate consequences of Theorem 24 with t ( Z ) deﬁned as follows : • The proportions in ( 24 ) follow from the fact that t ( Z ) : = Z c is injective in A and B . ANALOGICAL PROPORTIONS 23 • The directed proportions A → A ∪ E : · C → C ∪ E and C → C ∪ E : · A → A ∪ E in ( 25 ) follow with t ( Z ) : = Z ∪ E , and A ∪ E → A : · C ∪ E → C and C ∪ E → C : · A ∪ E → A with t ( Z ) : = Z − ( E − Z ) . • The directed proportions A → A ∩ E : · C → C ∩ E and C → C ∩ E : · A → A ∩ E in ( 26 ) follow with t ( Z ) : = Z ∩ E , and A ∩ E → A : · C ∩ E → C and C ∩ E → C : · A ∩ E → A with t ( Z ) : = Z ∪ ( Z − E ) . • The directed proportion in ( 27 ) follows with both t ( Z ) : = Z ∪ A ∪ C and , since A ∪ C is a distinguished set by assumption , t ( Z ) : = A ∪ C . • The directed proportion in ( 28 ) follows with both t ( Z ) : = Z ∪ ( A ∩ C ) and , since A ∩ C is a distinguished set by assumption , t ( Z ) : = A ∩ C . • The directed proportion in ( 29 ) follows with t ( Z ) : = Z ∪ Z c . • The directed proportion in ( 30 ) follows with t ( Z ) : = Z ∩ Z c or t ( Z ) : = ∅ . • From B ⊆ A and B ⊆ C we deduce that B is a distinguished set , which means that t ( Z ) : = B is a valid deﬁnition implying ( 31 ) . (cid:3) Example 43 . The rewrite rule ( X ∩ Y ) ∪ ( X − Y ) → ( X ∩ Y ) ∪ ( Y − X ) justiﬁes every arrow set proportion A → B : · C → D in ( A , B ) , which shows that it is a trivial justiﬁcation in ( A , B ) . This example shows that trivial justiﬁcations may contain useful information about the underlying structures—in this case , it encodes the trivial observation that any two sets A and B are symmetrically related via A = ( A ∩ B ) ∪ ( A − B ) and B = ( A ∩ B ) ∪ ( B − A ) . 5 . 1 . 1 . Stroppa and Yvon . The following deﬁnition is due to Stroppa and Yvon ( 2006 , Proposition 4 ) . 5 Deﬁnition 44 . For any sets A , B , C , D ∈ A , deﬁne A | = SY A : B : : C : D : ⇔ A = A 1 ∪ A 2 , B = A 1 ∪ D 2 , C = D 1 ∪ A 2 , D = D 1 ∪ D 2 , for some A 1 , A 2 , D 1 , D 2 ∈ A . For example , with A 1 : = { a 1 } , A 2 : = { a 2 } , D 1 : = { d 1 } , and D 2 : = { d 2 } , we obtain the set proportion { a 1 , a 2 } : { a 1 , d 2 } : : { d 1 , a 2 } : { d 1 , d 2 } . ( 32 ) So , roughly , we obtain the set { a 1 , d 2 } from { a 1 , a 2 } by replacing a 2 by d 2 , which coincides with the transformation from { d 1 , a 2 } into { d 1 , d 2 } . Although 44 works in some cases , in general we disagree with the notion of set proportions in ( Stroppa & Yvon , 2006 ) justiﬁed by the following counter - example . Example 45 . Let A 1 : = A 2 : = { a } and D 1 : = D 2 : = ∅ . 44 yields A ( { a } ) | = SY { a } : { a } : : { a } : ∅ . This is implausible as it has no non - trivial justiﬁcation . In fact , determinism ( 20 ) implies that { a } is the only solution to { a } : { a } : : { a } : X in A ( { a } ) according to our 8 ( cf . Theorem 28 ) . 5 We adapt the deﬁnition in ( Stroppa & Yvon , 2006 ) to our schema by making the underlying structure A explicit—recall from 9 that A is an abbreviation for ( A , A ) , which according to 41 means that every set in A is a distinguished set—this means , we can use every set in A to form terms . 24 ANALOGICAL PROPORTIONS 5 . 1 . 2 . Miclet , Bayoudh , and Delhay . There is at least one more deﬁnition of set proportions in the literature due to Miclet et al . ( 2008 , Deﬁnition 2 . 3 ) . 6 Deﬁnition 46 . Given a ﬁnite universe U and sets A , B , C , D ∈ A , A | = MBD A : B : : C : D : ⇔ B = ( A − E ) ∪ F and D = ( C − E ) ∪ F , for some ﬁnite sets E and F . Remark 47 . Notice that Miclet et al . ( 2008 ) deﬁne set proportions only for ﬁnite sets which is a serious restriction to its practical applicability . For example , { a 1 , d 2 } = ( { a 1 , a 2 } − { a 2 } ) ∪ { d 2 } and { d 1 , d 2 } = ( { d 1 , a 2 } − { a 2 } ) ∪ { d 2 } shows that ( 32 ) holds with respect to 46 as well . We have the following implication . Theorem 48 . For any ﬁnite sets A , B , C , D ∈ A , we have A | = MBD A : B : : C : D ⇒ A | = A : B : : C : D . Proof . Let B and D be written as in 46 . The arrow proportions A → B : · C → D and C → D : · A → B are immediate consequences of Theorem 24 with t ( Z ) : = ( Z − E ) ∪ F , and B → A : · D → C and D → C : · B → A with t ( Z ) : = ( Z − ( F − Z ) ) ∪ ( Z ∩ E ) . 7 (cid:3) The following example shows that the converse of Theorem 48 fails in general . Example 49 . Consider the analogical equation in A ( { a , b } ) given by { a } : { b } : : ∅ : X . ( 33 ) As { b } is the complement of { a } in A ( { a , b } ) , { a , b } = ∅ c is a solution of ( 33 ) in our framework as a consequence of ( 24 ) . In contrast , since there are no ﬁnite sets E and F in A ( { a , b } ) satisfying { b } = ( { a } ∪ E ) − F and { a , b } = ( ∅ ∪ E ) − F , { a , b } is not a solution of ( 33 ) according to 46 . 5 . 2 . Arithmetical Proportions . This section studies analogical proportions between numbers called arithmetical proportions . Let us ﬁrst summarize some elementary properties . Proposition 50 . For any integers a , c ∈ Z , we have ( Z , + , − ) | = a : − a : : c : − c , and ( Q , · , . − 1 ) | = a : 1 a : : c : 1 c , for a , 0 , c , 0 , and , given some distinguished integers k , ℓ ∈ Z , k , ℓ , 0 , ( Z , + , Z ) | = a : ka + ℓ : : c : kc + ℓ and ( Z , · , Z ) | = a : a k · ℓ : : c : c k · ℓ . 6 To be more precise , the deﬁnition in ( Miclet et al . , 2008 ) is stated informally as Four sets A , B , C and D are in analogical proportion A : B : : C : D i ﬀ A can be transformed into B , and C into D , by adding and subtracting the same elements to A and C . This deﬁnition is ambiguous . One interpretation is the one we choose in 46—another interpretation would be equivalent to 44 . Moreover , as in the case of 44 , we adapt the deﬁnition of Miclet et al . ( 2008 ) to our schema by making the underlying structure A explicit . 7 Here it is important to emphasize that we assume every set in A to be a distinguished set by 41 ( recall from 9 that A is an abbreviation for ( A , A ) ) . ANALOGICAL PROPORTIONS 25 Moreover , for any integers a , c , k , ℓ , m , n ∈ Z , k , m , 0 , we have ( Z , + , Z ) | = ka + ℓ : ma + n : : kc + ℓ : mc + n . Proof . The ﬁrst three lines are immediate consequences of Theorem 24 with t ( z ) deﬁned as follows : the ﬁrst line is justiﬁed via t ( z ) : = − z , the second via t ( z ) : = 1 z , and the third line is justiﬁed via t ( z ) : = kz + ℓ and t ( z ) : = z k · ℓ , as in each case t is injective in the respective algebra since k , ℓ , 0 holds by assumption . Since the terms s ( z ) : = kz + ℓ and t ( z ) : = mz + n , k , m , 0 , are injective in ( Z , + , Z ) containing the same variable z , the Uniqueness Lemma 23 implies via the justiﬁcation s ( z ) → t ( z ) the arithmetical proportion ka + ℓ : ma + n : : kc + ℓ : mc + n in ( Z , + , Z ) . (cid:3) The following result formally proves two well - known arithmetical proportions known as ‘di ﬀ er - ence’ and ‘geometric’ proportion within our framework . Theorem 51 . For any integers a , b , c , d ∈ Z , a − b = c − d ⇒ ( Z , + , − , Z ) | = a : b : : c : d ( di ﬀ erence proportion ) , b a = d c ⇒ ( Q , · , . − 1 , Q ) | = a : b : : c : d , a , 0 , c , 0 , ( geometric proportion ) . Proof . The two proportions are direct consequences of Theorem 24 with t ( z ) : = z + b − a and t ( z ) : = z ba , respectively , since both terms are injective in the respective algebras . 8 (cid:3) The following counter - examples show that the converse of Theorem 51 fails in general . Example 52 . Theorem 24 implies ( Z , + , − , Z ) | = a : 2 a : : c : 2 c , for all integers a and c . On the other hand , we have 2 a − a = 2 c − c i ﬀ a = c . Similarly , Theorem 24 implies ( Q , · , . − 1 , Q ) | = a : a 2 : : c : c 2 , for all integers a and c , a , 0 , c , 0 . On the other hand , we have a 2 a = c 2 c i ﬀ a = c . The following result summarizes some unexpected and therefore ‘creative’ arithmetical proportions containing the numbers 0 and 1 . Proposition 53 . For any integers a , c , k , ℓ ∈ Z , k , ℓ , 0 , we have ( Z , + , − , Z ) | = a → 0 : · c → 0 , ( 34 ) ( Q , · , . − 1 , Q ) | = a → 1 : · c → 1 , ( 35 ) ( Z , + , · , Z ) | = 0 : 0 : : c : kc ℓ , ( 36 ) ( Z , · ) | = 1 : 1 : : c : c ℓ . ( 37 ) Proof . An immediate consequence of Theorem 24 with t ( z ) deﬁned as follows : the ﬁrst two arrow proportions are justiﬁed via t ( z ) : = z − z and t ( z ) : = zz ; and the next two proportions are justiﬁed via t ( z ) : = kz ℓ and t ( z ) : = z ℓ , both injective for k , ℓ , 0 in the respective algebras . (cid:3) The following counter - example shows that the ﬁrst two arrow proportions in 53 cannot be inverted . 8 Notice that in the algebra ( Z , + , − , Z ) , every integer is a distinguished element , which shows that the constants a and b in z + b − a are syntactically correct . 26 ANALOGICAL PROPORTIONS Example 54 . To refute the inner converse 0 → a : · 0 → c of ( 34 ) in ( Z , + , − , Z ) , for a , c , notice that we can transform each justiﬁcation s e 1 → e 2 −−−−−→ t of 0 → a : · 0 → c into a justiﬁcation s e 1 → e 1 −−−−−→ t of 0 → a : · 0 → a . On the other hand , 0 → a is a justiﬁcation of 0 → a : · 0 → a which does not justify 0 → a : · 0 → c unless c = a . This shows ( Z , + , − , Z ) 6 | = 0 → a : · 0 → c , for c , a . A similar argument shows ( Q , · , . − 1 , Q ) 6 | = 1 → a : · 1 → c , for c , a . Example 55 . 53 yields ‘creative’ arithmetical proportions which are unexpected if their justiﬁcations are not made explicit . For example , given c : = 2 , k : = 10 , and ℓ : = 2 , ( 36 ) yields the arithmetical proportion : 9 ( Z , + , · , Z ) | = 0 : 0 : : 2 : 40 . In such cases , where the characteristic justiﬁcations of a proportion are not obvious from the context , it is preferable to write ( cf . 21 ) : ( Z , + , · , Z ) | = { z → 10 z 2 } 0 : 0 : : 2 : 40 . Here is another arithmetical proportion of this kind formalizing 2 ( notice that z + 5 and 1000 z + 3000 are injective in ( Z , + , Z ) and see Lemma 23 ) : ( Z , + , Z ) | = { z + 5 − 3 →− 2 −−−−−−→ 1000 z + 3000 } 2 : 0 : : 3 : 1000 . We believe that analogical proportions of this form , which are unexpected but still reasonably justiﬁ - able , are crucial for formalizing creativity . Example 56 . The rewrite rule x + y − y → x + y − x justiﬁes any arrow proportion a → b : · c → d in ( Z , + , − ) , which shows that it is a trivial justiﬁcation encoding the trivial observation that any two integers a and b are symmetrically related via b = a + b − a and a = b + a − b . Stroppa and Yvon . The following notion of arithmetical proportion is an instance of the more general deﬁnition due to Stroppa and Yvon ( 2006 , Proposition 2 ) given for abelian semigroups . Deﬁnition 57 . For any integers a , b , c , d ∈ Z , deﬁne ( Z , + , Z ) | = SY a : b : : c : d : ⇔ a = a 1 + a 2 , b = a 1 + d 2 , c = d 1 + a 2 , d = d 1 + d 2 , for some a 1 , a 2 , d 1 , d 2 ∈ Z . For example , with a : = 1 + 1 , b : = 1 + 2 , c : = 2 + 1 , and d : = 2 + 2 , we obtain the arithmetical proportion 2 : 3 : : 3 : 4 . We have the following implication . Theorem 58 . For any integers a , b , c , d ∈ Z , we have ( Z , + , Z ) | = SY a : b : : c : d ⇒ ( Z , + , Z ) | = a : b : : c : d . 9 In this example it is essential that every coe ﬃ cient occurring in a justiﬁcation is a distinguished element . ANALOGICAL PROPORTIONS 27 Proof . An immediate consequence of Theorem 24 with t ( z ) : = z − a 2 + d 2 , injective in ( Z , + , Z ) . (cid:3) The following counter - example shows that the converse of Theorem 58 fails in general . Example 59 . Consider the analogical equation in ( Z , + , Z ) given by 0 : 0 : : 1 : x . The justiﬁcation z → z + z , injective in ( Z , + , Z ) , implies the solution x = 2 as a consequence of Theorem 24 . This solution cannot be obtained from 57 by the following argument . Suppose , towards a contradiction , that 0 , 1 , 2 can be decomposed according to 57 into 0 = a 1 + a 2 , 0 = a 1 + d 2 , 1 = d 1 + a 2 , and 2 = d 1 + d 2 . From the ﬁrst two identities we deduce a 2 = d 2 , which further implies 1 = d 1 + a 2 = d 1 + d 2 = 2—a contradiction . Theorem 58 together with 59 shows that our notion of arithmetical proportion yields strictly more justiﬁable solutions than the notion of Stroppa and Yvon ( Stroppa & Yvon , 2006 ) . 6 . L ogical I nterpretation As we have constructed our model from ﬁrst principles using only elementary concepts of universal algebra , and since our model questions some basic properties of analogical proportions presupposed in the literature ( Section 4 . 3 ) , to convince the reader of the ‘soundness’ of our model , we show in this section that our purely algebraic model from above can be naturally embedded into the logical setting of ﬁrst - order logic via model - theoretic types , which play a key role in classical model the - ory ( cf . Hinman , 2005 , § 7 . 1 ) . We then reprove our First Isomorphism Theorem 37 , which says that analogical proportions are compatible with isomorphisms , from this logical perspective . This hope - fully convinces the reader that the introduced notions for formalizing analogical proportions from above—which are motivated by simple examples—are theoretically well - founded . 6 . 1 . Rewrite Types . We reformulate our model of analogical proportions from above into ﬁrst - order logic via a restricted form of model - theoretic types . Notation 60 . In this section , A and B denote functional L - structures , which are L - structures contain - ing no relation symbols . Recall from Section 3 that justiﬁcations of analogical proportions are rewrite rules of the form s → t expressing a functional relationship between elements . We now want to translate such justiﬁcations into logical formulas , which motivates the following deﬁnition . Deﬁnition 61 . We associate with each rewrite rule s ( z ) → t ( z ) , where t contains only variables occurring in s , the L - rewrite formula ϕ s ( z ) → t ( z ) ( x , y ) : ≡ ∃ z [ x = s ( z ) ∧ y = t ( z ) ] . ( 38 ) We denote the set of all L - rewrite formulas by rwFm L . Now that we have deﬁned rewrite formulas , we continue by translating sets of justiﬁcations into sets of rewrite formulas via a restricted notion of the well - known model - theoretic types ( e . g . Hinman , 2005 , § 7 . 1 ) . 28 ANALOGICAL PROPORTIONS Deﬁnition 62 . Deﬁne the L - rewrite type of two elements a , b ∈ A by rwType A ( a , b ) : = { ϕ ( x , y ) ∈ rwFm L | A | = ϕ ( a , b ) } , extended to arrow proportions a → b : · c → d in ( A , B ) by rwType ( A , B ) ( a → b : · c → d ) : = rwType A ( a , b ) ∩ rwType B ( c , d ) . We have the following correspondence between sets of justiﬁcations and rewrite formulas and types ( cf . 15 ) : s → t ∈ Jus ( A , B ) ( a → b : · c → d ) ⇔ ϕ s → t ∈ rwType ( A , B ) ( a → b : · c → d ) . ( 39 ) This is interesting as it shows that functional justiﬁcations of the form s → t , which were motivated by simple examples , have an intuitive logical meaning . The expression ‘ a transforms into b in A as c transforms into d in B ’ can now be reinterpreted from a logical point of view as follows : the functional relationships between a and b in A and between c and d in B are formally captured by all rewrite formulas ϕ ( x , y ) such that ϕ ( a , b ) and ϕ ( b , a ) holds in A and ϕ ( c , d ) and ϕ ( d , c ) holds in B , respectively , and the elements a , b , c , d are in directed analogical proportion in ( A , B ) i ﬀ the set of shared functional properties is maximal with respect to d . This leads us to the following logical variant of 8 . Deﬁnition 63 . We call an element d ∈ B an rw - solution of an analogical equation a : b : : c : x in ( A , B ) —in symbols , ( A , B ) | = rw a : b : : c : d —i ﬀ it satisﬁes the conditions in 8 with Jus replaced by rwType . The notion of triviality is adapted in the obvious way . We have the following logical characterization of analogical proportions in terms of model - theoretic rewrite types . Fact 64 . For any functional L - structures A and B , and any elements a , b ∈ A and c , d ∈ B , we have ( A , B ) | = a : b : : c : d ⇔ ( A , B ) | = rw a : b : : c : d . Proof . An immediate consequence of ( 39 ) . (cid:3) 6 . 2 . Isomorphisms . We reprove the First Isomorphism Theorem 37 from the logical perspective of types . Proof of Theorem 37 . If rwType A ( a , b ) ∪ rwType B ( H ( a ) , H ( b ) ) consists only of trivial rewrite formu - las , we are done . Otherwise , we need to show that rwType ( A , B ) ( a → b : · H ( a ) → H ( b ) ) contains at least one non - trivial rewrite formula—this can be shown by an analogous argument as in the algebraic proof of Theorem 37 in Section 4 . 4 . We proceed by showing that rwType ( A , B ) ( a → b : · H ( a ) → H ( b ) ) is subset maximal with respect to H ( b ) . From A → B we deduce with Lemma 5 that for any rewrite 2 - L - formula ϕ , A | = rw ϕ ( a , b ) ⇔ B | = rw ϕ ( H ( a ) , H ( b ) ) . This further implies rwType A ( a , b ) = rwType B ( H ( a ) , H ( b ) ) , ANALOGICAL PROPORTIONS 29 and , consequently , rwType ( A , B ) ( a → b : · H ( a ) → H ( b ) ) = rwType A ( a , b ) ∩ rwType B ( H ( a ) , H ( b ) ) = rwType A ( a , b ) ⊇ rwType A ( a , b ) ∩ rwType ( A , B ) ( H ( a ) , d ) = rwType ( A , B ) ( a → b : · H ( a ) → d ) , for every d ∈ B . This shows that rwType ( A , B ) ( a → b : · H ( a ) → H ( b ) ) is indeed a subset maximal set of justiﬁcations of a → b : · H ( a ) → H ( b ) in ( A , B ) with respect to H ( b ) . An analogous argument shows the remaining directed proportions ( see 16 ) . Now apply 64 . (cid:3) 7 . R elated W ork Arguably , the most prominent ( symbolic ) model of analogical reasoning to date is Gentner’s ( Gen - tner , 1983 ) Structure - Mapping Theory ( or SMT ) , ﬁrst implemented by Falkenhainer , Forbus , and Gentner ( Falkenhainer , Forbus , & Gentner , 1989 ) . Our approach shares with Gentner’s SMT its symbolic nature . However , while in SMT mappings are constructed with respect to meta - logical considerations—for instance , Gentner’s systematicity principle prefers connected knowledge over independent facts—in our framework ‘mappings’ are realized via analogical proportions satisfying mathematically well - deﬁned properties . In Theorems 37 and 40 we have shown that analogical pro - portions are compatible with structure - preserving mappings—a result which is in the vein of SMT . We leave a more detailed comparison between our algebraic approach and Gentner’s SMT as future work . Formal models of analogy have been studied by artiﬁcial intelligence researchers for decades ( cf . Hall , 1989 ; Prade & Richard , 2014 ) . In this paper , we compared our algebraic framework of analogical proportions with two recently introduced models of analogical proportions from the literature ( Miclet et al . , 2008 ; Stroppa & Yvon , 2006 ) —introduced for applications to artiﬁcial intelligence and machine learning , speciﬁcally for natural language processing and handwritten character recognition—in the concrete domains of sets and numbers , and we showed that in each case we either disagree with the notion from the literature justiﬁed by some counter - example or we can show that our model yields strictly more justiﬁable solutions . This provides some evidence for its applicability . We expect similar results in other domains where the models of ( Stroppa & Yvon , 2006 ) and ( Miclet et al . , 2008 ) are applicable . The functional - based view in ( Barbot et al . , 2019 ) is related to our Theorem 24 on the preservation of functional dependencies across di ﬀ erent domains ( Section 4 . 2 ) . The critical di ﬀ erence is that Bar - bot , Miclet , and Prade ( Barbot et al . , 2019 ) assume Lepage’s central permutation axiom ( 13 ) , which implies in their framework that functional transformations need to be bijective , a serious restriction . In our framework , on the other hand , we proved in Theorem 28 that central permutation does not hold in general—justiﬁed by some reasonable counter - example—and so functional transformations can be functions induced by terms satisfying a mild injectivity condition ( Theorem 24 ) . To summarize , our framework di ﬀ ers substantially from the aforementioned models of analogical proportions : ( 1 ) Our model is abstract and algebraic in nature , formulated in the general language of universal algebra . Speciﬁc structures , like sets and numbers , are instances of the generic framework . To the best of our knowledge , this is not the case for the aforementioned frameworks , which are formulated only for concrete structures . 30 ANALOGICAL PROPORTIONS ( 2 ) In our model , we make the underlying mathematical structures A ( source ) and B ( target ) explicit . This allows us to distinguish , for example , between the similar structures ( Z , + ) and ( Z , · ) , which yield di ﬀ erent arithmetical proportions . More importantly , it allows us to derive analogical proportions between two di ﬀ erent domains , e . g . numbers and words ( 26 ) . This distinction is not made in any of the aforementioned articles . ( 3 ) As a consequence , we could prove in Theorem 28 that all of Lepage’s axioms ( except for symmetry ) —which are taken for granted in the aforementioned articles—are not axioms , but properties which may or may not hold in a speciﬁc structure . This has critical consequences , as structures satisfying some or all of Lepage’s axioms behave di ﬀ erently than structures in which the properties fail . For further references on analogical reasoning we refer the interested reader to ( Hall , 1989 ) and ( Prade & Richard , 2014 ) . 7 . 1 . Boolean Proportions . Miclet and Prade ( Miclet & Prade , 2009 ) ( cf . Prade & Richard , 2010 , 2017 ) and Klein ( Klein , 1982 ) study analogical proportions between boolean elements which corre - spond in our general framework to boolean proportions within the speciﬁc 2 - element boolean algebra BOOL ( deﬁned in Section 2 ) , and which are related to set proportions as studied in Section 5 . 1 . In a recent paper ( Anti´c , 2023a ) , we compare our model to the frameworks of ( Miclet & Prade , 2009 ) and ( Klein , 1982 ) in detail and derive the following conclusions : ( 1 ) In ( Anti´c , 2023a ) , we derive , for every set of boolean constants B ⊆ BOOL : ( BOOL , ∨ , ¬ , B ) | = a : b : : c : d ⇔ ( a = b and c = d ) or ( a , b and c , d ) . Surprisingly , this turns out to be equivalent to Klein’s ( Klein , 1982 ) characterization of boolean proportions . ( 2 ) Miclet and Prade’s ( Miclet & Prade , 2009 ) deﬁnition , on the other hand , does not consider the proportions 0 : 1 : : 1 : 0 and 1 : 0 : : 0 : 1 to be in boolean proportion , ‘justiﬁed’ on page 642 as follows : The two other cases , namely 0 : 1 : : 1 : 0 and 1 : 0 : : 0 : 1 , do not ﬁt the idea that a is to b as c is to d , since the changes from a to b and from c to d are not in the same sense . They in fact correspond to cases of maximal analogical dissimilarity , where ‘ d is not at all to c what b is to a ’ , but rather ‘ c is to d what b is to a ’ . Arguably , this is counter - intuitive as in case negation is available ( which it implicitly is in ( Miclet & Prade , 2009 ) ) , common sense tells us that ‘ a is to its negation ¬ a what c is to its negation ¬ c ’ makes sense , and z → ¬ z ( or , equivalently , ¬ z → z ) is therefore a plausible characteristic justiﬁcation of 0 : 1 : : 1 : 0 and 1 : 0 : : 0 : 1 in our framework . These correspondences are promising as our model was not explicitly geared towards the boolean setting and provide further evidence for the applicability of our framework . 7 . 2 . Word Proportions . A conceptually related approach to solving analogical word equations is given by Dastani , Indurkhya , and Scha ( 2003 ) . At this point , it is not entirely clear how our framework relates to the rather complicated model of ( Dastani et al . , 2003 ) built on top of concepts such as ‘gestalts’ of sequential patterns , structural information theory ( SIT ) , algebraic coding systems for SIT , information load , representation systems , local homomorphism , constraints , et cetera . We challenge the reader to ﬁnd instances where the model of ( Dastani et al . , 2003 ) is more expressive—in the word domain—than our model , which would ( partially ) justify their heavy machinery . To give a glimpse of what we mean , consider the following simple example ( cf . Navarrete & Dartnell , 2017 , p . 4 ) . ANALOGICAL PROPORTIONS 31 Example 65 . Let Σ : = { a , b , c , d } be an alphabet . Deﬁne A : = ( Σ + , · A , succ A ) and B : = ( Σ + , · B , succ B ) via succ A ( a ) : = b , succ A ( b ) : = c , succ A ( c ) : = d , succ A ( d ) : = da ( 40 ) and succ B ( d ) : = c , succ B ( c ) : = b , succ B ( b ) : = a , succ B ( a ) : = ad , extended to words lexicographically . 10 Consider the analogical equation in ( A , B ) given by abc : abcd : : dcb : x . This equation is asking for a word which is to dcb in B what abcd is to abc in A . Observe that we obtain abcd from abc by concatenating the ‘successor’ of c at the end of abc . Since there is a unique e 2 : = ( d , c , b ) satisfying ( z 1 z 2 z 3 ) B ( d , c , b ) = dcb and ( z 1 z 2 z 3 · succ ( z 3 ) ) B ( d , c , b ) = dcba ( notice that the empty word does not occur in B ) , the solution z = dcba is characteristically justiﬁed by the Uniqueness Lemma 23 via the justiﬁcation abc → abcd : · dcb → dcba . z 1 z 2 z 3 z 1 z 2 z 3 · succ ( z 3 ) ( unique ) z 1 z 2 z 3 / abc z 1 z 2 z 3 / dcb ( unique ) ( unique ) z 1 z 2 z 3 / abc z 1 z 2 z 3 / dcb ( unique ) Dastani et al . ( 2003 ) obtain the same solution in a di ﬀ erent way by using the algebras generated by the letters in Σ and operators ( named in their terminology ‘gestalts’ ) such as ‘iteration’ , ‘successor’ , ‘symmetry’ , ‘alternation’ , ‘representation systems’ , et cetera , and , ﬁnally , by computing the solution dcba via ‘local homomorphisms’ . 7 . 3 . Category Theory . In mathematics , category theory ( cf . Awodey , 2010 ) is a branch of algebra devoted to formalizing structural analogies . Roughly , the key axiom for a ‘collection of arrows’ to form a category requires that to any pair of arrows f : a → b ∈ Arr ( a , b ) and g : b → c ∈ Arr ( b , c ) there is an arrow g ◦ f : a → c ∈ Arr ( a , c ) , called the composite of f and g . There is a striking similarity between an arrow f : a → b ∈ Arr ( a , b ) in a category and a justiﬁcation s → t ∈ Jus ( a , b ) , which leads to the question whether the collection of all justiﬁcations ( ‘arrows’ ) of all pairs of elements forms a category ; particularly , whether to each pair of justiﬁcations s → t ∈ Jus ( a , b ) and r → u ∈ Jus ( b , c ) there is a ‘composite’ justiﬁcation s → t ◦ r → u ∈ Jus ( a , c ) . The following counter - example shows that this is , in general , not the case : consider the algebra A : = ( { a , b , c } , f ) , where f is given by ( we omit the loop f ( b ) : = b in the ﬁgure ) 10 See https : / / en . wikipedia . org / wiki / Lexicographic _ order . 32 ANALOGICAL PROPORTIONS a b c f f We have z → f ( z ) ∈ Jus ( a , b ) and f ( z ) → z ∈ Jus ( b , c ) , but there is no non - trivial justiﬁcation in Jus ( a , c ) . It is interesting , however , to study analogical proportions in algebras where the justiﬁcations do form a category , which is related to Problem 32 . This is left as future work . 8 . F uture W ork This theoretical paper introduces and studies central properties of analogical proportions within the general setting of universal algebra and ( the functional fragment of ) ﬁrst - order logic , and within the speciﬁc domains of sets and numbers . 8 . 1 . Multiple Variables . One way to generalize our notion of an analogical equation is to allow multiple variables and higher - order terms to occur in di ﬀ erent parts of an analogical equation as , for example , in 2 + x 1 : 3 + x 1 : : 5 + x 1 + x 2 : x 3 . ( 41 ) Here we are asking for a triple d = ( d 1 , d 2 , d 3 ) —the solution to ( 41 ) —satisfying the arithmetical proportion 2 + d 1 : 3 + d 1 : : 5 + d 1 + d 2 : d 3 . For instance , in ( Z , + , − , Z ) a solution is given by ( 2 , 0 , 8 ) yielding the di ﬀ erence proportion ( cf . The - orem 51 ) ( Z , + , − , Z ) | = 4 : 5 : : 7 : 8 . 8 . 2 . Systems of Analogical Equations and Proportions . In this paper , we have considered only single analogical equations and proportions . We have argued in 31 that the property of being in analogical proportion is a local property . An interesting way to express and analyze global properties of an algebra is to study systems of analogical equations and proportions , where we can express multiple relationships between elements , of the form a 1 : b 1 : : c 1 : x . . . a n : b n : : c n : x . Here solutions are constrained by multiple equations and the identity S ol ( A , B )   a 1 : b 1 : : c 1 : x . . . a n : b n : : c n : x   = S ol ( A , B ) ( a 1 : b 1 : : c 1 : x ) ∩ . . . ∩ S ol ( A , B ) ( a n : b n : : c n : x ) ANALOGICAL PROPORTIONS 33 shows that we can reduce solving systems of equations to solving single equations . We can further generalize the framework by considering inﬁnite systems of analogical equations and proportions , for example expressed via universal quantiﬁcation . For instance , consider the inﬁnite list of proportions , where e ∈ A is a ﬁxed element and A = ( A , · ) is an inﬁnite algebra with · being a binary operation : ∀ a ∈ A : a : a : : a : a · e . ( 42 ) By determinism ( 20 ) —shown in Theorem 28 to hold in any algebra A —we know that ( 42 ) implies a · e = a , which means that we can interpret ( 42 ) as a deﬁnition of e being a neutral element in A in terms of analogical proportions . 8 . 3 . Algorithms . From a practical point of view , the main task for future research is to develop al - gorithms for the computation of some or all solutions to analogical equations as deﬁned in this paper . This problem is highly non - trivial in the general case and fairly complicated even in concrete cases ( see 66 ) . A reasonable starting point is therefore to ﬁrst study small concrete mathematical domains such as , for example , the booleans or small number ﬁelds ( e . g . the integers modulo m , Z m , for some small m ) from the computational perspective . After that a reasonable next step is to study analogical proportions in ﬁnitely representable inﬁnite structures ( cf . Ebbinghaus & Flum , 1999 ; Libkin , 2012 ) , which are more relevant to computer science and artiﬁcial intelligence research than the inﬁnite mod - els studied in classical universal algebra . Here interesting connections between , e . g . , word proportions and logics on words studied in algebraic formal language and automata theory will hopefully become available , which may then lead to concrete algorithms for solving analogical equations over words , trees , and related data structures . 8 . 4 . Axioms . In Section 4 . 3 , we argued that Lepage’s ( 2003 ) central permutation axiom—a critical axiom assumed by many authors ( e . g . Barbot et al . , 2019 ) —strong inner reﬂexivity , and strong reﬂex - ivity axioms are in general not satisﬁed as there are algebras in which these axioms fail , justiﬁed by counter - examples ( Theorem 28 ) . It is interesting to investigate in which structures some of his axioms hold and to provide general characterizations ( see Problem 30 ) . 8 . 5 . Applications to AI . Another key line of research is to apply our model to various AI - related problems such as , e . g . , common sense reasoning , formalizing metaphors , learning by analogy , and computational creativity . In Theorem 28 we have seen that analogical proportions are non - monotonic in nature , and it is important to investigate potential connections to non - monotonic reasoning in detail—itself a central research area of logic - based artiﬁcial intelligence prominently formalized by ( Gelfond & Lifschitz , 1991 ) in answer set programming ( cf . Brewka et al . , 2011 ) . Here interesting and surprising phenomena may occur . Moreover , it will be useful ( and challenging ) to fully apply our model to logic programming ( cf . Apt , 1990 ) by ﬁrst introducing appropriate algebraic operations on the space of all programs ( Anti´c , 2023c , 2023d ) , and then by considering analogical proportions between logic programs of the form P : Q : : R : S ( Anti´c , 2023b ) —in combination with unexpected or ‘creative’ proportions , this line of research may lead to interesting formalizations of computational creativity ( Boden , 1998 ) . We wish to expand this study to other domains relevant for computer sci - ence and artiﬁcial intelligence as , for instance , trees , graphs , automata , neural networks , et cetera . More broadly speaking , from the point of view of computational creativity , it is interesting to analyze unexpected ( directed ) analogical proportions as in Examples 2 , 55 , and 19 , and to try to ﬁnd a quali - tative notion of the degree of creativity of a solution to an analogical proportion in terms of its set of justiﬁcations . For instance , why does the solution x = 9 of the arrow equation 20 → 4 : · 30 → x in 19 appear to be more ‘creative’ than x = 6 ? Is there a relationship between the degree of unexpectedness 34 ANALOGICAL PROPORTIONS or creativity of an analogical proportion and the algebraic structure of its set of justiﬁcation ? Related to this question , it will often be useful to have an evaluation criterion for the plausibility of an ana - logical proportion . In the setting of logic programming described before , for instance , the user may provide sets of positive and negative examples to impose additional constraints on solutions to ana - logical equations . In general , algorithmically ranking analogical proportions and formulating general principles for evaluating the plausibility of solutions to analogical equations is crucial and non - trivial . 8 . 6 . Universal Algebra . From a mathematical point of view , relating analogical proportions to other concepts of universal algebra and related subjects is an interesting line of research . Speciﬁcally , studying analogical proportions in abstract mathematical structures like , for example , various kinds of lattices , semigroups and groups , rings , et cetera , is particularly interesting in the case of proportions between objects from di ﬀ erent domains . Here it will be essential to study the relationship between properties of elements like being ‘neutral’ or ‘absorbing’ and their proportional properties ( e . g . 53 and 55 ; and see the discussion in the last paragraph of Section 8 . 2 ) . At this point—due to the author’s lack of expertise—it is not clear how exactly analogical proportions ﬁt into the overall landscape of universal algebra and relating analogical proportions to other concepts of algebra and logic is therefore an important line of future research . In this paper , we have studied analogical proportions between elements of possibly di ﬀ erent alge - bras having the same underlying language L . It is challenging to generalize the framework to algebras over di ﬀ erent languages , which requires an alignment of operations , possibly of di ﬀ erent arity . For this , it might be useful to study meta - proportions between algebras of the form A : B : : C : D . 8 . 7 . Logical Extensions . In this paper , we have studied the functional case expressed via algebras and functional structures containing no relations and via rewrite formulas of the special logical form ( 38 ) , not containing relation symbols other than equality . An important next step is to enlarge the notion of a rewrite formula to include relation symbols and other logical constructs . This is chal - lenging as allowing arbitrary formulas yields an overﬁtting where , in some domains , all elements are in analogical proportion . For example , consider the structure ( N , succ , 0 ) , where succ : N → N is the successor function . In this structure , we can identify every natural number a with the numeral a : = succ a ( 0 ) . Hence , given some natural numbers a , b , c , d ∈ N , the formula ϕ ( x , y ) : ≡ ( x = a ∧ y = b ) ∨ ( x = c ∧ y = d ) characteristically justiﬁes a : b : : c : d since ( N , succ , 0 ) | = ϕ ( a ′ , b ′ ) and ( N , succ , 0 ) | = ϕ ( c ′ , d ′ ) holds i ﬀ a = a ′ , b = b ′ , c = c ′ , and d = d ′ . The challenge is therefore to ﬁnd generalizations of rewrite formulas which do not lead to overﬁtting . A reasonable starting point is to consider variants of rewrite formulas as , for example , formulas of the form ∃ z [ xRs ( z ) ∧ yRt ( z ) ] , where R is an arbitrary binary relation symbol ( other than equality ) . 8 . 8 . Term Rewriting . Lastly , it is interesting to examine the role of term rewriting ( cf . Baader & Nipkow , 1998 ) in analogical reasoning . More precisely , in this paper justiﬁcations of analogical proportions have the form s → t , for some terms s and t , which are rewriting rules as studied in term rewriting . This raises the question whether methods of term rewriting can be applied to reasoning about analogical proportions . References 35 9 . C onclusion This paper introduced from ﬁrst principles an abstract algebraic framework of analogical propor - tions in the general setting of universal algebra . This enabled us to compare mathematical objects possibly across di ﬀ erent domains in a uniform way which is crucial for AI - systems . It turned out that our notion of analogical proportions has appealing mathematical properties . We showed that analogical proportions are compatible with injective functional transformations ( Theorem 24 ) and structure - preserving mappings ( Theorem 37 ) as desired . We further discussed Lepage’s ( 2003 ) ax - ioms and argued why in general we disagree with all of his axioms except for symmetry , while we agree with four axioms added in this paper , namely inner symmetry , inner reﬂexivity , reﬂexivity , and determinism ( Theorem 28 ) . Moreover , it turned out that analogical proportions are non - monotonic in nature , which may have interesting connections to non - monotonic reasoning . We then compared our framework with two recently introduced frameworks of analogical proportions from the literature ( Miclet et al . , 2008 ; Stroppa & Yvon , 2006 ) within the concrete domains of sets and numbers , and in each case we either disagreed with the notion from the literature justiﬁed by some counter - example or we showed that our model yields strictly more justiﬁable solutions . Finally , we showed that our model has a natural logical interpretation in terms of model - theoretic types . This provides evidence for its applicability . In a broader sense , this paper is a ﬁrst step towards a theory of analogical reason - ing and learning systems with potential applications to fundamental AI - problems like common sense reasoning and computational learning and creativity . C onflict of interest The authors declare that they have no conﬂict of interest . R eferences Anti´c , C . ( 2023a ) . Boolean proportions . https : / / arxiv . org / pdf / 2109 . 00388 . pdf . Anti´c , C . ( 2023b ) . Logic program proportions . Annals of Mathematics and Artiﬁcial Intelligence . https : / / doi . org / 10 . 1007 / s10472 - 023 - 09904 - 8 . Anti´c , C . ( 2023c ) . Sequential composition of answer set programs . https : / / arxiv . org / pdf / 2104 . 12156 . pdf . Anti´c , C . ( 2023d ) . Sequential composition of propositional logic programs . https : / / arxiv . org / pdf / 2009 . 05774 . pdf . Apt , K . R . ( 1990 ) . Logic programming . In van Leeuwen , J . ( Ed . ) , Handbook of Theoretical Computer Science , Vol . B , pp . 493 – 574 . Elsevier , Amsterdam . Awodey , S . ( 2010 ) . Category Theory ( 2 edition ) . , Vol . 52 of Oxford Logic Guides . Oxford University Press , New York . Baader , F . , & Nipkow , T . ( 1998 ) . Term Rewriting and All That . Cambridge University Press , Cam - bridge UK . Barbot , N . , Miclet , L . , & Prade , H . ( 2019 ) . Analogy between concepts . Artiﬁcial Intelligence , 275 , 487 – 539 . Boden , M . A . ( 1998 ) . Creativity and artiﬁcial intelligence . Artiﬁcial Intelligence , 103 ( 1 - 2 ) , 347 – 356 . Brewka , G . , Eiter , T . , & Truszczynski , M . ( 2011 ) . Answer set programming at a glance . Communi - cations of the ACM , 54 ( 12 ) , 92 – 103 . Burris , S . , & Sankappanavar , H . ( 2000 ) . A Course in Universal Algebra . http : / / www . math . hawaii . edu / ˜ralph / Classes / 619 / univ - algebra . pdf . Chang , C . C . , & Keisler , H . J . ( 1973 ) . Model Theory . North - Holland , Amsterdam . 36 References Correa , W . , Prade , H . , & Richard , G . ( 2012 ) . When intelligence is just a matter of copying . In Raedt , L . D . , Bessiere , C . , Dubois , D . , Doherty , P . , Frasconi , P . , Heintz , F . , & Lucas , P . ( Eds . ) , ECAI 2012 , Vol . 242 of Frontiers in Artiﬁcial Intelligence and Applications , pp . 276 – 281 . Dastani , M . , Indurkhya , B . , & Scha , R . ( 2003 ) . Analogical projection in pattern perception . Journal of Experimental & Theoretical Artiﬁcial Intelligence , 15 ( 4 ) , 489 – 511 . Ebbinghaus , H . - D . , & Flum , J . ( 1999 ) . Finite Model Theory ( 2 edition ) . Springer Monographs in Mathematics . Springer - Verlag , Berlin / Heidelberg . Eiter , T . , Ianni , G . , & Krennwallner , T . ( 2009 ) . Answer set programming : a primer . In Reasoning Web . Semantic Technologies for Information Systems , volume 5689 of Lecture Notes in Computer Science , pp . 40 – 110 . Springer , Heidelberg . Falkenhainer , B . , Forbus , K . D . , & Gentner , D . ( 1989 ) . The structure - mapping engine : algorithm and examples . Artiﬁcial Intelligence , 41 ( 1 ) , 1 – 63 . Gelfond , M . , & Lifschitz , V . ( 1991 ) . Classical negation in logic programs and disjunctive databases . New Generation Computing , 9 ( 3 - 4 ) , 365 – 385 . Gentner , D . ( 1983 ) . Structure - mapping : a theoretical framework for analogy . Cognitive Science , 7 ( 2 ) , 155 – 170 . Gust , H . , Krumnack , U . , K¨uhnberger , K . - U . , & Schwering , A . ( 2008 ) . Analogical reasoning : a core of cognition . K¨unstliche Intelligenz , 22 ( 1 ) , 8 – 12 . Hall , R . P . ( 1989 ) . Computational approaches to analogical reasoning : a comparative analysis . Artiﬁ - cial Intelligence , 39 ( 1 ) , 39 – 120 . Hinman , P . G . ( 2005 ) . Fundamentals of Mathematical Logic . A K Peters , Wellesley , MA . Hofstadter , D . ( 2001 ) . Analogy as the core of cognition . In Gentner , D . , Holyoak , K . J . , & Kokinov , B . K . ( Eds . ) , The Analogical Mind : Perspectives from Cognitive Science , pp . 499 – 538 . MIT Press / Bradford Book , Cambridge MA . Hofstadter , D . , & Mitchell , M . ( 1995 ) . The copycat project : a model of mental ﬂuidity and analogy - making . In Fluid Concepts and Creative Analogies . Computer Models of the Fundamental Mechanisms of Thought , chap . 5 , pp . 205 – 267 . Basic Books , New York . Hofstadter , D . , & Sander , E . ( 2013 ) . Surfaces and Essences . Analogy as the Fuel and Fire of Thinking . Basic Books , New York . Klein , S . ( 1982 ) . Culture , mysticism and social structure and the calculation of behavior . In ECAI 1982 , pp . 141 – 146 . Krieger , M . H . ( 2003 ) . Doing Mathematics : Convention , Subject , Calculation , Analogy . World Sci - entiﬁc , New Jersey . Lepage , Y . ( 2003 ) . De L’Analogie . Rendant Compte de la Commutation en Linguistique . Habilitation ` a diriger les recherches , Universit´e Joseph Fourier , Grenoble . Libkin , L . ( 2012 ) . Elements of Finite Model Theory . Springer - Verlag , Berlin / Heidelberg . Miclet , L . , Bayoudh , S . , & Delhay , A . ( 2008 ) . Analogical dissimilarity : deﬁnition , algorithms and two experiments in machine learning . Journal of Artiﬁcial Intelligence Research , 32 , 793 – 824 . Miclet , L . , & Prade , H . ( 2009 ) . Handling analogical proportions in classical logic and fuzzy logics settings . In Sossai , C . , & Chemello , G . ( Eds . ) , ECSQARU 2009 , LNAI 5590 , pp . 638 – 650 . Springer - Verlag , Berlin / Heidelberg . Navarrete , J . A . , & Dartnell , P . ( 2017 ) . Towards a category theory approach to analogy : analyzing re - representation and acquisition of numerical knowledge . Computatinal Biology , 13 ( 8 ) , 1 – 38 . P´olya , G . ( 1954 ) . Induction and Analogy in Mathematics , Vol . 1 of Mathematics and Plausible Rea - soning . Princeton University Press , Princeton , New Jersey . Prade , H . , & Richard , G . ( 2010 ) . Reasoning with logical proportions . In KR 2010 , pp . 545 – 555 . AAAI Press . References 37 Prade , H . , & Richard , G . ( 2014 ) . A short introduction to computational trends in analogical reason - ing . In Prade , H . , & Richard , G . ( Eds . ) , Approaches to Analogical Reasoning : Current Trends , Studies in Computational Intelligence 548 , pp . 1 – 22 . Springer - Verlag , Berlin / Heidelberg . Prade , H . , & Richard , G . ( 2017 ) . Analogical proportions and analogical reasoning — an introduction . In Aha , D . W . , & Lieber , J . ( Eds . ) , ICCBR 2017 , LNAI 10339 , pp . 16 – 32 . Springer , Berlin , Heidelberg . Sowa , J . F . , & Majumdar , A . K . ( 2003 ) . Analogical reasoning . In Ganter , B . , Moor , A . , & Lex , W . ( Eds . ) , ICCS 2003 , LNAI 2746 , pp . 16 – 36 . Springer - Verlag , Berlin / Heidelberg . Stroppa , N . , & Yvon , F . ( 2006 ) . Formal models of analogical proportions . Technical Report D008 , Telecom ParisTech - ´Ecole Nationale Sup´erieure de T´el´ecommunications , T´el´ecom Paris . Winston , P . H . ( 1980 ) . Learning and reasoning by analogy . Communications of the ACM , 23 ( 12 ) , 689 – 703 . Wos , L . ( 1993 ) . The problem of reasoning by analogy . Journal of Automated Reasoning , 10 ( 3 ) , 421 – 422 . 38 References A ppendix Example 66 . Explicating 19 , we wish to compute all solutions to the analogical equation in the multiplicative algebra M : = ( N 2 , · , N 2 ) given by 20 : 4 : : 30 : x . ( 43 ) Recall that N 2 = { 2 , 3 , . . . } consists of the natural numbers not containing 0 and 1—this will allow us to bound the number of generalizations of a given number by the number of its prime factors . Following 16 , we ﬁrst compute all solutions to the arrow equation in M given by 20 → 4 : · 30 → x . ( 44 ) The justiﬁcation z → 4 is unique to x = 4 , which immediately entails that it is a solution to ( 44 ) . Notice that in the algebra ( Q , · ) , the rewrite rule z → z 5 is a justiﬁcation of 20 → 4 : · 30 → d i ﬀ d = 6 , which yields the solution x = 305 = 6 . Unfortunately , this justiﬁcation is not available in M and to prove that 6 is a solution to 20 → 4 : · 30 → x , we need to show that either Jus M ( 20 , 4 ) ∪ Jus M ( 30 , 6 ) contains only trivial justiﬁcations , or that Jus M ( 20 → 4 : · 30 → 6 ) is a non - empty maximal set of justiﬁcations with respect to 6 . Here a natural question arises : Are x = 4 , 6 the only solutions to the arrow equation ( 44 ) in M ? The answer is ‘no’ as we can show that , unexpectedly , x = 9 is another justiﬁable solution ! We begin by computing all M - generalizations of 20 , 4 , and 30 . For this , it will be convenient to ﬁrst compute their unique prime decompositions : 20 = 2 · 2 · 5 and 4 = 2 · 2 and 30 = 2 · 3 · 5 . ( 45 ) These numbers are similar in the following sense : ( 1 ) The only di ﬀ erence between 20 and 30 is the second prime factor ; both numbers are divisible by 2 and 5 . ( 2 ) The only di ﬀ erence between 20 and 4 is that 4 is not divisible by 5 ; both numbers are divisible by 2 and 4 . ( 3 ) The numbers 4 and 30 have the ﬁrst prime factor 2 in common . These similarities are reﬂected in the computation of their M - generalizations : gen M ( 20 ) =  2 · 2 · 5 z 1 · 2 · 5 z 1 · z 1 · 5 2 · z 2 · 5 2 · 2 · z 3 z 1 · z 2 · 5 2 · z 2 · z 3 z 1 · 2 · z 3 z 1 · z 2 · z 3 z 1 · 2 z 1 · 5 z 1 · z 2 z 1 · z 1 · z 2 z 1  =    20 10 z 5 z 2 4 z 5 z 1 z 2 2 z 1 z 2 z 1 z 2 z 3 2 z 5 z z 1 z 2 z 21 z 2 z    References 39 gen M ( 30 ) =  2 · 3 · 5 z 1 · 3 · 5 2 · z 2 · 5 2 · 3 · z 3 z 1 · z 2 · 5 2 · z 2 · z 3 z 1 · 3 · z 3 z 1 · z 2 · z 3 z 1 · 2 z 1 · 5 z 1 · z 2 z 1 · 3 z 1  =  30 15 z 10 z 6 z 5 z 1 z 2 2 z 1 z 2 3 z 1 z 3 z 1 z 2 z 3 2 z 5 z z 1 z 2 3 z z  gen M ( 4 ) = { 2 · 2 , 2 · z 2 , z 1 · 2 , z 1 · z 2 , z 1 · z 1 , z 1 } = { 4 , 2 z , z 1 z 2 , z 2 , z } . This yields gen M ( 20 , 30 ) = gen M ( 20 ) ∩ gen M ( 30 ) = { 10 z , 5 z 1 z 2 , 2 z 1 z 2 , z 1 z 2 z 3 , 5 z , 2 z , z 1 z 2 , z } . We now compute all non - empty sets of justiﬁcations Jus M ( 20 → 4 : · 30 → d ) , for all d ∈ N 2 , with the following procedure ( cf . 17 ) : for each M - generalization s ( z ) ∈ gen M ( 20 , 30 ) and each witness ( e 1 , e 2 ) satisfying 1112 20 = s ( e 1 ) and 30 = s ( e 2 ) , ( 46 ) and for each t ( z ) ∈ gen M ( 4 ) satisfying 4 = t ( e 1 ) , we add s → t to Jus M ( 20 → 4 : · 30 → t ( e 2 ) ) . First of all , notice that z → 4 is ( only ) in Jus M ( 20 → 4 : · 30 → 4 ) , which immediately yields the solution x = 4 to ( 44 ) ( cf . 25 ) . ( 1 ) s ( z ) = 10 z : The only witnesses e 1 , e 2 ∈ M satisfying ( 46 ) are e 1 = 2 and e 2 = 3 , and the only t 1 , t 2 ∈ gen M ( 4 ) satisfying 4 = t ( 2 ) are t 1 ( z ) = 2 z and t 2 ( z ) = z 2 . We therefore have 10 z → 2 z ∈ Jus M ( 20 → 4 : · 30 → t 1 ( 3 ) ) = Jus M ( 20 → 4 : · 30 → 6 ) and 10 z → z 2 ∈ Jus M ( 20 → 4 : · 30 → t 2 ( 3 ) ) = Jus M ( 20 → 4 : · 30 → 9 ) . This can be depicted as follows : 20 → 4 : · 30 → 6 ; 9 . 10 z 2 z ; z 2 z / 2 z / 3 ( unique ) z / 2 z / 3 Since 3 is a unique witness satisfying s ( 3 ) = 30 , in case 10 z → 2 z is a justiﬁcation of 20 → 4 : · 30 → d , we must have d = 2 · 3 = 6 , which shows that Jus M ( 20 → 4 : · 30 → 6 ) is 11 See 15 . 12 We omit here the superscript from notation , that is , we write s ( e 1 ) instead of s M ( e 1 ) et cetera . 40 References non - empty and subset maximal with respect to 6 ( see the Uniqueness Lemma 23 ) . We have thus derived M | = 20 → 4 : · 30 → 6 . Notice that the justiﬁcation 10 z → 2 z emulates the justiﬁcation z → z 5 from above . The same line of reasoning with 10 z → z 2 instead of 10 z → 2 z shows M | = 20 → 4 : · 30 → 9 . ( 2 ) s ( z 1 , z 2 ) = 5 z 1 z 2 : The only e 1 ∈ M 2 satisfying 20 = s ( e 1 ) is given by ( 2 , 2 ) . There are two e ( 1 ) 2 , e ( 2 ) 2 ∈ M 2 satisfying 30 = s ( e ( 1 ) 2 ) = s ( e ( 2 ) 2 ) given by e ( 1 ) 2 = ( 2 , 3 ) and e ( 2 ) 2 = ( 3 , 2 ) . Moreover , we have ﬁve t 1 ( z 1 , z 2 ) , t 2 ( z 1 , z 2 ) , t 3 ( z 1 , z 2 ) , t 4 ( z 1 , z 2 ) , t 5 ( z 1 , z 2 ) ∈ gen M ( 4 ) satisfying 4 = t i ( 2 , 2 ) , 1 ≤ i ≤ 5 , given by t 1 ( z 1 , z 2 ) = 2 z 1 , t 2 ( z 1 , z 2 ) = 2 z 2 , t 3 ( z 1 , z 2 ) = z 21 , t 4 ( z 1 , z 2 ) = z 22 , t 5 ( z 1 , z 2 ) = z 1 z 2 . We therefore have the following justiﬁcations : 13 20 → 4 : · 30 → 4 ; 6 , 5 z 1 z 2 2 z 1 ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) 20 → 4 : · 30 → 6 ; 4 , 5 z 1 z 2 2 z 2 ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) 20 → 4 : · 30 → 4 ; 9 , 5 z 1 z 2 z 21 ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) 13 To be more succinct , we have summarized here two diagrams into one separated by semicolons . References 41 20 → 4 : · 30 → 9 ; 4 . 5 z 1 z 2 z 22 ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) 20 → 4 : · 30 → 6 5 z 1 z 2 z 1 z 2 ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) ( z 1 , z 2 ) / ( 2 , 2 ) ( z 1 , z 2 ) / ( 2 , 3 ) ; ( 3 , 2 ) Notice the symmetries between the ﬁrst and second , and between the third and fourth diagrams above ; in what follows , we will only mention one of multiple symmetric cases . ( 3 ) s ( z 1 , z 2 ) = 2 z 1 z 2 : In the remaining cases , we present only the self - explaining diagrams enu - merating all valid arrow proportions : 20 → 4 : · 30 → 6 ; 10 . 2 z 1 z 2 2 z 1 ( z 1 , z 2 ) / ( 2 , 5 ) ( z 1 , z 2 ) / ( 5 , 3 ) ; ( 3 , 5 ) ( z 1 , z 2 ) / ( 2 , 5 ) ( z 1 , z 2 ) / ( 5 , 3 ) ; ( 3 , 5 ) We see here that 20 → 4 : · 30 → 10 has the justiﬁcation 2 z 1 z 2 → 2 z 1 in M , which is also a justiﬁcation of 20 → 4 : · 30 → 6 ; on the other hand , we have seen above that 5 z 1 z 2 → 2 z 1 and 5 z 1 z 2 → 2 z 2 are justiﬁcations of 20 → 4 : · 30 → 6 , but not of 20 → 4 : · 30 → 10 , which shows that , up to this point , Jus M ( 20 → 4 : · 30 → 10 ) is strictly contained in Jus M ( 20 → 4 : · 30 → 6 ) and therefore not subset maximal with respect to 10 . The case t ( z 1 , z 2 ) = 2 z 2 is analogous . We further have the arrow proportion 20 → 4 : · 30 → 25 ; 9 . 2 z 1 z 2 z 21 ( z 1 , z 2 ) / ( 2 , 5 ) ( z 1 , z 2 ) / ( 5 , 3 ) ; ( 3 , 5 ) ( z 1 , z 2 ) / ( 2 , 5 ) ( z 1 , z 2 ) / ( 5 , 3 ) ; ( 3 , 5 ) The only remaining case t ( z 1 , z 2 ) = z 22 is analogous . ( 4 ) s ( z 1 , z 2 , z 3 ) = z 1 z 2 z 3 : 42 References 20 → 4 : · 30 → 6 ; 10 ; 4 . z 1 z 2 z 3 2 z 2 ( z 1 , z 2 , z 3 ) / ( 2 , 2 , 5 ) ( z 1 , z 2 , z 3 ) / ( 2 , 3 , 5 ) ; ( 2 , 5 , 3 ) ; ( 3 , 2 , 5 ) ( z 1 , z 2 , z 3 ) / ( 2 , 2 , 5 ) ( z 1 , z 2 , z 3 ) / ( 2 , 3 , 5 ) ; ( 2 , 5 , 3 ) ; ( 3 , 2 , 5 ) Here it is su ﬃ cient to analyze the three cases ( 2 , 3 , 5 ) ; ( 2 , 5 , 3 ) ; ( 3 , 2 , 5 ) , where the second argument varies , instead of all six permutations of ( 2 , 3 , 5 ) since for 2 z 2 only the second argu - ment is relevant . The cases t ( z 1 , z 2 , z 3 ) = 2 z 1 and t ( z 1 , z 2 , z 3 ) = 2 z 3 are analogous . We further have the arrow proportions 20 → 4 : · 30 → 9 ; 25 ; 4 . z 1 z 2 z 3 z 2 2 ( z 1 , z 2 , z 3 ) / ( 2 , 2 , 5 ) ( z 1 , z 2 , z 3 ) / ( 2 , 3 , 5 ) ; ( 2 , 5 , 3 ) ; ( 3 , 2 , 5 ) ( z 1 , z 2 , z 3 ) / ( 2 , 2 , 5 ) ( z 1 , z 2 , z 3 ) / ( 2 , 3 , 5 ) ; ( 2 , 5 , 3 ) ; ( 3 , 2 , 5 ) The cases t ( z 1 , z 2 , z 3 ) = z 21 and t ( z 1 , z 2 , z 3 ) = z 23 are analogous . ( 5 ) s ( z 1 , z 2 ) = z 1 z 2 : 20 → 4 : · 30 → 2 ; 15 ; 6 ; 5 ; 3 ; 10 . z 1 z 2 z 1 ( z 1 , z 2 ) / ( 4 , 5 ) ( z 1 , z 2 ) / ( 2 , 15 ) ; ( 15 , 2 ) ; ( 6 , 5 ) ; ( 5 , 6 ) ; ( 3 , 10 ) ; ( 10 , 3 ) ( z 1 , z 2 ) / ( 4 , 5 ) ( z 1 , z 2 ) / ( 2 , 15 ) ; ( 15 , 2 ) ; ( 6 , 5 ) ; ( 5 , 6 ) ; ( 3 , 10 ) ; ( 10 , 3 ) The case t ( z 1 , z 2 ) = z 2 is analogous . We further have the arrow proportion 20 → 4 : · 30 → 4 ; 225 ; 36 ; 25 ; 9 ; 100 . z 1 z 2 z 21 ( z 1 , z 2 ) / ( 2 , 10 ) ( z 1 , z 2 ) / ( 2 , 15 ) ; ( 15 , 2 ) ; ( 6 , 5 ) ; ( 5 , 6 ) ; ( 3 , 10 ) ; ( 10 , 3 ) ( z 1 , z 2 ) / ( 2 , 10 ) ( z 1 , z 2 ) / ( 2 , 15 ) ; ( 15 , 2 ) ; ( 6 , 5 ) ; ( 5 , 6 ) ; ( 3 , 10 ) ; ( 10 , 3 ) The case t ( z 1 , z 2 ) = z 22 is analogous . The next case is : References 43 20 → 4 : · 30 → 4 ; 30 ; 12 ; 10 ; 6 ; 20 . z 1 z 2 2 z 1 ( z 1 , z 2 ) / ( 2 , 10 ) ( z 1 , z 2 ) / ( 2 , 15 ) ; ( 15 , 2 ) ; ( 6 , 5 ) ; ( 5 , 6 ) ; ( 3 , 10 ) ; ( 10 , 3 ) ( z 1 , z 2 ) / ( 2 , 10 ) ( z 1 , z 2 ) / ( 2 , 15 ) ; ( 15 , 2 ) ; ( 6 , 5 ) ; ( 5 , 6 ) ; ( 3 , 10 ) ; ( 10 , 3 ) The case t ( z 1 , z 2 ) = 2 z 2 is analogous . ( 6 ) s ( z ) = 5 z : 20 → 4 : · 30 → 6 . 5 z z ( unique ) z / 4 z / 6 ( unique ) z / 4 z / 6 Observe that transforming 20 into 4 means removing the prime factor 5 from 20 in ( 45 ) — transforming 30 ‘in the same way’ therefore means here to remove the prime factor 5 from 30 in ( 45 ) , yielding the solution x = 6 . This shows that 5 z → z emulates the justiﬁcation z → z 5 mentioned at the beginning of the example not available in M . ( 7 ) s ( z ) = 2 z : There is a unique e 1 = 10 with 20 = s ( e 1 ) —there is no t ( z ) ∈ gen M ( 4 ) satisfying 4 = t ( 10 ) . This shows that there is no justiﬁcation 2 z → t ( z ) of 20 → 4 : · 30 → d , for any d ∈ N 2 . ( 8 ) s ( z ) = z : There is a unique e 1 = 20 with 20 = s ( e 1 ) —there is no t ( z ) ∈ gen M ( 4 ) satisfying 4 = t ( 20 ) . This shows that there is no justiﬁcation z → t ( z ) of 20 → 4 : · 30 → d , for any d ∈ N 2 . To summarize , we have the following non - empty sets of justiﬁcations : Jus M ( 20 → 4 : · 30 → 6 ) =    10 z → 2 z 5 z 1 z 2 → 2 z 1 5 z 1 z 2 → 2 z 2 5 z 1 z 2 → z 1 z 2 2 z 1 z 2 → 2 z 1 2 z 1 z 2 → 2 z 2 z 1 z 2 z 3 → 2 z 1 z 1 z 2 z 3 → 2 z 2 z 1 z 2 z 3 → 2 z 3 z 1 z 2 → z 1 z 1 z 2 → z 2 z 1 z 2 → 2 z 1 z 1 z 2 → 2 z 2 5 z → z    , 44 References Jus M ( 20 → 4 : · 30 → 4 ) =   z → 4 5 z 1 z 2 → 2 z 1 5 z 1 z 2 → 2 z 2 5 z 1 z 2 → z 21 5 z 1 z 2 → z 22 z 1 z 2 z 3 → 2 z 1 z 1 z 2 z 3 → 2 z 2 z 1 z 2 z 3 → 2 z 3 z 1 z 2 z 3 → z 21 z 1 z 2 z 3 → z 22 z 1 z 2 z 3 → z 23 z 1 z 2 → z 21 z 1 z 2 → z 22 z 1 z 2 → 2 z 1 z 1 z 2 → 2 z 2   , Jus M ( 20 → 4 : · 30 → 9 ) =  10 z → z 2 5 z 1 z 2 → z 21 5 z 1 z 2 → z 22 2 z 1 z 2 → z 21 2 z 1 z 2 → z 22 z 1 z 2 z 3 → z 21 z 1 z 2 z 3 → z 22 z 1 z 2 z 3 → z 23 z 1 z 2 → z 21 z 1 z 2 → z 22  , Jus M ( 20 → 4 : · 30 → 25 ) =  2 z 1 z 2 → z 21 2 z 1 z 2 → z 22 z 1 z 2 z 3 → z 21 z 1 z 2 z 3 → z 22 z 1 z 2 z 3 → z 23 z 1 z 2 → z 2 1 z 1 z 2 → z 22  ( Jus M ( 20 → 4 : · 30 → 9 ) , Jus M ( 20 → 4 : · 30 → 10 ) =    2 z 1 z 2 → 2 z 1 2 z 1 z 2 → 2 z 2 z 1 z 2 z 3 → 2 z 1 z 1 z 2 z 3 → 2 z 2 z 1 z 2 z 3 → 2 z 3 z 1 z 2 → z 1 z 1 z 2 → z 2 z 1 z 2 → 2 z 1 z 1 z 2 → 2 z 2    ( Jus M ( 20 → 4 : · 30 → 6 ) , References 45 Jus M ( 20 → 4 : · 30 → d ) = { z 1 z 2 → 2 z 1 , z 1 z 2 → 2 z 2 } for all d ∈ { 30 , 12 , 20 } ( Jus M ( 20 → 4 : · 30 → 6 ) , Jus M ( 20 → 4 : · 30 → d ) = { z 1 z 2 → z 21 , z 1 z 2 → z 22 } for all d ∈ { 225 , 36 , 100 } ( Jus M ( 20 → 4 : · 30 → 4 ) , Jus M ( 20 → 4 : · 30 → 2 ) = { z 1 z 2 → z 1 , z 1 z 2 → z 2 } for all d ∈ { 2 , 15 , 5 , 3 } ( Jus M ( 20 → 4 : · 30 → 6 ) . We see that only x = 4 , 6 , 9 have maximal non - empty sets of justiﬁcations , proving S ol M ( 20 → 4 : · 30 → x ) = { 4 , 6 , 9 } . The solution x = 4 follows easily with z → 4 and 25 . The solution x = 6 is intuitive and has , among others , the natural justiﬁcations 10 z → 2 z and 5 z → z resembling z → z 5 in ( Q , · ) . Lastly , the solution x = 9 has the unique justiﬁcation 10 z → z 2 . We now want to compute all solutions in M to the directed analogical equation 20 : 4 : · 30 : x . ( 47 ) Recall from 16 that d ∈ M is a solution to 20 : 4 : · 30 : x i ﬀ d is a solution to 20 → 4 : · 30 → x and 30 is a solution to 4 → 20 : · d → x in M . We already know that 4 , 6 , and 9 are the only solutions to 20 → 4 : · 30 → x in M . We check whether 4 , 6 , and 9 are solutions to ( 47 ) separately : ( 1 ) There can be no justiﬁcation of 4 → 20 : · 4 → 30 in M —for example , given the M - generalization 2 z of 4 in M , there is no M - generalization t of 20 and 30 such that t ( 2 ) = 20 and t ( 2 ) = 30 , which can be depicted as follows : 4 → 20 : · 4 → 30 . 2 z no M - generalization ( unique ) z / 2 z / 2 ( unique ) z / 2 z / 2 This shows ∅ = Jus M ( 4 → 20 : · 4 → 30 ) ( Jus M ( 4 → 20 : · 4 → 20 ) = { 4 → 20 , . . . } , which means that 30 is not a solution to 4 → 20 : · 4 → x and , hence , 4 is not a solution to ( 47 ) : M 6 | = 20 : 4 : · 30 : 4 . ( 2 ) On the other hand , the justiﬁcations 4 → 20 : · 6 → 30 2 z 10 z z / 2 z / 3 ( unique ) z / 2 z / 3 ( unique ) 46 References and 4 → 20 : · 9 → 30 z 2 10 z z / 2 z / 3 ( unique ) z / 2 z / 3 ( unique ) show that 30 is a solution to 4 → 20 : · 6 → x and 4 → 20 : · 9 → x in M ( Uniqueness Lemma 23 ) , thus proving M | = 20 : 4 : · 30 : 6 and M | = 20 : 4 : · 30 : 9 . This shows that 6 and 9 are the only solutions to 20 : 4 : · 30 : x in M , that is , S ol M ( 20 : 4 : · 30 : x ) = { 6 , 9 } . It remains to check whether 6 and 9 are solutions to 20 : 4 : : 30 : x in ( 43 ) : ( 1 ) We ﬁrst verify that 6 is a solution by showing the remaining relation M | = 30 : 6 : · 20 : 4 . For this , we prove M | = 30 → 6 : · 20 → 4 and M | = 6 → 30 : · 4 → 20 . The ﬁrst relation is justiﬁed by 5 z → z , that is , 5 z → z is a justiﬁcation of 30 → 6 : · 20 → d in M , d ∈ M , i ﬀ there are e 1 , e 2 ∈ M such that 30 = 5 e 1 and 6 = e 1 and 20 = 5 e 2 and d = e 2 , which is equivalent to d = 4 . An analogous argument using the justiﬁcation z → 5 z proves the second relation . ( 2 ) Finally , we show that 9 is a solution by showing the remaining relation M | = 30 : 9 : · 20 : 4 . For this , we prove M | = 30 → 9 : · 20 → 4 and M | = 9 → 30 : · 4 → 20 . The ﬁrst relation is justiﬁed by 10 z → z 2 and the second by z 2 → 10 z by a similar argument as for 6 in the previous item . We have thus shown S ol M ( 20 : 4 : : 30 : x ) = { 6 , 9 } .