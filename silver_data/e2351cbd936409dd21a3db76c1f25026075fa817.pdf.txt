Self - Constructive High - Rate System Energy Modeling for Battery - Powered Mobile Systems Mian Dong and Lin Zhong Rice University System Energy Model Response y ( t ) : Energy consumed by the system in t y ( t ) = f ( x 1 ( t ) , x 2 ( t ) , … , x p ( t ) ) Predictors x i ( t ) : System status variables in t Rate ( 1 / t ) 0 . 01Hz 1Hz 100Hz A High - Rate Energy Model is needed to provide an energy reading at each OS scheduling interval 10ms Target System Data Acquisition Equipment Host PC 31 , 415 , 926 y ( t 1 ) x 1 ( t 1 ) x 2 ( t 1 ) … x p ( t 1 ) x 1 ( t 2 ) x 2 ( t 2 ) … x p ( t 2 ) x 1 ( t n ) x 2 ( t n ) … x p ( t n ) y ( t 2 ) y ( t n ) t = t 1 = t 2 = … = t n Model Construction Target System Data Acquisition Equipment Host PC 31 , 415 , 926 y ( t 1 ) x 1 ( t 1 ) x 2 ( t 1 ) … x p ( t 1 ) x 1 ( t 2 ) x 2 ( t 2 ) … x p ( t 2 ) x 1 ( t n ) x 2 ( t n ) … x p ( t n ) y ( t 2 ) y ( t n ) t = t 1 = t 2 = … = t n X ( t ) Y ( t ) Regression Model Construction Target System Data Acquisition Equipment Host PC 31 , 415 , 926 t = t 1 = t 2 = … = t n y ( t ) = β 0 + β 1 x 1 ( t ) + … + β p x p ( t ) β = argmin β ( ║ Y ( t ) − [ 1 X ( t ) ] β ║ 2 ) ^ Linear Model : Model Construction Target System Data Acquisition Equipment Host PC 31 , 415 , 926 t = t 1 = t 2 = … = t n y ( t i ) − y ( t i ) err ( t i ) = y ( t i ) ^ ^ ^ ^ ^ y ( t ) = β 0 + β 1 x 1 ( t ) + … + β p x p ( t ) Linear Model : Model Construction Mean Absolute Root - Mean - Square What are the limitations ? External Devices for energy measurement Deep Knowledge for predictor collection www . nokia . com Exclusive Model for a specific platform Fixed Model for all instances of the same platform Hardware & Usage suggest “personalized” models be constructed for a mobile system Dependencies of system energy models on Self - Constructive System Energy Modeling External Devices Deep Knowledge Exclusive Model Fixed Model Battery Interface Statistical Learning Personalized Model Batter y Interface State - of - the - art battery Interfaces are Low - rate / Inaccurate N85 T61 N900 Max Rate 4Hz 0 . 5Hz 0 . 1Hz Accuracy 67 % 82 % 58 % Accuracy = 100 % – Root _ Mean _ Square ( Instant _ Relative _ Error ) Errors in battery interface readings are Non - Gaussian High - Rate / Accurate System Energy Model Low - Rate / Inaccurate Battery Interface Statistical Learning 0 % 10 % 20 % 30 % 40 % 50 % 0 . 01 0 . 1 1 10 R M S o f R e l a t i v e E rr o r Rate ( Hz ) N900 T61 N85 Averaged battery interface readings have Higher Accuracy but Even Lower Rate y x Time y ( t ) y ( T ) x ( t ) x ( T ) Time High - rate data points Low - rate data points High - rate data points Low - rate data points Linear models are Independent on Time 1 . Model Molding 0 . 01Hz 1Hz 100Hz Y ( t H ) Y ( t L ) Y ( t VL ) X ( t H ) X ( t VL ) β ^ ^ β ^ 0 % 10 % 20 % 30 % 0 . 01 0 . 1 1 10 100 R M S o f R e l a t i v e E rr o r Rate ( Hz ) Battery Interface 0 % 10 % 20 % 30 % 0 . 01 0 . 1 1 10 100 R M S o f R e l a t i v e E rr o r Rate ( Hz ) Model Molding improves rate Battery Interface Molded Model 2 . Predictor Transformation x 1 ( t ) , x 2 ( t ) , … , x p ( t ) z 1 ( t ) , z 2 ( t ) , … , z L ( t ) Principle Component Analysis L ≤ p 0 % 10 % 20 % 30 % 0 . 01 0 . 1 1 10 100 R M S o f R e l a t i v e E rr o r Rate ( Hz ) PCA improves accuracy Battery Interface Molded Model Molded Model + PCA x y y j r j y = f ( x ) Training data points d j x j Δx j 3 . Total - Least - Square 0 % 10 % 20 % 30 % 0 . 01 0 . 1 1 10 100 R M S o f R e l a t i v e E rr o r Rate ( Hz ) TLS improves accuracy at high rate Battery Interface Molded Model Molded Model + PCA Molded Model + PCA + TLS Data Collector Sesame Model Constructor Predictor transformation Model Model Manager Operating System Bat I / F STATS Energy readings Stats readings Predictors Responses Model molding Application specific predictors Implementation N900 T61 Sesame is able to generate energy models with a rate up to 100Hz T61 N900 1Hz 95 % 86 % 100Hz 88 % 82 % Accuracy = 100 % – Root _ Mean _ Square ( Instant _ Relative _ Error ) Field Study Day 1 - 5 : Model Construction Day 6 : Model Evaluation Models were generated within 15 hours 0 % 10 % 20 % 30 % 7 9 11 13 15 E r r o r Time ( hour ) User 1 User 2 User 3 User 4 0 % 10 % 20 % 30 % 1 2 3 4 E r r o r Laptop User Sesame @ 1Hz Sesame @ 100Hz 1 . Sophisticated Statistical Methods 2 . Capability to Adapt Models Sesame is able to construct models of high accuracy because of Virtual Power Meter Sesame is a high - rate / accurate Energy Optimization & Management and creates new opportunities in y ( t ) = β 0 + β 1 x 1 ( t ) + … + β p x p ( t ) Software Optimization “Knob” provided by target software y ( t ) = β 0 + β 1 x 1 ( t ) + … + β p x p ( t ) Energy Accounting n Processes y ( t ) = β 0 + β 1 x 1 ( t ) + … + β p x p ( t ) Energy Accounting x 1 ( t ) = x 1 , 1 ( t ) + … + x 1 , n ( t ) x p ( t ) = x p , 1 ( t ) + … + x p , n ( t ) y j ( t ) = β 1 x 1 , j ( t ) + … + β p x p , j ( t ) Energy Contribution by Process j Servers and Workstations Sesame can be also used for Conclusions • Self - Modeling is necessary to adapt to the changes in hardware and usage • Statistical methods help to construct high - rate / accurate models from low - rate / inaccurate battery interfaces • Sesame creates new opportunities in system energy optimization and management