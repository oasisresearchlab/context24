Achieving Accurate Room - Level Indoor Location Estimation with Emerging IoT Networks Jacob T . Biehl , Andreas Girgenshon , and Mitesh Patel [ biehl , andreasg , mitesh ] @ fxpal . com FX Palo Alto Laboratory , Inc . Palo Alto , CA ABSTRACT A motivating , core capability of most smart , Internet of Things en - abled spaces ( e . g . , home , office , hospital , factory ) is the ability to leverage context of use . Location is a key context element ; particu - larly indoor location . Recent advances in radio ranging technolo - gies , such as 802 . 11 - 2016 FTM , promise the availability of low - cost , near - ubiquitous time - of - flight - based ranging estimates . In this pa - per , we build on prior work to enhance the technology’s ability to provide useful location estimates . We demonstrate meaningful improvements in coordinate - based estimation accuracy and sub - stantial increases in room - level estimation accuracy . Furthermore , insights gained in our real - world deployment provides important implications for future Internet of Things context applications and their supporting technology deployments such as workflow man - agement , inventory control , or healthcare information tools . CCS CONCEPTS • Networks → Location based services ; • Human - centered computing → Ubiquitousandmobilecomputing ; • Hardware → Wireless devices . KEYWORDS Indoor Location , Bluetooth Low - Energy Positioning , Wi - Fi RTT Positioning ACM Reference Format : Jacob T . Biehl , Andreas Girgenshon , and Mitesh Patel . 2019 . Achieving Accu - rate Room - Level Indoor Location Estimation with Emerging IoT Networks . In SUBMITTED TO IoT ’19 : 9th International Conference on the Internet of Things ( IoT 2019 ) , October 22 – 25 , 2019 , Bilbao , Spain . ACM , New York , NY , USA , 8 pages . https : / / doi . org / 10 . 1145 / 1122445 . 1122456 1 INTRODUCTION Indoor positioning and tracking have been a long - standing topic of Internet of Things research . As the realization and utility of broader concepts such as smart buildings gain traction , accurate and reliable indoor positioning and tracking techniques have be - come essential , enabling core technologies . Research and industry have proposed many technology approaches to indoor location , Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page . Copyrights for components of this work owned by others than ACM mustbehonored . Abstractingwithcreditispermitted . Tocopyotherwise , orrepublish , to post on servers or to redistribute to lists , requires prior specific permission and / or a fee . Request permissions from permissions @ acm . org . IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain © 2019 Association for Computing Machinery . ACM ISBN xxx - x - xxxx - 9999 - x / xx / xx . . . $ 0 . 00 https : / / doi . org / 10 . 1145 / 1122445 . 1122456 including audio [ 12 , 24 ] , light [ 31 , 35 ] , inertial [ 25 ] , and magnetic sensing [ 20 ] approaches . However , most techniques leverage com - mon radios , such as Wi - Fi and Bluetooth Low Energy [ 5 , 9 , 15 ] , due to their ubiquity and low - cost . Recently , standards committees and individual companies have published open protocols that can be easily accessed on commodity mobile devices , such as iPhone 1 or Android 2 smartphones . The predominant focus and driving metric in indoor positioning research has been accurate coordinate position estimation . Specif - ically , the goal is to predict with low latency and high accuracy the location of a device as a point on a map . The research commu - nity has advanced the state - of - the - art in coordinate positioning , contributing technology algorithms [ 29 , 34 ] , evaluations [ 11 ] , and thought leadership [ 32 ] . These efforts have established standards and goals for this research . While less studied , room - level location estimation is also im - portant to develop and evaluate . Many IoT concepts depend on room - level estimation rather than coordinate estimation . Consider the context of the IoT home and the simple act of customizing a mobile user interface to control the devices in that room . For this use context to be useful and effective , the interface needs to know with high certainty that the device is in the correct room . Similarly , in IoT medical environments , accurate room estimation is critical for tracking patient movement and interaction with care providers . Reliable room - level estimation can drive a wide range of highly useful applications , including workflow management , inventory control , and patient information tools . Research into new enabling technologies has shown dramatic improvements in coordinate estimation accuracy . For instance , the emerging IEEE 802 . 11 - 2016 Fine Time Measurement protocols [ 1 ] has been shown to achieve ranging accuracy within one to two meters [ 11 ] . Despite these advances , there has been little experi - mentation and validation of these new technologies for accurate room - level location estimation in authentic environments of likely use . There is likewise poor understanding of how the mechanisms to improve coordinate location estimation , such as map - based geo - metric constraints [ 21 ] , impact room - level estimation accuracy . In this paper , we seek to determine the utility of these emerging technologies to support room - level estimation in a real - world envi - ronment . Specifically , the paper makes the following contributions : • Conducts the first evaluation of Wi - Fi time - of - flight tech - nologies to support room - level location . Evaluates the suit - ability of previously proposed estimation techniques , e . g . , particle filters [ 29 ] , to perform room - level location estima - tion with geometric projection . 1 https : / / www . apple . com / iphone / 2 https : / / www . android . com IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain Biehl , Girgenshon , & Patel • Performs a direct comparison to current state - of - the - art tech - niques for room - level location estimation . Compares the efficacy and performance of techniques that use Wi - Fi time - of - flight ranging estimates to those that use Bluetooth Low Energy signal - strength - based ranging estimates ( e . g . , those provided by common frameworks such as iBeacon 3 or Eddy - stone 4 ) . • Provides a density analysis that correlates Wi - Fi time - of - flight beacon density with estimation accuracy . Also analyzes density performance for Bluetooth Low Energy deployments , providing important context for comparison . • Situates the density performance of Wi - Fi time - of - flight bea - con density within the context of Wi - Fi access point density for data coverage . Explores the effect of increased density for indoor location estimation accuracy . 2 RELATED WORK Radio - based ranging combined with multi - lateration or multi - ang - ulation are the most common approaches to indoor location esti - mation [ 14 , 29 , 34 ] . The overall estimation accuracy is dependent on the reliability of the radio ranging measurements . Until recently , radio - based ranging precision was only achieved reliably using Ultra - Wide Band radios [ 32 ] . However , the emergence of Wi - Fi IEEE 802 . 11 - 2016 FTM specification [ 1 ] and subsequent verification have shown that the technique provides reliable indoor - ranging data [ 11 ] . In this work , we evaluate and compare the performance and deployment characteristics of these emerging ranging tech - niques to support highly - accurate room - level estimation while also comparing performance to benchmark approaches . Several alternative technology approaches exist to track a device indoors , especially at the room - level . A significant amount of work and commercialization efforts have focused on fingerprinting the signal - strength characteristics of Wi - Fi [ 5 ] , Bluetooth [ 15 ] , Zig - Bee [ 7 ] , or combination of radio signals [ 9 ] to provide accurate room - level localization . Extending radio fingerprints with addi - tional sensor information can further improve the accuracy and robustness of these predictions [ 3 , 17 , 26 , 28 ] . Unlike ranging - based approaches , fingerprinting requires significant training data to prop - erly construct and regularly update a robust classification database . While there are efforts to automate and model this work [ 4 , 10 ] , this limitation inhibits large - scale deployments . Coded light , emitted from visible light lamps and fixtures , is a particularly reliable technique for room - level location . Light - based localization approaches vary from using the camera or visible light sensor on a mobile device to detect binary encoded location pattern [ 31 ] , to more sophisticated techniques that leverage polarized light [ 35 ] or advanced light sensors and projected location sequences to provide sub - room accuracy [ 19 ] . Similarly , audio has also proven effective across a variety of approaches including audio finger - printing rooms [ 12 , 24 ] , proximity beacons , 5 and techniques that leverage microphone / speaker arrays for angle - based 3D geometric localization [ 8 , 18 ] . While effective , the density requirements make 3 https : / / developer . apple . com / ibeacon / 4 https : / / developers . google . com / beacons / eddystone 5 https : / / chirp . io these approaches expensive to deploy . Furthermore , their use re - quire the device to have an unobstructed path to the emitted light or audio signal , preventing tracking when a device is in a pocket or improperly oriented . Privacy concerns are also prevalent with audio - and camera - based sensing techniques [ 16 ] . Location approximation performed using inertial and magnetic sensors has also been shown effective for classifying among a small number of rooms [ 20 , 25 ] . However , tracking in large spaces , such as office buildings , hospitals , and factories is difficult to scale . More complex systems can leverage radio tomography [ 33 ] or wireless signatures from Wi - Fi channel state information [ 6 ] to count and identify people in rooms . Other techniques leverage a building’s existing electrical system to emit detectable electromagnetic tones that can be detected as location signatures [ 22 ] . These emerging technologies show great promise but lack wide - scale evaluation in authentic environments . In contrast , our current work provides an actionable feasibility evaluation of technologies that will soon enter wide - scale adoption and deployment . 3 ESTIMATION TECHNIQUES We look at contemporary approaches to indoor location estimation employing multi - lateration and multi - angulation mechanisms with common communication radios ( e . g . , Wi - Fi or Bluetooth ) . These approaches provide two very important advantages : they enable devices to be located without additional end - user cost ( radios are already available in most modern mobile devices ) and do not re - quire significant data collection and data maintenance to deploy ( no fingerprinting required , just the location of deployed beacons ) . Borrowing insights from the robotics community , indoor location estimation researchers have employed signal filtering techniques with great success . Researchers have successfully applied Particle Filter [ 29 ] , Kalman Filter [ 34 ] , and Extended Kalman Filter [ 14 ] to indoor location estimation . In addition , many commercially available frameworks provide a proximity - based approach to indoor location . For instance , frame - works such as iBeacon and Eddystone are designed to allow applica - tion developers to actuate events when a device is within a specific range of a beacon . Because of their commercial availability , our evaluation also compares the use of these simplified approaches to room - level location . Below we describe the technical fundamentals for each of these indoor location estimation techniques . 3 . 1 Room Estimation using Particle Filter Filtering techniques utilize ranging and signal - strength observa - tions that are non - linear in nature and the posterior density is multi - modal . A particle filter ( PF ) is a non - parametric implemen - tation of the Bayes filter and suitable for tracking and localization problems where dealing with global uncertainty is crucial [ 30 ] . Our implementation utilizes a Sample Importance Resampling filter embedded with a systematic resampling algorithm . To detect the degeneracy and perform resampling , we compute the effective sam - ple size that corresponds to the reciprocal of the sum of squares of particle weights . We define our problem with the particle filter paradigm and briefly explain the preliminaries . Let M = { m [ j ] } n m j = 1 be a set of known and fully observable features whose elements , m [ j ] ∈ R 3 , Achieving Accurate Room - Level Indoor Location Estimation with Emerging IoT Networks IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain represent the beacons’ location ( marked in Figure 1 ) . The receiver ( smartphone in our case ) can only receive the signal strength and / or ranginginformationthatarebroadcastedbythebeacons . Let Z t ⊂ R be the set of possible measurements ( signal strength or ranging ) at time t . The observation consists of an n s - tuple random vari - able ( z 1 t , . . . , z [ n s ] t ) whose elements can take values z [ k ] t ∈ Z t . We denote the position ( smart device user in our case ) up to time t by x 0 : t ≜ { x 0 , . . . , x t } where x t ∈ R 3 . Lastly , we denote the weights of each sample particle as w it which corresponds to the position of user x it . Given the set of known beacon positions M and noisy measure - ments Z t , the particle filter algorithm recursively operates in two phases : prediction and update . Each particle is modified according to the existing model , including the addition of random noise in order to simulate the effect of noise on the variable of interest ( i . e . , user position ) x t . Then , each particles weight is re - evaluated based on the latest observations Z t . The estimation of the posterior density function of the state is given by Equation 1 . p ( x t | Z t ) ≈ w t · δ (cid:16) x t − x it (cid:17) ( 1 ) where x it is the i th sampling point or particle of the posterior probability and w t is the weight of the particle and δ is Dirac delta measure [ 2 ] . Furthermore , whenusingsignalstrengthasmeasurements , which is the case for using Bluetooth Low Energy ( BLE ) data , we convert the distance between beacons and particles into the signal - strength domain using the path loss model . 6 This approach provides better results than converting signal strength to distance [ 21 ] . To model the map geometry in the experiments , we incorporated the map information within our PF framework ( indicated as MAP in Tables 2 and 3 ) . The map geometry is incorporated in different stages of the particle filter , i . e . , initialization and re - sampling . Dur - ing initialization , the particles are sampled in areas where the user can visit , e . g . , hallways and rooms . During re - sampling , the posi - tions x it of the new particles are conditioned to the map geometry . To predict the room location that the smart device user occupies , the estimated coordinates of the particle filter are checked against the boundary of each room . For efficiency , a precomputed grid indexes the room boundaries that intersect each grid cell . 3 . 2 Room Estimation using Closest Beacon For completeness , we also compared the performance of the PF - based estimation technique against the Closest Beacon ( CB ) tech - nique . This approach requires at least one beacon in each target room . For each set of scans received during a short interval , the closest beacon is selected and the room containing that beacon is chosen . Due to the noisy characteristics of beacon scans , further smoothing techniques such as a median filter or a majority vote system are needed to achieve better room estimation . 4 EXPERIMENTAL METHODOLOGY For the experiments , we used an area of a single floor in our building with a bounding box of 21 × 12 m ( 252 m 2 area ) out of the whole floor of 52 × 44 m ( see Figure 1 ) . The space consists of typical office layout 6 https : / / en . wikipedia . org / wiki / Log - distance _ path _ loss _ model Figure 1 : Beacon placement on the floor plan . Red and yel - low locations are shared by BLE and RTT beacons while green and blue locations only have BLE beacons . The dashed line indicates the bounding box of the ground truth in the experiment . with partitioned rooms and corridors . Each office has furniture such as desks , chairs , book shelves , white board , etc . The building construction is typical for contemporary office buildings on the United States’ West Coast . From previous experiments , we had BLE beacons deployed in most rooms . For direct comparison of the technologies , the 11 Wi - Fi round - trip time beacons ( RTT ) were placed in locations that also had a BLE beacon , see Figure 2a . Figure 1 shows the locations shared by BLE and RTT beacons on the map . Those locations are colored either red or yellow depending on whether they were included in an experiment with sub - sampled beacons . Locations only occupied by BLE beacons are colored green or blue depending on experimental configuration . The BLE beacons consist of an Electric Imp 7 and a Laird BL600 with a custom case for AC power . The RTT beacons are Compulab WILD Wi - Fi RTT routers [ 27 ] . That router is an embedded Intel Atom E3950 Linux system with an Intel 8260AC card . As previously reported by [ 11 ] , we found that a 40 MHz wide Wi - Fi channel overestimates distances that are not in direct line - of - sight . The Wi - Fi options are configured via hostapd . 8 Unfortunately , the country code is locked at 00 such that channel 42 is the only available 80 MHz wide channel . We moved all our organization’s Wi - Fi access points ( not part of this experiment ) away from that channel to avoid interference . The ranging requests use little band - width such that using the same channel for all RTT beacons does not cause problems . We can also confirm that short distances are underestimated with an 80 MHz wide channel , as reported by [ 11 ] . We correct for that using Equation 2 ( indicated as RTT - Dist or PF + Dist in Tables 1 to 3 ) . 7 https : / / www . electricimp . com / 8 https : / / en . wikipedia . org / wiki / Hostapd IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain Biehl , Girgenshon , & Patel ( a ) ( b ) Figure 2 : A sample of placement of RTT and BLE beacon is shown in ( a ) . Robot platform used for data collection is shown in ( b ) . d ′ = (cid:26) max ( 0 , 0 . 55 ∗ d + 2 . 25 m ) if d < 5 m d otherwise ( 2 ) To test our hypothesis , we collected data consisting of RTT rang - ing scans and BLE signal - strength scans along with corresponding ground - truth coordinate locations . For logging RTT scans and BLE signal - strength data , we developed a data logger application for Android and iOS devices , respectively . For logging RTT scan data , we utilized an Android Pixel 3 9 that supports the 802 . 11 - 2016 FTM protocol [ 1 ] . It should be noted that a limitation in Android 9 . 0 only allows the device to range with 10 RTT beacons at a given time . Our data collection application scans for available Wi - Fi beacons every 30 seconds and uses the 10 strongest beacons . In this way , the application is usually ranging on the 10 closest RTT beacons . BLE signal - strength data was collected on an iPhone X . 10 We used an iOS device because Apple’s Bluetooth implementation provides more reliable and frequent BLE advertisement data . For ground - truth data , we utilized a Magni Robot platform . 11 The robot ( shown in Figure 2b ) was equipped with a Hokuyo laser range finder 12 that has a range of 30 m and a scanning angle of 270° . We generated ground - truth pose estimation from the range finder data using the hector mapping algorithm [ 13 , 23 ] . Due to the long 9 https : / / www . android . com / phones / google - pixel - 3 / 10 https : / / www . apple . com / shop / buy - iphone / iphone - 10 11 http : / / ubiquityrobotics . com / magni . html 12 https : / / www . hokuyo - aut . jp / search / single . php ? serial = 169 Table 1 : Errors in meters of beacon scans against ground - truth distances . Beacon Type Beacon Count RMSE BLE 6 4 . 625 BLE 11 4 . 508 BLE 22 4 . 690 BLE 56 5 . 372 RTT 6 2 . 642 RTT - Dist 6 2 . 254 RTT 11 2 . 564 RTT - Dist 11 2 . 150 range of the laser sensor , the hector mapping was able to generate ground truth with accuracy in range of centimeters . Care was taken to synchronize clocks on all devices before data collection . We collected both RTT ranging scans and BLE signal - strength data and grouped them into 5 Hz groups . For multiple scans of the same beacon in the same group , the median was used . Grouped data were aligned to ground - truth coordinate locations . We conducted two runs of 18 . 7 and 16 . 7 minutes , respectively , and averaged the accuracy of the runs . It should be noted that data was collected on a working day such that office personnel interfered with radio signals as expected . Table 1 shows the root mean square error ( RMSE ) of different beacon configurations against the ground - truth distance . For RTT , negative scan results were set to zero even without dis - tance adjustment . For BLE , the path loss model with an exponent of 2 . 25 was used to compute distances from signal strength . We sub - sampled both the RTT anchors and BLE beacons to deter - mine the effects of different densities . For 6 Wi - Fi and BLE beacons , we selected every other room ( red in Figure 1 ) . As we collected the data for 11 RTT beacons and the Android RTT framework only allows ranging on up to 10 beacons at a time , one beacon may have been occasionally excluded . For BLE beacons , we additionally selected a total of 22 beacons that were placed within 3 meters of the ground - truth bounding box ( green in Figure 1 ) and all 56 beacons ( blue ) . With six beacons , there is one beacon per 42 m 2 . That is noticeably denser than our Wi - Fi access points deployed for data access with one access point per 229 m 2 . 5 EXPERIMENTAL RESULTS We used two different approaches for predicting dwelling in a room . First , we selected the room containing the closest beacon . Second , we used a particle filter to estimate the coordinate - location and checked for containment in one of the room polygons . To account for the non - deterministic nature of the particle filter technique , we evaluated the results from 20 random runs on the two datasets . Details of different parameters used in our experiments is listed in Table 2 . The table shows the overall root mean square error ( RMSE ) , the means and standard deviations of recall and precision from the 20 runs , and the F 1 scores , the harmonic means of those mean precision and recall . The closest beacon technique does not involve any non - deterministic calculation and hence does not have any standard deviation . Lastly , to understand the impact of map geome - try and corrected RTT ranging scans , we compared the effects of Achieving Accurate Room - Level Indoor Location Estimation with Emerging IoT Networks IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain Table 2 : PF parameters used in the experiments Parameter Symbol Value Measurement standard dev . ( BLE ) σ n 6 . 85 dB Measurement standard dev . ( RTT ) σ n 1 . 65 m Motion acceleration standard dev . σ v 0 . 1 m / s 2 Motion position standard dev . σ u 0 . 1 m Number of particles n p 300 Resampling threshold n thr 0 . 83 each each component with a baseline particle filter model where none of this information was used . The main accuracy measures used are recall and precision of predicting one of the 11 rooms . Because we do not care about other rooms or hallways , those are combined into one negative class that is excluded from the accuracy measures other than false positives for the 11 rooms . In this context , true positives are correct predic - tions of being in a room , false positives are predictions for a room while being elsewhere , and false negatives are missed predictions for a room while being there . Recall is true positives divided by the sum of true positives and false negatives . Precision is true positives divided by the sum of true and false positives . 5 . 1 Room Prediction as the Closest Beacon We estimated the closest beacon with a strongest beacon approach using a sliding 9 - second window to count the beacons with the highest signal strength . The room containing the beacon with the majority vote in that window was picked . If a beacon outside the target rooms had the majority vote , no room was picked . We se - lected the 9 - second window because it produced the best results from the data to determine how well this approach can work . We adapted the approach to RTT ranging by selecting the shortest reported distance instead of the highest signal strength . Before settling on this strongest signal beacon approach , we used a different approach to smooth out the noise of scans . In the same 9 - second window , we selected the median signal - strength value for each beacon . The beacon with the highest median value was selected . However , this produced poorer results for room prediction with 82 . 1 % recall and 74 . 4 % precision . The strongest signal beacon approach with majority vote pro - vides 91 . 28 % recall and 72 . 77 % precision with 11 and more beacons ( see Table 3 ) . The corresponding F 1 score is 1 . 29 percentage points lower than that for the particle filter with 11 BLE beacons . The shortest RTT distance with majority vote performance is worse with 85 . 70 % recall and 68 . 46 % precision . When using median values of RTT distances , the results were almost identical . The lower RTT performance can be explained by the fact that RTT ranging is not modified by walls such that the anchor on the other side of the wall is more likely to be seen as the closest one . The signal strength of BLE scans is reduced by walls , favoring beacons in the same room . 5 . 2 Room Prediction with Particle Filter The particle filter provides an estimate for the coordinate location using RTT ranging or BLE signal - strength data . This location is checked for containment in a room polygon . Figure 3 shows recall and precision for room predictions for RTT and BLE with different beacon counts . The F 1 score is 11 . 59 percentage points better for RTT than BLE with 11 beacons and 13 . 65 percentage points better with 6 beacons ( see Table 3 ) . 11 RTT anchors still have an F 1 score of 6 . 08 percentage points higher than 22 BLE beacons . For 56 BLE beacons , the accuracy is 0 . 78 percentage points worse than with 22 beacons , likely indicating that farther BLE beacons add noise . 5 . 3 Error of Particle Filter Location We use the root mean square error ( RMSE ) to compare particle filter estimates against the ground truth . As with the room prediction , BLE performance improves with more beacons and drops when including beacons from the other side of the building . Table 3 shows the results for different beacon counts . For the same number of bea - cons , RTT on average performs about 0 . 4 meters better . It performs better even with half as many beacons . When animating particles on the floor plan , RTT particles form a tighter cloud , indicating less noisy data . Figure 4 depicts that the RTT estimates ( a , b ) follow the ground truth better . However , one can see some systematic errors such as the deviation in the bottom - right room that happens to be still in the same room . In comparison , the BLE estimates ( c , d , e , f ) are less closely aligned with the ground truth . In Table 3 , we show the effects of MAP and Dist for BLE and RTT results . MAP improves RMSE by 0 . 02 meters and room dwell precision around 2 percentage points . That is partially offset by a drop in recall of less than 0 . 5 percentage points . Correction of short RTT distances improves RMSE by 0 . 10 meters and room dwell accuracy by 3 . 43 percentage points . 6 DISCUSSION The results of this verification experiment provide several interest - ing implications . Most important , the experiment provides eviden - tial support that use of Wi - Fi IEEE 802 . 11 - 2016 FTM [ 1 ] distance measurements , though still noisy ( e . g . , root mean square error of 2 . 15 meters ) , improve the state - of - the - art indoor location estimation accuracy . As shown in our evaluation , Wi - Fi RTT - based location estimations achieve 27 . 35 % improvement in root mean square error 70 % 75 % 80 % 85 % 90 % 95 % 100 % 6 11 22 56 Number of Beacons RTT - Recall RTT - Precision BLE - Recall BLE - Precision Figure 3 : Accuracy of room prediction for RTT and BLE for different beacon counts . IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain Biehl , Girgenshon , & Patel Table 3 : Comparison of accuracy using different configuration of PF using both BLE and RTT sensor . Results also enlist com - parison of PF with closest beacon technique . Beacon Type Beacon Count Estimation Technique RMSE Recall Precision F 1 score BLE 6 PF 2 . 146 70 . 98 % ( 1 . 23 % ) 71 . 34 % ( 1 . 22 % ) 71 . 16 % BLE 6 PF + MAP 2 . 093 73 . 78 % ( 0 . 52 % ) 76 . 11 % ( 0 . 70 % ) 74 . 93 % BLE 11 PF 1 . 669 81 . 39 % ( 1 . 05 % ) 75 . 71 % ( 1 . 11 % ) 78 . 45 % BLE 11 PF + MAP 1 . 632 84 . 62 % ( 0 . 77 % ) 80 . 05 % ( 1 . 04 % ) 82 . 27 % BLE 22 PF 1 . 556 89 . 08 % ( 0 . 67 % ) 86 . 52 % ( 0 . 69 % ) 87 . 78 % BLE 22 PF + MAP 1 . 532 88 . 91 % ( 0 . 46 % ) 89 . 43 % ( 0 . 47 % ) 89 . 17 % BLE 56 PF 1 . 618 87 . 63 % ( 0 . 87 % ) 85 . 07 % ( 0 . 71 % ) 86 . 33 % BLE 56 PF + MAP 1 . 602 88 . 14 % ( 0 . 66 % ) 88 . 64 % ( 0 . 60 % ) 88 . 39 % RTT 6 PF 1 . 728 79 . 74 % ( 0 . 54 % ) 89 . 32 % ( 0 . 98 % ) 84 . 26 % RTT 6 PF + MAP 1 . 701 80 . 29 % ( 0 . 37 % ) 91 . 33 % ( 0 . 51 % ) 85 . 45 % RTT 6 PF + Dist 1 . 652 82 . 76 % ( 0 . 93 % ) 90 . 59 % ( 0 . 84 % ) 86 . 50 % RTT 6 PF + MAP + Dist 1 . 621 83 . 64 % ( 0 . 37 % ) 94 . 12 % ( 0 . 41 % ) 88 . 58 % RTT 11 PF 1 . 406 87 . 73 % ( 0 . 47 % ) 91 . 89 % ( 0 . 59 % ) 89 . 76 % RTT 11 PF + MAP 1 . 403 86 . 50 % ( 0 . 27 % ) 93 . 60 % ( 0 . 39 % ) 89 . 91 % RTT 11 PF + Dist 1 . 304 90 . 52 % ( 0 . 46 % ) 96 . 02 % ( 0 . 52 % ) 93 . 19 % RTT 11 PF + MAP + Dist 1 . 275 90 . 07 % ( 0 . 27 % ) 97 . 99 % ( 0 . 21 % ) 93 . 86 % BLE 11 Closest Beacon - 91 . 28 % - 72 . 77 % - 80 . 98 % RTT 11 Closest Beacon - 85 . 70 % - 68 . 46 % - 76 . 11 % in coordinate location estimation . More important to the focus of this work , the experiment also found a meaningful 5 . 47 % improve - ment in F 1 score room - level location estimation , when comparing high - density deployments of both technologies . When compar - ing equal densities , RTT - location estimations outperform with a tremendous 11 . 59 % difference in F 1 score . We further elaborate our understanding and impacts of different factors such as RF sensor , beacons density , algorithm , and room geometry and conclude with the limitation of our experiments . 6 . 1 RF Sensor Comparison Most notable in our results is the high precision statistics in the RTT - based room - level estimates . These statistics signify that when an estimate is made to be in a particular room , that estimate is 97 . 99 % correct . High precision , in the authors’ view , marks an important turning point in the potential applications that can be powered by indoor location technologies . Many of the applications described in the introduction , especially those targeted for enterprise and health - care domains , require a high degree of precision in the location estimation that has not been achievable outside high - cost technolo - gies . For example , workflow tools that track health care staff may leverage location - derived information such as patient co - location , expert co - location , and equipment used . For these workflow statis - tics to matter , the estimation of where those people and devices are located needs to be highly reliable at the room - level . 6 . 2 Effects of Beacon Density Another important finding of our experiment is confirmation and quantification of the important role beacon density still plays in driving indoor location accuracy . As our results show , accuracy across coordinate and all room - level location estimations goes down as density drops . In the case of BLE , the drop is understood to be effects of ranging on the long tail of the signal strength . In the case of RTT , the results indicate that multi - path is still a significant design issue for indoor time - of - flight ranging approaches . The implication to developers of indoor location - driven applications is that density , and the direct derivative of cost , will need to be matched based on application needs . For instance , tracking with high accuracy within the individual office will require a heavier deployment than tracking in larger , more open environment such as stores and shopping malls . Furthermore , while the results show that the overall density of RTT beacons is much lower compared to existing BLE approaches ( e . g . , 6 compared to 22 beacons for similar accuracy , respectively ) , the density required for reasonable accuracy is still higher than the typical Wi - Fi access point density . For instance , in the environment studied , the density for Wi - Fi access points is one per 229 m 2 . Six beacons in the experiment area correspond to one per 42 m 2 , 5 . 5 times more . Given this difference , it is unlikely that usable indoor location will come for “free” as access points are upgraded to current standards . As Wi - Fi , and even 5G technologies evolve , access point count requirements could decrease . Absent such evolution , density and cost remain an important research criteria for location - tracking capable network design and development . 6 . 3 Algorithm Comparison Through our experiments , we also compared the performance of the closest beacon technique ( CB ) with more sophisticated parti - cle filter technique ( PF ) . As listed in Table 3 , the PF technique for BLE when used with map geometry ( PF + MAP ) provides a preci - sion improvement of 7 . 28 % compared to the CB technique . The PF Achieving Accurate Room - Level Indoor Location Estimation with Emerging IoT Networks IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain ( a ) ( c ) ( e ) ( b ) ( d ) ( f ) Figure 4 : RTT ( red ) and BLE ( blue ) estimates sub - sampled at 1 Hz plotted against the ground truth ( black ) . Beacon counts ( light green ) indicated in the legends influence the accuracy . technique for RTT with map geometry and distance adjustment ( PF + MAP + Dist ) achieves an improvement of 29 . 53 % over CB . This further , re - enforces the fact that PF - based estimation technique are well equipped to compensate for noise inherent in sensor data . 6 . 4 Impact of Utilizing Map Geometry Experiments utilizing the map geometry also provided deeper un - derstanding of the improvement on overall performance of PF on both room - level and coordinate localization . Using the map geome - try ( denoted by PF + MAP for BLE and PF + MAP + Dist for RTT ) we found that the precision of predicting the correct room improved by 6 . 1 % for RTT beacons whereas the same improved by 4 . 34 % for BLE beacons when compared with results not utilizing the map geometry using 11 beacons . These results show that PF provides better performance if the user behavior is better modeled within the PF framework ( e . g . , the user will always walk in hallways and enter rooms through doors and not walls ) . 6 . 5 Multipath Effects BLE vs RTT Our experiment also found an interesting result with the closest bea - con approach for room - level location estimation . As indicated , this technique has a meaningfully lower accuracy with RTT beacons , despite the beacons themselves being placed in the same positions for all experiments . We believe this illustrates an important differ - ence between using signal strength and time - of - flight ranging tech - niques . The BLE signals are likely attenuated as they travel through walls from adjacent rooms , resulting in lower signal - strength mea - surements . This will benefit the signal - strength measurement for the current room as it will not be attenuated in this way . Conversely , the time - of - flight measurements are not meaningfully impacted by attenuation through a wall and thus the resulting closest beacon estimates are not influenced by the natural barriers . 6 . 6 Limitations While our experiments provided many insights there are also limi - tations in our work . We examined the impact of different beacon densities but our results are based on a single deployment in a single building . Additional examination across beacon placement locations as well as in buildings with different construction ma - terials would further support the mission of this work . It should also be understood that at the time of this experiment and writing , these new standards are just emerging . It is likely that over time the accuracy and reliability of the underlying ranging estimates will improve . Despite these limitations , we believe the discussion above still offers many fundamental insights into the use and utility of these technologies moving forward . IoT ’19 , October 22 – 25 , 2019 , Bilbao , Spain Biehl , Girgenshon , & Patel 7 CONCLUSION In this paper , we provided insights and understanding on the per - formance of radio frequency sensors , i . e . , Bluetooth signal strength and Wi - Fi time - of - flight , used for room - level localization . We com - pared a closest beacon simplistic localization technique with more sophisticated particle filter techniques . We provided insights on how the performance of the particle filter based technique could be improved by incorporating map geometry . Through various ex - periments , we provided a detailed analysis of the impact of various parameters such as beacon density or map geometry and their ef - fects on the overall localization . Lastly , through our experiments we provided insights to both the research community and to large scale commercial application developers about various implications that needs to be kept in mind while they embark upon the journey of providing large scale indoor location estimation solutions . REFERENCES [ 1 ] 2016 . IEEE Standard for Information technology âĂŤ Telecommunications and information exchange between systems Local and metropolitan area networks âĂŤSpecificrequirements - Part11 : WirelessLANMediumAccessControl ( MAC ) and Physical Layer ( PHY ) Specifications . IEEE Std 802 . 11 - 2016 ( Revision of IEEE Std 802 . 11 - 2012 ) ( 2016 ) , 1 – 3534 . https : / / doi . org / 10 . 1109 / ieeestd . 2016 . 7786995 [ 2 ] M . S . Arulampalam , S . Maskell , N . Gordon , and T . Clapp . 2002 . A Tutorial on Particle Filters for Online Nonlinear / non - Gaussian Bayesian Tracking . Trans . Sig . Proc . 50 , 2 ( Feb . 2002 ) , 174 – 188 . https : / / doi . org / 10 . 1109 / 78 . 978374 [ 3 ] MartinAzizyan , IonutConstandache , andRomitRoyChoudhury . 2009 . Surround - Sense : Mobile Phone Localization Via Ambience Fingerprinting . International Conference on Mobile Computing and Networking ( MobiCom’09 ) ( 2009 ) , 261 – 272 . https : / / doi . org / 10 . 1145 / 1614320 . 1614350 [ 4 ] Xuan Bao , Bin Liu , Bo Tang , Bing Hu , Deguang Kong , and Hongxia Jin . 2015 . PinPlace : Associate Semantic Meanings with Indoor Locations Without Active Fingerprinting . International Joint Conference on Pervasive and Ubiquitous Com - puting ( UbiComp’15 ) ( 2015 ) , 921 – 925 . https : / / doi . org / 10 . 1145 / 2750858 . 2807543 [ 5 ] JacobT . Biehl , MatthewCooper , GerryFilby , andSvenKratz . 2014 . LoCo : AReady - to - Deploy Framework for Efficient Room Localization Using Wi - Fi . International Joint Conference on Pervasive and Ubiquitous Computing ( UbiComp’14 ) ( 2014 ) , 183 – 187 . https : / / doi . org / 10 . 1145 / 2632048 . 2636083 [ 6 ] Yen - Kai Cheng and Ronald Y . Chang . 2017 . Device - Free Indoor People Counting Using Wi - Fi Channel State Information for Internet of Things . IEEE Global Communications Conference ( GlobeCom’17 ) ( 2017 ) , 1 – 6 . https : / / doi . org / 10 . 1109 / glocom . 2017 . 8254522 [ 7 ] Yuh - Ming Cheng . 2009 . Using ZigBee and Room - Based Location Technology to ConstructinganIndoorLocation - BasedServicePlatform . InternationalConference onIntelligentInformationHidingandMultimediaSignalProcessing ( 2009 ) , 803 – 806 . https : / / doi . org / 10 . 1109 / iih - msp . 2009 . 106 [ 8 ] Ionut Constandache , Sharad Agarwal , Ivan Tashev , and Romit Roy Choudhury . 2014 . Daredevil : Indoor Location Using Sound . ACM SIGMOBILE Mobile Comput - ing and Communications Review 18 ( 2014 ) , 9 – 19 . https : / / doi . org / 10 . 1145 / 2636242 . 2636245 [ 9 ] Matthew Cooper , Jacob Biehl , Gerry Filby , and Sven Kratz . 2016 . LoCo : Boosting for Indoor Location Classification Combining Wi - Fi and BLE . Personal and Ubiquitous Computing 20 ( 2016 ) , 83 – 96 . https : / / doi . org / 10 . 1007 / s00779 - 015 - 0899 - z [ 10 ] Noelia HernÃąndez , Manuel OcaÃśa , Jose M . Alonso , and Euntai Kim . 2017 . Continuous Space Estimation : Increasing WiFi - Based Indoor Localization Res - olution without Increasing the Site - Survey Effort . Sensors 17 ( 2017 ) , 147 . https : / / doi . org / 10 . 3390 / s17010147 [ 11 ] Mohamed Ibrahim , Hansi Liu , Minitha Jawahar , Viet Nguyen , Marco Gruteser , Richard Howard , Bo Yu , and Fan Bai . 2018 . Verification : Accuracy Evaluation of WiFi Fine Time Measurements on an Open Platform . Internation Conference on Mobile Computing and Networking ( MobiCom’18 ) ( 2018 ) . https : / / doi . org / 10 . 1145 / 3241539 . 3241555 [ 12 ] Leticia JaÃľn , Fernando J . ÃĄlvare , Teodoro Aguilera , and Juan J . GarcÃŋa . 2017 . Room - level Indoor Positioning Based on Acoustic Impulse Response Identifi - cation . International Conference on Indoor Positioning and Indoor Navigation ( IPIN’17 ) ( 2017 ) , 1 – 10 . [ 13 ] S . Kohlbrecher , J . Meyer , O . von Stryk , and U . Klingauf . 2011 . A Flexible and Scalable SLAM System with Full 3D Motion Estimation . IEEE International Symposium on Safety , Security and Rescue Robotics ( SSRR’11 ) ( 2011 ) . [ 14 ] Fantian Kong , Youping Chen , Jingming Xie , Gang Zhang , and Zude Zhou . 2006 . Mobile Robot Localization Based on Extended Kalman Filter . World Congress on Intelligent Control and Automation 2 ( 2006 ) , 9242 – 9246 . https : / / doi . org / 10 . 1109 / WCICA . 2006 . 1713789 [ 15 ] Athanasios I . Kyritsis , Panagiotis Kostopoulos , Michel Deriaz , and Dimitri Kon - stantas . 2016 . A BLE - Based Probabilistic Room - Level Localization Method . Pro - ceedings of the International Conference on Localization and GNSS ( ICL - GNSS’16 ) ( 2016 ) , 1 – 6 . https : / / doi . org / 10 . 1109 / icl - gnss . 2016 . 7533848 [ 16 ] Adam J . Lee , Jacob T . Biehl , and Conor Curry . 2018 . Sensing or Watching ? : BalancingUtilityandPrivacyinSensingSystemsviaCollectionandEnforcementMechanisms . Symposium on Access Control Models and Technologies ( SACMAT’18 ) ( 2018 ) , 105 – 116 . https : / / doi . org / 10 . 1145 / 3205977 . 3205983 [ 17 ] Seungwoo Lee , Yungeun Kim , Daye Ahn , Rhan Ha , Kyoungwoo Lee , and Hojung Cha . 2015 . Non - obstructive Room - level Locating System in Home Environments Using Activity Fingerprints from Smartwatch . International Joint Conference on Pervasive and Ubiquitous Computing ( UbiComp’15 ) ( 2015 ) , 939 – 950 . https : / / doi . org / 10 . 1145 / 2750858 . 2804272 [ 18 ] Kaikai Liu , Xinxin Liu , and Xiaolin Li . 2015 . Guoguo : Enabling Fine - Grained Smartphone Localization via Acoustic Anchors . IEEE Transactions on Mobile Computing 15 ( 2015 ) , 1144 – 1156 . https : / / doi . org / 10 . 1109 / tmc . 2015 . 2451628 [ 19 ] ShangMa , QiongLiu , ChelhwonKim , andPhillipSheu . 2017 . Lift : UsingProjected Coded Light for Finger Tracking and Device Augmentation . IEEE International Conference on Pervasive Computing and Communications ( PerCom’17 ) ( 2017 ) , 153 – 159 . https : / / doi . org / 10 . 1109 / percom . 2017 . 7917861 [ 20 ] Paramvir Singh Nagpal and Rashid Rashidzadeh . 2013 . Indoor Positioning using Magnetic Compass and Accelerometer of Smartphones . International Conference onSelectedTopicsinMobileandWirelessNetworking ( MoWNeT’13 ) ( 2013 ) , 140 – 145 . https : / / doi . org / 10 . 1109 / mownet . 2013 . 6613810 [ 21 ] M . Patel , A . Girgensohn , and J . Biehl . 2018 . Fusing Map Information with a Probabilistic Sensor Model for Indoor Localization Using RF Beacons . Interna - tional Conference on Indoor Positioning and Indoor Navigation ( IPIN’18 ) ( 2018 ) , 1 – 8 . https : / / doi . org / 10 . 1109 / IPIN . 2018 . 8533758 [ 22 ] Shwetak N . Patel , Khai N . Truong , and Gregory D . Abowd . 2006 . PowerLine Positioning : A Practical Sub - room - level Indoor Location System for Domestic Use . International Conference on Ubiquitous Computing ( UbiComp’06 ) ( 2006 ) , 441 – 458 . https : / / doi . org / 10 . 1007 / 11853565 _ 26 [ 23 ] M . Quigley , K . Conley , B . Gerkey , J . Faust , T . Foote , J . Leibs , R . Wheeler , and A . Y . Ng . 2009 . ROS : an Open - Source Robot Operating System . ICRA workshop on open source software 3 , 3 . 2 ( 2009 ) , 5 . [ 24 ] Mirco Rossi , Julia Seiter , Oliver Amft , Seraina Buchmeier , and Gerhard TrÃűster . 2013 . RoomSense : an Indoor Positioning System for Smartphones Using Active SoundProbing . AugmentedHumanInternationalConference ( AH’13 ) ( 2013 ) , 89 – 95 . https : / / doi . org / 10 . 1145 / 2459236 . 2459252 [ 25 ] Jianga Shang , Fuqiang Gu , Xuke Hu , and Allison Kealy . 2015 . APFiLoc : An Infrastructure - Free Indoor Localization Method Fusing Smartphone Inertial Sensors , Landmarks and Map Information . Sensors 15 ( 2015 ) , 27251 – 27272 . https : / / doi . org / 10 . 3390 / s151027251 [ 26 ] Pedro Figueiredo Silva and Elena Simona Lohan . 2015 . Room - level Indoor Po - sitioning with Wi - Fi and RFID fingerprints . International Workshop on Mo - bile Entity Localization and Tracking in GPS - less Environments ( 2015 ) , 5 : 1 – 5 : 2 . https : / / doi . org / 10 . 1145 / 2830571 . 2830579 [ 27 ] CNX Software ( Ed . ) . [ n . d . ] . CompuLab WILD WiFi Router Supports WiFi RTT ( 802 . 11mc ) Location . CNXSOFT - Embedded Systems News ( [ n . d . ] ) . https : / / www . cnx - software . com / 2018 / 09 / 05 / compulab - wild - wifi - rtt - router - 802 - 11mc / https : / / www . cnx - software . com / 2018 / 09 / 05 / compulab - wild - wifi - rtt - router - 802 - 11mc / . [ 28 ] MasayaTachikawa , TakuyaMaekawa , andYasuyukiMatsushita . 2016 . Predicting Location Semantics Combining Active and Passive Sensing with Environment - independent Classifier . International Joint Conference on Pervasive and Ubiqui - tous Computing ( UbiComp’16 ) ( 2016 ) , 220 – 231 . https : / / doi . org / 10 . 1145 / 2971648 . 2971684 [ 29 ] Sebastian Thrun . 2002 . Particle Filters in Robotics . Conference on Uncertainty in Artificial Intelligence ( 2002 ) , 511 – 518 . [ 30 ] Sebastian Thrun , Wolfram Burgard , and Dieter Fox . 2005 . Probabilistic Robotics ( Intelligent Robotics and Autonomous Agents series ) . The MIT Press . 25 pages . [ 31 ] Roy Want , Andy Hopper , Veronica FalcÃčo , and Jonathan Gibbons . 1992 . The active badge location system . ACM Transactions on Information Systems ( TOIS ) 10 ( 1992 ) , 91 – 102 . https : / / doi . org / 10 . 1145 / 128756 . 128759 [ 32 ] Roy Want , Wei Wang , and Stan Chesnutt . 2018 . Accurate Indoor Location for the IoT . Computer 51 ( 2018 ) , 66 – 70 . https : / / doi . org / 10 . 1109 / mc . 2018 . 3191259 [ 33 ] J Wilson and N Patwari . 2010 . See - Through Walls : Motion Tracking Using Variance - Based Radio Tomography Networks . IEEE Transactions on Mobile Com - puting 10 ( 2010 ) , 612 – 621 . https : / / doi . org / 10 . 1109 / tmc . 2010 . 175 [ 34 ] P . K . Yoon , S . Zihajehzadeh , B . Kang , and E . J . Park . 2015 . Adaptive Kalman Filter for Indoor Localization using Bluetooth Low Energy and Inertial Measurement Unit . International Conference of the IEEE Engineering in Medicine and Biology Society ( EMBC’15 ) ( Aug 2015 ) , 825 – 828 . https : / / doi . org / 10 . 1109 / EMBC . 2015 . 7318489 [ 35 ] Chi Zhang and Xinyu Zhang . 2017 . Pulsar : Towards Ubiquitous Visible Light Localization . International Conference on Mobile Computing and Networking ( MobiCom’17 ) ( 2017 ) , 208 – 221 . https : / / doi . org / 10 . 1145 / 3117811 . 3117821