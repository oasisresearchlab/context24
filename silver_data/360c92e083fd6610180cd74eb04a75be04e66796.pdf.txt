A System for Monitoring Social Distancing Using Microcomputer Modules on University Campuses Yutaro Kobayashi ∗ , Yoshiaki Taniguchi ∗† , Youji Ochi ∗† , and Nobukazu Iguchi ∗† ∗ Faculty of Science and Engineering , Kindai University , Japan † Cyber Informatics Research Institute , Kindai University , Japan Abstract —We propose a system for monitoring social distance on university campuses to prevent the spread of COVID - 19 in - fections . In our proposed system , mobile nodes are distributed to students as permits for entering the campus . Distances between students are measured by periodically sending and receiving BLE advertising packets between nodes . Locations of nodes on the campus can be roughly estimated by using signals from the university Wi - Fi network . Information collected by mobile nodes is sent to a monitoring server . We partially implement the proposed system using an ESP32 - based micro - computer module as a mobile node . We evaluate fundamental performance of the implemented system , especially regarding BLE communication between nodes . Index Terms —Social distancing , M5StickC , BLE , Wi - Fi , COVID - 19 , University campus 1 . Introduction Various efforts toward preventing the spread of COVID - 19 infections are underway worldwide . The Japanese gov - ernment announced in early April 2020 a state of emer - gency , which was lifted at the end of May 2020 . However , university campuses are an environment posing high risk of infection , so universities have implemented campus entry restrictions and other regulations . Maintaining social distance is one effective countermea - sure against COVID - 19 infections . After the state of emer - gency was lifted , the main campus of our university , Kindai University , restricted the number of students allowed to enter per day as a congestion avoidance measure . University staff ﬁrst measure the body temperature of students wishing to enter the campus . After receiving permission to enter , students tap their ID card against a RFID reader . However this method does not allow tracking of student behavior after entrance or determination of places where congestion occurs . Monitoring congestion sites on a university campus facilitates avoidance of crowded environments , campus in - frastructure improvements that will encourage students to change their behavior , and class planning . In this paper , we propose a system for monitoring so - cial distance on university campuses . Figure 1 shows an overview of the proposed system , in which mobile nodes are distributed to each student as a permit for entering the campus . The node can be worn from the neck with a neck Figure 1 . Overview of the proposed system . strap . Distances between students are measured by period - ically sending and receiving Bluetooth low - energy ( BLE ) advertising packets between nodes . Locations of nodes on the university campus can be roughly estimated by using signals from Wi - Fi access points on a campus - wide Wi - Fi network , through which information collected at each node is sent to a monitoring server . Nodes further notify users who are at risk of close contact . In this study , we partially implemented our proposed system using an ESP32 - based microcomputer module ( M5stickC ; M5Stack Technology Co . , Ltd . ) as the mobile node . We evaluated fundamental performance of the implemented system , especially regard - ing BLE communication between nodes . 2 . Related work Even before the COVID - 19 pandemic , there was exten - sive research on using cameras [ 1 ] – [ 3 ] , sensors [ 4 ] – [ 6 ] , and Wi - Fi devices [ 7 ] – [ 9 ] to monitor numbers of persons and de - grees of congestion . However , these studies did not consider distances between people ( social distancing ) , the monitoring and management of which has become an important aspect of countermeasures for preventing the spread of COVID - 19 infections . There have , however , been some studies regarding the use of cameras [ 10 ] , smartphones [ 11 ] , [ 12 ] , and dedicated devices [ 13 ] , [ 14 ] to monitor social distancing . In June 2020 , the Japanese Ministry of Health , Labour and Welfare released a smartphone application called the COVID - 19 Contact - Conﬁrming Application ( COCOA ) [ 11 ] . Based on the Exposure Notiﬁcation Framework , this application uses Bluetooth to measure distances between smartphones . If smartphones are within one meter from each other for more than ﬁfteen minutes , this proximity information is recorded . Therefore , in the unlikely event that an infected person is discovered , it is possible to identify their close contacts . To maintain privacy protection , however , this application does not collect location information . Smartphone - based approaches are inexpensive and quick to deploy , because most students have smartphones . How - ever , students have different smartphone models and carry them in different ways , such as holding them or carrying them in pockets or handbags . Radio - wave propagation envi - ronments around the smartphone therefore differ by student , possibly affecting the accuracy of distance measurements . Our proposed system for monitoring social distance thus assumes students wearing the same model of mobile node on a neck strap . Some studies have investigated the use of dedicated devices to monitor social distancing [ 13 ] , [ 14 ] . In June 2020 , the Singapore government announced plans to distribute a device called the Trace Together Token [ 13 ] . This token has Bluetooth functions that record information about contact with other tokens . As in smartphone - based approaches , it is possible to identify close contacts after determination of an infection . This token does not have Internet connectivity or GPS functions , and user data is deleted after twenty - ﬁve days to maintain privacy protection . Safe Spacer [ 14 ] is another wearable device for mea - suring social distance . It alerts Safe Spacer users coming within six feet of each other . This device is worn on a wristband or hung from the neck with a strap , and distances are measured using ultra - wideband radio . These devices are less affected by interference than are Bluetooth devices , and allow distance measurements as short as 10 cm . In contrast to these systems , our system monitors both contact information and contact locations . 3 . Proposed system Figure 1 shows an overview of our proposed social distance monitoring system for university campuses , in which mobile nodes ( hereinafter , nodes ) are distributed to students as a permit for entering the campus . These nodes are supposed to be worn using a neck strap . As of July 2020 , the Kindai University campus gate has restricted entry to one person at a time . We thus assume that nodes can be distributed at the time of entry and collected upon exit . Nodes have both BLE and Wi - Fi functions , and are as - sumed to be connected to the campus network via a campus - wide wireless LAN . The campus - wide wireless LAN at the Higashi - Osaka Campus of Kindai University comprises 1 , 000 installed access points . We assume that nodes utilize Network Time Protocol to maintain the correct time . Nodes periodically broadcast BLE advertising packets , which include the MAC address of the sender node and a Universally Unique Identiﬁer ( UUID ) for system identiﬁca - tion . We assume that the MAC address is not randomized during the service period . When a node receives from a neighboring node a BLE advertising packet including the proposed system’s UUID , the receiving node records in internal memory the reception time , the source MAC address of the packet , the received signal strength indication ( RSSI ) , and the basic service - set identiﬁer ( BSSID ) , which is the MAC address of the cur - rently connected Wi - Fi access point . The BSSID is used to estimate the approximate node location . At regular intervals , this information is collected at the monitoring server via the campus - wide wireless LAN . The server then visualizes campus congestion sites based on the collected information . When a node receives a BLE advertising packet , it uses RSSI to estimate the approximate distance between nodes . If this distance is below a threshold value for more than a designated time , the node displays an alert on a monitor . In addition , for more precise location estimation , the node compiles a list of campus LAN access points that are accessible from that location , along with the RSSI of beacon signal transmitted from each Wi - Fi access point , and sends that information to the server . The Japanese National Institute of Infectious Diseases exempliﬁes “close contact” as being within one meter of a COVID - 19 patient for more than ﬁfteen minutes without taking necessary infection prevention measures [ 15 ] . We refer this values when setting distance and time thresholds . 4 . Experimental evaluations To verify the feasibility of our proposed system , we implemented a prototype focusing on between - node BLE communications and conducted a fundamental evaluation . 4 . 1 . Implementation We used M5StickC devices as nodes in our implemented system ( Fig . 2 ) . M5StickC is based on the ESP32 - PICO mi - crocontroller , which supports Wi - Fi ( IEEE 802 . 11b / g / n ) and Bluetooth ( classic and BLE ) . An M5StickC has dimensions 24 × 24 × 14 mm and weighs 33 g . It has a 80 × 160 pixel LCD display , a six - axis inertial measurement unit ( MPU6886 ) , and an 80 mAh battery . Nodes in the implemented system send a BLE adver - tising packet every second . The M5StickC cannot change its transmission power . Up to 31 bytes of advertising data can be included in each BLE advertising packet . Adverting packets in our implemented system include a ﬂag , a 16 - byte service UUID , and two bytes of battery voltage information used for power consumption evaluation and debugging . The overall size of an advertising packet , including its header , CRC , etc . , is 43 bytes . The following sections present evaluations of our imple - mented system , especially for between - node BLE commu - nication . There have been many previous studies measuring RSSI in BLE communications , but here we measure social Figure 2 . Mobile node used in our prototype system . Figure 3 . Experimental settings . distances using BLE communication between M5StickC devices hanging from the neck . 4 . 2 . Effects of social distance on receiver - node RSSI We ﬁrst evaluated the effect of node distance on receiver - node RSSI . We performed these experiments with two subjects on the third - ﬂoor elevator hall of Building 38 at Kindai University . One subject wore a sender node that periodically broadcasts only BLE advertising packets , and the other subject wore a receiver node that only receives advertising packets ( Fig . 3 ) . The direction of the subject wearing the sender node is deﬁned as 0 ◦ , and the between - subject distance was varied in a range of 0 . 5 to 5 m in 0 . 5 m increments . The sender node broadcasts 100 BLE adverting packets at each distance . All nodes were powered by wired cables to avoid effects due to remaining battery power . Figure 4 ( a ) shows the RSSI distribution , average , and median at each distance . Here , 0 m indicates two terminals immediately adjacent to each other . As this ﬁgure shows , there are RSSI variations even at the same distance , but RSSI averages and medians decrease with distance . Therefore , it is possible to roughly estimate social distances by transmitting and receiving BLE advertising packets between sender and receiver nodes some number of times and acquiring average or median values . The consulted guideline for COVID - 19 close contacts [ 15 ] stipulates not only distances but also contact durations exceeding ﬁfteen minutes . Therefore , for estimation of close contact , we can use the results of a certain number of packet transmissions and receptions . We also investigated distances at which nodes can re - ceive BLE advertising packets . The results of this evaluation indicated that sender nodes can deliver BLE advertising packets to receiver nodes from distances up to 20 m . There - fore , even if a BLE advertising packet is received , it cannot be determined whether people are in close contact . We should note here that we obtained these evalua - tion results under limited conditions . In future work , we will perform additional evaluations by changing conditions including combinations of nodes , combinations of people , postures of persons wearing monitors , and the environments in which measurements are performed . 4 . 3 . Effects of body orientation on receiver - node RSSI We next evaluated the effects of body orientation on receiver - node RSSI . In these experiments , we ﬁxed the distance between subjects to 2 m , and varied the orientation of the subject wearing the sender node in 90 ◦ increments ( Fig . 3 ) . At each orientation , the sender node broadcasted 100 BLE adverting packets . Figure 4 ( b ) shows the RSSI distribution , average , and median at each orientation . As the ﬁgure shows , there were variations in RSSI even among same orientations . However , the average and median RSSI decreased with orientation . Compared to the case where both subjects faced each other ( deﬁned as 0 ◦ ) , RSSI decreased by about 5 dBm at sender - node subject orientations of 90 and 270 ◦ , and by about 10 dBm at 180 ◦ . There will likely be situations where students sit side - by - side on campus , so it is necessary to estimate close contact with a margin of about 5 dBm . Here , as an outlier , Fig . 4 ( b ) also shows a point at which RSSI exceeded − 100 dBm at a 180 ◦ orientation . The inﬂuence of such outliers can be reduced by using median values when estimating social distancing . 4 . 4 . Effects of sender - node battery level on receiver - node RSSI To evaluate any effects of sender - node battery levels on receiver - node RSSI , we conducted experiments with two nodes at a ﬁxed distance of 1 m . In these experiments , receiver nodes were powered with a wired cable and sender nodes were powered by its internal battery . Two nodes were ﬁxed on a laboratory workbench , because we expected measurement times to be long . We found that the M5StickC battery voltage fell be - low 3 . 0 V after the sender node transmitted 2130 BLE advertising packets , after which the M5StickC shut down . Figure 4 ( c ) shows the relation between battery voltage and RSSI as a scatter diagram . As the ﬁgure shows , we found no correlation between battery voltage and received signal strength . The calculated correlation coefﬁcient was − 0 . 0133 . We therefore conclude that in our implementation , there is no need for considering effects of sender - node battery voltage on RSSI . Accordingly , it is not necessary to include battery voltage information in advertising packets . - 90 - 80 - 70 - 60 - 50 - 40 - 30 - 20 - 10 0 0 1 2 3 4 5 R SS I [ d B m ] Distance [ m ] AverageMedian ( a ) RSSI against social distance - 110 - 100 - 90 - 80 - 70 - 60 - 50 0 50 100 150 200 250 300 R SS I [ d B m ] Angle AverageMedian ( b ) RSSI against body direction - 85 - 80 - 75 - 70 - 65 - 60 3 3 . 2 3 . 4 3 . 6 3 . 8 4 4 . 2 Correlation : - 0 . 0133 R SS I [ - d B m ] Battery voltage [ V ] ( c ) Relation between battery voltage and RSSI Figure 4 . Experimental evaluation results . 5 . Conclusions and future work We proposed a social distance monitoring system for university campuses . The proposed system estimates social distances by using BLE packets among dedicated mobile nodes , collecting their data on a monitoring server via a campus - wide wireless LAN . We partially implemented the proposed system using M5StickC devices and conducted fundamental evaluations for between - node BLE communi - cations . The results conﬁrmed that it is possible to roughly estimate distances by using average or median RSSI values , that there are variations in RSSI depending on the orienta - tions of persons wearing the monitor , and that sender - node battery power does not affect RSSI . Evaluations in this study considered only very simple situations , so in future studies it will be necessary to perform evaluations in larger and more varied university campus environments . It is also necessary to consider mechanisms for reducing node power consumption . Acknowledgments The authors would like to thank Dr . Masahiro Tada , Dr . Hitoshi Habe , Dr . Shoji Mizobuchi , and Dr . Hisashi Handa for their comments at early stages of this work . This work was partly supported by JSPS KAKENHI ( 19K11934 ) , 2020 Kindai University Research Enhancement Grant ( SR08 ) , and the “All Kindai” COVID - 19 Infection Control Support Project . References [ 1 ] A . B . Chan and N . Vasconcelos , “Counting people with low - level features and Bayesian regression , ” IEEE Transactions on Image Pro - cessing , vol . 21 , no . 4 , pp . 2160 – – 2177 , Apr . 2012 . [ 2 ] Z . Ma and A . B . Chan , “Crossing the line : Crowd counting by integer programming with local features , ” in IEEE CVPR 2013 , Jun . 2013 , pp . 2539 – – 2546 . [ 3 ] S . Fujisawa , G . Hasegawa , Y . Taniguchi , and H . Nakano , “Pedestrian counting in video sequences based on optical ﬂow clustering , ” Inter - national Journal of Image Processing , vol . 7 , no . 1 , pp . 1 – 16 , Feb . 2013 . [ 4 ] F . Bu , R . Greene - Roesel , M . C . Diogenes , and D . R . Ragland , “Esti - mating pedestrian accident exposure : Automated pedestrian counting devices report , ” UC berkeley Trafﬁc Safety Center , Mar . 2007 . [ 5 ] R . Greene - Roesel , M . C . Di’ogenes , D . R . Ragland , and L . A . Lin - dau , “Effectiveness of a commercially available automated pedestrian counting device in urban environments : comparison with manual counts , ” TRB 2008 Annual Meeting , 2008 . [ 6 ] S . Fujii , Y . Taniguchi , G . Hasegawa , and M . Matsuoka , “Pedes - trian counting with grid - based binary sensors based on Monte Carlo method , ” SpringerPlus , vol . 3 , pp . 1 – 10 , Jun . 2014 . [ 7 ] Y . Wang , J . Yang , H . Liu , Y . Chen , M . Gruteser , and R . P . Martin , “Measuring human queues using WiFi signals , ” in Proceedings of ACM MobiCom 2013 , Sep . 2013 , pp . 235 – 237 . [ 8 ] L . Schauer , M . Werner , and P . Marcus , “Estimating crowd densities and pedestrian ﬂows using Wi - Fi and Bluetooth , ” in Proceedings of Mobiquitous 2014 , Dec . 2014 , pp . 171 – 177 . [ 9 ] T . Yoshida and Y . Taniguchi , “Estimating the number of people using existing WiFi access point based on support vector regression , ” Information , vol . 19 , no . 7A , pp . 2661 – 2668 , Jul . 2016 . [ 10 ] N . S . Punn , S . K . Sonbhadra , and S . Agarwal , “Monitoring COVID - 19 social distancing with person detection and tracking via ﬁne - tuned YOLO v3 and Deepsort techniques , ” arXiv : 2005 . 01385 , May 2020 . [ 11 ] Ministry of Health , Labour and Welfare , “COCOA : COVID - 19 Contact - Conﬁrming Application , ” Jun . 2020 , https : / / www . mhlw . go . jp / stf / seisakunitsuite / bunya / cocoa 00138 . html . [ 12 ] MAMORIO , “Mamorio , ” 2020 , https : / / mamorio . jp / . [ 13 ] Singapore Government , “TraceTogether Token : Media Statement , ” 2020 , https : / / www . tech . gov . sg / media / media - releases / 2020 - 06 - 16 - tracetogether - token - media - statement . [ 14 ] IK Multimedia , “Safe spacer , ” 2020 , https : / / www . safespacer . net / . [ 15 ] Naitonal Institute of Infectious Diseases , “ Guidelines for Active Epi - demiological Surveys on New Coronavirus Infections , ” 2020 , https : / / www . niid . go . jp / niid / images / epi / corona / 2019nCoV - 02 - 200529 . pdf .