AB WiuseSubuwoa l of allproexpin rantratim Ca H . 2 G Alg K Ro 1 . LoallchecherenLeoptraWheitreces We spe ThpoGilocto ry Re usirou 1 h 2 h C W A TripR Hsun Graduate Ins and MultimedUniversity d98944006 BSTRACT ith location - bas ers can easily p uch check - in dat ut also serves as ork , we aim to c large - scaled chec users . A novel r ow users to pec ovides the flexib pected duration points as a rou nking mechanism avelers who are me constraints in ategories and 2 . 8 [ Database Ma eneral Term gorithms , Perform eywords oute recommendati INTRODU ocation - based ser ow the constru eck - in actions . eck - in actions th nt location and everaging the che an intelligent avelers or backpa hile most of the ther the shortest commend routes as trip routes de e also allow us end for the trip . he central idea is ints and to min ven ( a ) user ch cation points , an recommend a ra requirements . elated Works . M ing the GPS traj utes from histor https : / / foursquare http : / / gowalla . co Copyright is held by WWW 2012 Compa ACM 978 - 1 - 4503 - Rec : Rec - Ping Hsieh stitute of Netw dia , National T y , Taipei , Taiw 6 @ csie . ntu . ed ed services , su erform check - in ta not only enab a fine - grained collectively reco ck - in data throu recommendationify starting / end bility to satisfy of the trip ) . By ute , we mine the m to achieve th unfamiliar to t n the trip . d Subject De anagement ] : Datab ms mance , Design . ion , trip planning , UCTION rvices ( LBS ) , su uction of person With smart ph hat transmit the timestamp to eck - in records o system , TripRec ackers who are u e existing trip p geodesic distan s , we recommen erived from coll sers to specify s to represent a ne the top - k tim heck - in records , nd ( c ) the time c anked list of k fr Most of the exi ectory records [ 2 rical trajectories e . com / m / y the author / owne anion , April 16 – A - 1230 - 1 / 12 / 04 . comme h working Taiwan wan du . tw ch as Foursqua n actions anywh bles personal ge source for trip mmend trip rout ugh mining the m n system , TripRe and must - go loc certain time co considering a se e frequent sequ he goal . Our Tr the objective ar escriptors base Applications subsequence mini uch as Foursquar nal geospatial j hones , users can geographical inf certain location of users , this pap c , to recommen unfamiliar with planning system nce or the shorte nd the frequent c ective travel tra the expected tim route as a sequ me - based freque , ( b ) the startin constraint of this requent routes sa isting works dis 2 ] [ 7 ] . Yuan et a on the road ne r ( s ) . April 20 , 2012 , Lyo ending Chec Ch Graduate In and MultimeUniversit d9894400 are and Gowalla here and anytime ospatial journey planning . In thi tes by leveragin moving behavior ec , is proposed t cations . It furthe onstraint ( i . e . , th equence of check ences with som ripRec targets a rea / city and hav – Data mining . ing , check - in data . re 1 and Gowalla journeys throug n easily perform formation of cur n - based services per aims to devel nd trip routes fo some given area ms [ 3 ] [ 6 ] conside est time period t check - in sequenc cks of past users me they want t uence of check - i nt subsequences ng and / or endin s trip , our goal i atisfying the que scover trip route l . [ 7 ] infer fastes etwork . Based o on , France . Trip Ro ck - in Da heng - Te Li nstitute of Netw edia , National ty , Taipei , Tai 05 @ csie . ntu . e a , e . ys is ng rs to er he k - me at ve 2 , gh m r - s . l - or a . er to c - s . to in s . ng is e - es st on the user sequencmine tra provide knowledquent tri 2 . ME We coll tains 6 , 4 to Oct . 2 Preproc into seq two con check - in Frequen subsequlocationwith que ing met the imp which is subsequwhere m our syst contains We ado quence . first sea found . The idea [ 4 ] , to i quent su same fre discover that the proposestrategysequencneeds n will not outes fr ata working Taiwan iwan edu . tw r - interested activ ces from GPS tr avelers’ frequent no spatio - temp dge , we are the ip routes with tim Fig ETHODOL lect a large - scale 442 , 890 check - in 2010 . We give th cessing . For eac quences of locati nsecutive locatio n places for all p nt Subsequenc uence from the r ns with a time ery locations . Th thod to find the ortance of a sub s the number of uence P is frequ minsup is a user tem , we prefer to s enough routes . opt similar conc The mining pr arch manner un a of closed patte improve the eff ubsequence is a requency in the ry can eliminat efficiency is bo ed three pruning y is same proje ce of P 2 and bo not to be grown be closed . The rom La Sh Graduate I and MultimUnivers sdlin @ vities , Zheng et a rajectory databa t trip patterns fr poral user quer first to tackle t me constraints u gure 1 . System Ov LOGY ed check - in data ns and 950 , 327 he system overv ch user , we tran ions . We also as ns by averaging people . A route d ce Mining . The route database . F constraint , we f hen we devise a e frequent routes bsequence by ca f sequence conta uent if its suppo r - specified mini o set minsup = 1 cepts from [ 5 ] t rocess is recursi ntil no more freq ern mining was i ficiency for larg a sequence with database . A del te frequent but oost and the me g strategies to ac ected database oth share the sa because the sub second strategy rge Sca hou - De Lin nstitute of Ne media , Nationa sity , Taipei , Ta @ csie . ntu . edu al . [ 8 ] recommen se . Though Ara rom geo - tagged p rying . To the b the recommenda using check - in da verview . a from Gowalla , friendships from view of TripRec nsform its check sociate a time sp g the time spent b database is then e goal is to mi For a query cont first retrieve the a frequent subseq s of locations . W alculating its sup aining such subs ort is not less th imum support th % to ensure tha o mine the freq vely performed quent subsequen introduced by Pa ge - scaled data . A h no super - seque liberate closed s redundant subse emory usage is r chieve such goa removal . If P 1 ame projected d bsequence gener is forward check ale etworking al Taiwan aiwan u . tw nd the travel ase et al . [ 1 ] photos , they best of our ation of fre - ata . which con - m Feb . 2009 in Figure 1 . k - in records pan between between two built . ine frequent aining some e sequences quence min - We measure pport value , equence . A han minsup , hreshold . In at the system quent subse - in a depth - nces can be asquier et al . A close fre - ences of the subsequence equences so reduced . We al . The first is a super - database , P 2 rate from P 2 king scheme . WWW 2012 – Poster Presentation April 16 – 20 , 2012 , Lyon , France 529 A pattern P is not closed if there is a frequent subsequence e in P ’s projected database , whose support is equal to P ’s support . The third strategy is backward checking scheme . A subsequence P needs not to be grown if there is a frequent location e before P , whose support is equal to P ’s support . Thus , every pattern generat - ed from P is contained by the subsequence generated from concat - enating P and e and both subsequences have the same support . By applying the three strategies , the closed frequent subsequences can be efficiently mined . Since we aim to recommend the routes based on the query start - ing / end locations , the mined subsequences can be further pruned accordingly . Besides , a subsequence is ruled out if its total travel - ing time exceeds the time constraint specified by the traveler . Route Merge . Since the number of desired locations could be larger than the length of mined routes , we might need to merge the two or more separate subsequences to obtain routes satisfying que - ry requirements . We merge two routes if they share at least one location . Taking Figure 2 as an example , assume two frequent subsequences , P A : < L A1 , L A2 , L A3 , L A4 > and P B : < L B1 , L B2 , L B3 , L B4 , L B5 , L B6 > , are mined , and L A2 = L B3 . If the location L A1 is the start - ing location , and the L B6 is the destination , we merge P A and P B to generate a new route P C : < L A1 , L A2 , L B4 , L B5 , L B6 > . We average the support values of original routes to be the support of the merged route . Figure 2 . An example of merging subsequences . Route Scoring . To obtain a ranked list of top k routes , we provide three ranking criteria . The first utilizes the support value , which determines the popularity of mined subsequences . The second criterion utilizes the time constraint . We rank routes based on the whether its total spending time is close to the expected travel time given by the user . The third is the social effect . Users may prefer those mined subsequences that had ever visited by their friends . Therefore , for a mined route , if the sum of visiting times for its locations is larger , it will be assigned a higher rank . These ranking criteria can further be combined to have better quality of routes . 3 . TRIPREC SYSTEM AND EXPERIMENT The system interface of TripRec is shown in Figure 3 . Travelers are allowed to input some desired locations or use the popular attractions the system suggest . They can also enter the expected travel time duration . The recommended top - k trip routes are shown in the right panel . If the traveler has Gowalla ID , the system can use his own social circle for recommendation . Furthermore , Tri - pRec also recommends the transportation mode between locations , which is developed using Google Map API . Figure 3 . The system interface of TripRec . We aim to provide a real - time recommendation based on the user query . We conduct experiments to show the response time ( in se - conds ) using some manually - compiled queries . We randomly se - lect one hundred attractions in New York City and combine them to form new queries . The Figure 4 presents the average run time by varying the minsup from 1 % to 20 % . We can find that as the min - sup gets smaller , the response time of our system increases slowly . Even with low minsup , our system still works efficiently , especial - ly when using pruning strategies . Such results indicate TripRec can provide efficient real - time recommendations . Figure 4 . Time efficiency in seconds for our TripRec . 4 . Conclusion In this paper , we demo a system that recommends trip to users based on check - in data . Different from the GPA - data driven rec - ommendation , the check - in data provides a discrete time sequence of objects that allow us to provide more accurate recommenda - tions . TripRec has several potential usage scenario such as recom - mending one - day trip starting from a hotel for the first - time travel - er ; or recommending a series of landmarks that visited by the friends to a user . 5 . ACKNOWLEDGEMENTS This work was supported by National Science Council , National Taiwan University and Intel Corporation under Grants NSC 100 - 2911 - I - 002 - 001 , and 10R70501 . 6 . REFERENCES [ 1 ] Arase , Y . , Xie , X . , Hara , T . , and Nishio , S . Mining people ' s trips from large scale geo - tagged photos . In ACM MM 2010 . [ 2 ] Chen , Z . , Shen , H . T . , and Zhou , X . Discovering popular routes from trajectories . In ICDE 2011 . [ 3 ] Lu , H . C . , Lin , C . Y . , and Tseng , V . S . , Trip - Mine : An Efficient Trip Planning Approach with Travel Time Constraints , In MDM 2011 [ 4 ] Pasquier , N . , Bastide , Y . , Taouil , R . , Lakhal , L . , Discovering frequent closed itemsets for association rules , In ICDT 1999 . [ 5 ] Wang J . , Han J . , and Li C . Frequent Closed Sequence Mining without Candidate Maintenance , IEEE Transactions on Knowledge and Data Engineering , 19 ( 8 ) , 2007 . [ 6 ] Yoon , H . , Zheng , Y . , Xie , X . , and Woo W . , Social Itinerary Rec - ommendation from User - generated Digital Trails , Personal and Ubiquitous Computing , 2011 [ 7 ] Yuan , J . , Zheng , Y . , Zhang , C . , Xie , W . , Xie , X . , Sun , G . , and Huang , Y . T - drive : driving directions based on taxi trajectories . In ACM GIS , 2010 . [ 8 ] Zheng , Y . , Zhang , L . , Xie , X . , and Ma , W . - Y . Mining interesting locations and travel sequences from gps trajectories . In WWW 2009 . 0 2 4 6 8 10 12 1 % 5 % 10 % 15 % 20 % Adopt pruning stategies Without pruning strategies Response time ( seconds ) Support WWW 2012 – Poster Presentation April 16 – 20 , 2012 , Lyon , France 530