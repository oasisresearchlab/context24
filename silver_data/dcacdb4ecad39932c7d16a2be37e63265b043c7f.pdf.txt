FM - based Indoor Localization Yin Chen † , Dimitrios Lymberopoulos ‡ , Jie Liu ‡ , Bodhi Priyantha ‡ † Department of Computer Science ‡ Microsoft Research Johns Hopkins University One Microsoft Way Baltimore , MD Redmond , WA yinchen @ cs . jhu . edu { dlymper , liuj , bodhip } @ microsoft . com ABSTRACT The major challenge for accurate ﬁngerprint - based indoor localiza - tion is the design of robust and discriminative wireless signatures . Even though WiFi RSSI signatures are widely available indoors , they vary signiﬁcantly over time and are susceptible to human pres - ence , multipath , and fading due to the high operating frequency . To overcome these limitations , we propose to use FM broadcast ra - dio signals for robust indoor ﬁngerprinting . Because of the lower frequency , FM signals are less susceptible to human presence , mul - tipath and fading , they exhibit exceptional indoor penetration , and according to our experimental study they vary less over time when compared to WiFi signals . In this work , we demonstrate through a detailed experimental study in 3 different buildings across the US , that FM radio signal RSSI values can be used to achieve room - level indoor localization with similar or better accuracy to the one achieved by WiFi signals . Furthermore , we propose to use ad - ditional signal quality indicators at the physical layer ( i . e . , SNR , multipath etc . ) to augment the wireless signature , and show that localization accuracy can be further improved by more than 5 % . More importantly , we experimentally demonstrate that the localiza - tion errors of FM and WiFi signals are independent . When FM and WiFi signals are combined to generate wireless ﬁngerprints , the lo - calization accuracy increases as much as 83 % ( when accounting for wireless signal temporal variations ) compared to when WiFi RSSI only is used as a signature . Categories and Subject Descriptors H . 4 [ Information Systems Applications ] : Miscellaneous ; C . 2 . 1 [ Network Architecture and Design ] : Wireless communication General Terms Experimentation , Measurement , Performance Keywords FM , localization , mobile systems , ﬁngerprinting , wireless Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for proﬁt or commercial advantage and that copies bear this notice and the full citation on the ﬁrst page . To copy otherwise , to republish , to post on servers or to redistribute to lists , requires prior speciﬁc permission and / or a fee . MobiSys’12 , June 25 – 29 , 2012 , Low Wood Bay , Lake District , UK . Copyright 2012 ACM 978 - 1 - 4503 - 1301 - 8 / 12 / 06 . . . $ 10 . 00 . 1 . INTRODUCTION Accurate indoor positioning information has the potential to rev - olutionize the way people search , locate and navigate to points of interest inside buildings in a similar way that GPS revolution - ized the way people navigate outdoors . For instance , a user in a mall could leverage his mobile device , equipped with accurate in - door positioning technology , to instantly search , locate and navi - gate with real - time turn - by - turn directions to any store in the mall . When entering a store , the user’s mobile device could automatically provide directions to the exact aisle or section where the desired product is located . At the same time , businesses and advertisers could push coupons and offers to the user in real time based on his current position within the mall or the store , maximizing customer targeting effectiveness . Enabling these scenarios has been challenging mainly due to the unavailability of GPS signals in indoor environments . In the absence of GPS , ﬁngerprint - based indoor localization techniques have been the most accurate approach to indoor localization [ 1 , 9 , 27 ] . The major challenge for ﬁngerprint - based approaches is the design of robust and discriminative signatures . The most popular approach , that does not require any hardware deployment , has been to leverage already available wireless signals ( e . g . , WiFi , cellular ) to proﬁle a location , usually in the form of received signal strength indicator ( RSSI ) values [ 1 , 24 ] . In previous work , RSSI values of WiFi signals have been primarily used for this purpose , as WiFi ac - cess points are widely deployed indoors , and every mobile device is equipped with a WiFi receiver . Even though this approach has been successful in localizing peo - ple at a coarser grain ( e . g . , at the building level [ 21 ] ) , it exhibits several limitations when considering indoor environments where a person needs to be localized at the room level . First , the oper - ating frequency range of WiFi signals makes them susceptible to human presence and orientation as well as to the presence of small objects in a room . This introduces variability in the recorded ﬁn - gerprints that can lead to localization errors . Second , several of the deployed WiFi access points are commercial in nature and employ optimizations , such as frequency hopping , to improve network’s throughput . These optimizations can result in signiﬁcant variations in the observed received signal strength ( i . e . , RSSI values change across WiFi channels ) , and therefore in the localization process . Third , WiFi RSSI values exhibit high variation over time that , as we show in this work , can adversely impact localization accuracy . Fourth , the area of coverage of a WiFi access point is signiﬁcantly reduced in indoor environments due to the presence of walls and metallic objects , easily creating blind spots ( i . e . , basement , parking lots , corner rooms in a building , etc . ) . To address these limitations , we study the feasibility of leverag - ing alternative wireless signals to augment or even replace WiFi Signal Frequency Range RX Power WiFi 2 . 4 GHz , 5GHz 30 m indoor 800 mW FM 88 - 108 MHz 300 km outdoor 40 mW Table 1 : Basic properties of WiFi and FM broadcast signals . signals for ﬁngerprinting . In particular , we propose to use FM broadcast radio signals for ﬁngerprinting indoor environments . FM signals operate at the frequency range of 88 - 108MHz in the US , which makes them less susceptible to the presence and orientation of humans and small objects . Furthermore , FM signals are signif - icantly stronger than WiFi signals in the sense that they can easily cover areas of hundreds of kilometers , while achieving good in - doors penetration ( Table 1 ) . From the infrastructure point of view , there are thousands of commercial and amateur FM signals being broadcasted continuously across the world , eliminating the need for deploying any custom infrastructure . Also , most mobile devices , even the lower - end ones , are equipped with FM radio receivers that are lower power and less costly compared to the WiFi receivers ( Table 1 ) . However , in the case of FM radio signals , the access points ( FM towers ) are located up to several hundred of kilometers far away from the user and transmit signals at a very high power . As a result , the recorded FM RSSI signatures might not exhibit signiﬁcant vari - ation across nearby locations , and therefore ﬁne grain localization might not be feasible . Previous work that has already examined the use of FM radio signals for localization in outdoor environments has veriﬁed this intuition by demonstrating coarse - grained local - ization accuracies ( e . g . , zip code level [ 10 ] or tens of meters [ 8 ] ) . In this work , we demonstrate through a detailed experimental study that FM broadcast radio signals can be used to achieve room - level indoor localization with similar or better accuracy to the one achieved by WiFi signals . Even though FM radio reception may not vary signiﬁcantly across nearby outdoor locations , in the case of indoor environments the internal structure of the building can signiﬁcantly affect the propagation of FM radio signals , providing enough resolution in the FM signal signatures to accurately localize mobile devices . This paper makes the following contributions : • We demonstrate through detailed experiments in 3 represen - tative buildings across the US ( a residential building , an of - ﬁce building , and a shopping mall ) that FM radio signals can achieve similar room - level accuracy in indoor environments when compared to WiFi signals . • We propose to exploit additional information at the physi - cal layer , such as multipath or frequency offset information , to create more reliable ﬁngerprinting of indoor spaces , and demonstrate through real world experiments , that this ap - proach can improve the accuracy of FM - radio based indoor localization by more than 5 % when compared to the accuracy achieved by FM or WiFi RSSI - only signatures . • We study in detail the effect of wireless signal temporal vari - ation and demonstrate that WiFi RSSI values exhibit signiﬁ - cantly higher variation over time compared to FM RSSI val - ues . This enables FM - based indoor localization to achieve approximately 57 % higher room - level localization accuracy when considering temporal variations of wireless signals . • We experimentally demonstrate that FM and WiFi signals are complementary in the sense that their localization er - rors are independent . Our experimental results indicate that when FM and WiFi signals are combined to generate ﬁnger - prints , the localization accuracy increases by 11 % ( without accounting for temporal variation ) or up to 83 % ( when ac - counting for wireless signal temporal variation ) compared to when WiFi RSSI only is used as a signature . 2 . ARCHITECTURE OVERVIEW Figure 1 provides an overview of the proposed indoor localiza - tion approach . As in most ﬁngerprinting approaches , there is a training and a positioning stage . The training stage is responsible for collecting location - annotated wireless signal ﬁngerprints that form the ﬁngerprint database . The ﬁngerprint database can be au - tomatically crowdsourced from real mobile users as they check - in to different businesses or it can be manually created through de - tailed proﬁling . Every time a business check - in takes place , the wireless ﬁngerprint is recorded on the mobile device and the busi - ness location is retrieved from freely available web services . The recorded wireless ﬁngerprint is properly annotated with the busi - ness’ location information and stored in the database . At the po - sitioning stage , the mobile device records its wireless signal ﬁn - gerprint and compares it against the available ﬁngerprints in the database . The location associated to the ﬁngerprint in the database that is the closest to the ﬁngerprint recorded on the mobile device , in terms of a distance metric , such as euclidean distance , is assumed to be the current location of the device . The most challenging task in ﬁngerprint - based localization is the engineering of the ﬁngerprint itself . To enable accurate local - ization , ﬁngerprints need to be carefully engineered so that even nearby locations have sufﬁciently different ﬁngerprints . Most pre - vious approaches have adopted the received signal strength ( RSSI ) of nearby WiFi access points as the wireless signal ﬁngerprint . In this work we extend this approach in two fundamental ways . First , we augment the wireless ﬁngerprint to include the RSSI informa - tion obtained by FM radio signals . As Figure 1 ( b ) shows , mobile devices record RSSI information from several FM radio station sig - nals that are broadcasted from one or more radio towers . The RSSI value for each FM frequency can be used along with the WiFi RSSI values to form the wireless ﬁngerprint . By combining WiFi RSSI with RSSI values from another wireless signal that is less suscep - tible to human presence and orientation , small objects , and multi - path and fading due to its lower wavelength , we manage to encode a more robust proﬁle of the location into the wireless signal ﬁnger - print that , as it will be shown later , can lead to better localization accuracy . Second , to enable unique ﬁngerprints even for nearby locations , we propose to extract more detailed information , that goes beyond RSSI , at the physical layer ( Figure 1 ( b ) ) . Even though RSSI has been proven to be a good high - level signal indicator , it does not provide the necessary granularity to enable robust ﬁne grain lo - calization . For instance , RSSI values at different rooms inside a building might be identical due to different reasons such as human presence and multipath . However , lower level information at the physical layer , such as signal - to - noise ratio ( SNR ) , and multipath indicators , can provide enough insight on how an RSSI value was generated . For instance , the way wireless signals are reﬂected in a room is unique and it depends on the room’s setup and location in the building . As a result , multipath indicators might be different across rooms even though the RSSI values for these rooms might be identical . By augmenting wireless signal ﬁngerprints with addi - tional low level signal indicators , we enable ﬁngerprints to capture more robust information about the wireless signal transmission and the way it is affected from the current room’s structure . This infor - S FM1 S FMn … S Wifi1 S WiFim … Position check - in Wireless Signal Fingerprint Business info : GPS / Address + Position1 … PositionN Fingerprint Database FM WiFi Wireless Signal Fingerprint N e a r e s t N e i g hb o r ( NN , k NN ) Position Training Stage Positioning Stage S FM1 S FMn … S Wifi1 S WiFim … S FM1 S FMn … S Wifi1 S WiFim … S FM1 S FMn … S Wifi1 S WiFim … … FM Radio Towers … 93 . 6 89 . 5 101 . 5 80 . 9 WiFi Access Points SSID1 SSID3 SSID2 FM RX RSSI Multipath Frequency Offset SNR … RSSI Multipath Frequency Offset SNR … S FMi S Wifii S FM1 S FM2 S FM3 S FMn … S Wifi1 S WiFi2 S WiFi3 S WiFim … Wireless Signal Fingerprint WiFi RX S FM1 S FM2 S FM3 S FMn … S Wifi1 S WiFi2 S WiFi3 S WiFim … ( a ) ( b ) Figure 1 : ( a ) Training and positioning stages for indoor localization ( b ) Signal ﬁngerprinting using FM and WiFi radios . mation could eventually be used to differentiate two rooms with the same RSSI values . Note that this information could be leveraged for any wireless signal ( e . g . , WiFi ) as long as it is exposed through the software driver . In fact , most recently Sen et al . [ 18 , 19 ] exploit 802 . 11n PHY layer ( OFDM ) impulse responses and report notable localiza - tion accuracy gains . In this work , we focus on FM radio signals and therefore leverage the additional signal indicators for FM radio signals only . Nevertheless , we believe that in addition to WiFi and FM , getting additional signal indicators from the PHY layer can improve the localization accuracy of other wireless signals too . 3 . EXPERIMENTAL SETUP To evaluate the proposed approach we conducted detailed exper - iments in three typical building environments ( Figure 2 ) : an ofﬁce building in a major corporate campus , a mall consisting of vari - ous restaurants and retail shops , and an apartment in a typical US residential building . The ofﬁce and mall buildings are part of a major corporate campus located in the west coast of the US . Both buildings have a steel skeleton , and their perimeter is covered by large windows . The ofﬁce building consisted of 3 different ﬂoors , with each ﬂoor containing approximately 40 rooms of 9 ft × 9 ft size each . The mall building consisted of a single ﬂoor with a total number of 13 large rooms ( i . e . 100 ft × 30 ft ) of varying size and shape ( Figure 2 ( b ) ) . The residential building is located in a major city on the east coast of the US , and is built using steel - reinforced concrete . The particular apartment proﬁled in this study consisted of 5 different rooms as shown in Figure 2 ( c ) . All buildings had exceptional WiFi and FM signal coverage . Dur - ing data collection we recorded 434 , 379 , and 117 unique WiFi ac - cess points at the ofﬁce , shopping mall , and residential buildings respectively . In every room of all 3 buildings , the FM receiver was able to tune to more than 32 FM radio stations . 3 . 1 Hardware FM radio signatures were collected using the SI - 4735 FM radio receiver from Silicon Labs [ 20 ] ( Figure 3 ) . The particular receiver was chosen for two reasons . First , Silicon Labs’ FM radio receivers are very popular among a wide variety of consumer products such as cars , cell phones , portable media players and more . This enabled us to experiment with one of the most widely used FM receivers in the market today . Second , the particular receiver is among the few ones that expose low - level reception signal information to the ap - plication layer . In particular , besides reporting RSSI values , it pro - vides 3 additional indicators 1 of signal reception : signal - to - noise ratio ( SNR ) , multipath ( MULTIPATH ) , and frequency offset ( FRE - QOFF ) . SNR takes values between 0 and 128 db , and indicates how strong the received signal is compared to noise ( i . e . , interference , signal reﬂections , etc . ) . MULTIPATH takes values between 0 and 100 , and indicates the severity of the multipath effect ( i . e . the num - ber and power of wireless signal reﬂections ) in the current signal reception . FREQOFF mostly takes values between − 10 and 10 , and quantiﬁes the difference in offset between the actual received signal and its different reﬂections . In general , the higher the value of FREQOFF the higher the effect of multipath and fading on the received signal . The combination of RSSI , SNR , MULTIPATH , and FREQOFF indicators represents the FM signature collected at each location during data collection ( Figure 1 ( b ) ) . For embedded designs , such as cell phones , where space and size is important , the FM receiver can be connected to a patch antenna that can be directly implemented on the main PCB of the device . This would enable the device to acquire reliable signal readings , eliminating the unpredictability of loose earphone wires that are currently used as the FM antenna on most cell phones . Unfortu - nately , we were not able to ﬁnd any patch antennas that meet the design criteria of Silicon Labs for the current FM receiver . As a result , we opted to use the typical FM antenna provided in the eval - uation board . To approximate the behavior of a patch antenna , we folded the antenna as much as possible as shown in Figure 3 . In our measurement setup the length of the antenna has twice the length of a typical smartphone . WiFi signatures were collected using an 802 . 11a / b / g / n compati - ble WiFi Link 5300 card from Intel . All WiFi signatures consisted of RSSI values only . Both WiFi and FM receivers were connected to a Lenovo T61p laptop that simultaneously recorded WiFi and FM wireless signal ﬁngerprints for a given location ( Figure 3 ) . 1 The exact algorithm used to compute these indicators is sensitive , and is not provided by the manufacturer . ( a ) Ofﬁce ( 1 out of 3 ﬂoors ) ( b ) Mall ( c ) Apartment Figure 2 : Maps of the different buildings used in our experimental study . 3 . 2 Data Collection and Evaluation The goal of our experiments was to achieve accurate room - level localization 2 . In other words , given a wireless signal ﬁngerprint from a mobile device , provide the room number where the device is located ( “Position " in Figure 1 is actually a room number ) . To achieve this , we proﬁled each room in the building using both WiFi and FM signatures as described in Figure 1 ( b ) . For every room we collect the WiFi and FM signatures for 3 random points inside the room . We chose to only proﬁle a small number of points within the room so that we can evaluate the ability of FM and WiFi signals to achieve high localization accuracy with sparse proﬁling , i . e . , a small ﬁngerprint database . We explore the beneﬁt of having larger databases in Section 5 . 2 . Depending on the experiment , multiple data collections were performed for each room over different time windows . Speciﬁcally , at each location we record the FM signatures for 32 3 FM broadcast stations and scan the signal strengths of all avail - able Wi - Fi access points , as described in Section 3 . 1 . We denote r i , s i , m i , f i ∈ R 32 as the RSSI , SNR , MULTIPATH , and FRE - QOFF values for the 32 FM broadcast stations at the i - th loca - tion , and similarly w i ∈ R M as the RSSI values for the Wi - Fi access points . Here M is the total number of Wi - Fi access points in the building , and i is the proﬁled location . We con - catenate the signature vectors of the i - th location and denote as a i ∈ R 128 + M . In total , for every proﬁled location i within a room there are 128 + M values corresponding to 4 values for every one of the 32 FM channels and M values , one for every WiFi access point . As a result , the whole dataset for a given building can be written as A = { a i : i = 1 , 2 , . . . , 3 × R } , where R is the number of rooms . A typical ﬁngerprinting - based localization scheme involves an ofﬂine phase to construct the database and an online phase for po - sitioning unknown locations . In order to evaluate the localization performance , we emulate this two - phase process by separating the 2 We focus on room - level resolution as this is the resolution at which data can be crowdsourced in a robust way from business check - in events . In Section 7 , we evaluate FM’s capability to achieve ﬁne - grain indoor localization . 3 The seek / tune time for the SI4735 FM receiver is 60 ms per chan - nel , and the power - up time is 110 ms . It takes approximately 2 seconds to scan 32 FM radio stations . Figure 3 : Data collection setup based on the SI - 4735 FM ra - dio receiver from Silicon Labs and the Intel WiFi Link 5300 wireless card connected to a Lenovo T61p laptop . signatures into training and test sets . We ﬁrst partition the whole dataset into three complimentary subsets of equal size : A 1 , A 2 and A 3 , where each set A j contains one and only one location from each room . Next , we can group two subsets together as the train - ing set , i . e . , the ﬁngerprint database , and use the third subset as the test set . We repeat this process using each of the three subsets as the test set and correspondingly the other two subsets as the ﬁnger - print database , and report the average localization accuracy across all combinations . For each test location in the test set , we compare its signature vectors against the ﬁngerprint database and return the location of the nearest neighbor in signal space as the localization result . In all experiments , we report the localization accuracy when Eu - clidean and Manhattan distance metrics are used to compute the distance between wireless signal signatures . Even though more distance metrics have been evaluated , we opted to show only these two , as they consistently provided the highest localization accuracy across all experiments . 4 . FM - BASED INDOOR LOCALIZATION In this section , we focus on the ofﬁce building environment con - sisting of 3 different ﬂoors and 119 rooms in total . We ﬁrst investi - Signature Type Distance Metric Euclidean Manhattan FM RSSI 85 % 87 % Wi - Fi RSSI 76 % 88 % Table 2 : Room level localization accuracy for 119 rooms on 3 ﬂoors using FM and WiFi RSSI values as signatures . 0 10 20 30 40 50 60 70 80 0 . 85 0 . 9 0 . 95 1 Error Distance ( ft ) CD F FM RSSI WiFi RSSI Figure 4 : Distribution of the localization errors for FM and Wi - Fi RSSI . The nearest neighbors in signal space are determined using the Manhattan distance between the RSSI vectors . gate the performance of using RSSI values alone for both FM ( i . e . , r i ) and Wi - Fi signals ( i . e . , w i ) . Next , we use more signal quality indicators for FM ( i . e . , s i , m i , f i ) to see whether extracting more information from the physical layer can improve the localization accuracy . Last , we combine the FM and Wi - Fi vectors to investi - gate the effect on the localization accuracy and perform sensitivity analysis on the number of FM radio stations and WiFi access points used for ﬁngerprinting . 4 . 1 RSSI - based Indoor Localization Table 2 lists the room level localization accuracy results when signature vectors consist of FM or WiFi RSSI values only . It is clear that FM and WiFi RSSI values achieve similarly high accura - cies that are close to 90 % . Of the two distance metrics , Manhattan distance ( i . e . , the L 1 norm ) yields slightly higher accuracy than Euclidean distance ( i . e . , the L 2 norm ) . Figure 4 shows the distribution of the localization errors in terms of physical distance when using FM and WiFi RSSI signatures . Al - though both signals exhibit similar room level accuracies ( Table 2 ) , the localization errors are lower in the case of WiFi . In other words , when WiFi localization erroneously predicts rooms , those rooms are closer to ground truth compared to FM - based localization . This is expected given that there are orders of magnitude difference be - tween WiFi and FM signals in terms of both deployment density and communication range . In general , a WiFi access point is only visible in a subset of the rooms in the building . This signiﬁcantly limits the search space , and therefore the localization error that is generally lower than 30 ft . Conversely , in the case of FM signals , there are only a handful of radio towers at a given region that might be tens or even hundreds of kilometers away from the building . These FM signals can be received throughout the whole building , making every room in the building a possible candidate location . This effect is better illustrated in Figures 5 ( a ) and 5 ( b ) , where the Manhattan distance between every pair of proﬁled locations is shown when FM RSSI and WiFi RSSI signatures are used respec - tively . In the case of WiFi signatures ( Figure 5 ( b ) ) , errors are usu - Signature Type Distance Metric Euclidean Manhattan FM RSSI 85 % 87 % FM SNR 80 % 84 % FM Multipath 68 % 76 % FM Frequency Offset 53 % 53 % FM All 81 % 91 % FM All Normalized 90 % 93 % Table 3 : Room level localization accuracy for 119 rooms on 3 ﬂoors using additional FM signal signatures . Combining mul - tiple signal indicators in a single signature provides more accu - rate localization . ally constrained within the vicinity of the diagonal ( 3 squares along the diagonal , where each square corresponds to one of the 3 ﬂoors proﬁled ) mainly due to the communication range of access points . Very rarely the distance between WiFi RSSI vectors is low for dis - tant locations in the building . On the other hand , the error proﬁle of FM RSSI signature is the exact opposite ( Figure 5 ( a ) ) . The effect of the three squares shown in Figure 5 ( b ) has disappeared , but now distant locations in the building can generate low distance values . As a result , even though FM and WiFi achieve similar localization accuracy overall , the localization error of FM signals is higher in terms of absolute physical distance . 4 . 2 Robust Fingerprinting by Exploiting the Physical Layer To further increase localization accuracy and to constraint errors , in this section , we leverage additional information at the physical layer to generate more robust signatures . The SI4735 FM receiver provides three additional signal quality indicators ( SNR , MULTI - PATH , and FREQOFF ) as described in Section 3 . Each of these signal indicators could be used as an individual signature , or they could all be combined with RSSI to form a single more detailed signature . The additional signal indicators can enhance the res - olution of FM signatures by providing more insight about signal reception . Signal - to - noise ratio , multipath , and frequency offset , all capture detailed information about the wireless signal reception and the way it is affected from the current room’s structure and position in the building . When combining multiple signal indicators into the same sig - nature , calculating the distance between signatures becomes more challenging . Different signal indicators have different value ranges that could result into biasing the distance calculation ( i . e . higher value / range indicators become more important ) . For example , the multipath value range is between 0 and 100 whereas the frequency offset value is usually in the range of - 10 to 10 . Therefore , we normalize the value of each signal indicator using the standard de - viation of the signal indicator’s values in the ﬁngerprint database . For example , we can compute the standard deviation for the RSSI signatures as δ r = (cid:34) 1 N | D | − 1 (cid:88) i ∈ D N (cid:88) j = 1 ( r ij − r ) (cid:35) 12 ( 1 ) where D represents the set of location indices that are in the ﬁn - gerprint database , and r ij is the RSSI value of the j - th FM broad - cast station at the i - th location . r is the average RSSI value in the database , | D | is the cardinality of the set D , and N = 32 is the number of FM broadcast stations . Using the standard deviation , we Location ID Lo c a t i on I D 50 100 150 200 250 300 350 50 100 150 200 250 300 350 0 0 . 1 0 . 2 0 . 3 0 . 4 0 . 5 0 . 6 0 . 7 0 . 8 0 . 9 1 ( a ) FM RSSI Location ID Lo c a t i on I D 50 100 150 200 250 300 350 50 100 150 200 250 300 350 0 0 . 1 0 . 2 0 . 3 0 . 4 0 . 5 0 . 6 0 . 7 0 . 8 0 . 9 1 ( b ) WiFi RSSI Location ID Lo c a t i on I D 50 100 150 200 250 300 350 50 100 150 200 250 300 350 0 0 . 1 0 . 2 0 . 3 0 . 4 0 . 5 0 . 6 0 . 7 0 . 8 0 . 9 1 ( c ) FM ALL Normalized Location ID Lo c a t i on I D 50 100 150 200 250 300 350 50 100 150 200 250 300 350 0 0 . 1 0 . 2 0 . 3 0 . 4 0 . 5 0 . 6 0 . 7 0 . 8 0 . 9 1 ( d ) FM & WiFi ALL Normalized Figure 5 : The Manhattan distance of signature vectors between all pairs of proﬁled locations in the ofﬁce building and for 4 different signature types . The distances are normalized by the maximum pairwise distance in each ﬁgure to have the same range of [ 0 , 1 ] across all ﬁgures . Diagonal values are 0 as they are the distances between identical vectors that correspond to the same locations . can normalize the RSSI signatures as ˆ r i = r i δ r , ∀ i ∈ D ∪ T , ( 2 ) where T represents the set of location indices that are in the test set . All signal indicators’ values are normalized in the same way , enabling us to compute un - biased distance values between signa - tures . Table 3 lists the room level localization accuracy when each sig - nal indicator is used as a single signature , and when all signal indi - cators are combined together into a single signature . The “FM All” signature corresponds to combining all raw signal indicator values into a single signature . The “FM All Normalized” signature corre - sponds into combining all normalized signal indicator values into a single signature . It is clear that among all individual signal indicators , RSSI achieves the best accuracy . On the other hand , multipath and frequency off - set indicators seem to not be able to provide the necessary resolu - tion to achieve accurate localization on their own . However , com - 0 10 20 30 40 50 60 70 80 0 . 85 0 . 9 0 . 95 1 Error Distance ( ft ) CD F FM All Signatures FM All Signatures Normalized Figure 6 : Distribution of the localization errors when combin - ing all available signal indicators from the FM signals into a sig - nature . The nearest neighbors in signal space are determined using the Manhattan distance between the signature vectors . Signature Type Distance Metric Euclidean Manhattan FM All 81 % 91 % FM All Normalized 90 % 93 % Wi - Fi RSSI 76 % 88 % FM & Wi - Fi All 93 % 98 % FM & Wi - Fi All Normalized 94 % 98 % ( a ) Room level localization accuracy True Floor # 2 2 2 2 2 3 3 Room # 3 12 16 19 35 21 23 Predicted Floor # 2 2 2 2 2 3 3 Room # 5 11 17 20 36 19 24 ( b ) Error location list for FM & Wi - Fi All Normalized Table 4 : Room level localization accuracy for 119 rooms on 3 ﬂoors . Table ( a ) shows the localization accuracy achieved across different signature types . Table ( b ) shows a complete list for the room and ﬂoor numbers of the incorrectly identiﬁed locations when using the normalized FM and WiFi signatures with the Manhattan distance metric . bining all signal indicators into a single signature achieves higher accuracy than any individual signal indicator . This highlights the beneﬁt of extracting more information from the physical layer and reﬂects the intuition that each type of signal indicator can capture a unique set of interplays between the propagating radio wave and its surrounding environment . The impact of the additional signal indicators on the localization accuracy of FM signature is better illustrated in Figures 5 ( a ) and 5 ( c ) , where the Manhattan distance between every pair of proﬁled locations is shown when the FM signature ignores or takes into account the additional signal indicators . By comparing Figures 5 ( a ) and 5 ( c ) , it is obvious that when all signal indicators are leveraged in the FM signature , the distance matrix appears to be signiﬁcantly less noisy , in the sense that the distances between non - neighboring locations in the matrix are signiﬁcantly higher compared to the FM RSSI matrix . As a result , higher localization accuracy is achieved when all FM signal indicators are combined into a single signature . Furthermore , Table 3 shows that normalizing the signatures , as described above , can further improve localization accuracy . When compared to Table 2 , FM - based localization achieves 5 . 7 % higher localization accuracy compared to the WiFI RSSI signatures . Normalization not only improves accuracy , but also constraints the error when wrong predictions are made . Figure 6 shows the distribution of the localization errors for FM - based ﬁngerprinting . Normalization increases the percentage of correctly identiﬁed lo - cations , and also reduces the errors for the incorrectly identiﬁed locations . 4 . 3 Combining FM and Wi - Fi In this section we investigate whether the FM and WiFi signal indicators could be combined into a single signature to further im - prove indoor localization accuracy . Table 4 ( a ) lists the room level localization accuracy when WiFi and all FM signal indicators are combined into a single signature . The combination of WiFi and FM signals can eliminate almost all localization errors , achieving 98 % accuracy ; an 11 . 3 % increase compared to WiFi RSSI ﬁngerprinting ( Table 2 ) . This suggests that the localization errors generated by the FM signatures are not correlated with the errors generated by WiFi signatures . To further 0 5 10 15 20 25 30 35 40 45 50 # o f M i s i den t i f i ed Lo c a li z a t i on s FM RSSI WiFi RSSI FM All Normalized | E1 | | E2 | | E1 ∩ E2 | | E3 | | E1 ∩ E3 | Figure 7 : E1 and E2 represent the set of locations that are misidentiﬁed by FM RSSI only and WiFi RSSI only respec - tively . E1 ∩ E2 are the set of locations that misidentiﬁed by both FM and WiFi RSSI signatures . | E1 ∩ E2 | (cid:28) | E2 | , suggest - ing that FM and WiFi positioning errors are not correlated . As a comparison , E3 denotes the set of misidentiﬁed locations us - ing the FM All normalized signature . investigate the correlations , we collect and count the number of lo - cations misidentiﬁed by each signature , as shown in Figure 7 . E1 and E2 are the set of locations misidentiﬁed by FM RSSI and WiFi RSSI respectively . The fact that | E1 ∩ E2 | (cid:28) | E2 | indicates the set of locations misidentiﬁed by FM RSSI rarely overlap with those by WiFi RSSI . As a comparison , we also collect the locations misiden - tiﬁed by all normalized signatures of FM and denote as set E3 . One can see that | E1 ∩ E3 | ≈ | E3 | , and therefore the locations misiden - tiﬁed by FM all normalized signatures highly overlap with those misidentiﬁed by FM RSSI . Overall , one can see that FM localiza - tion errors are not correlated with the WiFi errors . On the other hand , using more FM signatures removes many of the localization errors by FM RSSI . The complementary nature of FM and WiFi signals is clearly il - lustrated in Figure 5 . Initially , FM RSSI signatures ( Figure 5 ( a ) ) provide high localization accuracy , which further increases when the additional signal indicators are leveraged ( cleaner distance ma - trix in Figure 5 ( c ) ) . However , errors are still distributed throughout the building , in the sense that signature distances even for distant locations in the building are low . On the other hand , localization er - rors in WiFi RSSI signatures are mostly constrained to only nearby locations as demonstrated by the 3 dark squares in Figure 5 ( b ) . When FM and WiFi signal indicators are combined into a single signature ( Figure 5 ( d ) ) , the beneﬁts of both FM and WiFi signals show up in the resulting distance matrix . FM signatures signiﬁ - cantly reduce the dark square effect which is the main source of errors in the case of WiFi signals ( Figure 5 ( b ) ) . At the same time , WiFi signals reduce the number of cases where distant locations have low distance values , the major source for errors in the case of FM signals . As a result , a mobile device can leverage its ability to receive both signals to effectively enhance localization accuracy with marginal overhead . Table 4 ( b ) lists the ﬂoor and room numbers of the locations that are identiﬁed incorrectly when combining the normalized FM and WiFi signatures ( i . e . , the last row of Table 4 ( a ) ) with the Manhattan distance . A total of seven test locations ( 2 % of the 357 locations ) 1 8 16 24 32 20 % 40 % 60 % 80 % 100 % Number of FM Broadcast Stations Lo c a li z a t i on A cc u r a cy FM RSSI FM All 1 50 100 150 200 250 300 20 % 40 % 60 % 80 % 100 % Number of Access Points Lo c a li z a t i on A cc u r a cy WiFi RSSI 0 8 16 24 32 88 % 90 % 92 % 94 % 96 % 98 % 100 % Number of FM Broadcast Stations Lo c a li z a t i on A cc u r a cy FM RSSI with 50 Strongest WiFi APs Figure 8 : The sensitivity of localization accuracy on the num - ber of FM broadcast stations and WiFi access points . Sta - tions and access points are added in descending order of their average signal strength . In the last graph we employ the 50 strongest WiFi access points and only vary the number of FM radio stations . are misidentiﬁed . However , all the erroneously predicted rooms are on the same ﬂoor and nearby the true rooms . 4 . 4 Sensitivity Analysis on the Number of FM Stations and WiFi Access Points So far we have been using the signatures from all 32 FM broad - cast stations and 434 visible WiFi access points in the ofﬁce build - ing for indoor localization . However , it is unclear how many FM radio stations and WiFi access points are actually needed to provide accurate localization . To answer this question , we perform a sen - sitivity analysis where we withhold a certain percentage of FM ra - dio stations and WiFi access points , and rerun the nearest neighbor based localization algorithms . Speciﬁcally , we sort the FM stations and WiFi access points in descending order of their RSSI values av - eraged over all locations . At each step , we incrementally add one station / access point at a time , and rerun the localization algorithm . As a result , when we evaluate the localization performance with n stations , we use the n strongest stations in terms of their average RSSI values . Figure 8 shows the localization accuracy achieved when different number of FM radio and WiFi access points are used . It is clear that for both signals , additional infrastructure leads to higher accuracy . To achieve the maximum localization accuracy ( i . e . , accuracy when all radio stations or access points are used ) , 30 FM radio stations and approximately 50 WiFi access points are required . In the case FM Station Index 1 8 16 24 32 Day 1 Day 4 Day 7 Day 10 10 15 20 25 30 35 40 45 Figure 9 : Raw RSSI values in dB µ V of the 32 FM broadcast stations over the course of 10 days . Results for the rest 3 FM signal indicators are not shown in the interest of space . of FM , the accuracy increases very fast till around 8 stations , but it does not saturate afterwards . Instead it keeps rising , but at a lower pace , indicating that a large number of radio stations is required to achieve high localization accuracy . In the case of WiFi , given the high density of access points and their limited communication range , the number of useful access points saturates relatively fast at around 50 access points . When we start by using the 50 strongest WiFi access points as the base line , the localization accuracy increases as we are incre - mentally adding FM stations , and seems to saturate at the point where 25 radio stations are used ( bottom graph of Figure 8 ) . 5 . TEMPORAL VARIATIONS The results in the previous section are derived without consider - ing the temporal variations of FM and WiFi signals . However , it is known that signal signatures are likely to change overtime . For example , Haeberlen et al . [ 9 ] achieve 95 % room level localization accuracy using WiFi RSSI signatures when the test and training data are collected in close time proximity . With data from different time and day , however , the localization accuracy drops to 70 % , as pointed out in [ 22 ] . In this section we explore the temporal variations of the broad - casted FM signals and the impact on localization accuracy . First , we continuously monitor the FM signals for ten days at a ﬁxed lo - cation in one room to gain intuition on how signatures vary over time . To quantify the impact of temporal variations on localiza - tion accuracy , we collect ﬁngerprints for the 40 rooms on the 2nd ﬂoor on different days and run the localization algorithm against ﬁngerprint databases that were recorded at different points in time . 5 . 1 Continuous Monitoring of FM Signals Over Ten Days Figure 9 shows the raw RSSI values of the 32 FM stations at a ﬁxed location in one room over the course of ten days . This room is a regular ofﬁce and therefore its door and furniture could change states due to the presence of humans . The room is at the perimeter of the ofﬁce building and has a window that faces a busy street . We note that there were rainy , cloudy , and also sunny days during the experiment . We conﬁgured the receiver to record all signal in - Signature Type Distance Metric Euclidean Manhattan FM RSSI 100 % 100 % FM SNR 100 % 100 % FM Multipath 100 % 100 % FM Frequency Offset 99 % 77 % FM All 100 % 100 % FM All Normalized 100 % 100 % Table 5 : Room level localization accuracy using the data col - lected at a ﬁxed location over the course of ten days as the test set , against the ﬁngerprint database collected in Section 4 . The ﬁrst three measurements taken at the ﬁxed location were in - serted into the ﬁngerprint database . dicators for the 32 FM broadcast stations once per three minutes . Therefore , Figure 9 includes more than 4000 rows of data . Figure 9 shows that , overall , RSSI values at a given frequency do not change drastically over time . However , all FM stations seem to exhibit ﬂuctuations in RSSI values , but to a different extent . For instance , FM station 27 seems to exhibit way larger ﬂuctuations in RSSI values when compared to FM station 21 . We believe that this is due to the fact that different radio stations are broadcasted from different radio towers and at different transmission power levels . In order to quantify whether these ﬂuctuations would impact this room’s localization result , we use the ﬁrst three rows of data in conjunction with the ﬁngerprints collected in section 4 as the ﬁn - gerprint database , and use the rest of the rows in Figure 9 as the test set . Table 5 lists the percentage of rows that are identiﬁed correctly . The localization accuracies are consistently high for all signature types except frequency offset . This suggests that as long as a lo - cation has been proﬁled before , the temporal variations should not cause this location to be mislabeled in the future . 5 . 2 Collecting Fingerprints on Different Days In this section , we extend the temporal variation analysis to mul - tiple locations . Speciﬁcally , we collect four additional sets of ﬁn - gerprint measurements for the 40 rooms on the second ﬂoor in ex - actly the same way as before , but on different days . We chose to study the second ﬂoor because this ﬂoor exhibits most localization errors as shown in Table 4 ( b ) . We ﬁrst study the pairwise localization performance between two datasets , where one dataset is chosen as the test set and a differ - ent dataset is chosen as the ﬁngerprint database . Note that this way the size of the test set is the same as that of the ﬁngerprint database . We run the nearest neighbor localization algorithm on all combina - tions of pairs of datasets ( i . e . , 20 pairs across 5 datasets ) and present the average room level localization accuracy in Table 6 ( a ) . Com - pared to the results in Table 4 , it is obvious that temporal variations of the signal signatures can lead to noticeable degradation of lo - calization accuracy . WiFi RSSI signatures seem to be affected the most by temporal variations as the localization accuracy decreases by 44 % ( from 88 % to 49 % ) in the presence of temporal varia - tions . On the other hand , FM signatures seem to be less susceptible to temporal variations , as the localization accuracy decreases by only 13 % ( from 93 % to 81 % ) , and the achieved accuracy remains above 80 % . In general , because of the differences in frequency and wavelengths between FM and WiFi signals , WiFi signals are more susceptible to human presence / orientation , and to the presence of even small objects in the room . However , both human presence and Signature Type Distance Metric Euclidean Manhattan FM RSSI 78 % 77 % FM All 79 % 82 % FM All Normalized 75 % 81 % Wi - Fi RSSI 43 % 49 % FM & Wi - Fi All 85 % 89 % FM & Wi - Fi All Normalized 80 % 90 % ( a ) Pairwise : same size test and training sets Signature Type Distance Metric Euclidean Manhattan FM RSSI 91 % 92 % FM All 91 % 92 % FM All Normalized 88 % 91 % Wi - Fi RSSI 57 % 61 % FM & Wi - Fi All 94 % 96 % FM & Wi - Fi All Normalized 91 % 95 % ( b ) One versus many : four datasets in the ﬁngerprint database Table 6 : Room level localization accuracy for 40 rooms on the second ﬂoor . Table ( a ) lists the localization accuracy where one dataset is chosen as the test set and a different dataset as the ﬁngerprint database . Table ( b ) includes four datasets in the ﬁngerprint database . setup of objects in a room changes over time , signiﬁcantly lowering the localization accuracy of WiFi RSSI - based ﬁngerprinting . The signature that is affected the least by temporal variations is the one that combines WiFi RSSI and the 4 FM signal indicators . In particular , localization accuracy decreases by only 8 % , and ab - solute accuracy is 90 % . Note that these observations are consistent with the observations in Section 4 . 3 , indicating that WiFi and FM errors are uncorrelated . As more data is crowdourced or manually collected over time , the quality of the ﬁngerprint database improves . The rationale is that more datasets that are collected across different days can po - tentially capture more patterns of the signal signatures in the tem - poral domain . Table 6 ( b ) quantiﬁes the impact of the size of the ﬁngerprint database on the localization accuracy . It lists the results of using four datasets as the ﬁngerprint database and one dataset as the test set . It loops through the ﬁve different combinations and reports the average numbers . Clearly , adding more datasets into the database can lead to notable gains in the localization accuracy , indicating that a bigger ﬁngerprint database can better cope with temporal variations . We note that during the course of our experiments , most of the changes in the environment were the movements of people , chairs , doors , and other smaller objects . Our experimental results indi - cated that both WiFi and FM signals are susceptible to these changes , however , FM signals are affected signiﬁcantly less compared to WiFi . More dramatic changes such as moving big metal shelves should affect the signatures to a larger extent for both WiFi and FM signals , but have not been studied in this work . 6 . DIFFERENT TYPES OF BUILDINGS In this section , we investigate whether the results obtained in ofﬁce environments can apply to other types of buildings and geo - graphic regions in the US . Signature Type Distance Metric Euclidean Manhattan FM RSSI 77 % 80 % FM All 65 % 72 % FM All Normalized 67 % 71 % Wi - Fi RSSI 94 % 97 % FM & Wi - Fi All 94 % 98 % FM & Wi - Fi All Normalized 96 % 98 % ( a ) Pairwise : same size test and training sets Signature Type Distance Metric Euclidean Manhattan FM RSSI 87 % 90 % FM All 79 % 82 % FM All Normalized 92 % 87 % Wi - Fi RSSI 97 % 100 % FM & Wi - Fi All 97 % 100 % FM & Wi - Fi All Normalized 97 % 100 % ( b ) One versus many : four datasets in the ﬁngerprint database Table 7 : Table ( a ) lists the localization accuracy where one dataset is chosen as the test set and a different dataset as the ﬁngerprint database . Table ( b ) includes four datasets in the ﬁngerprint database . 6 . 1 Shopping Mall Shopping malls are different from ofﬁce buildings in many as - pects . The ceilings are taller and the rooms are sparser and bigger , which makes malls resemble outdoor environments more than of - ﬁce buildings do . Given that FM - based indoor localization depends on the internal structure of the building to achieve high localization accuracy , it is unclear whether FM signatures can be used in this type of environments . We opted to collect ﬁngerprint measurements at the ﬁrst ﬂoor of a two - story mall building that hosts various restaurants and retail shops ( Figure 2 ( c ) ) . We collected ﬁve ﬁngerprint datasets on three different days . For each dataset , we take measurements in 13 rooms and at 3 random locations for each room . Therefore , every dataset includes a total of 39 locations . The ﬁrst 4 datasets are collected during a weekend , and the 5th dataset is collected on a Wednesday afternoon . Table 7 ( a ) shows the average pairwise localization accu - racy across all possible combinations of database and test datasets . Interestingly , FM signatures perform slightly worse compared to the ofﬁce building ( cf . Table 6 ) , but WiFi signatures perform signif - icantly better . The degradation of FM signatures’ accuracy can be attributed to the fact that mall buildings resemble more of outdoor environments as the impact of the internal structure of the building on signal propagation is lower compared to ofﬁce buildings . On the other hand , WiFi signatures can more reliably distinguish the 13 rooms because of the large size and clear spatial separation of these rooms , to the extent that some of them are covered by completely different sets of access points . Nevertheless , combining WiFi and FM signatures still provides the highest positioning accuracy . Table 7 ( b ) shows the localization accuracy when using only one dataset as the test set and the remaining four datasets altogether as the database . Similar to the case of the ofﬁce building environment , having more ﬁngerprints in the database increases localization ac - curacy . Signature Type Localization Accuracy FM RSSI 100 % WiFi RSSI 90 % FM & WiFi All 97 % FM & WiFi All Normalized 100 % Table 8 : Localization accuracy for 5 rooms in a residential building when the Manhattan distance metric is used . 6 . 2 Residential Building Residential buildings differ from ofﬁce and mall buildings in size , shape , structure and often building materials . In this sec - tion , we study the performance of FM based indoor localization in an apartment unit that has multiple rooms of various sizes ( Fig - ure 2 ( b ) ) . This apartment is located on the east coast of the US , and therefore the list of FM stations are completely different from the ones used in the ofﬁce and mall buildings which are on the west coast . Nevertheless , we still chose 32 audible stations such that the number of stations remains consistent . We collected two datasets on two different days . Each dataset gathered measurements in 5 rooms and at 3 random locations per room . We chose each of the two datasets in turn as the test set and ﬁngerprint database to evaluate the positioning accuracy . Table 8 shows the average room level localization accuracy for FM and WiFi signatures . Overall , both FM and WiFi signatures demon - strate above 90 % accuracy in this environment , with FM signatures achieving perfect room - level localization accuracy . These results are comparable to the results at the ofﬁce and mall buildings , sug - gesting that : ( 1 ) the achieved localization accuracies are indepen - dent of the building type , and ( 2 ) the FM based indoor localization approach is applicable to other geographic regions with different FM broadcast infrastructure . 7 . FINE - GRAIN LOCALIZATION AND DE - VICE VARIATIONS So far , we have been focusing on room - level localization as this is the resolution at which data can be crowdsourced reliably from current business check - in events . However , it is still feasible to collect more ﬁne - grained , location annotated indoor ﬁngerprints through detailed proﬁling . To study the feasibility of using FM ra - dio signals to perform ﬁne - grain location estimation , we performed experiments along the hallway on the second ﬂoor of the ofﬁce building . Speciﬁcally , we gathered FM and WiFi signatures at 100 loca - tions that formed a straight line along the hallway , with the distance between every two adjacent locations being approximately one foot ( ± 0 . 06 ft ) . We collected a total of three datasets in different days to capture the temporal variation of signal signatures . The exact same locations were proﬁled in all three datasets . The coordinates of each location were measured accurately using a laser distance meter . 7 . 1 Leave One Out Evaluation For each one of the three datasets , we perform the leave - one - out evaluation . In particular , we remove one and only one location at a time from the dataset and compare its signature against the other 99 signatures in the dataset . The position of the closest signature is assumed to be the position of the test location . In such an evalua - tion , a robust signature scheme should always return one of the two neighboring locations to the test location . 0 0 . 5 1 1 . 5 2 0 0 . 2 0 . 4 0 . 6 0 . 8 1 Error Distance ( ft ) CD F FM RSSI FM All FM & WiFi All 0 5 10 15 0 0 . 2 0 . 4 0 . 6 0 . 8 1 Error Distance ( ft ) CD F WiFi RSSI Figure 10 : Distribution of the leave - one - out localization errors for FM and WiFi RSSI signals . The nearest neighbors in signal space are determined using the Manhattan distance between the RSSI vectors . Datasets Signature Type Localization Error ( ft ) 50 % 90 % 1 vs 2 FM RSSI 0 . 02 2 . 02 1 vs 2 WiFi RSSI 4 . 97 15 . 00 3 vs 1 & 2 FM RSSI 0 . 01 1 . 00 Table 9 : Localization errors using FM and WiFi RSSI signa - tures in the hallway using the Manhattan distance to determine the nearest neighbor in signal space . All datasets were taken at different days . Datasets 1 and 2 were taken using the same FM receiver , while dataset 3 leveraged a different FM receiver of the exact same type . Figure 10 shows the distribution of the localization errors for FM and WiFi RSSI signatures across all 3 datasets . FM RSSI signatures provide highly accurate positioning with errors around 1 ft . Recall that the 100 locations formed a line with the distance between two neighboring positions set to one foot ( ± 0 . 06 ft ) . This indicates that each location is identiﬁed as one of its two neighbors on the line . On the other hand , WiFi RSSI signatures exhibit signiﬁcantly larger errors , with the 90 percentile error approximating 10 ft . Figure 11 visualizes the spatial resolution of the FM and WiFi RSSI signatures by plotting the Manhattan distances between all pairs of locations for one of the three datasets collected . The dis - tances are linearly mapped to the [ 0 , 1 ] range for each signature such that the graphs are directly comparable . The diagonals are always zero because the vectors are identical for the same loca - tion . By comparing Figures 11 ( a ) and 11 ( b ) , it becomes apparent that not only FM RSSI signatures have the necessary spatial res - olution for accurate ﬁngerprinting , but they provide signiﬁcantly ﬁner - grain resolution compared to WiFI RSSI signatures . In the case of FM signals , the RSSI distances are low only for the same or neighboring locations . In most other cases , the FM RSSI signatures differ signiﬁcantly . Conversely , in the case of WiFi signals , RSSI distances are low even for locations that can be more than 15 ft far away from each other , leading to high localization errors as shown in Figure 10 . 7 . 2 Temporal and Device Variation All 3 datasets were collected at different days , and the third dataset was collected using a different FM receiver chip of the same model and manufacturer . This allowed us to study how temporal and device variations affect the accuracy of ﬁne - grain localization . First , we examine temporal variations using datasets 1 and 2 . We let one of them be the test set and the other be the ﬁngerprint database , and then ﬂip their roles to compute the average localiza - tion error . The 50th and 90th percentile errors are shown in Table 9 . Both FM and WiFi RSSI signatures show higher localization errors compared to Figure 10 , due to temporal variations . Nevertheless , FM still outperforms WiFi signiﬁcantly . To study the effect of device variations , we choose dataset 3 as the test set ( ﬁngerprint database ) and one of the other two datasets in turn as the ﬁngerprint database ( test set ) , and compute the aver - age CDF of localization errors . The results are summarized in the last row of Table 9 . Note that the results are subject to both tempo - ral and device variations since dataset 3 was collected in a different day too . Even under device variations , the localization error does not increase signiﬁcantly as compared to temporal - only variations . In fact , the localization error seem to be slightly lower with de - vice variations . These variations are most likely due to the random changes in the environment , indicating that device variations do not notably affect the localization performance . 8 . RELATED WORK Previous approaches to ﬁngerprint - based indoor localization can be roughly classiﬁed into two categories : infrastructure - based and infrastructure - less approaches . Infrastructure - based approaches rely on the deployment of customized RF - beacons , such as RFID [ 13 ] , infrared [ 25 ] , ultrasound [ 17 ] , Bluetooth [ 3 ] , and short - range FM transmitters [ 11 ] . The advantage of these approaches lies on the fact that the deployed beacons can be carefully engineered / optimized for indoor localization , and of course they can be deployed at the necessary density to provide accurate indoor positioning . However , the high overhead of deploying custom hardware usually prohibits the feasibility of infrastructure - based approaches . Infrastructure - less approaches , on the other hand , do not require any hardware to be deployed , as they leverage already available wireless signals to proﬁle a location , usually in the form of RSSI values . The state - of - the - art approach to signal ﬁngerprinting re - lies on WiFi signals as WiFi access points are widely deployed in - doors , and every mobile device is equipped with a WiFi receiver . The early RADAR [ 1 ] indoor localization system demonstrated the effectiveness of WiFi ﬁngerprinting by achieving localization ac - curacies in the range of 2 meters . More recent work [ 9 , 27 ] re - ported higher accuracy by statistically modeling the signal strength as Gaussian distributions . WiFi signals , however , operate at the 2 . 4GHz or 5Ghz range that makes them particularly susceptible to multipath , fading , small objects and most importantly to human presence . In particular , human body and its orientation can drasti - cally impact WiFi RSSI values . As a result , proﬁling of locations becomes extremely tedious as for every location signatures need to be recorded for different body orientations [ 1 ] . Also , in agreement with our ﬁndings , the temporal variations of WiFi RSSI values tend to be high due to the sensitivity of the signal to the presence of hu - mans and small objects . Most recently , Sen et al . [ 18 , 19 ] exploit 802 . 11n PHY layer ( OFDM ) impulse responses and report more robust localization performance . On the other hand , commercial WiFi - based localization systems ( e . g . , Skyhook [ 21 ] ) focus more on coarse - grained localization ( e . g . , 70 meters in Skyhook [ 6 ] ) to alleviate the need for war - driving inside buildings . Varshavsky et al . developed GSM ﬁngerprint - based indoor lo - calization systems that can achieve slightly worse accuracy to that of WiFi based systems [ 14 , 24 ] . The key concept of their system is to record ﬁngerprints from not only the six surrounding GSM sta - tions , but also farther away stations whose signal can still be heard by the mobile phones . Recently , Tarzia et al . explored the possibility of using acoustic background spectrum for room - level localization [ 22 ] . Their local - ization system takes advantage of the observation that each room tends to have its own unique background noise . Using currently available smartphones and their embedded microphones , they demon - Location ID Lo c a t i on I D 20 40 60 80 100 10 20 30 40 50 60 70 80 90 100 0 0 . 1 0 . 2 0 . 3 0 . 4 0 . 5 0 . 6 0 . 7 0 . 8 0 . 9 1 ( a ) FM RSSI Location ID Lo c a t i on I D 20 40 60 80 100 10 20 30 40 50 60 70 80 90 100 0 0 . 1 0 . 2 0 . 3 0 . 4 0 . 5 0 . 6 0 . 7 0 . 8 0 . 9 1 ( b ) Wi - Fi RSSI Figure 11 : The Manhattan distance between the RSSI vectors measured at 100 evenly spaced ( 1 ft ) locations in the hallway of an ofﬁce building . The distances are normalized by the maximum pairwise distance in each ﬁgure to have the same range [ 0 , 1 ] across the two ﬁgures . Diagonal values are 0 as the RSSI values for the same location are identical . strate room level accuracies around 70 % from an experiment in - volving 33 rooms . Chung et al . investigated indoor localization with geo - magnetic sensors [ 5 ] . Their system is based on the observation that the steel and concrete skeletons of buildings can distort the geomagnetic ﬁeld , such that ﬁngerprinting is feasible . The localization error of this system is within 1 meter 88 % of the time . However , the values of the geo - magnetic sensors change drastically even for nearby lo - cations , requiring enormous proﬁling . Furthermore , the proposed system uses custom - made geo - magnetic sensors that is unclear how they can be reliably integrated into current phones . In this paper , we consider FM broadcast radio signals for ﬁnger - print based indoor localization . Because of the lower frequency , FM signals are less susceptible to human presence , multipath and fading , they exhibit exceptional indoor penetration , and according to our experimental study they vary less over time when compared to WiFi signals . From the infrastructure point of view , there are thousands of commercial and amateur FM signals being broad - casted continuously across the world , eliminating the need for de - ploying any custom infrastructure . Also , most mobile devices , even the lower - end ones , are equipped with FM radio receivers . FM radio based localization systems have been studied before in the context of outdoor localization . Krumm et al . measured the signal strength from a set of FM broadcasting stations in out - door environments and used the strength rankings to distinguish 6 suburbs [ 10 , 26 ] . Also in outdoor environments , Fang et al . com - pared the performance of FM radio signals and GSM signals using a spectrum analyzer [ 8 ] . They report that both signals achieve sim - ilar accuracy in the order of tens of meters using the ﬁngerprinting approach . In this work , we consider FM radio signals for indoor localization , and we experimentally demonstrate that higher accu - racies can be achieved indoors . This is due to the impact that the internal structure of the building has on the FM radio signal propa - gation . The internal walls , ﬂoors , and ceilings affect FM radio sig - nal propagation enabling higher spatial resolution in the recorded RSSI signatures . In parallel with our work , Andrei et al . [ 16 ] , as well as Mogh - tadaiee et al . [ 12 ] explored FM broadcast signals for indoor local - ization . Andrei et al . reported median localization error of 0 . 91 meters when leveraging FM RSSI signatures [ 16 ] . However , this is preliminary work that only included proﬁling a single room in a building . More recently , Moghtadaiee et al . measured RSSI values of FM broadcast radios in several rooms with USRP2 , and reported a mean localization error of 2 . 96 meters using ﬁngerprinting [ 12 ] . Our work differs from these approaches in four fundamental ways . First , to the best of our knowledge , this is the ﬁrst large scale study of using FM radio signals for the purpose of indoor localization . We collected measurements in more than 100 rooms on multiple ﬂoors , buildings and regions in the US . The volume of experimen - tal data enabled us to investigate room level as well as ﬁne - grain localization performance in the 2D , as well as in the 3D space . Pre - vious work has only evaluated 2D errors , yet at a much smaller scale . Second , we go beyond RSSI - based ﬁngerprinting . We pro - pose and evaluate the use of additional signal strength indicators at the physical layer to create more robust and discriminative signa - tures . Third , we study in detail the impact of temporal and device variations on the localization accuracy for both WiFi and FM sig - nals . Fourth , we experimentally demonstrate that WiFi and FM errors are independent , and that the two signals can be combined to generate signatures that can achieve up to 83 % higher localization accuracy when accounting for wireless signal temporal variations . Last but not least , energy efﬁciency is an important considera - tion when designing localization systems [ 6 , 7 , 15 ] . FM receiver consumes signiﬁcantly less power compared to the receivers for WiFi and GPS , and thereby can be integrated into general local - ization systems to tradeoff accuracy and efﬁciency by duty - cycling various components . 9 . CONCLUSIONS We have presented and evaluated a new approach to ﬁngerprint - based indoor localization that leverages FM broadcast radio sig - nals . Our experimental results show that when FM RSSI values are combined with additional information about signal reception at the physical layer to form the wireless signal signature , localization is 5 . 7 % more accurate than WiFi - based techniques . Furthermore , we experimentally demonstrated that due to differences in operating frequency and wavelength , FM signals are more robust to temporal variations when compared to WiFi signals . More importantly , we have shown that FM and WiFi signals exhibit uncorrelated errors . The combination of FM and WiFi signal indicators into a single sig - nature provides up to 83 % higher localization accuracy than when WiFi only signals are used . FM infrastructure is already widely deployed across the world , and many of the mobile devices include FM receivers . With minor modiﬁcations in the hardware of commercial devices and the inclu - sion of patch FM antennas , the proposed approach could be imme - diately deployed in the wild . In fact , on most smartphones today there is a single chip that houses all wireless infrastructure ( WiFi , Bluetooth , FM radio etc . ) such as the BCM4329 from Broad - com [ 2 ] , WiLink 7 . 0 from Texas Instruments [ 23 ] , and CSR9000 from Cambridge Silicon Radio [ 4 ] . Most , if not all , of the chip vendors include FM radio components that in general constitute of only a small fraction of the overall chip . This makes the cost impact of FM radio minimal . RSSI information is already avail - able on most radio chips , and localization using RSSI can already achieve satisfactory accuracy . On the other hand , from the FM chip vendor’s perspective , there are no major obstacles or limitations in exposing this information to the application layer . We believe that accurate indoor localization can justify and motivate chip vendors to easily expose this information to the application layer . Based on our intuition and the experimental results for FM sig - nals , we believe other signals such as AM and TV broadcast radios can also be used for localization . Also , combining more signals into a richer ﬁngerprint should further increase the localization per - formance . 10 . ACKNOWLEDGMENTS We sincerely thank Dr . Romit Roy Choudhury for shepherding this paper , as well as all the anonymous reviewers for their valuable feedback . 11 . REFERENCES [ 1 ] P . Bahl and V . N . Padmanabhan . RADAR : An In - Building RF - based User Location and Tracking System . In Proceedings of INFOCOM , 2000 . [ 2 ] Broadcom . Low - Power 802 . 11n with Bluetooth 2 . 1 + EDR and FM ( Tx and Rx ) , 2008 . [ 3 ] R . Bruno and F . Delmastro . Design and analysis of a bluetooth - based indoor localization system . In Personal Wireless Communications , Lecture Notes in Computer Science . 2003 . [ 4 ] Cambridge Silicon Radio . CSR9000 . [ 5 ] J . Chung , M . Donahoe , C . Schmandt , I . - J . Kim , P . Razavai , and M . Wiseman . Indoor location sensing using geo - magnetism . In MobiSys ’11 , 2011 . [ 6 ] I . Constandache , R . R . Choudhury , and I . Rhee . Towards mobile phone localization without war - driving . In Proceedings of the 29th conference on Information communications , INFOCOM’10 , pages 2321 – 2329 , Piscataway , NJ , USA , 2010 . IEEE Press . [ 7 ] I . Constandache , S . Gaonkar , M . Sayler , R . R . Choudhury , and L . P . Cox . Enloc : Energy - efﬁcient localization for mobile phones . In INFOCOM , pages 2716 – 2720 , 2009 . [ 8 ] S . - H . Fang , J . - C . Chen , H . - R . Huang , and T . - N . Lin . Indoor localization using fm radio signals : A ﬁngerprinting approach . In IWCMC ’08 , 2008 . [ 9 ] A . Haeberlen , E . Flannery , A . M . Ladd , A . Rudys , D . S . Wallach , and L . E . Kavraki . Practical robust localization over large - scale 802 . 11 wireless networks . In MobiCom ’04 , 2004 . [ 10 ] J . Krumm , G . Cermak , and E . Horvitz . Rightspot : A novel sense of location for a smart personal object . In UBICOMP ’03 , 2003 . [ 11 ] A . Matic , A . Popleteev , V . Osmani , and O . Mayora - Ibarra . Fm radio for indoor localization with spontaneous recalibration . Pervasive Mob . Comput . , 6 , December 2010 . [ 12 ] V . Moghtadaiee , A . G . Dempster , and S . Lim . Indoor localization using fm radio signals : A ﬁngerprinting approach . In 2011 International Conference on Indoor Positioning and Indoor Navigation ( IPIN ) , September 2011 . [ 13 ] L . M . Ni , Y . Liu , Y . C . Lau , and A . P . Patil . Landmarc : indoor location sensing using active rﬁd . Wirel . Netw . , 10 , November 2004 . [ 14 ] V . Otsason , A . Varshavsky , A . L . Marca , and E . de Lara . Accurate gsm indoor localization . In UbiComp’05 , September 2005 . [ 15 ] J . Paek , K . - H . Kim , J . P . Singh , and R . Govindan . Energy - efﬁcient positioning for smartphones using cell - id sequence matching . In Proceedings of the 9th international conference on Mobile systems , applications , and services , MobiSys ’11 , pages 293 – 306 , New York , NY , USA , 2011 . ACM . [ 16 ] A . Popleteev . Indoor positioning using FM radio signals . PhD thesis , University of Trento , April 2011 . [ 17 ] N . B . Priyantha , A . Chakraborty , and H . Balakrishnan . The cricket location - support system . In Mobicom ’00 , 2000 . [ 18 ] S . Sen , B . Radunovic , R . R . Choudhury , and T . Minka . Precise indoor localization using phy layer information . In Proceedings of the 10th ACM Workshop on Hot Topics in Networks , HotNets ’11 , pages 18 : 1 – 18 : 6 , New York , NY , USA , 2011 . ACM . [ 19 ] S . Sen , B . Radunovic , R . R . Choudhury , and T . Minka . Spot Localization using PHY Layer Information . In MobiSys ’12 , 2012 . [ 20 ] Silicon Laboratories . Si4735 Broadcast AM / FM / SW / LW Radio Receiver IC Rev D60 , 2011 . [ 21 ] Skyhook , Inc . http : / / www . skyhookwireless . com / . [ 22 ] S . P . Tarzia , P . A . Dinda , R . P . Dick , and G . Memik . Indoor localization without infrastructure using the acoustic background spectrum . In MobiSys ’11 , 2011 . [ 23 ] Texas Instruments . WiLink 7 . 0 single - chip WLAN , GPS , Bluetooth and FM solution , 2010 . [ 24 ] A . Varshavsky , E . de Lara , J . Hightower , A . LaMarca , and V . Otsason . Gsm indoor localization . Pervasive Mob . Comput . , 3 , December 2007 . [ 25 ] R . Want , A . Hopper , V . Falcão , and J . Gibbons . The active badge location system . ACM Trans . Inf . Syst . , 10 , January 1992 . [ 26 ] A . Youssef , J . Krumm , G . Cermak , and E . Horvitz . Computing location from ambient fm radio signals commercial radio station signals . In IEEE Wireless Communications and Networking Conference , WCNC , 2005 . [ 27 ] M . Youssef and A . Agrawala . The horus wlan location determination system . In MobiSys ’05 , 2005 .