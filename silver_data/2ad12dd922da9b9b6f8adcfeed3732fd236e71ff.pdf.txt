27 Xnavi : Travel Planning System Based on Experience Flows MASATO NOMIYAMA , The University of Tokyo , Japan TOSHIKI TAKEUCHI , The University of Tokyo , Japan HIROYUKI ONIMARU , Honda Motor Co . , Ltd . , Japan TOMOHIRO TANIKAWA , The University of Tokyo , Japan TAKUJI NARUMI , The University of Tokyo , Japan MICHITAKA HIROSE , The University of Tokyo , Japan Though an increasing number of people is now involved in travel planning owing to the spread of the internet , it is still difficult for travelers to plan trips on their own . It is especially difficult for tourists using automobiles because they have several choices of accessible places . To make itineraries easily , travelers require a travel planning system that suggests two types of experiences : experiences characterizing the travel area and experiences stemming from a flow between the former experiences . Existing systems do not list specific spontaneous experiences of interest to travelers . In response , Xnavi , a travel planning system for drivers based on experience flows , is proposed , which provides these types of experiences . To recommend experience flows , Xnavi extracts experience keywords related to the travel area using natural language processing based on the TF - IDF method and also extracts flows of tourist attractions’ attributes based on association analysis of driving histories . Trials of the proposed method and a user study were conducted . The results show that Xnavi is effective at suggesting experiences and satisfying tourists with their plans . CCS Concepts : • Human - centered computing → Ubiquitous and mobile computing systems and tools ; • Information systems → Data mining ; Additional Key Words and Phrases : Travel planning , driving histories , experience flows , association analysis , automobile , UI ACM Reference Format : Masato Nomiyama , Toshiki Takeuchi , Hiroyuki Onimaru , Tomohiro Tanikawa , Takuji Narumi , and Michitaka Hirose . 2018 . Xnavi : Travel Planning System Based on Experience Flows . Proc . ACM Interact . Mob . Wearable Ubiquitous Technol . 2 , 1 , Article 27 ( March 2018 ) , 25 pages . https : / / doi . org / 10 . 1145 / 3191759 1 INTRODUCTION Travel styles have changed in recent years . Many people who have been using package tours are now able to find destinations that suit them independently , and they can search for things to do easily using a smartphone . Accordingly , people are becoming interested in experiences characteristic of their chosen area of travel , and the number of people who plan trips on their own is increasing . Particularly , people who expect an itinerary of their choice are active in travel planning . However , those tourists tend to feel that travel planning is difficult or Authors’ addresses : Masato Nomiyama , The University of Tokyo , 7 - 3 - 1 Hongo , Bunkyo - ku , Tokyo , 113 - 8656 , Japan ; Toshiki Takeuchi , The University of Tokyo , 7 - 3 - 1 Hongo , Bunkyo - ku , Tokyo , 113 - 8656 , Japan ; Hiroyuki Onimaru , Honda Motor Co . , Ltd . 8 - 1 Honcho , Wako - shi , Saitama , 351 - 0114 , Japan ; Tomohiro Tanikawa , The University of Tokyo , 7 - 3 - 1 Hongo , Bunkyo - ku , Tokyo , 113 - 8656 , Japan ; Takuji Narumi , TheUniversityofTokyo , 7 - 3 - 1Hongo , Bunkyo - ku , Tokyo , 113 - 8656 , Japan ; MichitakaHirose , TheUniversityofTokyo , 7 - 3 - 1Hongo , Bunkyo - ku , Tokyo , 113 - 8656 , Japan . Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page . Copyrights for components of this work owned by others than ACM must be honored . Abstracting with credit is permitted . To copy otherwise , or republish , to post on servers or to redistribute to lists , requires prior specific permission and / or a fee . Request permissions from permissions @ acm . org . © 2018 Association for Computing Machinery . 2474 - 9567 / 2018 / 3 - ART27 $ 15 . 00 https : / / doi . org / 10 . 1145 / 3191759 Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 2 • M . Nomiyama et al . troublesome even now , because in almost every case they do not know what experience options are available , or relevant locations or times for these experiences . Tourists using automobiles find it particularly hard to make itineraries because drivers have a great number of accessible points of interest ( POIs ) from which to chose . It may take a long time to search for POIs , and to identify travel experiences which characterize the travel area . Nevertheless , existing travel planning systems only recommend POIs on the way to the chosen destination . In addition , apart from experiences which characterize the travel area , there is another factor which has in - fluenced on tourist’s whole experience . This is a travel sequence , which provides good experience which stems from a flow between characteristic experiences in the travel area . A good example is a plan in which a tourist goes to hot springs after skiing . Of course , their travel satisfaction depends on the quality of characteristic travel experiences in the target area ; however , it also depends on the quality of the overall experience , which stems from a flow between characteristic travel experiences in the target area . In this instance , a relaxed experience of warming their blood in hot springs after skiing in cold mountains can increase their satisfaction . A plan that considers experience compatibility is gratifying for tourists . Nevertheless , no existing travel planning systems recommend travel sequences in such a way that is easy to understand , and few travel planning systems consider the order of visiting places . Thus , it is difficult for tourists to create itineraries considering good travel sequences as well as considering characteristic travel experiences and constraints ( i . e . distance between POIs ) . This kind of recommendation is the subject of intense discussion in the field of electronic commerce . In this field , it is wide - spread practice for systems to infer others items that a person will be likely to become interested in when they buy something . For example , Song et al . proposed frequent access path recognition algorithms for electronic commerce to satisfy users with a richer purchase experience [ 20 ] . In another instance , Linden et al . proposed item - to - item collaborative filtering which determines goods that a customer will probably choose based on an - other chosen item [ 18 ] . These works consider how to satisfy users by providing mechanisms to suggest what they want when they want it . The same applies to the field of travel planning ; it is important for tourists to encounter specific experiences when they want to have them . It is suggested that a travel planning system which informs tourists of both characteristic travel experiences and good travel sequences is more satisfactory when they plan their own travel . Xnavi , a travel planning system for drivers based on experience flows , was developed in response to this . Xnavi aims to make tourists using automobiles , who are active in planning their own travel , more satisfied with their trips . This paper is orga - nized as follows . First , previous research into travel planning systems is introduced and systematically studied . Second , the concept of an experience flow is explained , and applied to travel planning . Third , the proposed sys - tem specifications and algorithms are described . Fourth , a user study conducted to test usability is described . Fifth , limitations on this research is described , and sixth , the study is concluded , and directions for future work considered . 2 RELATED WORK Many kinds of travel support systems have been developed over the decades . An early example of a travel support system is Cyberguide [ 1 ] , which is a basic mobile context - aware tour guide developed by Abowd et al . Cyberguide enables tourists to access services just like a real tour guide , by separating services into four component types ( maps , information , positioning and communications ) . In addition , GUIDE [ 4 ] is another early example of a travel support systems , which provides well - timed responses with appropriate information based on tourists’ personal and environmental contexts . Both of these systems provide location - based real - time support for city visitors , acting in lieu of a tour guide . Since the release of these early systems , various alternative methods to create travel planning systems have been researched . Kang et al . proposed a method for POI recommendation [ 13 ] . They evaluated POI information Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 3 according to attributes such as theme , activity , and geographical position . Then they personalized POIs by cal - culating vector similarity between POI attribute and user preference . In addition , Huang et al . also proposed a method for POI recommendation [ 12 ] . They referred to POI evaluation and personalization by suggesting a rec - ommendation algorithm , based on the analytical hierarchy process and a Bayesian network technique . Thus , POI evaluation and personalization emerge as the main research focus in the literature on searching for interesting POIs within a travel area . Satisfying various constraints in planning is also discussed in the literature . The main topics are route calcula - tion , distance constraints , time constraints , and weather constraints . For example , Čern ` y suggested an approach to address distance constraints using the Monte Carlo algorithm , which in turn uses the probability value given by the Boltzmann - Gibbs distribution . Using this algorithm , a system calculates an almost optimal solution to the traveling salesman problem , and generates the efficient permutations of POIs . Kwon et al . proposed a prob - abilistic planning method , which considers time constraints [ 16 ] . However , these researchers assume automatic planning , which does not meet tourists’ needs if they want to plan a trip from scratch . Therefore , methods for travel planning systems are approximately divisible into two types : systems intended to search for interesting POIs within a travel area , and systems intended to satisfy various constraints in planning . Comparatively , few researches mainly dealt with visiting order of POIs . Magitti [ 3 ] , developed by Bellotti et al . , treats visiting order as a part of the overall planning architecture . It aims to provide serendipitous place - recommendations to tourists based on their contexts and behavior patterns . This system has two characteristic functions : one is to estimate user’s plan by analyzing his / her traces of activities and the oter is to infer types of activities ( i . e . “eat” ) based on patterns of user’s behaviors . It can be said that the latter function considers the order of user’s behavior . In addition , the system developed by Hsieh et al . [ 11 ] also treats the visiting order as a part of the whole architecture . This system recommends routes based on large - scale check - in data . The authors defined requirements for the route recommendation based on the place’s popularity , the proper visiting time , the proper transit time and the visiting order of places . Regarding the visiting order , they proposed a method which assesses the comparative quality of visiting order based on the n - gram probabilities of locations . Their methods are not good enough to extract experience flows , because both methods determine their general rules based on a probabilistic model . Experience flows essentially depend on the travel theme of the day ( i . e . a trip for forest therapy or a trip to play in nature ) , not an individual or general rules . It is necessary to incorporate the travel theme of the day to extract appropriately satisfying experience flows . On a different note , there are systems which are interface focused . They consider the way people make their trip plan itself . Kurata et al . tried to make planning easier by implementing CT - Planner , a web - based tour plan - ning service [ 15 ] . Many of the functions of CT - Planner are similar to previous travel planning systems , but CT - Planner is characterized by a user - friendly interface . The user can create itineraries easily because CT - Planner decides the outline of an itinerary based on their travel style . This is achieved by some abstract inquiries , as well as inquiries about their constraints . People who emphasize convenience ( e . g . a foreigner ) can make a plan satisfactorily for this reason ; however , a tourist who is active in planning might find it frustrating because it prepares the outline of a plan in a target area automatically . As researcher - developed systems , there are also commercial products for travel planning , focusing on the way people make a trip plan . Google Trips is a good example [ 9 ] ; the user can create a trip plan by selecting their favorite travel theme ( such as “Tokyo with Kids” ) , and receive an automatically generated itinerary . The user can also change and add recommended POIs easily because Google Trips addresses the traveling salesman problem using Christofides’ algorithm [ 5 ] . Despite a lot of flexibility , the outline of a plan is still decided in the first stage , which may be unsatisfactory for a tourist who enjoys actively planning their trip . Therefore , previous interface research has never dealt with good travel sequences . In response to this , the concept of an experience flow was developed and Xnavi , a navigation system based on experience flows , was Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 4 • M . Nomiyama et al . built to help tourists who are active in planning decide on the best order of travel experiences . In the next section , the concept of an experience flow is described in detail . 3 THE CONCEPT OF AN EXPERIENCE FLOW There are many kinds of travel itineraries possible , depending on users and their preferences . If tourists could make a plan that suits them at will , they would have a highly satisfactory experience . In response to this , Xnavi helps them actively make a travel plan that can adapt to their needs . Generally , a travel plan consists of travel experiences themselves , and the order in which to enjoy them . The quality of these components has an influence on the travel plan . A model plan in the Shizuoka area might be as follows ( Table 1 and Figure 1 ) . This plan consists of six travel experiences of spots from ( A ) to ( F ) , and five Table 1 . An itinerary of a model plan in Shizuoka . Marker Time Place Description A 10 : 00 Shuzenji temple A bamboo grove road . B 11 : 30 Idea handcraft club A bamboo wares workshop . C 13 : 30 Zenputei Nanaban A Japanese noodle restaurant . D 15 : 00 Genraku A manju shop . E 15 : 30 Izunokuni Panorama Park A park with an observatory . F 17 : 30 Shukaen Yunohanazen A Japanese hotel with a hot spring . sequences of experiences from ( A ) → ( B ) to ( E ) → ( F ) . A traveler visits a bamboo grove road in Shuzenji temple , and then enjoys a workshop involving directly touching bamboo . After the activity , they take a rest while eating a Japanese noodles . Then they buy a take - out manju and eats it for dessert , while enjoying a nice view from an observatory . Finally they head for a hot spring to cure their fatigue . In this case , satisfaction with this travel plan depends on not only six travel experiences , but also five sequences of experiences . For another example , if a tourist tended to want to feel relaxed on a full stomach , getting a night view would be a good experience after dinner . In order to include these kind of travel sequences into an itinerary of a tourist’s own making , the concept of experience flows is proposed , forming the basic units of a travel plan ( Figure 2 ) . This unit includes two nodes and one edge . A node refers to a travel experience that stems from activity ( such as skiing and hot springs ) , and an edge refers to a good travel sequence that stems from the tourists’ requirement ( such as intention of warming up when cold ) . Travel experiences are determined using POIs’ information , and travel sequences are extracted from driving histories . Experience flows are created by merging these two components . By connecting a recommended unit to another unit repeatedly as shown in Figure 3 , a tourist can easily make an itinerary considering experience compatibility . For instance , if there were experience flows such as “Moun - tain Scenery” to “Ice Cream Shop” and “Ice Cream Shop” to “National Park” , the itinerary including “Mountain Scenery” to “Ice Cream Shop” to “ National Park” would be made by connecting the latter experience flow to the Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 5 Fig . 1 . Routes of the model plan in Shizuoka . Fig . 2 . The concept of an experience flow . Fig . 3 . Making an itinerary using an experience flow . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 6 • M . Nomiyama et al . former . Xnavi solves the following formula with experience flows to determine the best itinerary I best . P = { p 0 , · · · , p n } ( 1 ) I = (cid:2)(cid:3)(cid:3)(cid:3)(cid:3)(cid:3) (cid:4) q 0 q 1 . . . q n (cid:5)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6) (cid:7) ( q i ∈ P , m ≤ n ) ( 2 ) I best = arg max I n (cid:2) i = 1 f ( q i − 1 , q i ) · д ( q i ) ( 3 ) P is all POIs in the target area , I is an itinerary , q i is the i - th place to visit , q 0 is the point of departure , f ( q i − 1 , q i ) is satisfaction with a travel sequence of q i − 1 to q i and д ( q i ) is satisfaction with a travel experience of q i . Xnavi proposes experience flows which represent good travel sequences that have high values of f ( q i − 1 , q i ) based on the travel theme of the day . A tourist can consider f ( q i − 1 , q i ) and д ( q i ) easily in planning a trip , by customizing experience flows to their taste in advance . They make the best travel plan by combining customized experience flows that include characteristic experiences and good travel sequences . Experience flows offer the following functions , which are required to help a tourist decide the best order of travel experiences : ( 1 ) a function to consider experience compatibility , so the best next experience after a specific experience can be determined ; ( 2 ) a function to help a tourist imagine experiences which he / she will want to do next ; and ( 3 ) a function to satisfy various constraints in active travel planning . Whenever tourists make an itinerary , they preferably consider the compatibility of their preferred experiences . For example , when a tourist goes to an area famous for skiing and hot springs , they try to plan the trip to include a relaxed experience of warming up in hot springs after skiing in cold mountains . If a tourist tends to want to feel relaxed when viewing a nice landscape , stopping at an ice cream place would be a good experience . However , it is not always easy for tourists to imagine experience compatibility . This kind of requirement is subconscious , and it is difficult for people to predict it in advance from a combination of detailed tourist attractions . Experience flow solves this issue . In the previous approach to trip planning , a tourist made a detailed list of tourist attractions , and tried to imagine experience compatibility from a combination of descriptions . For example , the question may be which place is best to go to after visiting “The Everglades” , “Robert is Here” or “Capt . Becky Campbell” ? This question does not make much sense . Contrarily , experience flows express experience compatibility as a combination of experiences , such as “Wetland Park” to “Shake Shop . ” A tourist can easily decide to include a visit to the spot “Robert is Here . ” Experience flows help a tourist imagine experience compatibility in this way . They also solve the problem of tourists not being able to predict constraints in active travel planning . An existing system that makes an itinerary without considering interaction can consider all constraints in advance , because it creates the outline of a plan by itself . However , an existing system that requires user interaction can consider just the next relevant constraints . Thus , tourists who are active in planning tend to make a plan that takes them back and forth between distant places . A travel planning system using experience flows can consider time - dependent or space - dependent constraints , because it recommends future experiences beyond the next experience . It helps tourists achieve a clearer overview of constraints . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 7 4 A TRAVEL PLANNING SYSTEM USING EXPERIENCE FLOWS Xnavi is proposed as a travel planning system for drivers , based on experience flows . Its aim is to help tourists using automobiles , who are active in planning , to plan a pleasant and satisfactory trip . Xnavi is implemented on iOS , especially for iPad . Fig . 4 . System overview . 4 . 1 Overview The concept of an experience flow , which is the basic unit of a Xnavi travel plan , realizes the three functions stated above . Xnavi presents an experience flow as a unit of experience keywords , such as “Dude Ranch” to “Faywood Hot Springs . ” Experience keywords represent characteristic experiences in the target area . A unit of keywords is created by merging experience keywords with a tag flow that represents experience compatibility . A tag flow consists of two tags , each of which refers to POI attributes , such as “park” and “spa . ” To create and use experience flows , the system processes of Xnavi are designed as in Figure 4 : ( 1 ) The process of extracting experience compatibility . ( 2 ) The process of extracting characteristic experiences . ( 3 ) The process of generating experience flows . ( 4 ) The process of considering constraints . In the first process , the system extracts tag flows from driving histories and summarizes them into clusters based on the relationship . In the second process , the system generates experience keywords . In the third process , the system creates clusters of experience flows by merging previous results , all of which include user’s favorite experience flows . A user chooses their favorite cluster from these . In the fourth process , the system recommends Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 8 • M . Nomiyama et al . experience flows based on the selected cluster , and time - and space - dependent constraints . A user can make an itinerary by using these . 4 . 2 System Flow 4 . 2 . 1 Selecting Favorite Characteristic Experiences . In this phase a tourist selects characteristic experiences that they are interested in . Xnavi shows a map first . If a user does a long - presses the map , it searches and suggests experience keywords within 20 km of the place where they tapped ( Figure 5 ) . This is the second Fig . 5 . A user’s screen when selecting experience keywords . The representative POIs are shown as pins when tapping keywords . Fig . 6 . A user’s screen when tapping the pin for “Nasu Hot Spring . ” The translucent pins shown are other POIs related to “Nasu Hot Spring” , with which a user can replace the current “Nasu Hot Spring” POI . process shown in Figure 4 , and the detailed algorithm described in Section 4 . 3 . 2 . They select their favorite keywords from suggested experience keywords . If a user selects an experience keyword , a pin appears on the map ( Figure 5 ) . It refers to a POI that represents the selected experience keyword . The way to decide on a representative POI is also described in Section 4 . 3 . 4 . If a user taps the pin for a POI , information and images related to that POI appear ( Figure 6 ) . These images are obtained from the Custom Search API [ 6 ] , using the POI’s name and an experience keyword that the POI belongs to . The user can confirm the POI information through this function . In addition , candidate POIs that belong to the same experience keyword will appear . The user can exchange a representative POI with another one by tapping it . This is the phase of selecting favorite characteristic experiences . If the user taps the “Next” button , they move to the next phase . 4 . 2 . 2 Selecting Favorite Travel Sequences . A tourist selects favorite travel sequences in this phase . Xnavi shows clusters of tag flows that are summarized based on the cooccurrence relations in the day ( Figure 7 ) . Xnavi narrows clusters down in advance so that each of them includes tags related to the keywords selected in the previous phase . A tourist chooses their favorite cluster from suggested clusters , and makes an itinerary using experience flows included in the selected cluster . This is the phase of selecting favorite travel sequences . If the user chooses a favorite cluster , they moves to the next phase . 4 . 2 . 3 Planning A Trip . In this phase , tourists are helped by Xnavi to consider experience compatibility and imagine experiences , enabling them to make a plan ( Figure 8 ) . In the pane below , Xnavi shows experience flows Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 9 Fig . 7 . A screen in the phase of selecting favorite travel sequences . A user selects their favorite cluster , which will be utilized in the phase of planning a trip . that coincide with the last experience of the temporary itinerary . For example , when a temporary trip plan was from A to B to C , experience flows of C to something would be recommended . If the user chooses an experience flow from these , it is included in the itinerary . In the top pane of Figure 8 , Xnavi shows the experience keywords that comprise the tourist’s favorite cluster . If a tourist chooses an experience keyword , it is also included in the itinerary . If they select a unit in the pane above or below , a pin appears on the map . This pin has the same function as one in the phase of selecting favorite characteristic experiences . The user can confirm information for the selected POI , and can exchange a representative POI with another one . They can plan a trip by combining units in the upper or lower pane in this way . Xnavi also helps tourists consider various constraints . First , Xnavi narrows experience flows down to satisfy time - dependent and space - dependent constraints . The detailed method to achieve this is described in Section 4 . 3 . 4 . Second , Xnavi considers basic time constraints . It draws routes on the map by calling the Directions API [ 7 ] , and applies travel time to the schedule automatically . Duration of visits , too , is automatically calculated and applied to the schedule . The calculation of visit duration is described in Section 4 . 3 . 4 . Third , a tourist can change arrival and departure time as they like , with appropriate visibility and adaptability . Each unit is represented by a block to increase the visibility and adaptability of time restrictions in the plan . The block size indicates the length of time required for that experience , and the block position indicates the time at which it occurs . A tourist can Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 10 • M . Nomiyama et al . Fig . 8 . A screen from the trip - planning phase . A user can make their trip plan by tapping experience keywords in the top pane , and experience flows in the bottom pane . They can change both the time to visit , and the planned duration , by dragging the edge of keyword units . They can also remove keywords from the schedule by tapping a button attached to the top of the keywords’ unit . The pins shown have the same function as the phase of selecting favorite characteristic experiences . adjust a schedule by dragging the edge of a block . The arrival and departure time will be updated automatically depending on the length and the position of units . Xnavi also increases the visibility and adaptability of spatial restrictions by displaying detailed POIs on the map while a tourist is planning a trip . A user can easily decide where to travel in the plan . 4 . 3 System Processes The system of Xnavi consists of four processes , detailed below . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 11 4 . 3 . 1 The Process of Extracting Experience Compatibility . Xnavi extracts experience compatibility as a tag flow , whose tags refer to POI attributes . Equation ( 3 ) can be transformed as follows . I (cid:2) = (cid:2)(cid:3)(cid:3)(cid:3)(cid:3)(cid:3) (cid:4) a 0 a 1 . . . a m (cid:5)(cid:6)(cid:6)(cid:6)(cid:6)(cid:6) (cid:7) ( a i ∈ A ) ( 4 ) ˆ f ( a i − 1 , a i ) (cid:5) f ( q i − 1 , q i ) ( 5 ) I best = arg max I , I (cid:2) n (cid:2) i = 1 ˆ f ( a i − 1 , a i ) · д ( q i ) ( 6 ) where A is all tags in the target area , I (cid:2) is a series of tag flows which is equivalent to an itinerary , a i is the tag of the i - th place and ˆ f ( a i − 1 , a i ) is satisfaction generated by a tag flow of a i − 1 to a i . To extract common tag flows , Xnavi determines groups of tag flows which are summarized based on daily co - occurrence . The goal of this process is to extract common tag flows that seem to have high values of ˆ f ( a i − 1 , a i ) based on the travel theme of the day . Three stages are required in this process . ( 1 ) Xnavi infers which POIs a tourist has visited . ( 2 ) Xnavi creates transaction data of tag flows from visited - POI data . ( 3 ) Xnavi summarizes tag flows into clusters using association analysis [ 2 ] . In the first stage , Xnavi pinpoints stopping locations from about 49 million driving histories offered by Honda [ 10 ] , which were recorded except for around drivers’ home , every three seconds from January in 2000 to No - vember in 2015 while navigation systems were being used . These driving histories include 985 , 853 days’ data of a specific user . The users are randomly selected from all users in such a way that their residences range from the Kanto region to the Kansai region . Assuming that experience compatibility appears in a person’s daily life as well as in traveling days , Xnavi does not distinguish driving histories on traveling days from daily histories . Xnavi infers stopping locations as follows : it finds places where the navigation system was not updated for more than 20 minutes , it compares whether places dated before and after no update period are within 10 km , and it collects stop locations dated a day when they exist 3 - 10 . The third step is necessary for Xnavi to remove histories related to work . Then it guesses detailed POI based on distance from stopping locations . To get POI information , it uses the Google Places API [ 8 ] . This information includes a POI’s name , a location , and a tag that represents a POI attribute . It regards nearest POI from stop location as the visited place . In the second stage , Xnavi extracts tag flows to determine experience compatibility . It converts a travel record into tag flows as shown in Figure 9 , using POI information from Google Places API . By applying this process to each travel record , it gets the transaction data of tag flows . In the third stage , Xnavi applies association analysis to the transaction data . Association analysis is a well - known method of data mining using specific rules , and is used to determine a relationship between items . For example , in the case of Amazon ( the retail company ) , this method may be used to recommend item Y , which has a strong association with item X , when a customer opens the page of item X . In this instance , item X is the antecedent and item Y is the consequent . Xnavi searches for relevant experience compatibility by setting a specified tag flow as the antecedent or the consequent . There are three indicators in association analysis : ( 1 ) support ( which refers to coexistence probability of item X and item Y ) , ( 2 ) conf idence ( which refers to relevance of item X to item Y ) , and ( 3 ) lif t ( which refers to reliability of the confidence . ) Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 12 • M . Nomiyama et al . Fig . 9 . Conversion of a travel record into tag flows . The relationship uses conf idence and lif t , and sets lower thresholds . By repeating this analysis , Xnavi clusters tag flows based on their tendencies to occur on the same day . If it finds tag flow Y that has relevance to tag flow X , it then sets tag flow Y as the antecedent . If it does not find any relevant tag flows , it stops a chain analysis and summarizes tag flows into a cluster ( Figure 10 ) . Fig . 10 . The process of clustering tag flows . 4 . 3 . 2 The Process of Extracting Characteristic Experiences . Xnavi extracts characteristic experiences in the target area as experience keywords to help a tourist find good POIs . The goal of this process is to determine experience keywords that characterize the target area , based on POIs’ names in the target area . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 13 There are three stages in this process . ( 1 ) Xnavi classifies POIs into small groups . ( 2 ) Xnavi calculates TF - IDF ( Term Frequency , Inverse Document Frequency ) [ 19 ] scores of morphemes on a per - group basis . ( 3 ) Xnavi extracts characteristic keywords as experience keywords . In the first stage , Xnavi obtains the names of all POIs in the target area within a radius of 20 km . Then it classifies POIs into small groups to divide the target area into smaller areas , which are arranged in a grid pattern based on their radial interval as shown in Figure 11 . Fig . 11 . Image of dividing the target area . In the second stage , Xnavi decomposes each POI’s name into morphemes using MeCab 0 . 996 [ 14 ] , which is a Japanese morphological analyzer . An IPA dictionary is used as a corpus , and titles from Wikipedia are added to this dictionary for each POI’s name to avoid it being split too far ; for example , “Ikaho Hot Spring” is the appropriate length for this experience keyword , and should not be split into “Ikaho” and “Hot Spring . ” Moreover , using a MeCab function , Xnavi discards morphemes which do not conform to followed conditions : • a condition wherein a morpheme is a noun , • a condition wherein its characteristic is “general” or “unique noun , ” and • a condition wherein its attribute is not “region” , “person’s name” or “organazation . ” Then Xnavi determines characteristic morphemes by applying the TF - IDF method . The TF - IDF method is useful in retrieving information or summarizing sentences . This method can determine characteristic terms in a specific document compared with one in all documents . This method calculates the score of the term i in the document j as follows : t f i , j = n i , j (cid:3) k n k , j ( 7 ) id f i = loд | D | | { d (cid:6) t i } | ( 8 ) t f id f i , j = t f i , j · id f i ( 9 ) n i , j is the number of the term i in the document j , | D | is the number of all documents and | { d (cid:6) t i } | is the number of documents which include term i . Xnavi applies this method to the geography . It regards i as a specific morpheme , j as a specific small area , n i , j as the number of the morpheme i in the small area j , | D | as the number Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 14 • M . Nomiyama et al . of all small areas and | { d (cid:6) t i } | as the number of small areas which include the morpheme i . Based on TF - IDF scores , Xnavi can determine characteristic morphemes in a small area compared with one in the target area . Moreover , TF - IDF scores of morphemes in a small area which have few POIs become high [ unintentionally ] . In response to this , if the number of morphemes that belong to a small area is fewer than (cid:8) rad 2 α (cid:9) , it discards morphemes in the small area to remove noise . ( rad [ km ] is the radius of small areas ) . In the third stage , Xnavi integrates a part of TF - IDF scores . If a morpheme is included in several areas , Xnavi regards its TF - IDF score as its highest score across all areas . score i = max { t f id f i , j } j = 1 , 2 , ··· , | D | ( 10 ) Xnavi then inspects these morphemes in order of scores to remove noise and determine experience keywords . First , Xnavi calls the Google Places API with a morpheme , and inspects tags of POIs that correspond to the morpheme . Then it makes a white - list of tags by selecting tags related to sightseeing ( Table 2 ) . It calculates the Table 2 . A white list of tags . amusement _ park aquarium art _ gallery bakery bar campground casino church food hindu _ temple jewelry _ store library liquor _ store lodging meal _ takeaway mosque museum natural _ feature night _ club park place _ of _ worship restaurant rv _ park spa stadium synagogue university zoo number of POIs whose tag is on the white list . If the number of POIs is fewer than β , it discards the morpheme as noise , because in many cases these morphemes only belong to one small area which has few POIs . It also calculates the ratio of POIs whose tag is on the white list . If this ratio exceeds γ , it regards the morphemes as experience keywords for travel planning . In this way , Xnavi extracts experience keywords as representative keywords of the target area . 4 . 3 . 3 The Process of Generating Experience Flows . In this process , Xnavi generates clusters of experience flows from which a tourist will select their favorite one . The goal of this process is to prepare various groups of experience flows , each of which has high values of ˆ f ( a i − 1 , a i ) and д ( q i ) . Xnavi merges the results of the previous processes as shown in Figure 12 . It associates each experience Fig . 12 . Generation of experience flows . keyword with several POIs . Each keyword has related POIs , which are found during the process of inspecting morphemes explained in Section 4 . 3 . 2 . Xnavi merges a specific keyword with a specific tag when the keyword has any POIs whose tag matches the tag in question . In a similar process , Xnavi maps experience keywords onto tags in clusters , by matching these tags in clusters with tags of POIs that belong to experience keywords . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 15 Then clusters of experience flows are generated . Xnavi narrows them down to group a tourist’s favorite experi - ence keywords in clusters . These favorite keywords are chosen in the phase of selecting favorite characteristic experiences . Finally , it sets representative POIs of experience flows to match their tags with tag flows . 4 . 3 . 4 The Process of Considering Constraints . In this process , Xnavi satisfies various constraints by taking three approaches with experience flows . First , it satisfies basic time constraints . It determines travel time by calling the Directions API . It also determines visit duration of POIs , based on driving histories . It searches for records that tourists might stop off at a specific POI , and then averages the length of visit duration from the stop durations . The way to infer a visited POI from driving histories is the same as that used in Section 4 . 3 . 1 . If there are no records about a specific POI , Xnavi sets its duration of visits to the average of the ones that belong to the same experience keyword . Second , Xnavi satisfies basic space constraints . It changes representative POIs of experience keywords dy - namically based on space - dependent constraints . If an experience keyword has several POIs that correspond to a tag , Xnavi sets a representative POI to the closest one to the last place in the schedule . Third , Xnavi narrows experience flows down based on time and space constraints . It calculates the following to consider space constraints : t FS t FL cos ∠ SFL t FS < 1 ( 11 ) S is the last place in the schedule , F is the place to which the former node of an experience flow refers , and L is the place to which the latter node of an experience flow refers . t FS and t FL are travel time [ h ] between the two points . An experience flow that does not satisfy this condition is discarded . In this way , Xnavi helps tourists avoid going back and forth between distant places . Xnavi also considers opening hours by calling the Google Places API . If a tourist cannot reach specific POIs in time , they are discarded . This concludes the explanation of Xnavi’s processes has . 5 USER STUDY 5 . 1 Overview A user study was conducted to examine whether users can accept the concept of an experience flow . There were 14 participants in this study : 13 men and one woman , all in their twenties , who have gone on a trip 0 - 20 times and have prepared their own itinerary 0 - 30 times over the past year . Subjects were asked to imagine that they were going to take a trip in a month’s time with four friends from Tokyo , by automobile . Seven subjects were asked to use a prototype of Xnavi . In order to get qualitative feedback on three components of Xnavi ( experience flows , keywords , and constraints ) , subjects prepared itineraries with the prototype Xnavi using a talk - aloud protocol [ 17 ] , which is often used in usability tests . The other seven subjects , the control group , were asked to use a web search engine . We prepared a web browser which can access the Google search engine which did not have any history data . They created itineraries in the same travel area as Xnavi , using the talk - aloud protocol . Travel areas were shown to them on a paper map . In addition , they were asked to write their itineraries on a paper , along with a timeline . Shizuoka , Yamanashi , and Tochigi in Japan were set as the virtual tourist areas , because these are popular destinations in self - drive tours . These areas are located within 20 km from places at 35 . 184 , 139 . 008 , 35 . 556 , 138 . 907 and 37 . 084 , 140 . 003 , respectively . To extract keywords of each place , Xnavi set each parameter in Section 4 . 3 . 2 as follows : rad = 4 ( 12 ) α = 0 . 18 ( 13 ) β = 2 ( 14 ) Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 16 • M . Nomiyama et al . γ = 0 . 5 ( 15 ) They were defined as temporary parameters for a prototype . β and γ were defined by minimizing the number of keywords which are not related to traveling . rad and α were defined based on a preliminary experiment . In the preliminary experiment , Xnavi extracted experience keywords of a travel area in Gunma with 15 combinations of parameters ; parameters of rad were 1 , 2 , 3 , 4 and 5 km , and parameters of α were 0 . 16 , 0 . 24 and 0 . 32 . Twenty - one subjects were asked to answer whether each keyword characterizes the travel area or not . Finally it is found that subjects felt keywords characteristic stably when rad was more than 4 km regardless of α . In response to this , rad were defined as 4 km and α were defined by checking whether keywords are characteristic or not . Each parameter was determined by considering the density of POIs in a common area for a drive . According to Section 4 . 3 . 2 , experience keywords were rated and keywords ranked in the top 20 were extracted . The results are listed in Table 3 . These results capture the features of each area to some degree . Xnavi identified 106 , 205 , Table 3 . The results of extracting experience keywords . ( left : Shizuoka , center : Yamanashi , right : Tochigi ) TF - IDF Keyword 0 . 2585 Susono 0 . 1149 Mazuru 0 . 0899 Toki no Sumika 0 . 0681 Okuyugawara 0 . 0655 Auto Camping 0 . 0606 Yugawara Hot Spring 0 . 0601 Hakone Park 0 . 0572 Mt . Daiyu 0 . 0527 Ashigara Service Area 0 . 0516 Yugawara 0 . 0501 Plateau 0 . 0483 Shuzenji Hot Spring 0 . 0448 Atami Hot Spring 0 . 0431 Hakoneyumoto 0 . 0430 Sengoku Plateau 0 . 0404 Ashinoko Skyline 0 . 0395 EXPASA 0 . 0395 Gotenba Premium Outlet 0 . 0395 Up 0 . 0376 Orange TF - IDF Keyword 0 . 07347 Yamanaka 0 . 07197 XIV 0 . 05282 Kasuga Shrine 0 . 05049 Maki 0 . 04943 Komuro Asama Shrine 0 . 04862 Mt . Fuji 0 . 04702 Udon Noodles 0 . 04643 Uchino 0 . 03953 Guesthouse 0 . 03931 Elfin 0 . 03623 Shibokusa 0 . 03598 Bugaku 0 . 03598 Lodging for Tennis 0 . 03375 Mt . Iwadono 0 . 03316 Korean Barbeque 0 . 03287 Mitake Shrine 0 . 03027 Relaxation 0 . 03021 Hotel 0 . 02988 Cherry Blossoms 0 . 02950 Rokumeikan TF - IDF Keyword 0 . 1503 Nasu Garden Outlet 0 . 1481 AEON 0 . 1222 Mega Stage Shirakawa 0 . 0636 Nasu Hot Spring 0 . 0611 Noodles 0 . 0611 Ramen 0 . 0610 Nasu Plateau 0 . 0501 Japanese - style Hotel 0 . 0498 Itamuro Hot Spring 0 . 0494 Park 0 . 0486 Grand XIV 0 . 0469 Small Hotel 0 . 0440 Mountain Cottage 0 . 0439 Villa 0 . 0437 Center 0 . 0423 Pork Cutlet 0 . 0412 Dining Restaurant 0 . 0409 Bar 0 . 0379 Fuku 0 . 0369 Guesthouse and 266 POIs in Shizuoka , Yamanashi , and Tochigi respectively , based on the keywords . Moreover , the subjects have visited Shizuoka 0 - 12 times , Yamanashi 0 - 10 times and Tochigi 0 - 11 times respectively in the past . To generate clusters of experience flows , Xnavi extracted tag flows by setting each parameter in Section 4 . 3 . 1 as follows : conf idence ≥ 0 . 8 ( 16 ) lif t ≥ 1 ( 17 ) Xnavi secured the relationship between experience flows by using these parameters . In addition , to enable a tourist to easily select favorite clusters , clusters were narrowed by using these parameters so bring the number of tag flows in each cluster above than three . The result is listed in Table 4 . The user study was conducted as follows . First , the concept of an experience flow , and how to use Xnavi , were explained to the subjects who would be using it . All subjects were asked to plan a trip that would last from 10 a . m . to 8 p . m . , without considering where to stay , because the quality of accommodation , which would depend on their budget and influence their planning and their trip satisfaction . The subjects using Xnavi were Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 17 Table 4 . The result of clustering tag flows . 1 (cid:8) church → park lodging → lodging park → restaurant 2 (cid:8) museum → restaurant place _ of _ worship → museum restaurant → church 3 (cid:8) campground → restaurant place _ of _ worship → campground place _ of _ worship → place _ of _ worship 4 (cid:8) church → lodging food → church lodging → restaurant 5 (cid:8) natural _ feature → place _ of _ worship restaurant → natural _ feature place _ of _ worship → food 6 (cid:8) art _ gallery → museum museum → place _ of _ worship restaurant → art _ gallery 7 (cid:8) art _ gallery → lodging food → art _ gallery lodging → restaurant 8 (cid:8) spa → lodging restaurant → spa place _ of _ worship → restaurant 9 (cid:8) museum → natural _ feature food → spa natural _ feature → food 10 (cid:8) art _ gallery → church church → restaurant restaurant → lodging also told to only examine POI information on the Internet by following the links in Xnavi . Second , the talk - aloud protocol was demonstrated through the sample application . Third , they started making a plan as mentioned in Section 4 . 2 . The planning order of three areas was determined at random . Finally , to evaluate their satisfaction with their plan and the usability of their experience flows , subjects were asked to answer some questions . They responded to each question using a five - point Likert scale as follows : ( 1 ) Do you want to go on a trip using the plan you made ? ( They had to answer from “1 . I don’t want to do so at all” to “5 . I really want to do so . ” ) ( 2 ) Did experience flows help you make a plan more easily ? ( They had to answer from “1 . It doesn’t help planning at all” to “5 . It helps planning very well . ” ) All subjects answered question 1 , but question 2 was only for the subjects using Xnavi . 5 . 2 Results In the user study , 14 subjects made plans to visit three places : Shizuoka , Yamanashi and Tochigi . We observed their behaviors to ascertain whether Xnavi’s concept and functions were working correctly . Xnavi was evaluated from four points of views as follows : three components of Xnavi ( experience flows , keywords and constraints ) , and comparison between Web search and Xnavi . Hereafter , we are going to discuss only 16 out of 21 plans with Xnavi in order to focus on experience flows . Five plans were excluded for two reasons . First , in one plan , Xnavi did not recommend experience flows to a subject because it had an inconsistency in tag types when searching for POIs in the target area : some tags , which were included in the selected cluster , were not included in the list of POIs Xnavi found . Second , in four plans , the subjects did not notice that Xnavi showed experience flows or did not look at a list of experience flows even once , because they replaced a keyword linked to experience flows with another keyword that was not linked to any experience flows before they started considering the next keyword . In fact , one subject said that Xnavi did not show experience flows though Xnavi showed experience flows twice . Therefore , we are excluding these five plans when discussing the usability of experience flows . We will discuss the reason why Xnavi hardly showed experience flows in Section 6 . 5 . 2 . 1 Evaluation of Experience Flows . Results of Xnavi are described in terms of experience flows first . Xnavi showed a list of experience flows approximately 2 . 13 times per plan . In 14 out of 16 plans , the subjects included some experience flows in their itinerary ; they selected experience flows as a part of their plan 66 percent of the time . These results indicate that the subjects accepted the concept of experience flows . Most subjects trusted experience flows in the user study . Five subjects actively included experience flows in their itinerary , while the remaining two subjects changed their plans entirely when a list of experience flows was not provided . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 18 • M . Nomiyama et al . Many subjects felt that experience flows were useful . Four subjects became interested in experience flows which included keywords that they were not interested in before . Four subjects also changed their plans with an experience flow when they noticed an experience which stems from a flow between experiences . For example , one subject was attracted to the experience flow of “Mt . Fuji” to “Mitake Shrine” despite his previous claim that he wanted to eat “Korean Barbeque . ” Figure 13 shows the results of the inquiry on the usability of experience flows , and indicates acceptable usability . Two subjects rated experience flows at a usability of three . Each of Fig . 13 . Usability of experience flows . them failed to notice the experience flows shown , or were not recommended experience flows in two out of three plans . One of them was more interested in the quality of POIs than others . When preparing an itinerary , he investigated most of the POIs included in the keywords in detail . The other subject , the female subject , was very interested in the time spent with friends at a POI . She decided to spend longer at POIs than others : she planned a maximum of 4 hours at each POI in Shizuoka and Tochigi , and a maximum of 3 . 5 hours at another POI in Yamanashi . Therefore , it can be said that a person who has a strong interest in the POIs themselves does not care as much about the chronological order of the POIs . Another subject gave a rating of two . Although he agreed that the concept of experience flows made it easier to prepare an itinerary , he gave a low rating because of user interface ( UI ) issues ( described later ) . Thus , there were few subjects who rejected the concept of experience flows itself . In addition , there were concurring opinions as follows : • It is good to recommend hot springs after a meal . • Experience flows helped me plan a trip more easily than when I had to decide where to go . • Favorite experience flows were helpful when I was confused about selecting the next keyword . On the other hand , a few issues emerged about experience flows were found . First , Xnavi occasionally failed to meet the request for an experience flow . For example , although one subject said he wanted to visit a hot spring after having a barbecue , Xnavi did not show such a flow . Second , any experience flows were not included in two plans . In both cases , subjects said that they wanted to insert any POIs between two distant POIs . In response to this , it is assumed that the space constraint was placed ahead of travel sequences when POIs are far apart . To solve this issue , it would be necessary to evaluate experience flows using distance between POIs . Third , some tag flows , shown in the phase where users select favorite travel sequences , did not make any sense at all and they were very confusing to subjects . This suggests that subjects tend to select tag flows that are easy to understand . For example , many subjects questioned an experience flow such as “lodging” to “lodging . ” This experience flow may be extracted from travel histories involving activities such as going to various hot spring hotels one after another . If subjects had been offered this flow as two hot spring hotels , the flow would have made much more sense . To avoid this problem , we need to consider a new method of inputting favorite Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 19 flows ; for example , if Xnavi infers a tourist’s favorite cluster while providing various types of experience flows to tourists , and attempts to gradually fit the types of experience flows to their preferences . It may be enough to extract slightly more abstract tag flows , because many people may use their imagination to infer the details of an experience flow . In the example mentioned above , the subject who was recommended the experience flow of “Mt . Fuji” to “Mitake Shrine , ” complemented the detail of a flow from “natural feature” to “place of worship . ” Third , one subject said he wanted Xnavi to consider a time zone simultaneously . When he made a plan for the evening , Xnavi recommended a place for hiking which would not be available at those hours . To avoid this situation , it may be necessary to add a new function that considers the time zone ; for example , if Xnavi estimates the probability of the time to visit based on driving histories or otherwise , and excludes experience flows whose probability is lower than a specific threshold . Then results of Web search are described in terms of experience flows . In five plans out of the 21 plans , the subjects tried to consider travel sequences . Three subjects did not mention travel sequences from beginning to end . They had gone traveling less frequently than others in the past year . ( Hereinafter , they are referred to as “Beginner” travelers . ) It is possible that inexperienced travelers do not recognize the importance of travel sequences . One subject failed to create a good travel sequence . He hated his itinerary because it included a plan to look around a museum between plans to enjoy nice views from the mountain . He finally compromised on his plan because he could not come up with an itinerary that had a good travel sequence as well as efficient routes . Three subjects succeeded in including good travel sequences . One subject said he wanted to go to a hot spring after eating delicious things . He finally included this travel sequence into his itinerary . The travel sequence’s tag flow , extracted by Xnavi , corresponds with “restaurant → spa” or “restaurant → lodging” ( Table 4 ) . On the other hand , he also said that he could not afford to prioritize ordering POIs well , because he was preoccupied with the task of finding experiences , and the task of considering constraints . Two subjects included a plan to relax ( at café , or in a hot spring ) after going climbing . They had gone traveling more frequently than others in the past year . ( Hereinafter , they are referred to as “Expert . ” ) This travel sequence was not extracted by Xnavi ( Table 4 ) . It is possible that Xnavi cannot accurately guess a POI that has as large an area as a mountain , because Xnavi estimated a visited POI based on distance from a stop location . To solve this issue , stop locations should be connected with POIs that have a large area ; for example , Xnavi could use the GPS capability of tourists’ smart phones , or parking lot information . One other travel sequence mentioned by a subject also could not be extracted . This subject decided to look around an aquarium of deep - sea fish , after eating deep - sea fish at the restaurant . This kind of travel sequence seemed to occur only in the Numazu area . To extract travel sequences related to a specific region , Xnavi have to use another method with the capability to consider travel sequences localities . We will discuss this issue in Section 6 . 5 . 2 . 2 Evaluation of Keywords . Results of Xnavi are described in terms of keywords first . From subjects’ opin - ions and behavior , it is clear that keywords did help some subjects understand travel experiences within the target area . Four subjects were interested in experience keywords that characterized areas , such as “Orange , ” “Shuzenji Hot Spring , ” “Mega Stage Shirakawa , ” etc . In addition , four subjects set a travel themes . For example , one subject wanted to travel to local ramen restaurants , while another wanted to visit shrines . On the other hand , some subjects were confused about keywords that did not seem to have a unified theme . Xnavi searches for POIs related to keywords regardless of the location and attributes of the POI . However , three subjects said that each keyword having various types of POIs was counterintuitive . One subject said that his plan was disrupted when the selected keyword included distant POIs . We need to improve the method of finding POIs by considering the attributes and localities of keywords . Furthermore , some keywords fitted their purpose poorly . For example , two subjects noticed that some key - words , such as “Maki” and “Susono , ” referred to regions instead of travel experiences . All the subjects mentioned Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 20 • M . Nomiyama et al . that some keywords , like “Fuku” and “Up , ” made no sense . Three subjects said that some keywords were essen - tially repeated , such as “Sengoku Plateau” and “Plateau . ” One subject could not find an experience keyword that he wanted in relation to the target area . ( i . e . grape picking in Yamanashi . ) It is necessary to improve the method of extracting keywords and to adjust the corpus for morphological analysis , in order to address these issues . Then results of Web search are described in terms of keywords . When our seven subjects made plans for Shizuoka , Yamanashi and Tochigi , five , five and six keywords respectively were mentioned , out of 20 keywords extracted by Xnavi ( Table 3 ) . Five subjects said they wanted to find experiences that are characteristic of the travel area . Three of them searched for their favorite POIs based on travel experience information and stories from acquaintances . The other two subjects ( rated as Experts ) searched for POIs based on their previous favorite travel experiences , such as climbing and fishing . However , all five subjects narrowed POIs down based on existing knowledge of travel experiences ( others or their own ) , and thus missed characteristic experiences in the travel area that they were unaware of . One the contrary , one subject , rated as a Beginner , searched for POIs in the travel area with no preconceptions , and found a characteristic experience that he enjoys : having a cookout with friends at a cottage in Tochigi . Xnavi extracted this experience as “Mountain Cottage” listed in Table 3 . In addition , five subjects said they wanted to know things to do around the target area . One subject missed his favorite experience until the last period of planning and he finally compromised on his plan . Another subject found his planning troublesome when he could not find what he wanted to do . Another subject made the mistake of including a plan related to an experience which is not available in the target area . He finally noticed his mistake and stopped including this plan . 5 . 2 . 3 Evaluation of Constraints Solving . Results of Xnavi are described in terms of constraints first . Xnavi satisfied constraints by UI . In Xnavi , tourists can prepare an itinerary by considering the time , location and experience simultaneously . Three subjects mentioned this characteristic of Xnavi in the user study , and noted its effectiveness . They said that they could plan a trip easily because Xnavi helped them understand how much time they had , and the length of traveling time involved . They determined the feasibility of their plan quickly by just selecting keywords one after another , as they liked . One of them also commented that he enjoyed the planning process because of this feature . Another subject realized that his itinerary included driving by the sea when he looked at a map and plan of the schedule , and was very pleased with this outcome . On the other hand , there were some minor issues with the UI . First , two subjects mentioned that it was inconvenient that they could not revise specific parts of experience flows in the schedule . When they removed the end of an experience flow from the schedule , they had to remove the whole experience flow . Second , three subjects mentioned that they wanted to pin the experience keywords that were their top priorities , and not to deal with experiences in chronological order from the point of departure . These issues remain to be addressed , to make Xnavi more efficient in facilitating travel planning . Then results of Web search are described in terms of constraints . Naturally enough , all subjects mentioned travel time and visit duration when making itineraries . All subjects also considered distance between POIs and efficient travel routes . One subject changed his plan when he noticed it involved a lot of travel time . Three subjects searched for POIs along the route between two POIs a long distance apart . Xnavi supports this kind of constraints using experience flows . In addition , all subjects used the online map in the browser , and four subjects also marked POIs they were interested in on the paper map . One subject said he wanted to confirm the positional relationship of POIs when making itineraries . They may have gotten a clue to consider space constraints from the map . On the other hand , some constraints that Xnavi does not support were mentioned in the user study . Six sub - jects checked sunset time when deciding whether to include a specific POI or not . Two subjects also considered seasonal travel experiences . We will discuss this issue in Section 6 . 5 . 2 . 4 Comparison between Web Search and Xnavi . Satisfaction with travel plans is shown in Figure 15 . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 21 Fig . 14 . The average satisfaction with a plan . Fig . 15 . Satisfaction with a plan . ( left : Web search , right : Xnavi ) For subjects who used the web search engine and Xnavi , the average satisfaction is 3 . 62 and 3 . 91 , and standard deviation is 1 . 24 and 0 . 831 respectively ( Figure 14 ) . The average satisfaction increased , and standard deviation decreased , when subjects used Xnavi . This implies that Xnavi decreases the potential for bad travel planning . In addition , when using Xnavi , satisfaction with a travel plan increased when the number of visits to the target area increased ; the Spearman correlation is 0 . 433 . On the other hand , for subjects using the web search engine , there is no relationship between satisfaction and the number of visits ; the Spearman correlation is 0 . 101 . Comparing Xnavi with Web search , a t - test confirmed that the average planning time was significantly short - ened when using Xnavi ( Figure 16 ) . The planning time plotted against the number of visits to the target area is shown in Figure 17 . More than four visits to an area were considered very frequent visits , and grouped for this analysis . It can be inferred from the above results that Xnavi helps a tourist create itineraries quickly . In fact , four subjects said that their planning was troublesome using the web search engine , and planning time using the web search engine decreased with an increase in the number of visits to the target area ; the Spearman correlation is - 0 . 470 . This result seems not to be counterintuitive , particularly as for subjects using Xnavi , there is no relationship between planning time and the number of visits ; the Spearman correlation is 0 . 286 . Taking into consideration results related to the number of visits , we posit that Xnavi reduces the difference between tourists familiar and unfamiliar with the target area in terms of travel planning ability . Planning time is generally expected to be shorter if a tourist has a lot of experiences in the target area , but any relationship Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 22 • M . Nomiyama et al . Fig . 16 . The average planning time . Fig . 17 . Planning time grouped by the number of visits . ( left : Web search , right : Xnavi ) between planning time and the number of visits disappears when using Xnavi . Therefore , it is likely that Xnavi does help tourists unfamiliar with the target area to create itineraries more easily . In addition , it is also suggested that experience flows make the tourist’s memory of previous trips serve as a planning assistant that helps a tourist imagine how their trip plan will be exciting . The web search engine shows detailed POIs in the target area . On the other hand , Xnavi shows both travel experiences and good travel sequences in the target area , using experience flows . Therefore , a tourist using Xnavi can connect unknown POIs with already known experiences and momories . This seems to be the reason for the fact that the more frequently subjects had visited the travel area , the more satisfied they were with itineraries when using Xnavi . 6 LIMITATIONS There are three limitations about the system processes . First , we applied a trial method for extracting experience compatibility data . As a result , travel sequences that seem to exist on the same day were summarized into clusters . However , generated clusters consist of only 11 tags , which have a narrow variety . It is assumed that driving histories include noise unrelated to sightseeing and that this influence on the resulting experience compatibility data . The assumption that experience compatibility also appears in a person’s daily life contributed to pervasive tag - noise . The method for extracting experience compatibility should be applied again after driving histories are narrowed down by leaving records on holiday that a tourist travels a long way off . In addition , it is possible Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 23 that tags prepared by the Google Places API are too broad , and may prevent Xnavi from precisely determining experience compatibility . To solve this issue , we plan to apply the proposed method to experience keywords rather than tags , so that Xnavi makes a detailed classification of attributes . Moreover , experience flows were hardly shown in the user study . This is because POIs extracted by Xnavi did not have various types of tags . Therefore , Xnavi could not generate a lot of experience flows . To solve this issue , we should change the method of extracting POIs in order to increase diversity of POIs . It is necessary to create travel attractions database by crawling travel guide sites and use it as a corpus of POIs . On the other hand , Xnavi extracts travel sequences based on the travel theme of the day . However , travel sequences related to a region and an individual also emerge in real trips . For example in Hayama , some people go to a restaurant after fishing to cook and eat fresh fishes they have caught , and other people go to a lodging to cleanse themselves and rejuvenate . To extract these kinds of travel sequences , we will apply the TF - IDF method to driving histories separated by region or individual . A second limitation relates to our application of a trial method for extracting characteristic experiences . This method seems to be partially successful at capturing features of the target area . However , some famous POIs are not addressed by any experience keywords . A reason for these omissions is that Xnavi does not generate experience keywords based on the popularity of POIs . It is assumed that tourists are unsatisfied with a travel plan if they cannot select famous POIs in the system . To avoid this , we will consider rating POIs when extracting experience keywords . In addition , we set the parameters manually in the user study by considering the density of POIs . To apply this method to various areas , it is necessary to create a formula to express the process , based on the density of POIs . Characteristic experiences are also not personalized in Xnavi , because we have no useful data related to individual preferences . If the number of Xnavi users increases somewhat , we will analyze travel experience preferences based on tourists’ user histories . A third limitation relates to our application of a trial method for considering constraints . The method allowed tourists to easily create a plan with experience flows that incorporated considerations of travel time , visit dura - tion , distance and efficient travel routes . However , there are other constraints that the system should consider for pragmatic travel planning , such as budget , time zone , and seasonal changes in POIs . These constraints are not addressed in this paper , as we focus on travel sequences through experience flows . In future practical use , Xnavi could consider these constraints by filtering POIs based on condition . On the other hand , there are also some limitations about evaluation . It is difficult to measure how satisfied tourists were with their plan with quantitative data . In response to this , we conducted the user study to gather qualitative data for evaluation . It is also difficult to compare Xnavi with other trip recommendation systems because they are completely different in the point of interface . Therefore , we conducted the user study with Web search , so that the user study serves both as a case study of real travel plan and plausibility check of Xnavi . 7 CONCLUSIONS AND FUTURE WORK We proposed a travel planning system called Xnavi , which supports planning based on experience flows . Xnavi generates experience keywords that represent characteristic experiences , and tag flows that represent experience compatibility . Xnavi merges them to create tourists’ favorite experience flows . A tourist can create a travel plan directly from Xnavi’s recommended of experience flows . The system functioned moderately well on the basis of extracted data about characteristic experiences and experience compatibility . In the user study , the subjects accepted the concept of experience flows , and a prototype of Xnavi was agreeable to tourists when making a trip plan . Furthermore , some experience keywords and a tag flow extracted by Xnavi were observed in planning with Web search . The prototype also reduced the planning time significantly , and improved the average user satisfaction . These results indicate that the development of Xnavi was not misdirected , and Xnavi can help a tourist generate an automobile travel plan easily and satisfactorily . In addition , analysis of the user study indicates that Xnavi closes the gap in terms of travel planning ability . It is also possible that experience flows Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . 27 : 24 • M . Nomiyama et al . will facilitate the trip memory serving as a planning assistant , which can help tourists imagine how their trip plan will turn out . In the future , we plan to attach experience keywords to a map visually . Travel tips are hidden in experiences related to a specific area . It was pointed out in the user study that keywords should seem to have a unified theme . The proposed system suggests experience keywords related to the target area , but it does not provide detailed connections between experiences and areas . In addition , it does not provide events in the area in real time because Xnavi utilized POIs’ name as a corpus of keywords . We will improve the proposed system to realize the functionality to enable tourists to directly find and select various kinds of travel experiences from a map in both manners . We also plan to develop a method for gradual customization of experience flows . The current Xnavi prototype customizes experience flows by having a user select a favorite cluster of tag flows . The user has to consider their preferences for travel sequences based on proposed clusters of tag flows . However , it is difficult for the user to immediately decide their preference from many clusters . In response to this , we will develop the system such that it gradually customizes experience flows based on user’s inputs . This could be achieved by having the system determine their preferences by computing the similarity between their choice of experience flows and a specific cluster . In addition , we intend to find a new representation method for expressing experience compatibility . The proposed system helps a tourist imagine experience compatibility based on a unit of experience keywords , but some degree of imagination is still required . To make a tourist plan easier , we aim to create a new representation of it . Furthermore , we intend to develop the travel planning system help tourists appraise potential experiences . The current Xnavi prototype can propose second experiences from the planning point , using experience flows . However , rapid planning is challenging , because tourists can not predict potential future directions and experi - ences beyond the second . In response to this , we will develop a new interface which helps tourists identify and appraise potential future experiences . Finally , we plan to adapt the travel planning system to be more flexibly automated by using experience flows . As experience flows have automation characteristics , so experience keywords have characteristics of manual optimization . In this proposed future system , people can make and change plans dynamically , retaining their independence whilst be supported by the sysytem . If the system can address conditions which tourists are un - likely to want to consider flexibly in real time , but allow them the latitude for appropriate considerations , they can take freer trips without needing such a detailed plan . It is assumed that the relationship between planning and traveling will change with this proposed future system . We intend to conduct further user studies using the proposed future system and find the best way to enjoy planning a trip . The envisioned system would augment tourists’ travel planning ability , thereby satisfying various types of people with a different planning styles . ACKNOWLEDGMENTS This work is supported by Honda Motor Co . , Ltd . REFERENCES [ 1 ] Gregory D Abowd , Christopher G Atkeson , Jason Hong , Sue Long , Rob Kooper , and Mike Pinkerton . 1997 . Cyberguide : A mobile context - aware tour guide . Wireless networks 3 , 5 ( 1997 ) , 421 – 433 . [ 2 ] Rakesh Agrawal , Ramakrishnan Srikant , et al . 1994 . Fast algorithms for mining association rules . In Proc . 20th int . conf . very large data bases , VLDB , Vol . 1215 . 487 – 499 . [ 3 ] Victoria Bellotti , Bo Begole , Ed H Chi , Nicolas Ducheneaut , Ji Fang , Ellen Isaacs , Tracy King , Mark W Newman , Kurt Partridge , Bob Price , et al . 2008 . Activity - based serendipitous recommendations with the Magitti mobile leisure guide . In Proceedings of the SIGCHI Conference on Human Factors in Computing Systems . ACM , 1157 – 1166 . Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 . Xnavi : Travel Planning System Based on Experience Flows • 27 : 25 [ 4 ] Keith Cheverst , Nigel Davies , Keith Mitchell , Adrian Friday , and Christos Efstratiou . 2000 . Developing a context - aware electronic tourist guide : some issues and experiences . In Proceedings of the SIGCHI conference on Human Factors in Computing Systems . ACM , 17 – 24 . [ 5 ] Google . 2016 . The280 - Year - OldAlgorithmInsideGoogleTrips . ( 2016 ) . https : / / research . googleblog . com / 2016 / 09 / the - 280 - year - old - algorithm - inside . html . [ 6 ] Google . 2017 . Google Custom Search . ( 2017 ) . https : / / developers . google . com / custom - search . [ 7 ] Google . 2017 . Google Maps API . ( 2017 ) . https : / / developers . google . com / maps / documentation / directions . [ 8 ] Google . 2017 . Google Places API . ( 2017 ) . https : / / developers . google . com / places . [ 9 ] Google . 2017 . Google Trips . ( 2017 ) . https : / / get . google . com / trips / . [ 10 ] Ltd . Honda Motor Co . 2017 . Honda . ( 2017 ) . http : / / www . honda . co . jp / . [ 11 ] Hsun - Ping Hsieh , Cheng - Te Li , and Shou - De Lin . 2012 . Exploiting large - scale check - in data to recommend time - sensitive routes . In Proceedings of the ACM SIGKDD International Workshop on Urban Computing . ACM , 55 – 62 . [ 12 ] Yuxia Huang and Ling Bian . 2009 . A Bayesian network and analytic hierarchy process based personalized recommendations for tourist attractions over the Internet . Expert Systems with Applications 36 , 1 ( 2009 ) , 933 – 943 . [ 13 ] Eui - young Kang , Hanil Kim , and Jungwon Cho . 2006 . Personalization method for tourist point of interest ( POI ) recommendation . In International Conference on Knowledge - Based and Intelligent Information and Engineering Systems . Springer , 392 – 400 . [ 14 ] Taku Kudo . 2005 . Mecab : Yet another part - of - speech and morphological analyzer . http : / / mecab . sourceforge . net / ( 2005 ) . [ 15 ] Yohei Kurata and Tatsunori Hara . 2013 . CT - planner4 : Toward a more user - friendly interactive day - tour planner . In Information and communication technologies in tourism 2014 . Springer , 73 – 86 . [ 16 ] Woo Young Kwon , Mingu Kim , and Il Hong Suh . 2016 . Probabilistic tourist trip - planning with time - dependent human and environ - mental factors . In Big Data and Smart Computing ( BigComp ) , 2016 International Conference on . IEEE , 505 – 508 . [ 17 ] Clayton Lewis . 1982 . Using the “thinking - aloud” method in cognitive interface design . IBM TJ Watson Research Center . [ 18 ] Greg Linden , Brent Smith , and Jeremy York . 2003 . Amazon . com recommendations : Item - to - item collaborative filtering . IEEE Internet computing 7 , 1 ( 2003 ) , 76 – 80 . [ 19 ] Gerard Salton and Michael J McGill . 1986 . Introduction to modern information retrieval . ( 1986 ) . [ 20 ] Qinbao Song and Martin Shepperd . 2006 . Mining web browsing patterns for E - commerce . Computers in Industry 57 , 7 ( 2006 ) , 622 – 630 . Received May 2017 ; revised November 2017 ; accepted January 2018 Proceedings of the ACM on Interactive , Mobile , Wearable and Ubiquitous Technologies , Vol . 2 , No . 1 , Article 27 . Publication date : March 2018 .