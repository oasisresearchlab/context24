LoCo : A Ready - to - Deploy Framework for Efﬁcient Room Localization using Wi - Fi Jacob T . Biehl , Matthew Cooper , Gerry Filby , Sven Kratz FX Palo Alto Laboratory , Inc . 3174 Porter Drive Palo Alto , CA , USA { biehl , cooper , ﬁlby , kratz } @ fxpal . com ABSTRACT In recent years , there has been an explosion of social and collaborative applications that leverage location to provide users novel and engaging experiences . Current location technologies work well outdoors but fare poorly indoors . In this paper we present LoCo , a new frame - work that can provide highly accurate room - level loca - tion using a supervised classiﬁcation scheme . We provide experiments that show this technique is orders of mag - nitude more eﬃcient than current state - of - the - art Wi - Fi localization techniques . Low classiﬁcation overhead and computational footprint make classiﬁcation practi - cal and eﬃcient even on mobile devices . Our framework has also been designed to be easily deployed and lever - aged by developers to help create a new wave of location - driven applications and services . Author Keywords Indoor Location ; Ubiquitous Computing ; Workplace Movement ; Presence ; Context . ACM Classiﬁcation Keywords H . 3 . 4 . Systems and Software ; H . 5 . 3 . Group and Orga - nization Interfaces General Terms Human Factors ; Algorithms ; Measurement . INTRODUCTION Leveraging physical location to drive meaningful , con - text speciﬁc user experiences has been a hallmark of mobile computing from the very beginning . While GPS and other satellite - based technologies provide pervasive outdoor location , reliable indoor location remains out of Permission to make digital or hard copies of all or part of this work for per - sonal or classroom use is granted without fee provided that copies are not made or distributed for proﬁt or commercial advantage and that copies bear this notice and the full citation on the ﬁrst page . Copyrights for components of this work owned by others than the author ( s ) must be honored . Abstract - ing with credit is permitted . To copy otherwise , or republish , to post on servers or to redistribute to lists , requires prior speciﬁc permission and / or a fee . Request permissions from Permissions @ acm . org . UbiComp’14 , September 13 - 17 , 2014 , Seattle , WA , USA Copyright is held by the owner / author ( s ) . Publication rights licensed to ACM . ACM 978 - 1 - 4503 - 2968 - 2 / 14 / 09 . . . $ 15 . 00 . http : / / dx . doi . org / 10 . 1145 / 2632048 . 2636083 reach despite years of research . A primary adoption in - hibitor to many proposed solutions is that they require users to wear or carry specialized devices for tracking ; e . g . badges that recognize infrared beacons [ 19 ] or spe - cialized radio devices . Recently , there has been interest in leveraging existing Wi - Fi infrastructure and mobile devices to determine in - door location . The typical approach to Wi - Fi localiza - tion is to use the client’s received signal strength indica - tor ( RSSI ) of ﬁxed Wi - Fi access points ( APs ) in a mul - tilateration calculation to predict a point - based location of the device . Due to the inherent error of these calcu - lations , most tracking results have up to several meters of error . An alternative to multilateration is classiﬁcation using RSSI ﬁngerprints . The approach trades precision for ac - curacy , and provides a high conﬁdence prediction of what room the device is in . State - of - the - art Wi - Fi ﬁngerprint - ing techniques ( e . g . [ 2 ] ) are documented to provide ac - curacy near 85 % . We have designed our location frame - work , LoCo , to be more practical to deploy and more easily leveraged by location - driven application develop - ers . We use supervised learning to provide high accuracy indoor room classiﬁcation based on the relative ordering of pairs of APs by RSSI . LoCo enables classiﬁcation to be performed more frequently and on resource - constrained devices without imposing a heavy burden on users ( it’s merely an app on their smartphone ) . RELATED WORK Wi - Fi location determination methods can be broadly grouped as either distance - based or probabilistic . Distance - based methods represent the set of RSSI val - ues at a given location by a known ( absolute ) set of val - ues and minimize a distance measure to assign a test data point to a known location [ 2 , 5 , 8 , 16 ] . More re - cent work has focused on probabilistic approaches , which involve modeling radio propagation statistically in com - bination with previously deﬁned templates for the signal strengths observed at various locations [ 10 , 22 ] . Other approaches include localization via genetic programming [ 3 ] , Bayesian networks [ 9 ] , and combined mapping of locations with tracking of devices as a semi - supervised learning problem [ 15 ] . 183 UBICOMP ' 14 , SEPTEMBER 13 - 17 , 2014 , SEATTLE , WA , USA Other methods have emphasized AP ordering accord - ing to RSSI . One system originally from the University of Toronto [ 18 ] created a rank vector which was then normalized and used with k - nearest - neighbors ( kNN ) matching for location estimation . High accuracy match - ing methods based on kNN typically require the storage of a search data structure that grows with the training set . Also , the application of specialized data structures for eﬃcient kNN search with non - metric distance mea - sures can be diﬃcult [ 1 ] . These accelerated versions of kNN also scale poorly with feature dimensionality , limit - ing expansion of the location system to areas with large numbers of APs . Supervised methods for location estimation are less prevalent than matching approaches . Support vector machines and naive Bayes classiﬁers compared poorly with the RedPin / kNN approach in [ 8 ] . The work in [ 14 ] describes a method that combines generative modeling using EM to help address missing data and discrimina - tive modeling with SVMs for localization . More broadly , there has been work that performs trilateration through time of ﬂight and / or angle of arrival ( e . g . [ 12 , 4 , 21 ] ) . While sophisticated , these approaches require modiﬁca - tion and / or special software to run on the Wi - Fi base stations . While gains have been made in addressing mul - tipath issues in dense environments like oﬃce buildings ( e . g . [ 17 ] ) , current techniques have not been shown to be robust in real - world applications . LoCo uses boosting [ 6 ] to build a set of room - speciﬁc classiﬁers . The boosting training procedure greedily se - lects RSSI features that discriminate each room from the others . The approach has very low computational re - quirements at classiﬁcation time , providing substantial complexity reductions relative to matching ( i . e . kNN ) methods . THE LOCO FRAMEWORK The LoCo Framework consists of three main compo - nents : a deployment of Wi - Fi Access Points , a client service running on a smartphone , and a classiﬁcation engine . LoCo leverages the received signal strength indicator ( RSSI ) of the BSSID beacons coming from in - range 802 . 11 Wi - Fi access points ( APs ) . These values are eas - ily accessible by most most smartphone operating sys - tems . Wi - Fi signals travel relatively far , providing data coverage for multiple users and oﬃces . As a result , there can be signiﬁcant distance , and objects , between the AP and the receiving device that can introduce variable at - tenuation of the signal . A scanning service needs to run on the user’s smartphone to collect Wi - Fi signal measurements . We have initially implemented this service using Google’s Android OS . We leverage the internal API for retrieving a list of in - range Wi - Fi APs and the RSSI from those APs’ BSSID ad - vertisements . The client is implemented as an Android service . With fewer than 30 lines of code , an app devel - oper can create a dependence on LoCo and make queries to the service for the device’s location . Centralizing in a service not only makes LoCo easily available to other apps , the model also ensures that only one instance of the scanning routine is running at a given time . This eliminates duplicate scanning that can reduce battery performance . When an application subscribes to LoCo , it can also specify how often the framework should de - termine its location . The LoCo framework can process the scan data in two ways . The classiﬁer , along with a trained deﬁnition li - brary can be loaded on to the smartphone allowing clas - siﬁcation to be performed on - device . As we describe be - low , our classiﬁcation technique has low computational complexity allowing it to easily run on smartphone de - vices without consuming a signiﬁcant amount of energy . Alternately , the scan results can be sent as a JSON struc - ture to a cloud - based classiﬁcation server . We use an ensemble learning method known as boost - ing [ 6 ] to achieve high accuracy and eﬃciency for room level classiﬁcation . Boosting oﬄoads the bulk of compu - tation to an oﬄine training procedure , and retains eﬃ - ciency at classiﬁcation time . While boosting for binary classiﬁcation has been extensively analyzed , multi - class boosting ( such as the room identiﬁcation problem here ) remains an area of active research [ 11 , 7 ] . We use a “one versus all” formulation such that the estimated room is simply the maximum score over the set of per - room clas - siﬁers , that each distinguish one room from the rest . For each room , we construct a binary classiﬁer that estimates the probability that the RSSI vector S was observed in that room : F room ( S ) = (cid:88) m w m h m ( S ) . ( 1 ) Each per - room classiﬁer linearly combines “weak learn - ers” , h m according to scalar weights w m . The weak learners are decision stumps that compare one feature value to a threshold θ m : h m ( S ) = (cid:26) 1 X m ≥ θ m 0 otherwise . ( 2 ) To assemble a rich pool of weak learners to form the per - room classiﬁers , we propose margin features . For an environment with B total APs , we compute the set of unique pairwise diﬀerences ( margins ) between the RSSI vectors’ elements , { X m = S ( a m ) − S ( b m ) } , for a m , b m ∈ { 1 , · · · , B } . The set of margin features has size 0 . 5 · B · ( B − 1 ) . Intuitively , these features express coarse , localized order information of the pairs of APs , but al - low more reﬁned thresholding for classiﬁcation . Missing RSSI values for speciﬁc APs in the training set are set to a nominal minimum value , R min , to incorporate the cue that speciﬁc APs are not visible at speciﬁc locations . The margin features form the input to boosted classiﬁer construction . We employ a multiclass extension of the discrete adaboost classiﬁer described in [ 23 ] ( SAMME - 184 UBICOMP ' 14 , SEPTEMBER 13 - 17 , 2014 , SEATTLE , WA , USA data set # scans # rooms # APs method accuracy time ( s ) set I 693 39 90 RedPin / [ 2 ] 0 . 947 0 . 651 LoCo 0 . 944 0 . 00553 set II 1181 55 159 RedPin / [ 2 ] 0 . 913 3 . 054 LoCo 0 . 943 0 . 00562 Table 1 . Classiﬁcation accuracy and ( wall ) timing results for the two data sets . Accuracy is computed using 9 - fold cross validation . Test timing is averaged per RSSI scan in seconds . algorithm 2 in reference ) . The training procedure iden - tiﬁes a location - speciﬁc set of weak learners of the form of ( 2 ) that best discriminates that location from all oth - ers . The weak learners and their corresponding weights are learned in a greedy stagewise process . A margin fea - ture and threshold are selected at each iteration to min - imize the weighted error of the training set with the cur - rently constructed classiﬁer . After the new weak learner is added to ( 1 ) , the training sample weights w m are up - dated to reduce overall misclassiﬁcation , and the process continues . The output of training F room is the speciﬁca - tion of the set of weak learners , h m and weights w m of ( 1 ) . Each weak learner is determined by two hardware IDs a m , b m ( MAC addresses of speciﬁc Wi - Fi APs ) and a threshold , θ m . Given a scan of RSSI measurements S test for location estimation , each of the per - room classiﬁers is applied . We compute only the required set of RSSI diﬀerences that were selected in the classiﬁer training procedure . These diﬀerences are compared to the thresholds ( θ m ) determined during training and then combined linearly as in ( 1 ) . The ﬁnal room estimate is determined by com - paring the scores { F room ( S test ) } and selecting the max - imum . Note that the bulk of the computation occurs in the oﬄine training procedure . The test complexity depends only on the selected number of weak learners . Thus , unlike matching methods , classiﬁcation complex - ity is decoupled from the training set size . EXPERIMENTS To validate our system , we conducted two sets of experi - ments using data collected from a single ﬂoor of our oﬃce building . The RSSI values were recorded by a variety of Android mobile devices that included Samsung Galaxy SIIIs , LG Nexus 4s , and LG Nexus 5s . [ 8 ] presented an empirical evaluation of multiple ap - proaches to room level indoor localization in which vari - ants of the RedPin system [ 2 ] achieved superior accuracy . We thus use RedPin to represent state of the art perfor - mance . We implemented their basic matching approach using kNN classiﬁcation with k = 5 . For the boosting classiﬁcation system described here , we run 90 iterations of classiﬁer training oﬄine to select the most informative subset of margin features for discrim - inating each location . Throughout , we report accuracy and timing results averaged over 9 fold cross validation . Classiﬁcation timing results here are computed using a PC with a 2 . 8GHz AMD processor . We report results using the same protocol for two sets of collected scan data . The ﬁrst data set consists of 693 scans collected in 39 locations in which RSSI values are observed from a to - tal of 90 unique Wi - Fi BSSIDs . The locations con - sisted of small , single person oﬃces ( approximately 9 . 5 square meters ) and medium sized meeting rooms ( ap - proximately 20 square meters ) . The large number of Wi - Fi devices is the result of two conditions . First , the seven APs that we used are commercial Cisco APs that can ser - vice multiple networks and provide access across multi - ple frequencies ( mainly channels on 2 . 4GHz and 5GHz ) . These APs produced 42 unique BSSIDs . Second , be - cause our oﬃce shares a building with other companies and has close neighbors , the remaining unique BSSIDs are from these organizations’ APs . The data set contains an average of 22 . 2 scans per location ( s . d . = 6 . 26 ) . The second data set is larger in scale in terms of the num - ber of locations , 55 , and the number of Wi - Fi BSSIDs , 159 . This data set consists of 1181 total RSSI scans , with an average of 19 . 05 scans per location ( s . d . = 5 . 21 ) . Table 1 summarizes our experimental results . The right - most columns show the classiﬁcation accuracy and the average time required to classify one test scan . The top two rows compare RedPin / [ 2 ] and boosting / LoCo for the smaller data set . They perform at comparable accuracy , but LoCo is substantially more eﬃcient ( e . g . 0 . 00553s vs . 0 . 651s ) . Results in the bottom two rows for the larger data set show LoCo achieves superior accuracy relative to RedPin . Furthermore , while the classiﬁcation complexity of RedPin increases with the scale of the data set , the complexity of LoCo is unchanged and , as a re - sult , runs in orders of magnitude less time . These results validate our framework for location classiﬁ - cation . First , the accuracy of the boosted classiﬁer shows a high level of performance . Additionally , the boosted classiﬁers oﬄoad the bulk of the computational complex - ity to an oﬄine training process . Inspection of Table 1 reveals the poor scalability of kNN as the size of the data set and the number of locations increases . While the experiments only show the performance of LoCo in a single deployment , it is important to point out that there was nothing extraordinary about our ex - perimental conﬁguration . The oﬃce space we used is built out of common building materials used in most of - ﬁce buildings in the United States . We also implemented a prior approach [ 2 ] and it performed similarly in our space compared to prior published experiments . We plan 185 SESSION : INDOOR LOCATION to conduct further evaluations of LoCo to understand its performance in spaces other than oﬃce buildings , for ex - ample in homes , apartments , stores , and industrial envi - ronments . DISCUSSION While our work is not the ﬁrst to investigate leveraging radio signals to determine device location , we do believe we are the ﬁrst to demonstrate the eﬃcacy of a boosted classiﬁer that achieves the level of accuracy and perfor - mance demonstrated by our experiments . We believe this works provides a signiﬁcant step forward in allow - ing indoor location to be performed eﬃciently , even on resource constrained mobile devices . We have leveraged LoCo to enhance an existing oﬃce presence tool [ 20 ] , and we are now planning a study to understand how improved location information trans - lates to meaningful changes in communication behav - ior . More broadly , we believe eﬃcient and accurate room level location can open many new application opportuni - ties . From the mundane , ( e . g . an application that could detected the presence of multiple people in a meeting room and automatically reserve the room ) , to those that could be used for safety ( e . g . an application that can in - form building security personnel if employees are present in the building after hours ) and in emergencies ( e . g . a combined mobile / cloud application that could provide the last known location of building occupants at times of ﬁre or earthquake ) . Since LoCo only requires the user to install an application on his or her smartphone , their burden and overhead is low , in contrast to approaches such as Sociometric Badges [ 13 ] . A user simply must carry a device she likely already keeps with her during day - to - day activities . Thus , we believe LoCo can help drive improvements in oﬃce communication tools and technologies . One limitation of LoCo is that a set of training data must be collected per location . This process is simple but involves taking a device into a room and having it perform several scans that it submits to the classiﬁcation engine with an attached ground truth label . As environ - ments change ( e . g . a Wi - Fi AP is moved or replaced ) a new survey is likely necessary . One approach to ad - dress this , as in [ 2 ] , is to crowdsource users in providing ground truth . Another approach , which we are actively investigating , is to use a small robot to perform the data collection . Our framework is not designed to determine the pre - cise location within a room a device is located . In large rooms , this could limit the use of LoCo to clas - sify activities of individuals or groups , or to actuate changes or events within the physical space . Achieving these goals will involve fusing LoCo’s location informa - tion with other sensor sources . Finally , it is important to point out that , as a consequence of building a framework to run on common devices , we have made dependencies on platforms and APIs that could change with any new OS release . CONCLUSION AND FUTURE WORK Location is playing an ever increasing role in mobile com - puting . Many of the most popular applications and ser - vices used today build on knowing the user’s current location . For many of these applications the accuracy of current technologies is adequate . However , we be - lieve the next generation of mobile applications and ser - vices will need a next generation location technology— one that provides accurate , reliable location information for indoor environments . In this paper , we presented the LoCo framework . We discussed how it has been designed and developed to provide application and service devel - opers easy access to indoor location information . We demonstrated an evaluation of the system and explained its performance and capabilities compared to existing state - of - the - art techniques . Further , we performed this evaluation using hardware and software that is commer - cially available today . Our work to date serves as inspiration for future activ - ities . First , we intend to deploy LoCo in diﬀerent envi - ronments to understand its performance characteristics more broadly . This eﬀort will also allow us to better in - vestigate how well LoCo scales to larger conﬁgurations , for instance within a multistory high - rise in a densely urban environment . Second , we intend to leverage LoCo to prototype new and novel applications that use LoCo’s accurate location information to provide interesting and compelling experiences for users in oﬃce and retail set - tings . Finally we will work to make LoCo available to others in the research community . REFERENCES 1 . Andoni , A . , and Indyk , P . Eﬃcient algorithms for substring near neighbor problem . In Proceedings of the seventeenth annual ACM - SIAM symposium on Discrete algorithm , SODA ’06 , ACM ( New York , NY , USA , 2006 ) , 1203 – 1212 . 2 . Bolliger , P . Redpin - adaptive , zero - conﬁguration indoor localization through user collaboration . In Proceedings of the ﬁrst ACM international workshop on Mobile entity localization and tracking in GPS - less environments , MELT ’08 , ACM ( New York , NY , USA , 2008 ) , 55 – 60 . 3 . Chintalapudi , K . , Iyer , A . P . , and Padmanabhan , V . Indoor localization without the pain . In Proceedings of the sixteenth annual international conference on Mobile computing and networking , MobiCom ’10 , ACM ( New York , NY , USA , 2010 ) , 173 – 184 . 4 . Cong , L . , and Zhuang , W . Hybrid tdoa / aoa mobile user location for wideband cdma cellular systems . Wireless Communications , IEEE Transactions on 1 , 3 ( Jul 2002 ) , 439 – 447 . 5 . Dempster , A . , Li , B . , and Quader , I . Errors in deterministic wireless ﬁngerprinting systems for localization . In ISWPC 2008 ( 2008 ) , 111 – 115 . 186 UBICOMP ' 14 , SEPTEMBER 13 - 17 , 2014 , SEATTLE , WA , USA 6 . Hastie , T . , Tibshirani , R . , and Friedman , J . The Elements of Statistical Learning . Springer - Verlag , 2001 . 7 . Li , P . Robust logitboost and adaptive base class ( abc ) logitboost . In UAI 2010 , Proceedings of the Twenty - Sixth Conference on Uncertainty in Artiﬁcial Intelligence ( 2010 ) , 302 – 311 . 8 . Lin , H . , Zhang , Y . , Griss , M . , and Landa , I . Enhanced indoor locationing in a congested wi - ﬁ environment . Tech . Rep . MRC - TR - 2009 - 04 , Carnegie Mellon Silicon Valley , 2009 . 9 . Madigan , D . , Elnahrawy , E . , Martin , R . P . , Ju , W . - H . , Krishnan , P . , and Krishnakumar , A . S . Bayesian indoor positioning systems . In Proceedings of the 24th joint conference of the IEEE Computer and Communication Societies ( INFOCOM 2005 ) ( 2005 ) . 10 . Martin , E . , Vinyals , O . , Friedland , G . , and Bajcsy , R . Precise indoor localization using smart phones . In Proceedings of the international conference on Multimedia , MM ’10 , ACM ( New York , NY , USA , 2010 ) , 787 – 790 . 11 . Mukherjee , I . , and Schapire , R . A theory of multiclass boosting . In Advances in Neural Information Processing Systems 23 , J . Laﬀerty , C . K . I . Williams , J . Shawe - Taylor , R . Zemel , and A . Culotta , Eds . 2010 , 1714 – 1722 . 12 . Niculescu , D . , and Nath , B . Ad hoc positioning system ( aps ) using aoa . In INFOCOM 2003 . Twenty - Second Annual Joint Conference of the IEEE Computer and Communications . IEEE Societies , vol . 3 ( March 2003 ) , 1734 – 1743 vol . 3 . 13 . Olgu´ın , D . , Waber , B . N . , Kim , T . , Mohan , A . , Ara , K . , and Pentland , A . Sensible organizations : technology and methodology for automatically measuring organizational behavior . IEEE Transactions on Systems , Man , and Cybernetics , Part B : 39 , 1 ( Feb . 2009 ) , 43 – 55 . 14 . Ouyang , R . W . , Wong , A . K . - S . , Lea , C . - T . , and Chiang , M . Indoor location estimation with reduced calibration exploiting unlabeled data via hybrid generative / discriminative learning . IEEE Transactions on Mobile Computing 99 ( 2011 ) . 15 . Pan , J . J . , Pan , S . J . , Yin , J . , Ni , L . M . , and Yang , Q . Tracking mobile users in wireless networks via semi - supervised colocalization . IEEE Transactions on Pattern Analysis and Machine Intelligence ( 2012 ) , 587 – 600 . 16 . Roxin , A . , Gaber , J . , Wack , M . , and Nait - Sidi - Moh , A . Survey of wireless geolocation techniques . In IEEE Globecom ( 2007 ) . 17 . Sen , S . , Lee , J . , Kim , K . - H . , and Congdon , P . Avoiding multipath to revive inbuilding wiﬁ localization . In Proceeding of the 11th Annual International Conference on Mobile Systems , Applications , and Services , MobiSys ’13 , ACM ( New York , NY , USA , 2013 ) , 249 – 262 . 18 . Silva , J . Wips : wiﬁ indoor positioning system . http : / / mobile - accessibility . idrc . ocad . ca / projects / wips . 19 . Want , R . , Hopper , A . , Falc˜ao , V . , and Gibbons , J . The active badge location system . ACM Transactions on Information Systems ( TOIS ) 10 , 1 ( 1992 ) , 91 – 102 . 20 . Wiese , J . , Biehl , J . T . , Turner , T . , van Melle , W . , and Girgensohn , A . Beyond ’yesterday’s tomorrow’ : towards the design of awareness technologies for the contemporary worker . In Proceedings of the 13th International Conference on Human Computer Interaction with Mobile Devices and Services , MobileHCI ’11 , ACM ( New York , NY , USA , 2011 ) , 455 – 464 . 21 . Xiong , J . , and Jamieson , K . Towards ﬁne - grained radio - based indoor location . In Proceedings of the Twelfth Workshop on Mobile Computing Systems & Applications , HotMobile ’12 , ACM ( New York , NY , USA , 2012 ) , 13 : 1 – 13 : 6 . 22 . Youssef , M . , and Agrawala , A . The horus wlan location determination system . In Proceedings of the 3rd international conference on Mobile systems , applications , and services ( MobiSys ’05 ) ( 2005 ) , 205 – 218 . 23 . Zhu , J . , Zou , H . , Rosset , S . , and Hastie , T . Multi - class adaboost . Statistics and Its Interface 2 ( 2009 ) , 349 – 360 . 187 SESSION : INDOOR LOCATION