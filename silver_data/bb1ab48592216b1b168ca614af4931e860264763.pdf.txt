6 User Preferences Modeling and Learning for Pleasing Photo Collage Generation SIMONE BIANCO and GIANLUIGI CIOCCA , University of Milano - Bicocca , Italy In this article , we consider how to automatically create pleasing photo collages created by placing a set of images on a limited canvas area . The task is formulated as an optimization problem . Differently from existing state - of - the - art approaches , we here exploit subjective experiments to model and learn pleasantness from user preferences . To this end , we design an experimental framework for the identiﬁcation of the criteria that need to be taken into account to generate a pleasing photo collage . Five different thematic photo datasets are used to create collages using state - of - the - art criteria . A ﬁrst subjective experiment where several subjects evaluated the collages , emphasizes that different criteria are involved in the subjective deﬁnition of pleasantness . We then identify new global and local criteria and design algorithms to quantify them . The relative importance of these criteria are automatically learned by exploiting the user preferences , and new collagesaregenerated . Tovalidateourframework , weperformedseveralpsycho - visualexperimentsinvolving different users . The results shows that the proposed framework allows to learn a novel computational model which effectively encodes an inter - user deﬁnition of pleasantness . The learned deﬁnition of pleasantness generalizes well to new photo datasets of different themes and sizes not used in the learning . Moreover , compared with two state - of - the - art approaches , the collages created using our framework are preferred by the majority of the users . Categories and Subject Descriptors : G . 1 . 6 [ Mathematics of Computing ] : Optimization ; I . 2 . 6 [ Artiﬁcial Intelligence ] : Learning— Parameter learning ; I . 4 . 0 [ Image Processing and Computer Vision ] : General ; I . 4 . 9 [ Image Processing and Computer Vision ] : Applications General Terms : Design , Algorithms , Experimentation , Performance Additional Key Words and Phrases : Automatic collage creation , optimization algorithm , preference modeling , subjective experiment , user modeling , visual features extraction ACM Reference Format : Simone Bianco and Gianluigi Ciocca . 2015 . User preferences modeling and learning for pleasing photo collage generation . ACM Trans . Multimedia Comput . Commun . Appl . 12 , 1 , Article 6 ( August 2015 ) , 23 pages . DOI : http : / / dx . doi . org / 10 . 1145 / 2801126 1 . INTRODUCTION Photo collages are created by placing a number of photo images on a canvas area of limited size . They are used to visually represent in an appealing and compact way events of interest . The images can be ﬁtted on the canvas by simply scaling them at the risk of losing important details contained in them and making the collage dull . In this article , we consider the problem of how to automatically create pleasing photo collages : given a set of photo images and a canvas area , we want to arrange the photos on the canvas in a pleasant unsupervised manner and without scaling them ( see Figure 1 ) . Assuming that the size of the canvas area is smaller than the sum of the sizes of the photos to be displayed , two main issues arise . The ﬁrst is that photos may occlude themselves , the second is that photos may be partially outside the canvas area . These Authors’ address : Department of Informatics , Systems and Communication ( DISCo ) , Universit ` a degli Studi di Milano - Bicocca , Italy ; email : { bianco , ciocca } @ disco . unimib . it . Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for proﬁt or commercial advantage and that copies bear this notice and the full citation on the ﬁrst page . Copyrights for components of this work owned by others than ACM must be honored . Abstracting with credit is permitted . To copy otherwise , or republish , to post on servers or to redistribute to lists , requires prior speciﬁc permission and / or a fee . Request permissions from permissions @ acm . org . c (cid:2) 2015 ACM 1551 - 6857 / 2015 / 08 - ART6 $ 15 . 00 DOI : http : / / dx . doi . org / 10 . 1145 / 2801126 ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 2 S . Bianco and G . Ciocca Fig . 1 . Example photo collage created by placing a number of photo images on a canvas area of limited size . issues must be addressed by taking into account the pleasantness of the resulting collage that is inﬂuenced by the order with which the photos are placed on the canvas and their spatial arrangement . Usually , the most important photos are placed at the top of the less important ones in order to minimize the risk of being severely occluded , and composition properties related to photo contents , geometric constraints and aesthetic consideration are taken into account to maximize the pleasantness of the resulting collage . The criteria that deﬁne what is important in a photo and what composition properties should be satisﬁed may vary from user to user . Moreover , the single criteria may compete against each other . To be used in an automatic system for photo collage generation , the pleasantness criteria and their relative importance must be properly quantiﬁed using suitable algorithms . At the end of this process , a ﬁtness function can be deﬁned whose value represents the overall degree of pleasantness of a photo collage . To obtain the most pleasant collage , an automatic algorithm must search the best arrangement of the photos by maximizing the value of the ﬁtness function . For this purpose , an optimization algorithm is usually exploited . Several formulations of some of these criteria have been proposed in the literature but none of the existing works performed an user study in order to actually determine what are the criteria that made a photo important , what constraints must be satisﬁed in order to have a collage balanced , or what hints users pay attention to in judging the pleasantness of a photo collage . We argue that if we could elicit the criteria by modeling the preferences of the users , we would be able to create more pleasant photo collages . 1 . 1 . Related Work Previous works on photo collage can be categorized into two main groups depending on the processing applied to the photos . These two groups are : content - preserving and non - content - preserving . The non - content - preserving group includes the photo collage methods that select rel - evant regions within the photos in order to maximize the information that is conveyed in the ﬁnal collage . The methods ensure that these regions are made visible in the ﬁnal collage while the less relevant regions are either removed ( cropping ) or hidden by other , more relevant , ones ( hiding ) . In addition to scaling and translation , these methods usually perform a layering of the photos to decide the order with which they are positioned on the canvas and / or rotate the photos to further preserve their content as much as possible . Among the methods that also apply a rotation operation on the photos , we ﬁnd Picture Collage [ Wang et al . 2006 ; Liu et al . 2009 ] that is one of the ﬁrst works that formalized the problem of photo collage as an optimization problem using different , competing collage criteria , namely image saliency , blank space , and saliency ratio balance . The collage strategy proposed in Battiato et al . [ 2008 ] , which uses the same criteria but images are ﬁrst classiﬁed into three categories and then different relevant region detection strategies are adopted on the basis of the image category is inspired ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 3 by this work . Also inspired by the work of Wang et al . [ 2006 ] are the improved collage strategies proposed by Wei et al . [ 2009 ] and Yang et al . [ 2009 ] , where the collages can be also interactively modiﬁed by the user . A recent photo collage approach [ Yu et al . 2014 ] uses a heuristic search process to ensure that salient information of each photo is displayed in the polygonal area resulting from a power - diagram - based circle packing algorithm . Most of the previous approaches use a saliency map , solely or coupled with other descriptors , as informativeness criteria . In Ekhtiyar et al . [ 2011 ] instead , the informativeness criteria corresponds to foreground objects detected on depth maps . Finally , differently from all the aforementioned approaches , the method proposed in Huang et al . [ 2011 ] creates Arcimboldo - like collages with multiple thematically related cutouts from ﬁltered Internet images . The stained - glass - like photo collage by Girgensohn and Chiu [ 2003 ] is one of the methods that preserve the photo orientation without rotating them . The photos are cropped with respect to the contained face regions . These cropped regions have straight edges that are used to arrange the photos on the canvas . Digital Tapestry [ Rother et al . 2005 ] subdivides the photo into a set of sub - blocks and from them , the relevant regions of the photo are reconstructed and merged together . A pixel - based variant of this approach , named AutoCollage , is described in Rother et al . [ 2006 ] . Here the relevant regions with variable shapes are merged with a seamless blending that ensures that no sharp boundaries between them are formed in the ﬁnal collage . A similar approach is the Mobile Photo Collage presented in Lee et al . [ 2010 ] . The Puzzle - Like collage [ Goferman et al . 2010 ] instead cuts out from each photo an irregular shaped region which follows the area surrounding a relevant object within the image . Finally , we can cite the Dynamic Media Assemblage [ Luo et al . 2013 ] , a photo collage approach that can be used to summarize video content as well as a photo collection in a stained glass - like collage . In the content - preserving group belong those methods that arrange the photos ac - cording to the relevance of their content deﬁned in some way . The only operations performed on them are scaling and translation . Usually the most relevant photos are scaled bigger than the less relevant ones , and they are positioned on the most salient regions of the canvas . Moreover , the aspect ratio of the photos is preserved . These methods are also referred as photo layout methods . An example is the work of Chen et al . [ 2006 ] where the photo layout is constructed using a larger topic photo and several small - size supportive photos . The photos are se - lected and sized according to their temporal and content coherence . A similar approach is exploited in Calic et al . [ 2007 ] on video sequences where key - frames in a visual sum - mary are arranged on the canvas using the narrative grammar of comics . Also within this group , we can cite the work of Chao et al . [ 2010 ] where exclusion zones are used to lay out a set of photos on a canvas using different spatial criteria . This method was further improved in Fan [ 2012 ] . In Sandhaus et al . [ 2011 ] , spatial criteria are coupled with aesthetic principles to layout photos in a pleasant composition . Recently , taking advantage of information usually found in social networking , and building on the pre - vious PicWall work [ Wu and Aizawa 2013 ] , FriendWall [ Wu and Aizawa 2014 ] uses social attributes ( intrinsic labels ) to create photo collage employing both image visual features and associated Metadata . As a ﬁnal example , we can cite the interactive ap - proach [ Diakopoulos and Essa 2005 ] , where predesigned layout templates of annotated cells are used to arrange the photos according to their metadata , and focus area can be selected by the user . 1 . 2 . Contribution and Organization The focus of this work is to exploit subjective experiments to model user preferences in order to learn what criteria ( and to what extent ) need to be taken into account to ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 4 S . Bianco and G . Ciocca Fig . 2 . Experimental framework . automatically generate a pleasing photo collage . To this end , we designed an exper - imental framework that incorporates the identiﬁcation of the criteria via user pref - erence modeling , the implementation of the corresponding computational algorithms , the learning of their relative importance , and the validation of the results . We applied our framework in the context of non - content - preserving collages . We believe that this category permits us to investigate more criteria underlying the deﬁnition of pleasant - ness as the associated problem has more degrees of freedom than the one associated to content - preserving collages . However , our proposed framework can be adapted to these methods as well . The different steps of our framework are depicted in Figure 2 . A ﬁrst subjective experiment is conducted to investigate how different criteria are involved in the user - subjective deﬁnition of pleasantness . For this experiment , we redeﬁne the three basic criteria ( image informativeness , canvas area coverage , and information ratio balance ) exploited in most of the works in the state - of - the - art ( e . g . , Wang et al . [ 2006 ] and Battiato et al . [ 2008 ] ) . We evaluate three different representations of image informativeness : the ﬁrst one , which is usually used in the state - of - the - art , is based on saliency ; the other two are based on quality and color harmony , respectively , and are here introduced . Collages are created by exploiting a Direct Search optimization algorithm . Since user image collections are of very different contents , and different con - tents may lead to different pleasantness criteria , we considered ﬁve thematic image datasets . The results obtained from this experiment are used to identify new criteria both at global and local level . The new global criteria are : face ratio , axis alignment , centrality , and convexity ; the new local criteria are : color similarity , orientation di - versity , and minimum orientation difference . After having developed algorithms to compute these new criteria , their relative importance is learned by exploiting user rankings on the previously created collages . The identiﬁed criteria and their learned importance are then used to generate new sets of collages that are evaluated by a new panel of users . To further validate the proposed framework , we performed three additional experiments . In order to verify if the identiﬁed criteria and their learned relative importance generalize well , that is , if they can be used to create collage on un - seen image sets , we performed a subjective experiments on six other image collections of different contents with respect to the ones used in the previous experiments . We also tested the generalizability of the learned deﬁnition of pleasantness by creating collages varying the number of images in the set and the canvas size . Moreover , we compared the performance of our proposal against two state - of - the - art algorithms . To the best of our knowledge , this is the ﬁrst work which extensively exploits subjective experiments within the collage generation process to learn user preferences , and that uses datasets of images of different contents to validate the proposed approach . The rest of the article is organized as follows . The problem formulation is mathemat - ically described in Section 2 along with the description of the basic criteria . Section 3 illustrates the collage generation by describing the three different importance maps considered in our experiments , the photo datasets used , and the optimization algorithm responsible for the collage creation . The ﬁrst subjective experiment and its outcomes ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 5 Fig . 3 . Photo collage layering and compositing . are described in Section 4 . The set of the new criteria derived from the ﬁrst experiment is described in Section 5 , while the user preferences modeling and learning strategy is detailed in Section 6 . Results of the second subjective experiment performed on the newly created collages are illustrated in Section 7 . The generalizability of the learned deﬁnition of pleasantness and the comparison with state of the art methods on new datasets are reported in Section 8 . Finally , Section 9 , concludes this article . 2 . PROBLEM FORMULATION AND BASIC CRITERIA DEFINITION Given N input photo images I = { I i } Ni = 1 and their corresponding importance maps M = { M i } Ni = 1 ( importance map representations will be discussed in the next section ) , a photo collage algorithm must arrange all the images on a canvas area C . In a photo collage , each image I i is characterized by its state s i = ( t i , θ i , l i ) , where t i = ( t i , x , t i , y ) is the 2D translation vector ( with respect to the canvas origin ) , θ i is the orientation angle ( with respect to the x - axis ) , and l i is the layering index used to determine the placement order of the image . The state is used in a roto - translation transformation T ( · , s i ) to position the image ( and its importance map ) on the canvas area : I i = T ( I i , s i ) M i = T ( M i , s i ) . ( 1 ) The layering indexes can be manually or automatically assigned according to some heuristics . We compute the layering indexes l i on the basis of the 2D integrals of the importance maps M i : images with higher importance maps are placed on top layers , while images with lower importance maps are placed on bottom layers . An example of the procedure used for photo collage layering and compositing is reported in Figure 3 . The picture collage creation is formulated as an optimization problem in order to ﬁnd the best conﬁguration of states S = { s i } Ni = 1 which optimizes all the criteria considered . 2 . 1 . Basic Criteria Deﬁnition Most of the existing photo collage methods ( e . g . , Wang et al . [ 2006 ] ) exploit the three “basic criteria” listed in Table I . These criteria are quantiﬁed by the functions C i ( S ; I , M , C ) . The functions are parametrized by the conﬁguration of states S , and take as data the set of transformed images I , the set of transformed importance maps M , and the canvas C . In the following we write the functions C i ( S ; I , M , C ) as C i ( · ) dropping the dependencies for a more compact notation . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 6 S . Bianco and G . Ciocca Table I . Basic Criteria Used in Most Photo Collage Formulations Criterion Description Function Visibility Visible image content ( based on importance map ) C 1 Canvas coverage Canvas area covered by the photos C 2 Visibility ratio balance Visible image region with respect to image size C 3 Visibility . The overall collage visibility is the average of all information ratios ( based on an importance map ) computed on the visible regions of the images : C 1 ( · ) = 1 N N (cid:2) i = 1 sum 2 ( v is ( M i ) ) sum 2 ( M i ) , ( 2 ) where v is ( · ) is a function that computes the visible parts ( taking into account clipping and overlapping ) of the given map , and sum 2 ( · ) is a function that computes the 2D integrals of the map . Canvas Coverage . The canvas coverage is deﬁned as the ratio of canvas area covered by the arranged photos : C 2 ( · ) = 1 area ( C ) N (cid:2) i = 1 area ( v is ( M i ) ) , ( 3 ) where area ( · ) is a function that computes the area corresponding to the given input . Visibility Ratio Balance . The visibility ratio balance is computed as the standard deviation of the information ratios : C 3 ( · ) = 1 − std i = 1 . . . N (cid:3) sum 2 ( v is ( M i ) ) sum 2 ( M i ) (cid:4) , ( 4 ) where std { · } computes the standard deviation of the given values . The values obtained are combined into a ﬁtness function f that must be maximized : f ( S ; I , M , C ) = 3 (cid:2) i = 1 λ i C i ( S ; I , M , C ) ( 5 ) with λ i , i = 1 , . . . , 3 , a weight used to deﬁne the contribution of the i th criterion ( usually ﬁxed to 1 ) . This ﬁtness function is at the basis of most of the photo collage algorithms in the state - of - the - art . 3 . COLLAGE GENERATION In the following subsections , assuming that a proper dataset of images is available , we describe three different approaches to compute the image importance map : the ﬁrst approach is inspired by Ma and Zhang [ 2003 ] ; the other two are introduced here . We also describe the algorithm used to place the images on the canvas area by searching the best conﬁguration of states . The algorithm optimizes the ﬁtness function deﬁned in Eq . ( 5 ) . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 7 Fig . 4 . The ﬁve thematic datasets . From top to bottom : Burst of Color III ( Burst ) , Fashion II ( Fashion ) , Landscape V ( Landscape ) , Self Portrait VII ( Self ) , and Zen Photography III ( Zen ) . 3 . 1 . Photo Datasets A collage is usually created from a set of images sharing a common underlying theme . To create our dataset , we downloaded the images from the DPChallenge 1 website . The site collects photos of both amateur and professional photographers that participate to digital photography challenges . Each challenge has a main theme that the participants must follow . All the submitted photos are then judged by other participants by giving a numerical score . We selected ﬁve photo challenges among the hundreds published and for each of them we collected the 14 best - rated photos . The challenges have been chosen to include diverse subjects of generic themes . The chosen challenges are : Burst of Color III ( Burst for brevity ) , Fashion II ( Fashion ) , Landscape V ( Landscape ) , Self Portrait VII ( Self ) , and Zen Photography III ( Zen ) . The Burst dataset is composed of images with a single subject ; the Fashion dataset contains images of people and accessories ; the Landscape dataset is composed of mostly horizontal images ; on the contrary , the Self dataset contains mostly portrait images both in color and black and white ; ﬁnally , the Zen dataset is composed of heterogeneous images and , in most cases , it is not easy to identify the subject . This diversity makes it possible to investigate if people use different criteria in the creation of photo collages for different themes . Figure 4 shows the ﬁve sets of photos . 3 . 2 . Importance Maps Two of the basic criteria used in Eq . ( 5 ) require the computation of importance maps to locate the most informative regions in an image . The underlying idea is that the most informative regions should not be hidden by other images thus maximizing the information displayed . Since there is no a unique deﬁnition of what is important in an image , in our investigation we tested different importance maps exploiting three different image properties : saliency , color harmony , and quality . Each importance map is plugged in turn into Eq . ( 5 ) , obtaining three different collages for each photo dataset . Saliency . The ﬁrst importance map is based on saliency and uses an approach to compute it similar the one presented in Ma and Zhang [ 2003 ] . We used this approach in a previous work on image thumbnailing [ Ciocca and Schettini 2010 ] and the result - ing saliency maps show that , overall , a compact set of salient regions are produced . We considered these results reasonable for our purposes . Other more recent and precise saliency methods can be exploited . The recent paper [ Cheng et al . 2015 ] shows the 1 http : / / www . dpchallenge . com / . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 8 S . Bianco and G . Ciocca Fig . 5 . Examples of importance maps . performances of several algorithms on reference datasets that can be used as alter - native ones . For surveys related to saliency , see Duncan and Sarkar [ 2012 ] , Kimura et al . [ 2013 ] , and Ali et al . [ 2014 ] . To compute the saliency map , the image is divided into small rectangular tiles . On each tile , a contrast score is computed by comparing its average color with the average colors of the neighbor’s tiles . The contrast score is assigned to each pixel in the tile . The basic algorithm has been extended by computing three different saliency maps in the LUV color space using neighborhoods of increasing size . Each map captures the saliency at a different scale . These saliency maps are then ﬁltered and combined together into a single normalized map of values in the range [ 0 , 1 ] . We denote the importance map of the i th image computed using saliency as M i , sal . Examples of saliency maps are shown in the second column of Figure 5 . Harmony . Since color combinations are related to the pleasantness of an image , for the second importance map , we used the method proposed in Solli and Lenz [ 2009 ] to evaluate color harmony of the image locally by creating a color harmony map . We choose to use this approach because , in contrast to other approaches ( e . g . , Ou and Luo [ 2006 ] ) , it computes an image color harmony score by considering the distribution and spatial relationship between color regions found by the MeanShift segmentation algorithm . In order to have a color harmony map , we computed the harmony score on pixel’s neighborhoods ( i . e . , pixels in a square region surrounding a given pixel’s location ) of different sizes . The harmony map is obtained by summing all the scores and by normalizing them in the [ 0 , 1 ] range . We denote the importance map of the i th image computed using color harmony as M i , har . The third column of Figure 5 shows some examples of color harmony maps . Quality . Image quality approaches model how an image is perceived if it is affected by different image distortions . We cannot predict what kind of image distortions are present , nor do we have a reference image to which we can compare our photos , thus we must consider generic ( or “universal” ) no - references image quality approaches . We exploited the BRISQUE ( Blind / Referenceless Image Spatial Quality Evaluator ) computational model described in Mittal et al . [ 2012 ] . The model uses different image features in order to quantify the image quality . Since BRISQUE computes a single quality index for an image , we implemented a neighborhood - based strategy in order to obtain a quality map . We considered the quality index computed on the whole image and on three pixel’s neighborhoods . The indexes are summed and normalized in the [ 0 , 1 ] range . We denote the importance map of the i th image computed using image quality as M i , qua . The fourth column of Figure 5 shows some examples of image quality maps . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 9 3 . 3 . Optimization Algorithm Let us consider , for now , a generic photo dataset and a generic importance map deﬁ - nition . Under these assumptions , the optimal collage is generated by ﬁnding the best conﬁguration of states S which maximizes Eq . ( 5 ) . The solution space of this maximiza - tion problem is of mixed type : in fact , for each state s i = ( t i , θ i , l i ) , we have t i ∈ Z 2 , θ i ∈ R , and l i ∈ N . In order to make the state variables types uniform , and since small variations of θ i do not affect the ﬁnal collage , the allowed orientations are uniformly quantized in the range [ − θ max , θ max ] . The chosen optimization method is an extension of a Direct Search algorithm ( DS ) modiﬁed to deal with discrete solution spaces [ Bianco and Tisato 2012 ; Bianco and Schettini 2012 ] . DS is a derivative - free method for solving optimization problems [ Hooke and Jeeves 1961 ; Kolda et al . 2003 ] . Since the focus of this article is not on the optimization algorithm used , any nongradient method could be used [ Nelder and Mead 1965 ] as well as stochastic ones [ Goldberg 1989 ; Eberhart and Kennedy 1995 ] . The algorithm is initialized with a random conﬁguration of states : the i th image is placed on the canvas at a random position t i and with a random orientation θ i . Its layering index instead is determined by the importance map as previously described . At each iteration of the implemented DS algorithm , the algorithm ﬁnds the best conﬁg - uration of states by testing the current best conﬁguration against all those obtained by varying the position and orientation in each image’s state . The position of each image is then updated and a new iteration is started . The algorithm terminates when the maximum number of iterations has been reached . We used the modiﬁed Direct Search algorithm without any heuristic whose compu - tational cost is O ( gan ) with g being the number of grid points on the canvas , a being the number of allowed orientation on ecah grid point , and n being the number of images to be placed . Other , more efﬁcient , optimization algorithms can be used . Here we are interested in the effects of using different criteria in creating the photo collages , not the most efﬁcient way to create them . 3 . 4 . Experimental Setup In our implementation , the size of the canvas C is set at 400 × 400 pixels and all the images have been resized such that min { width , height } = 128 , pixels , maintaining the same aspect ratio . With these constraints , the ratios between the sum of the areas of the images in a given dataset and the area of the canvas are 2 . 0096 for the Burst dataset , 2 . 0024 for the Fashion dataset , 2 . 2008 for the Landscape dataset , 1 . 8168 for the Self dataset , and 2 . 0144 for the Zen dataset . In practice , this means that we need to hide about 50 % of the pixels of the images to ﬁt them on the canvas in a pleasant manner . Or , conversely , we need to retain the most informative and pleasant 50 % of the pixels . The canvas and image dimensions have been chosen solely for the purpose of evaluating the performance of our framework under typical constraints usage . We are interested here more in the ratio of size between images and canvas than in the absolute dimensions themselves and we wanted the placement problem to be hard . A larger canvas and / or larger images can be used in an actual application . It should be pointed out that while optimization has been done on canvas of 400 × 400 pixels , the subjective tests have been done on their 1600 × 1600 versions . Top left image corners were allowed to be placed on a regular grid from − 2 g to 400 in both canvas directions , with a step of g = 50 pixels . The set of allowed orientations is deﬁned in the range [ − θ max , θ max ] = [ − π 3 , π 3 ] in π 18 steps . For Experiment I , the values of λ 1 , λ 2 , and λ 3 in Eq . ( 5 ) have been set to 1 , while for Experiment II , these have been learned from the users . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 10 S . Bianco and G . Ciocca Fig . 6 . Photo collages created on the ﬁve datasets using the three importance maps . Color and full - size images can be found at http : / / www . ivl . disco . unimib . it / research / collage / . 4 . SUBJECTIVE EXPERIMENT I This algorithm has been applied to each dataset using the three importance maps yield - ing a total of 15 photo collages as shown in Figure 6 . Let us denote each collage with the corresponding conﬁguration of states S dsm : ds ∈ { Burst , Fashion , Landscape , Self , Zen } denotes the photo dataset , and m ∈ { sal , qua , har } the importance map used . In order to identify the criteria to be used to create pleasing photo collages , we performed a subjective test involving several users . Test subjects were selected taking into account age , gender , and expertise in photography . Speciﬁcally , 16 subjects ( Italian native speakers ) were enlisted . Subjects are between 21 and 41 years old , three females and 13 males . Only one of the subjects can be considered an expert photographer ( although not professional ) while the others consider themselves amateurs . Half of the subjects stated that they shoot an average of 3 , 000 – 4 , 000 photos / year . The remaining subjects shoot an average of 100 - 300 photos / year . All of them have a certain knowledge about digital image processing . No relation exists between subjects and images in the photo datasets . In this ﬁrst experiment , we showed each subject the ﬁve sets of three photo collages , one set at time , and asked him / her to rank the three collages according to his / her liking without judging the semantic of the scenes depicted . The subjects were aware that the collages have been generated by different algorithms but no technical information and no hints about the underlying criteria were given . This was done in order to not bias their choices . The sets of photo collages , as well as the collages within each set , were presented in a random order . The evaluation of all the collages and the related interviews took on average 30 minutes per subject . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 11 Table II . Number of Times that Each Collage Was Ranked First , Second or Third Burst 1st 2nd 3rd Saliency 9 3 4 Harmony 5 6 5 Quality 2 7 7 Fashion 1st 2nd 3rd Saliency 9 4 3 Harmony 6 8 2 Quality 1 4 11 Landscape 1st 2nd 3rd Saliency 9 6 1 Harmony 6 5 5 Quality 1 5 10 Self 1st 2nd 3rd Saliency 2 5 9 Harmony 5 7 4 Quality 9 4 3 Zen 1st 2nd 3rd Saliency 11 3 2 Harmony 2 11 3 Quality 3 2 11 Table III . Importance Maps Ranking , According to Table II Set 1st 2nd 3rd Burst Saliency ( 339 ) Harmony ( 309 ) Quality ( 281 ) Fashion Saliency ( 342 ) Harmony ( 324 ) Quality ( 262 ) Landscape Saliency ( 348 ) Harmony ( 314 ) Quality ( 265 ) Self Quality ( 342 ) Harmony ( 324 ) Saliency ( 225 ) Zen Saliency ( 359 ) Harmony ( 293 ) Quality ( 276 ) The numbers in parenthesis are the scores computed using the For - mula One World Championship points scoring system . After all the test sessions have been performed , we counted the number of times that each collage was ranked at the ﬁrst ( i . e . , best ) , second , or third position in its photo dataset . During the counting , we checked for noisy user feedback that , in the pairwise experiment , manifests in the form of circular preferences ( e . g . , A > B , B > C , and C > A ) . We planned to remove these subjects from the analysis , but at the end of the experiment none of the subjects showed this behavior . Table II shows the detailed results . As can be seen , in the case of the Zen photo dataset , the results are quite polarized . Almost all the subjects have judged the collages in a similar manner ranking ﬁrst the collage created with the Saliency map , then the one using the Harmony map , and lastly the collage using the Quality map . The same ranking , although with a less polarization effect , can be observed for the Burst , Fashion , and Landscape sets . In all the three sets , the collages created with the Saliency map is clearly the preferred one . The one using the Harmony map is the second best since it has been selected second or third a fewer number of times than the one using the Quality map . The only set displaying a different ranking is Self . In this case , the ranking is the opposite of the ones obtained from the other four sets . In Table III , the ﬁnal ranking of the importance maps for the ﬁve photo collage sets are reported . The ranking is determined by applying the Formula One World Championship points scoring system : each collage receives 25 , 18 , or 15 points each time that it is selected respectively ﬁrst , second , or third . The numbers in parenthesis are the computed scores . After each test , we also interviewed each subject about the reasons of his / her choices , what factors have inﬂuenced the selection of one photo collage over the others , and what criteria they used . In the following , for each photo dataset , we report a summary of the answers given by the users during the interviews . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 12 S . Bianco and G . Ciocca 4 . 1 . Experiment I : Results The Burst photo dataset is composed of images with bright colors . Many of these images are close - ups . It is not surprising that most subjects indicated color as a primary feature in collage evaluation . In particular , several subjects suggested that the images should have been positioned in the canvas by taking into account the color similarity . Very dissimilar colors among neighbor images were considered disturbing . One subject suggested to hide very dark regions preferring to have a collage with bright colors . Most subjects preferred images placed with randomized orientations . Collages containing images with their borders parallel to the canvas borders were penalized . Most of the images in this dataset contain a single object of interest . Collages where this object was fully visible were thus preferred , in particular in the case of faces . The Fashion photo dataset is mainly composed of images of full - body women models . Only one image is a close - up . These images are less colorful than the Burst dataset , but they contain high contrast regions . The main criterion used in evaluating the collages was the visibility of the models . Several subjects also indicated that having the top layer image in a central position made the collage more pleasing . Secondary criteria include the visibility of a ( impossible to model ) favourite image , and loss of bright - colored regions . No other criteria were suggested on this dataset . The Landscape photo dataset contains images with mostly dull colors if compared against the previous ones . No people are visible and the scenes depicted are mostly natural scenes . Several shots have a panoramic aspect ratio . For these reasons , ac - cording to the subjects , the collages created on this dataset resulted among the most difﬁcult to be evaluated . Images arranged in a regular way were considered disturbing . If an image was mostly covered by the others ( as , for example , the violet sunset in the collage created with the Saliency Map ) , it was considered acceptable by many users . Overall , the collages were often considered equivalent . The Self photo dataset was the easiest to evaluate probably because contains self portraits . As expected , the criteria arisen from the interviews referred mostly to the visibility of the faces . One interesting insight on this dataset is that , even though we encouraged the subjects to avoid judging the image content from the semantic point of view , many choices were made based on the appeal of the faces depicted . For example , some subjects considered the photo of the clown unpleasant and thus a photo that could be covered before others . On the contrary , others considered this photo very artistic . It seems that when humans are depicted , personal preferences are difﬁcult to ignore . This is the only dataset containing both gray - scale and color type of images . Some test subjects did not appreciate collages with spatial clusters of images of the same type . The Zen photo dataset should inspire peace and tranquility . It contains photos with very few colors and details . They are mostly close - ups and some of the photos show soft - focus effects . Most of the subjects found it difﬁcult to judge the collages and express the rationale behind their choices . However , color composition and harmony were the most important criteria . The best collages were those where the relevant objects were visible . One interesting criterion that emerged on this dataset is that the shape of the visible image regions should not be jagged . Regular ( i . e . , convex ) shapes are considered more appealing . 5 . NEW CRITERIA DEFINITION From the results reported in the previous section , we can see that the users evaluated the collages using different criteria . These criteria are both local and global . Local criteria refer to either properties of single images or of their neighborhoods , while global criteria refer to properties of the collage seen as a whole . The three basic criteria reported in Table I and exploited in previous works are not enough to capture the ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 13 Table IV . New Criteria for a Pleasing Photo Collage Criterion Description Function Visibility Visible image content ( based on the three importance maps ) C (cid:3) 1 Canvas coverage Canvas area covered by the photos C (cid:3) 2 Visibility ratio balance Visible image region with respect to image size C (cid:3) 3 Face Ratio Percentage of visible faces C (cid:3) 4 Axis Alignment Percentage of images having sides parallels to the canvas C (cid:3) 5 Centrality Position of the top - level image C (cid:3) 6 Convexity Measure of jaggedness of the shape of the visible regions C (cid:3) 7 Color Similarity Measure of color similarity between neighbor images C (cid:3) 8 Orientation Diversity Measure of variability in the image orientations C (cid:3) 9 Minimum Orientation Difference Minimum orientation difference between neighbor photos C (cid:3) 10 different nuances of pleasantness expressed by the users . Thus , on the basis of the insights obtained from Experiment I , and taking into account that we need to model them with computational algorithms , we have selected the criteria in Table IV to be used in the generation of pleasing collages . The ﬁrst three criteria are extensions of the ones in Table I , where now the importance map is computed by using a combination of the three importance maps described in Section 3 . 2 . The other seven criteria have been deﬁned following the results of Experiment I . Since the results showed that we also need to take into account the presence of faces within the images , it is necessary to consider , for each image , a binary mask F i containing the face regions . These masks undergo the same geometric transformations as the importance maps : F i = T ( F i , s i ) . ( 6 ) We indicate with F = { F i } Ni = 1 the set of transformed masks which is passed along with the other data to the criteria functions . In the following , we write the functions C i ( S ; I , M (cid:2) , F , C ) as C i ( · ) , dropping the dependencies for a more compact notation . Visibility . For each image , we combined the three importance maps computed on saliency , quality , and harmony , in order to obtain a global importance map : M (cid:3) i = (cid:2) k ∈ { sal , qua , har } α k M i , k , ( 7 ) where α k are found as described in the next section . Visibility is thus computed as in Eq . ( 2 ) by substituting the set of transformed importance maps M with the new one M (cid:2) : C (cid:3) 1 ( · ) = 1 N N (cid:2) i = 1 sum 2 ( v is ( M (cid:3) i ) ) sum 2 ( M (cid:3) i ) . ( 8 ) Canvas coverage . The deﬁnition of the canvas coverage is identical to the deﬁnition of C 2 in Eq . ( 3 ) : C (cid:3) 2 ( · ) = 1 area ( C ) N (cid:2) i = 1 area ( v is ( M (cid:3) i ) ) . ( 9 ) Visibility Ratio Balance . The ratio balance is computed as in Eq . ( 4 ) : C (cid:3) 3 ( · ) = 1 − std i = 1 . . . N (cid:3) sum 2 ( v is ( M (cid:3) i ) ) sum 2 ( M (cid:3) i ) (cid:4) . ( 10 ) ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 14 S . Bianco and G . Ciocca Face Ratio . A face detector is run on each image I i to ﬁnd the mask containing the face regions ( i . e . , face bounding boxes ) . Let the mask F i be F i ( x , y ) = (cid:3) 1 if ( x , y ) ∈ face region 0 otherwise . ( 11 ) The face ratio feature is then deﬁned as follows : C (cid:3) 4 ( · ) = (cid:5) Ni = 1 sum 2 ( v is ( F i ) ) (cid:5) Ni = 1 sum 2 ( F i ) . ( 12 ) Axis alignment . This feature measures the ratio of images with orientation parallel to the axis , that is , 0 given that θ max = π 3 . C (cid:3) 5 ( · ) = # { s i ∈ S : θ i = 0 } N . ( 13 ) Centrality . The centrality feature measures how central is the image in the ﬁrst layer , that is , the top - most image . Let us call c 1 = ( x 1 , y 1 ) the centroid of the visible part of the image in the top layer and c 0 = ( x 0 , y 0 ) the centroid of the canvas C . The centrality is deﬁned as : C (cid:3) 6 ( · ) = 1 − (cid:4) c 1 − c 0 (cid:4) 2 hdiag ( C ) , ( 14 ) where hdiag ( · ) is used to compute the half - diagonal length . Convexity . For each transformed image I i the convexity ratio is deﬁned as ratio between the area corresponding to the image’s visible region and the area of its convex hull . The convexity feature is computed as the minimum convexity ratio over all the transformed images : C (cid:3) 7 ( · ) = min i = 1 , . . . , N (cid:3) area ( v is ( I i ) ) area ( con v ex ( v is ( I i ) ) ) (cid:4) . ( 15 ) Color Similarity . This feature is computed by evaluating the color histogram simi - larity of each image on the canvas with respect to its neighbors . For each image , we ﬁrst compute : d i = (cid:2) j ∈ neigh ( I i ) χ 2 ( hist ( v is ( I i ) ) , hist ( v is ( I j ) ) ) , ( 16 ) where hist ( v is ( I i ) ) is the color histogram computed on the visible portion of I i , χ 2 is the chi - squared distance , and neigh ( I i ) represents the set of the indexes of the images neighbors of I i . Color similarity is then computed as : C (cid:3) 8 ( · ) = 1 N N (cid:2) i = 1 d i # { neigh ( I i ) } . ( 17 ) Orientation Diversity . This feature measures the average of the variance in orienta - tion in each set of neighbor images : C (cid:3) 9 ( · ) = 1 N N (cid:2) i = 1 std j ∈ NI (cid:3) θ j θ max (cid:4) , ( 18 ) where NI = neigh ( I i ) ∪ { i } and θ max is the maximum rotation angle allowed . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 15 Table V . Normalized Scores Obtained by Scaling the Scores in Table III for the Maximum Score in Each Dataset Set Saliency Harmony Quality Burst 1 . 00 0 . 91 0 . 83 Fashion 1 . 00 0 . 95 0 . 77 Landscape 1 . 00 0 . 91 0 . 76 Self 0 . 80 0 . 91 1 . 00 Zen 1 . 00 0 . 82 0 . 77 Minimum Orientation Difference . This feature measures the average of the minimum orientation differences between each image I i and its neighboring set neigh ( I i ) : C (cid:3) 10 ( · ) = 1 N N (cid:2) i = 1 min j ∈ neigh ( I i ) (cid:3) | θ i − θ j | θ max (cid:4) . ( 19 ) The new ﬁtness function f (cid:3) ( · ) to be optimized in the generation of pleasing photo collages can be compactly written as : f (cid:3) ( S ; I , M (cid:2) , F , C ) = 10 (cid:2) i = 1 λ (cid:3) i C (cid:3) i ( S ; I , M (cid:2) , F , C ) , ( 20 ) where each λ (cid:3) i weight is the contribution of criterion C (cid:3) i , and is found as described in the next section . Please recall that the ﬁtness function also depends on the three weights α k introduced in Eq . ( 7 ) , and that are used to compute the new importance maps . 6 . USER PREFERENCES MODELING AND LEARNING Given as input the values C (cid:3) i , i = 1 , . . . , 10 , we want to learn a single set of optimal weights [ λ (cid:2) , α ] = [ { λ (cid:3) i } 10 i = 1 , { α i } i ∈ { sal , qua , har } ] to be plugged into Eq . ( 20 ) so that they produce ﬁtness values in accordance with user preferences emerged from Experiment I on all the datasets considered . To this end , for each dataset , the ﬁtness values obtained for the collages created using the saliency , harmony , and quality importance maps must be in the same order reported in Table III . Taking as example the Burst dataset , where the user preferences were Saliency (cid:6) Harmony (cid:6) Quality , we want that f (cid:3) ( S salBurst ) > f (cid:3) ( S harBurst ) > f (cid:3) ( S quaBurst ) . Furthermore , the relative distances between the normalized scores obtained by the different maps and reported in Table V should be preserved as much as possible . As an example , let us indicate with sc ( · ) the function that computes the Formula One score . Taking again as example the Burst dataset , we want that the ﬁtness f (cid:3) ( · ) satisﬁes f (cid:3) (cid:6) S harBurst (cid:7) f (cid:3) (cid:6) S salBurst (cid:7) = sc (cid:6) S harBurst (cid:7) sc (cid:6) S salBurst (cid:7) = 0 . 91 ( 21 ) and f (cid:3) (cid:6) S quaBurst (cid:7) f (cid:3) (cid:6) S salBurst (cid:7) = sc (cid:6) S quaBurst (cid:7) sc (cid:6) S salBurst (cid:7) = 0 . 83 . ( 22 ) Similar constraints come from the other four datasets considered , giving a total of ten simultaneous contraints that Eq . ( 20 ) has to satisfy . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 16 S . Bianco and G . Ciocca Table VI . Signs of the Criteria Weights Learned by the Optimization Algorithm , and a Description of Their Effects on the Creation of the Collage Criterion Sign Interpretation C (cid:3) 1 + Promotes the visibility of the image informativeness C (cid:3) 2 + Promotes the covering of the whole canvas , demoting holes C (cid:3) 3 - Demotes large variations in the size of the visible parts of the images C (cid:3) 4 + Promotes faces to be visible C (cid:3) 5 + Promotes images to be placed aligned with canvas axis C (cid:3) 6 + Promotes image in the top layer to be placed in the center C (cid:3) 7 + Promotes visible parts of the images to be convex C (cid:3) 8 - Promotes proximity of images with similar color histograms C (cid:3) 9 - Promotes small variation of orientations among neighboring images C (cid:3) 10 + Demotes neighboring images to have the same orientation The optimal weights [ λ (cid:2) , α ] are found by solving the following optimization problem : [ λ (cid:2) , α ] = arg max λ (cid:3) 1 , . . . , λ (cid:3) 10 α sal , α qua , α har (cid:2) ds ∈ D τ (cid:6) ord E 1 ds , ord f (cid:3) ds (cid:7) − η (cid:2) k = { 2 , 3 } (cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8) f (cid:3) (cid:6) S j k ds (cid:7) f (cid:3) (cid:6) S j 1 ds (cid:7) − sc (cid:6) S m k ds (cid:7) sc (cid:6) S m 1 ds (cid:7) (cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8)(cid:8) 1 , ( 23 ) where D = { Burst , Fashion , Landscape , Self , Zen } , ord E 1 ds and ord f (cid:3) ds are respectively the per - dataset user rankings computed using sc ( · ) and the rankings induced by f (cid:3) ( · ) : ord E 1 ds = [ m 1 , m 2 , m 3 ] , m k ∈ { sal , qua , har } : sc (cid:6) S m 1 ds (cid:7) > sc (cid:6) S m 2 ds (cid:7) > sc (cid:6) S m 3 ds (cid:7) ( 24 ) ord f (cid:3) ds = [ j 1 , j 2 , j 3 ] , j k ∈ { sal , qua , har } : f (cid:3) (cid:6) S j 1 ds (cid:7) > f (cid:3) (cid:6) S j 2 ds (cid:7) > f (cid:3) (cid:6) S j 3 ds (cid:7) , ( 25 ) where τ ( · , · ) is the Kendall tau rank correlation coefﬁcient [ Kendall 1938 ] , | | · | | 1 is the 1 − norm , and η is a weight term that balances the relative contributions of the two parts of which Eq . ( 23 ) is made of . In this work , η is heuristically set to 1 . The rationale behind the optimization is that we want to automatically ﬁnd the best set of weights [ λ (cid:2) , α ] that , plugged into Eq . ( 23 ) , produce a ﬁtness function f (cid:3) ( · ) in maximum accordance with user rankings on all the datasets used for training . The Kendall tau rank correlation coefﬁcient in the ﬁrst term is used to measure if , and to what extent , a given set of weights [ λ (cid:2) , α ] produces a ﬁtness f (cid:3) ( · ) in accordance with user rankings . This means that when the ﬁtness function f (cid:3) ( · ) is valued on the set of collages , its outputs should be in the same order in which the users judged them . The second term is introduced to prevent the scores from being too close to each other and from having a meaningful ranking . Given a new set of images for which we want to build a collage , having a ﬁtness function permits us to measure how good a certain conﬁguration of image states is . Furthermore , maximizing f (cid:3) ( · ) we are conﬁdent that we are generating a collage that the users will judge good overall . The optimization to solve Eq . ( 23 ) has to be performed just once and ofﬂine so , the computational time required to solve it is of secondary importance . However , it requires a few seconds to run , since all the inputs are computed ofﬂine and the only operations involved are the computation of the Kendall tau rank ( ﬁrst term of Eq . ( 23 ) ) and the relative distances between user scores and induced scores ( second term of Eq . ( 23 ) ) . The optimization problem in Eq . ( 23 ) is solved using the continuous - space implemen - tation of the DS algorithm . The signs of the criteria weights are reported in Table VI together with a brief explanation of their effect in the creation of the collage . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 17 Fig . 7 . Collages comparison between the best ranked collages in Experiment I ( top ) and the collages created with the user preference modeling and learning procedure for Experiment II ( bottom ) . Color and full - size images can be found at http : / / www . ivl . disco . unimib . it / research / collage / . Once the weights [ λ (cid:2) , α ] are learned , a new set of collages is generated by maximizing Eq . ( 20 ) . For each dataset , the layering order of the images is induced by the weights α = [ α sal , α qua , α har ] . In more detail , for each image i , a new importance map M (cid:3) i is created using Eq . ( 7 ) . The layering order is then obtained by sorting in decreasing order the 2D integrals of the importance maps M (cid:3) i . The collages are generated using the discrete version of DS algorithm introduced in Section 3 . 3 . 7 . SUBJECTIVE EXPERIMENT II The ﬁnal collages obtained on each dataset using the previously described procedure , are reported in Figure 7 . We denote each new collage with the corresponding conﬁg - uration of states S (cid:3) ds . For each dataset we also report the best - ranked collage from Experiment I according to the scores in Table V . In this experiment , we wanted to understand if the new collages were judged better than the previous ones . To this end , we performed a pairwise subjective test . For each dataset , users were presented with the two collages in Figure 7 and they were asked to choose the preferred one . A total of 39 subjects participated to this experiment : 26 males and 13 females . Results of Experiment II are reported in Table VII . In three datasets ( Burst , Land - scape , and Self ) , the new collages were preferred by over 64 % of the subjects . In particular , the Self dataset exhibits the higher percentage of preferences with about 72 % of the subjects choosing the new collage . The Fashion dataset shows about 56 % of preference for the new collage . For this dataset , the new criteria seem to be marginally effective . This is due to the artistic nature of the photos that makes them good - looking regardless of their positioning . The Zen dataset continues to be the most problematic to be evaluated . Substantially , the subjects split in half in judging the collages due to the particular nature of the photo’s content . On average , 62 % of the subjects preferred the new photo collages . 8 . FURTHER EXPERIMENTS In this section , further experiments are carried out to verify the generalization abil - ity of the identiﬁed criteria and their learned relative importance . Three different ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 18 S . Bianco and G . Ciocca Table VII . Number of Times ( # ) and Percentage ( % ) that a Collage Was Preferred in Experiment II Burst # % Saliency 13 33 . 3 Final collage 26 66 . 7 Fashion # % Saliency 17 43 . 6 Final collage 22 56 . 4 Landscape # % Saliency 14 35 . 9 Final collage 25 64 . 1 Self # % Quality 11 18 . 2 Final collage 28 71 . 8 Zen # % Saliency 19 48 . 7 Final collage 20 51 . 3 Fig . 8 . Generalization to new photo themes . These collages were created using the proposed framework with the single importance map ( top ) and the same learned ﬁtness and weights used to create the collages in Figure 7 ( bottom ) . Color and full - size images can be found at http : / / www . ivl . disco . unimib . it / research / collage / . experiments are presented : ( i ) the learned deﬁnition of pleasantness is used to cre - ate collages on unseen image sets ; ( ii ) results obtained by our proposal are compared against two state - of - the - art algorithms ; and ( iii ) the behavior of the learned deﬁnition of pleasantness is also tested by varying the number of images in the dataset and the canvas size . 8 . 1 . Generalization to New Photo Themes In order to test how the learned deﬁnition of pleasantness generalizes to photo collages not seen during the training phase , a further experiment has been done . The optimal set of weights learned on the ﬁve training datasets in the previous section is used as - is to create photo collages on the new datasets . For this experiment , six new challenges have been selected from the DPChallenge website . The chosen challenges are : Shallow DOF VI ( Shallow for brevity ) , Red V ( Red ) , Primary Colors II ( Primary ) , Silhouettes VI ( Silhouettes ) , Selﬁe ! ( Selﬁe ) , and 160 Pixels ( Pixels ) . The experiment performed is a pairwise subjective test similar to the one used in Experiment II . For each dataset , users were presented with the two collages in Figure 8 and they were asked to choose the preferred one . Following the results of Experiment I , one of the collages was generated using a single importance map ; the other one was generated maximizing the learned ﬁtness . A total of 42 subjects participated in this subjective experiment : 22 males and 20 females . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 19 Fig . 9 . Comparison of our collage against Shape collage and Autocollage algorithms . Results from this experiment showed that , on average , 61 % of the subjects preferred the photo collages created using the learned deﬁnition of pleasantness . In particular , in four datasets ( Shallow , Primary , Selﬁe , and Pixels ) , these collages were preferred by over 66 % percent of the subjects . For the remaining two datasets ( Red and Silhouettes ) , the two collage versions tied instead . 8 . 2 . Comparing Collages The different collage algorithms in the state of the art are based on different philoso - phies : keep images with the same size vs . allow image resize ; allow image rotation vs . not ; preserve image borders vs . blend image contents ; allow images overlapping vs . not . We have run an experiment to compare our collage results with those of two algorithms belonging to the noncontent preserving category ( the same as ours ) but using different philosophies : Shape Collage 2 ( a commercial software ) , and Autocollage [ Rother et al . 2006 ] . The most relevant differences between the algorithms are that Shape Collage and our algorithm allow images to be rotated , while Autocollage does not . Moreover , Autocollage blends the images together to have a smooth transition between them , while Shape Collage and our algorithms do not . For this comparison , we used the six image datasets used in Section 8 . 1 . We set the parameters of the Autocollage and Shape Collage algorithms to generate collages of 14 images on a squared canvas and image to canvas ratio as similar as possible as in our set - up . The collages generated with the different methods are shown in Figure 9 . The same subjects that participated in the previous experiment participated in this one . We asked them to choose among the three collages which they preferred . Results from this experiment showed that on average 56 % of the subjects preferred our photo collages ; 42 % of the subjects preferred the Autocollage results and just 2 % preferred the Shape Collage results . In particular , in four datasets ( Red , Primary , Selﬁe , and 160 pixels ) , our collages were preferred by 65 % percent of the subjects . For the re - maining two datasets ( Shallow and Silhouettes ) , 64 % of the subjects preferred the Autocollage results instead . This is due to the nature of the images used : in both 2 http : / / www . shapecollage . com / . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 20 S . Bianco and G . Ciocca Fig . 10 . Generalization to datasets with different number of input images per collage ( 5 , 10 , 14 , 25 , 50 ) and different canvas sizes ( 250 , 350 , 550 , and 750 pixels , respectively ) . For each collage , the canvas size is almost half of the area covered by all the images . The images have the same dimensions for visualization purposes . categories , the images contain a subject with an out - of - focus ( Shallow ) or almost uni - form ( Silhouettes ) backgrounds . This makes easier for Autocollage to blend image contents nicely . 8 . 3 . Varying Collage Sizes In this experiment , we test how the learned deﬁnition of pleasantness generalizes to datasets with different number of input images per collage and different canvas sizes . Two smaller and two larger variants of the Red dataset have been considered , containing 5 , 10 , 25 , and 50 images , respectively . Canvas sizes have been chosen so that they are almost half of the total area covered by the images as in Section 3 . Thus , optimization has been performed on canvas having side length equal to 250 , 350 , 550 , and 750 . The results are reported in Figure 10 and compared with the results obtained by Autocollage , which resulted in the best competing algorithm in the previous section . All the canvasses have been resized to equal size for better visualization . The results of Autocollage in the case of ﬁve images is not available since the minimum number of images it can handle is 7 . The judgments of these collages have been performed by 20 subjects . We asked them to choose which collage among the two they prefer . After the test , the results that we collected are the following . For the three collages with few images , the majority of the subjects chose our collage with percentages of 100 % , 70 % , and 65 % for the 5 , 10 , and 15 images , respectively . In the case of 25 images , the difference between our collage and the Autocollage is reduced , with 55 % of the users choosing our collage and 45 % choosing the Autocollage . Finally , the gap between the two approaches further reduces in the case of 50 images to practically a tie ( 50 % of preferences ) . The interview with the users revealed that , when presented with the collages with 50 images , the limited canvas size made them pay less attention to the actual content of the images , while favoring the overall image distribution . In this case , the two collages were considered equally cluttered but the smooth carving of Autocollage made this collage more pleasing . 9 . CONCLUSION In this work , we have considered the problem of creating pleasing photo collages by exploiting subjective experiments to model and learn user preferences . We designed an experimental framework for the identiﬁcation of the criteria that need to be taken into ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 21 account to generate a pleasing photo collage . Starting from collages created using state - of - the - art criteria , namely photo informativeness , canvas area coverage , and information ratio balance , we performed a subjective experiment involving several subjects on different thematic photo datasets . This experiment showed that differ - ent and more complex criteria are involved in the subjective deﬁnition of pleasant - ness . Inspired by the responses of the subjects , we have redeﬁned the basic crite - ria and we have identiﬁed and implemented new global and local ones : face ratio , axis alignment , centrality , convexity , color similarity , orientation diversity and min - imum orientation difference . The relative importance of all these criteria has been learned by exploiting user rankings . Moreover , with the proposed experimental frame - work we learned a composite photo informativeness description from saliency , quality and harmony . A new set of collages has been generated using the identiﬁed crite - ria and evaluated in a pairwise comparison experiment against the previous best - rated collages . The new collages were preferred by the majority of the subjects for all the photo datasets considered , showing that the proposed framework is able to identify and combine the criteria at the basis of user preference , and to learn a com - putational model which effectively encodes an interuser deﬁnition of pleasantness . A further experiment has been run , showing that the learned deﬁnition of pleas - antness generalizes well to new thematic photo datasets not used in the training phase . Photo informativeness has been described in terms of saliency , quality , and har - mony maps , but other maps taking into account different image properties can be incorporated as well in our framework ( e . g . , photo memorability by Isola et al . [ 2011 ] and Khosla et al . [ 2012 ] ) . Furthermore , leveraging user preferences , the proposed framework permits to quantify the contribution of different visual features to model new intrinsic properties of the images . The proposed framework can beneﬁt current collage generation algorithms in two different ways . The ﬁrst regards its use to estimate the weights of the ﬁtness function ( also called energy function ) in the different collage generation algorithms , for example , weights associated to region importance , transition cost , object sensitivity and face presence in Autocollage [ Rother et al . 2006 ] ; representativeness , compactness and transition smoothness in Video collage [ Mei et al . 2009 ] ; salience visibility , salience ratio balance , penalty of severe occlusions , blank space presence , canvas shape constraint , spatially uniformity and orientation diversity in Picture collage [ Wang et al . 2006 ; Liu et al . 2009 ] ; image complexity and content distinctness in Yu et al . [ 2014 ] . All these algorithms heuristically set the weights associated to the different terms in their ﬁtness functions . With our framework , these weights can be systematically set using user preferences . This way requires that a training data has to be generated in the form of multiple collages and the collection of user judgments about them . This operation has to be done only once and does not impact collage generation time . The second way in which existing algorithms can leverage our work regards the possibility of including the new criteria here deﬁned inside their ﬁtness / energy functions . This will not dramatically slow down the collage generation process , since the new criteria are fast to compute . As future work , we plan to investigate if the learned deﬁnition of pleasantness changes when subjects and photos are linked . We plan also to expand the set of criteria by enlarging the number of subjects in the experiments , and by adding more thematic photo datasets . REFERENCES Borji Ali , Cheng Ming - Ming , Jiang Huaizu , and Li Jia . 2014 . Salient Object Detection : A Survey . ( 2014 ) arXiv : 1411 . 5878 [ cs . CV ] . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . 6 : 22 S . Bianco and G . Ciocca Sebastiano Battiato , Gianluigi Ciocca , Francesca Gasparini , Giovanni Puglisi , and Raimondo Schettini . 2008 . Smart photo sticking . In Adaptive Multimedia Retrieval : Retrieval , User , and Semantics , Lecture Notes in Computer Science , vol . 4918 . Springer , 211 – 223 . Simone Bianco and Raimondo Schettini . 2012 . Sampling optimization for printer characterization by direct search . IEEE Trans . Image Process . 21 , 12 , 4868 – 4873 . Simone Bianco and Francesco Tisato . 2012 . Sensor placement optimization in buildings . In Image Processing : Machine Vision Applications V , vol . 8300 , SPIE , 830003 . J . Calic , D . P . Gibson , and N . W . Campbell . 2007 . Efﬁcient layout of comic - like video summaries . IEEE Trans . Circ . Syst . Video Tech . 17 , 7 , 931 – 936 . Hui Chao , Daniel R . Tretter , Xuemei Zhang , and C . Brian Atkins . 2010 . Blocked recursive image composition with exclusion zones . In Proceedings of the 10th ACM Symposium on Document Engineering ( DocEng’10 ) . ACM , 111 – 114 . Jun - Cheng Chen , Wei - Ta Chu , Jin - Hau Kuo , Chung - Yi Weng , and Ja - Ling Wu . 2006 . Tiling slideshow . In Proceedings of the 14th Annual ACM International Conference on Multimedia ( MULTIMEDIA’06 ) . ACM , 25 – 34 . M . Cheng , N . J . Mitra , X . Huang , P . H . S . Torr , and S . Hu . 2015 . Global contrast based salient region detection . IEEE Trans . Patt . Anal . Mach . Intell . 37 , 3 , 569 – 582 . Gianluigi Ciocca and Raimondo Schettini . 2010 . Multiple image thumbnailing . In Digital Photography VI , vol . 7537 , SPIE , 75370S . Nicholas Diakopoulos and Irfan Essa . 2005 . Mediating photo collage authoring . In Proceedings of the 18th Annual ACM Symposium on User Interface Software and Technology ( UIST’05 ) . ACM , New York , 183 – 186 . K . Duncan and S . Sarkar . 2012 . Saliency in images and video : A brief survey . Computer Vision , 6 , 6 , 514 – 523 . Russ C . Eberhart and James Kennedy . 1995 . A new optimizer using particle swarm theory . In Proceedings of the 6th International Symposium on Micro Machine and Human Science . vol . 1 , New York , 39 – 43 . Hesam Ekhtiyar , Mahdi Sheida , and Mahmood Amintoosi . 2011 . Picture collage with genetic algorithm and stereo vision . Int . J . Comput . Sci . Iss . 8 , 4 , 165 – 169 . Jian Fan . 2012 . Photo layout with a fast evaluation method and genetic algorithm . In Proceedings of the 2012 IEEE International Conference on Multimedia and Expo Workshops ( ICMEW ) . IEEE , 308 – 313 . Andreas Girgensohn and Patrick Chiu . 2003 . Stained glass photo collages . In Proceedings of the IEEE International Conference on Image Processing . vol . 2 . 871 – 874 . Stas Goferman , Ayellet Tal , and Lihi Zelnik - Manor . 2010 . Puzzle - like Collage . Comput . Graph . Forum 29 , 2 , 459 – 468 . David E . Goldberg . 1989 . Genetic Algorithms in Search , Optimization and Machine Learning ( 1st Ed . ) . Addison - Wesley Longman Publishing Co . , Inc . , Boston , MA . Robert Hooke and To A . Jeeves . 1961 . “Direct search” solution of numerical and statistical problems . J . ACM 8 , 2 , 212 – 229 . Hua Huang , Lei Zhang , and Hong - Chao Zhang . 2011 . Arcimboldo - like collage using internet images . ACM Trans . Graph . 30 , 6 , 155 : 1 – 155 : 8 . Phillip Isola , Jianxiong Xiao , Antonio Torralba , and Aude Oliva . 2011 . What makes an image memorable ? . In Proceedings of the 2011 IEEE Conference on Computer Vision and Pattern Recognition ( CVPR ) . IEEE , 145 – 152 . Maurice G . Kendall . 1938 . A new measure of rank correlation . Biometrika 30 , 1 / 2 , 81 – 93 . Aditya Khosla , Jianxiong Xiao , Antonio Torralba , and Aude Oliva . 2012 . Memorability of image regions . In NIPS , Vol . 2 . 4 . Akisato Kimura , Ryo Yonetani , and Takatsugu Hirayama . 2013 . Computational models of human visual attention and their implementations : A survey . IEICE Trans . Inf . Syst . 96 , 3 , 562 – 578 . Tamara G . Kolda , Robert Michael Lewis , and Virginia Torczon . 2003 . Optimization by direct search : New perspectives on some classical and modern methods . SIAM Review 45 , 3 , 385 – 482 . Man Hee Lee , Nitin Singhal , Sungdae Cho , and In Kyu Park . 2010 . Mobile photo collage . In Proceedings of the 2010 IEEE Conference on Computer Vision and Pattern Recognition Workshops ( CVPRW ) . 24 – 30 . Tie Liu , Jingdong Wang , Jian Sun , Nanning Zheng , Xiaoou Tang , and Heung - Yeung Shum . 2009 . Picture collage . IEEE Trans . Multimed . 11 , 7 , 1225 – 1239 . Sheng - Jie Luo , Chun - Yu Tsai , Wei - Chao Chen , and Bing - Yu Chen . 2013 . Dynamic media assemblage . IEEE Trans . Circ . Syst . Video Tech . 23 , 12 , 2044 – 2053 . Yu - Fei Ma and Hong - Jiang Zhang . 2003 . Contrast - based image attention analysis by using fuzzy growing . In Proceedings of the 11th ACM International Conference on Multimedia ( MULTIMEDIA’03 ) . ACM , 374 – 381 . ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 . User Preferences Modeling and Learning for Pleasing Photo Collage Generation 6 : 23 Tao Mei , Bo Yang , Shi - Qiang Yang , and Xian - Sheng Hua . 2009 . Video collage : Presenting a video sequence using a single image . Visual Computer 25 , 1 , 39 – 51 . A . Mittal , A . K . Moorthy , and A . C . Bovik . 2012 . No - reference image quality assessment in the spatial domain . IEEE Trans . Image Process . 21 , 12 , 4695 – 4708 . John A . Nelder and Roger Mead . 1965 . A simplex method for function minimization . Computer J . 7 , 4 , 308 – 313 . Li - Chen Ou and M . Ronnier Luo . 2006 . A colour harmony model for two - colour combinations . Color Res . Appl . 31 , 3 , 191 – 204 . Carsten Rother , Lucas Bordeaux , Youssef Hamadi , and Andrew Blake . 2006 . Autocollage . In ACM Trans . Graphics . vol . 25 . ACM , New York , 847 – 852 . Carsten Rother , Sanjiv Kumar , Vladimir Kolmogorov , and Andrew Blake . 2005 . Digital tapestry [ automatic image synthesis ] . In Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition ( CVPR’05 ) . vol . 1 . IEEE , 589 – 596 . Philipp Sandhaus , Mohammad Rabbath , and Susanne Boll . 2011 . Employing aesthetic principles for au - tomatic photo book layout . In Advances in Multimedia Modeling , Lecture Notes in Computer Science , vol . 6523 , Springer , Berlin Heidelberg , 84 – 95 . Martin Solli and Reiner Lenz . 2009 . Color harmony for image indexing . In Proceedings of the 2009 IEEE 12th International Conference on Computer Vision Workshops ( ICCV Workshops ) , 1885 – 1892 . Jingdong Wang , Long Quan , Jian Sun , Xiaoou Tang , and Heung - Yeung Shum . 2006 . Picture collage . In Proceedings of the 2006 IEEE Conference on Computer Vision and Pattern Recognition . vol . 1 . IEEE , 347 – 354 . Yichen Wei , Yasuyuki Matsushita , and Yingzhen Yang . 2009 . Efﬁcient optimization of photo collage . Tech . Rep . MSRTR - 2009 - 59 , Microsoft Research . Zhipeng Wu and K . Aizawa . 2013 . PicWall : Photo collage on - the - ﬂy . In Proceedings of the 2013 Asia – Paciﬁc Signal and Information Processing Association Annual Summit and Conference ( APSIPA ) . IEEE , 1 – 10 . Zhipeng Wu and Kiyoharu Aizawa . 2014 . Building friend wall for local photo repository by using social attribute annotation . J . Multimedia 9 , 1 , 4 – 13 . Yingzhen Yang , Yichen Wei , Chunxiao Liu , Qunsheng Peng , and Yasuyuki Matsushita . 2009 . An improved belief propagation method for dynamic collage . Visual Computer 25 , 5 – 7 , 431 – 439 . Zongqiao Yu , Lin Lu , Yanwen Guo , Rongfei Fan , Mingming Liu , and Wenping Wang . 2014 . Content - aware photo collage using circle packing . IEEE Trans . Visual . Comput . Graph . 20 , 2 , 182 – 195 . Received December 2014 ; revised March 2015 ; accepted April 2015 ACM Trans . Multimedia Comput . Commun . Appl . , Vol . 12 , No . 1 , Article 6 , Publication date : August 2015 .