EXPLORING HAPTIC FEEDBACK AS AN AID IN DESIGN by Yifan Yang B . E . , Nanjing University of Aeronautics and Astronautics , 2008 Thesis Submitted in Partial Fulfillment of the Requirements for the Degree of Master of Applied Science in the School of Engineering Science Faculty of Applied Science ÔÉì Yifan Yang 2013 SIMON FRASER UNIVERSITY Spring 2013 ii Approval Name : Yifan Yang Degree : Master of Applied Science Title of Thesis : Exploring Haptic Feedback as an Aid in Design Examining Committee : Chair : Dr . Jie Liang Associate Professor , School of Engineering Science Dr . Shahram Payandeh Senior Supervisor Professor , School of Engineering Science Dr . Carlo Menon Supervisor Associate Professor , School of Engineering Science Dr . John Jones Internal Examiner Associate Professor , School of Engineering Science Date Defended : April 24 , 2013 iii Partial Copyright Licence iv Abstract This thesis investigates the feasibility and effectiveness of Haptic Aided Design ( HAD ) which can be used to facilitate the design process through multimodal interface . As a possible paradigm in virtual reality technologies , haptic feedback offers the designers an approach for enhancing the traditional input - based method used in Computer - Aided Design ( CAD ) system . Users can interact with 3D objects in the virtual environment and at the same time be able to have the tactile sensation during the design process . Moreover , such interface offers the designers a human - in - the - loop methodology where they are able interact with virtual prototypes modeled in the application environment . In the thesis , we developed two preliminary HAD environments to validate the integration of the haptic device with CAD system . In both of these environments , users are able to feel the force of simulated devices and intuitively modify design parameters through interaction with force feedback device . In order to evaluate the feasibility of proposed HAD interfaces , we conducted informal user studies where participants are asked to explore discretized design space of virtual prototypes . The experimental results suggest that these virtual prototypes integrated with haptic features can facilitate product development and may have great potential in future virtual reality design environment . Keywords : Haptic aided design ; Virtual reality ; Virtual prototype ; CAD system ; Human - in - the - loop v Dedication To Dai Qin vi Acknowledgements First of all , I have to express my utmost gratitude to my senior supervisor , Dr . Shahram Payandeh , without your patient and inspiring guidance , this thesis would not be possible here . I appreciate the support and understanding when I came back from long term absence due to my health problem . The good advice you gave me on research direction is one of the most important reasons I finally made my step here . This four - year graduate study is one of the most exiting period in my life . I met nice and smart colleagues in the Experimental Robotic Lab . I have been learning and growing in a friendly environment . Thanks to every lab colleague who has been supporting me throughout the thesis work . Thanks to Dr . Jie Liang for chairing my defence in spite of the busy schedule , and thanks to my supervisor Dr . Carlo Menon and to Dr . John Jones for examining my defence . Last but not the least , I wish to express my ultimate gratitude to my family , who have been supportive all these years . vii Table of Contents Approval . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ii Partial Copyright Licence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii Abstract . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iv Dedication . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . v Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vi Table of Contents . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vii List of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ix List of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . x List of Acronyms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xiv List of Symbols . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xv 1 . Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 1 . 1 . Motivations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 1 . 2 . Literature Review . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 1 . 2 . 1 . Haptic Application in Medical Training and Simulation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4 1 . 2 . 2 . Haptic Aided Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6 1 . 3 . Objectives . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8 1 . 4 . Contributions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9 1 . 5 . Thesis Organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10 2 . Background Material . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11 2 . 1 . Haptic Force Feedback Device . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11 2 . 2 . Analysis of the Novint Falcon Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15 2 . 2 . 1 . Kinematic Configuration and Geometric Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16 2 . 2 . 2 . Inverse Kinematics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17 2 . 2 . 3 . Forward Kinematics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23 3 . Gravity Compensation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24 3 . 1 . Problem Description . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24 3 . 2 . Background Material of Libralis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26 3 . 2 . 1 . Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26 3 . 2 . 2 . Model and Control Algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26 3 . 2 . 3 . Offline Auto - calibration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28 3 . 2 . 4 . Online Gravity Compensation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31 3 . 3 . Point - cloud - based Gravity Estimation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 3 . 3 . 1 . Limitation of Libralis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 3 . 3 . 2 . Creating Point Cloud . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 3 . 3 . 3 . Interpolation Scheme . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36 3 . 3 . 4 . Interpolation Algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36 3 . 3 . 5 . Integration of Point - cloud - based Interpolation with Libralis . . . . . . . . . . . . . . . . . . . . . . . . 37 3 . 4 . Preliminary Experiments on Libralis Software . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38 3 . 4 . 1 . Performance Evaluation of Gravity Compensation using Libralis . . . . . . . . . . . . . . 38 3 . 4 . 2 . Integration of Point Cloud Method with libralis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41 3 . 5 . Summery . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45 viii 4 . Haptic Aided Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46 4 . 1 . Problem Descriptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46 4 . 2 . Overview of the HAD Procedure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47 4 . 3 . Case Study One : Design of Injection - Aided Mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50 4 . 3 . 1 . Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50 4 . 3 . 2 . Overview of HAD Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51 4 . 3 . 3 . Soft Tissue Modeling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54 4 . 3 . 4 . Mechanical Design and Simulation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56 4 . 3 . 5 . Virtual Fixture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59 4 . 3 . 6 . Experiment Design and User Study . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59 4 . 3 . 7 . Discussion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62 4 . 4 . Case Study Two : Simulation of Virtual Refrigerator Door . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63 4 . 4 . 1 . Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63 4 . 4 . 2 . Overview of HAD Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 4 . 4 . 3 . Haptic Model of Reaction Force during Opening and Closing a Refrigerator Door . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67 4 . 4 . 4 . Experiment Design and User Study . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79 4 . 4 . 5 . Discussion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82 4 . 5 . Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83 5 . Conclusions and Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84 5 . 1 . Conclusions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84 5 . 2 . Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85 Bibliography . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86 Appendices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91 Appendix A . Specification of force feedback devices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92 Appendix B . 1 . Specification of Novint falcon device and data sheets of hardware . . . . . . . . . 93 Appendix . B . 2 . Novint Falcon‚ÄîIntroduction and Basic Experiment Setup . . . . . . . . . . . . . . . . . . . . . 94 Appendix C . Libralis Software Specification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95 C . 1 User Interface of Libralis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95 C . 2 Grid creation using libralis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97 C . 3 Libralis SDK Setup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98 Appendix D . Schematic of Determining if a Point Lies Inside the Workspace . . . . . . . . . . . . . . 100 ix List of Tables Table 2 . 1 Geometric properties for links of Novint Falcon . Labels correspond to Figure 2 . 9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20 Table 3 . 1 Math operation counts in each interpolation method . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37 Table 3 . 2a : Offline auto - calibration time in experiments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40 Table 3 . 2b : Errors of gravity approximation over test points inside the grid . . . . . . . . . . . . . . . . . . . 40 Table 3 . 3 Errors of gravity compensation over three types of test points ( unit / N ) . . . . . . . . . . 42 Table 3 . 4 Gravity error at each point measured by the virtual fixture ( unit / N ) . . . . . . . . . . . . . . . . 44 Table 3 . 5 : Compensation error of type 3 points after we updated the compensation value ( Unit / N ) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44 Table 4 . 1 Group of parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61 Table 4 . 2 : Overshoot value during needle insertion of 16 samples ( mm ) . . . . . . . . . . . . . . . . . . . . . . . 62 Table 4 . 3 : score of fidelity of three force models in experiment 1 ; column O is the score of the opening sensation and column C is the score of closing sensation , the description of three models are given in section 4 . 4 . 3 . . . . . . . . . . . 80 Table 4 . 4 Parameters of 16 samples in experiment 2 . The meaning of parameters used here is explained in section 4 . 4 . 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81 Table 4 . 5 Data sheet of user study of experiment 2 . The scores are given in two columns . Column O represents the opening phase , and column C represents the closing phase . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81 Table A . 1 Specifications of force feedback devices introduced in thesis . Lists include company names , device names , degree of freedom ( DOF ) , degree of force feedback , estimated workspace measured in millimeters , maximum force measured in Newton‚Äôs , torque in milli - newton - meter , stiffness measured in N / mm , and quote from products retailers given in US dollar , price may changes considering the time of writing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92 x List of Figures Figure 1 . 1 : Conceptual paradigm of evolution from model to product ; the area represents product details . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 Figure 1 . 2 : The Mediceus Epidural simulator [ 1 ] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6 Figure 2 . 1 : Tactile haptic device , illustration of tactile feedback . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 Figure 2 . 2 : Kinesthetic device Phantom Omni from SensAble [ 1 ] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 Figure 2 . 3 ( a ) Moog FCS Robotic haptic master using admittance display [ 63 ] ( b ) Omega - 3 from Force Dimension using impedance display [ 62 ] . . . . . . . . . . . . . . . . . . . 13 Figure 2 . 4 : ( a ) Serial structure haptic device Phantom premium from SensAble [ 1 ] ( b ) Parallel structure haptic device Delta . 6 from Force Dimension [ 62 ] . . . . . . . . 14 Figure 2 . 5 : ( a ) Prototype of serial / parallel 6DoF haptic device [ 53 ] ; ( b ) kinematic model of hybrid serial / parallel haptic device . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15 Figure 2 . 6 : Prototype and CAD model generated by the author of Novint Falcon [ 6 ] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16 Figure 2 . 7 : Front - view sketch of the parallel structure of the Delta - 3 robot proposed by Thai [ 7 ] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17 Figure 2 . 8 : CAD model generated by NX ( Unigraphics ) software . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18 Figure 2 . 9 : Diagram of base frame and reference frames attached to the actuated joints . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19 Figure 2 . 10 : Geometric diagram of one branch of the device : point P locates at the center of end effector , and O is the original point of base frame located at the center of the fixed platform . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20 Figure 3 . 1 : Gravity compensation . ( a ) Resultant force perceived by users before gravity compensation ; ( b ) resultant force after gravity compensation . . . . . . . . . . . 25 Figure 3 . 2 : The choice of parameter . The curves represent the relationship of Ts and Œ≤ , parameterized with several value of overshoot p [ 51 ] . . . . . . . . . . . . . . . . . . . . . . 27 Figure 3 . 3 : The choice of parameter Œ± . The curves represent the relationship of Œ± and Œ≤ , parameterized with several value of overshoot p [ 51 ] . . . . . . . . . . . . . . . . . . . 28 Figure 3 . 4 : Grid with 27 interpolation points . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29 Figure 3 . 5 : Flow diagram of the offline auto - calibration [ 51 ] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29 Figure 3 . 6 : The cube which contains the current point P . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31 xi Figure 3 . 7 : Figure illustrates the mapping on the grid boundary if the point P lies outside the grid . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32 Figure 3 . 8 : vertices creation process viewed from 2D ; if new vertex exceeds the workspace boundary , it will be replaced with one with ŒªP distance to the previous vertex . The vertices used for searching for the new vertices in the next loop are marked with a circle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34 Figure 3 . 9 : Conceptual diagram of point cloud creation ; point marked with flag = 1 is used to search for new vertices in the next loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35 Figure 3 . 10 : Trilinear interpolation within a tetrahedron . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36 Figure 3 . 11 : A user - defined virtual fixture plane that provides constraint force in Y direction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39 Figure 3 . 12 : Grids used in experiment ( a ) group one using grid with 27 vertices ; ( b ) group two using grid with 125 vertices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39 Figure 3 . 13 : Mean absolute error of gravity approximation over 10 sample points inside the grid . Group 1 has 27 vertices and group 2 has 125 vertices . . . . . . . . 40 Figure 3 . 14 : Illustration of three types of points outside the grid . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42 Figure 3 . 15 : Mean absolute error of gravity approximation and related standard deviation , over three types of points outside the grid . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43 Figure 3 . 16 : Mean absolute error of gravity compensation over the type 3 points . Test group 1 uses the original libralis method ; test group 2 uses the hybrid method which integrates the new interpolation algorithm with libralis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45 Figure 4 . 1 : Schemes represent two kinds of design process . ( a ) Traditional CAD process of industrial design , ( b ) Design process integrated with the HAD environment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48 Figure 4 . 2 : The architecture of HAD interface in consumer - oriented design . . . . . . . . . . . . . . . . . . 49 Figure . 4 . 3 : User interface of HAD platform in case study one . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52 Figure 4 . 4 : The sphere representing the end - effector of Falcon is attached to the handle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53 Figure 4 . 5 : The tip of needle is penetrating the skin layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53 Figure 4 . 6 : schematic of slider - crank mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54 Figure 4 . 7 : Three stages of needle insertion process : contact , deform and puncture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55 xii Figure 4 . 8 : Partial plot of resistance force according to Leslie‚Äôs test result [ 28 ] , from skin layer to muscles layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55 Figure 4 . 9 : Hoecken‚Äôs mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57 Figure 4 . 10 : Schematic of slider - crank mechanism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58 Figure 4 . 11 : Virtual fixture at the tip of linkage 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59 Figure 4 . 12 : Hand gesture when we are manipulating the Falcon device in the experiment ( grasp ) ; then end - effector ( grid ball ) represents the tip of the link 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60 Figure 4 . 13 : Four different handle bar configurations , from left to right , the handle bar angles are 15¬∞ , 30¬∞ , 60¬∞ and 75¬∞ respectively . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61 Figure 4 . 14 : traditional force modeling process . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63 Figure 4 . 15 : Conceptual diagram of iterative simulation based on active human interaction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 Figure 4 . 16 : The configure dialogue of the HAD environment . A is the top view of a virtual refrigerator ; B marks the ratio buttons where users can choose different force models ; C marks the spinners where users can define five variables related to force model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66 Figure 4 . 17 Diagram of fridge gasket where Dmin is illustrated . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67 Figure 4 . 18 : Gesture of user when manipulating the end - effector in the simulation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67 Figure 4 . 19 : Top view of the reaction force exerted at the handle . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68 Figure 4 . 20 : The model for magnetic force computation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69 Figure 4 . 21 : Relationship of ‚àÜùê∑ùëù and ‚àÜH . ‚àÜùê∑ùëù and ‚àÜH are displacement of point P and H to their original locations when the door is close . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71 Figure 4 . 22 : Magnetic force when M = 10 . Plot shows the magnetic force profile when ùê∑ùëöùëñùëõ = 0 . 5 , ùê∑ùëöùëñùëõ = 0 . 8 , ùê∑ùëöùëñùëõ = 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72 Figure 4 . 23 : ( a ) diagram of a refrigerator door and gasket , ( b ) spring force model of the gaskets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73 Figure 4 . 24 : Change of volume inside the fridge storage room . The left picture shows the static state when the fridge door is sealed . The right one illustrates the volume change during the opening phase while the magnetic strip still attached to the body . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74 Figure 4 . 25 : Dimension of a refrigerator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75 xiii Figure 4 . 26 : the simulated force profile in the opening phase , in both cases , M = 6N ; ùê∑ùëöùëñùëõ = 1ùëêùëö ( a ) opening force with Ko = 30N / cm ( b ) opening force with Ko = 10N / cm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77 Figure 4 . 27 : the simulated force profile in the closing phase , arrow indicates moving direction , in both cases , M = 6N ; ùê∑ùëöùëñùëõ = 1ùëêùëö ( a ) closing force with Kc = 10N / cm ( b ) closing force with Kc = 30N / cm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77 Figure 4 . 28 : Influence of parameter D to the simulated force in the opening phase . In both cases , M = 8 , ùê∑ùëöùëñùëõ = 1 , Ko = 10 ( a ) force profile under ideal circumstance ( b ) force profile with user - defined D , D = 0 . 5 . . . . . . . . . . . . . . . . . . . 79 Figure 4 . 29 : Experiment 1 data histogram . Ordinate indicates average scores of three force models , scaled from 1 to 5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80 Figure 4 . 30 : The average scores in experiment 2 . The height of the solid fill bar represents the score of opening phase , and the height of the diagonal stripe fill bar represents the score of closing phase . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82 Figure B . 1 : ( a ) Photo of inner structure of Novint . These motors are directly linked to a 14 . 25 mm diameter drum with a 0 . 5 mm diameter cable . The radius of the forearm is 56 . 0mm ; it is coupled with the drum and tensioned by a spring at the end of the leg . ( b ) Sketch of the main arm actuated by the cable system . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93 Figure B . 2 : Photo of DC motor and encoder . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93 Figure C . 1 : Software main interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95 Figure C . 2 Configuration window . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96 Figure C . 3 : Offline gravity estimation ( a ) Estimation dialogue ( b ) Monitor window . . . . . . . . . 96 Figure C . 4 : Grid creation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97 Figure C . 5 Grid vertices ordering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98 Figure D . 1 : schematic of determining if a point lies inside the workspace . Workspace mentioned in the diagram is defined in chapter 2 . . . . . . . . . . . . . . . . . . . . 100 xiv List of Acronyms HAD Haptic aided design RP Rapid Prototyping VR Virtual Reality CAD Computer aided design DoF Degree of freedom AR Augmented Reality MIS Minimal invasive surgery OpenGL Open Graphics Library HDAL Haptic Device Abstraction Layer DMLS Direct metal laser sintering SLS HITL Selective laser sintering Human - in - the - loop xv List of Symbols Symbols in Chapter 2 F ( s ) Laplace transformation , force function in s - domain X ( s ) Laplace transformation , position function in s - domain Z ( s ) Proportionality factor in s - domain from transform of position to transform of force Y ( s ) Proportionality factor in s - domain from transform of force to transform of position { B } Base frame { Ti } Limb frame attached to branch i { H } Haptic frame ( ùúÉ 1ùëñ , ùúÉ 2ùëñ , ùúÉ 3ùëñ ) Joints angles on branch i of parallel mechanism ùúô ùëñ Rotation angle of ith limb frame to Base frame Symbols in Chapter 3 X Position of end - effector F ( X , XÃá ) Force vector at the end - effector with position X and velocity XÃá G ( X ) Apparent gravity at position X M ( X ) K p Mass at position X Proportional gain of the controller K d Derivative gain of the controller ( ùõº , ùõΩ ) Controller parameters ùëõ ùê∫ Sample number of gravity estimation value ùúÄ ùë£ Threshold of controller when end - effector reaches steady state ùúÄ ùê∫ Threshold of controller when gravity approximation ends G L Gravity compensation value of Libralis ‚ñ≥ G Gravity approximation error G 0 New gravity compensation value with point - cloud - based method Symbols in Chapter 4 L1 Length of linkage 1 xvi L2 Length of linkage 2 L3 Length of linkage 3 D0 Damper coefficient before the penetration D1 Damper coefficient after the penetration Œ∏ Angle between link 1 and link 2 ùêπ ùëù Skin puncture force ùëã ùëù Skin puncture distance ùêπ ùëÜ Resistance force at the needle tip ùêæ ùëÜ Spring constant of the skin layer model ‚àÜùëã Penetration distance into the skin ùëâ ùë• Velocity of the needle tip X p Skin puncture distance F4 Reaction force at the slider in its moving direction Fb Reaction force from the ground F1 Resistance force of the penetration mapped to link 1 X4 Distance from the node on the slider to Y axis F ùëê Restriction force at the tip of link 1 ùëò ùëê Spring constant of the restriction force F ùëê PO‚Éó‚Éó‚Éó‚Éó‚Éó Vector from P to its nearest point O on the trajectory Dc Damper coefficient in the restriction force model at link 1 D Maximum offset at the handle when the gasket detaches M Magnetic force when the fridge door is fully sealed ‚Ñé ùëê Distance from magnetic dipole to the fridge door medal Dmin Minimal value of ‚Ñé ùëê Ko Spring constant of elastic force during opening phase Kc Spring constant of elastic force during closing phase ùêπ ùë° Total reaction force ùêπ ùëí Elastic force component of the haptic force model in case study 2 ùêπ ùëö Magnetic force component of the haptic force model in case study 2 C State variable of haptic force model in case study 2 ùêπ ùëñ Inertial force of haptic force model ùêµ ‚ä• Normal component of the magnetic field applied to medal xvii A Area of the medal surface ùúá 0 Permeability of air A ùëÄ The area of the gasket surface ùêπ ùëñ Inertial force of haptic force model ùêµ ‚ä• Normal component of the magnetic field applied to medal ùëÄ ùëù Dipole moment ‚àÜùê∑ ùëù Displacement of dipole in the z direction ‚àÜH Offset of point H at the handle bar ( l , d , h ) Dimension of the storage room , l is length , d is depth and h is height ùêπ ùëíùëî Elastic force from the gasket ùëò ùëî Spring constant of gasket ùêπ ùëíùëé Elastic force from the atmospheric pressure ùëò ùëé Spring constant of elastic force ùêπ ùëíùëé 1 1 . Introduction This chapter briefly introduces the latest application of the haptic device in simulation , medical training and industrial - level software . After reviewing these applications , we propose a new design procedure that integrates haptic rendering with computer - aided design . With this new design concept , the cost of physical prototypes is greatly reduced ; additional benefits will be discussed in later chapters . 1 . 1 . Motivations Modern industrial design is the combination of applied art and applied science to improve the aesthetics , ergonomics , functionality and usability of a product . Different products may have various design processes . However , all of them share some features in common , such as user experience design , sketching , product research , model making and prototype testing . To speed each process and unite them more efficiently , a technology called virtual reality ( VR ) has been developed . A VR system is a tool to extract visual information from a product , which allows designers to create , evaluate and revise the model with ease , establishing a fast communication network among various manufacturing departments . Over the past thirty years , virtualization of the design and manufacturing process has already shown its great value in modern industry design : such as improving the efficiency and the competitive strength of industry [ 32 ] [ 33 ] [ 34 ] . One of the most commonly known VR technologies is the computer - aided design ( CAD ) system . This matured technology has released designers from the heavy work of drafting , which used to be done manually . It not only provides absolute accuracy and protection of the documents but also offers a level of user - friendly interface for designers . However , current CAD software has some limitation in simulating the contact force between humans and products due to the uncertainty of human behavior . For example , without the support from ergonomic group , one can hardly distinguish human reactions to different models of product . To obtain direct user feedback in the early 2 evaluation stage , an ergonomic study is conducted , inviting users to experiment on different sets of prototypes . The prototype used here is called the proof - of - principle prototype . In the traditional method , a large number of physical prototypes are needed to support this dedicated research , but such prototypes are often not yet available due to the lack of manufacturing details . A solution is required to speed the process of user experience evaluation in model verification phase and lower the cost of prototyping in product user research stage . One approach to solve these problems is to implement a technology called rapid prototyping ( RP ) [ 3 ] . Designers convert the CAD model to a standard format such as stereolithography ( STL ) . Then these machines use additive method to build the prototype layer by layer with sliced digital information . This technology has greatly shortened the time of prototype and lower the cost of material used in manufacturing process ; however , RP is still in the developing stage [ 4 ] , and its limitations could be : a ) most materials used in RP are proprietary plastic ; b ) Research on expansion to other materials such as alloys and metals has reached a plateau . Although the price of 3D printers using polymer has dropped substantially over the past few years , machines using direct metal laser sintering ( DMSL ) or selective laser sintering ( SLS ) are still very expensive . They usually cost more than $ 500 , 000 which makes them only affordable to large automobile companies [ 3 ] . On the other hand , these machines using laser sintering technology are also difficult to be maintained or repaired and usually require specific work environment which provides anti - toxicity and dustproof measures . An alternative means for facilitating the ergonomic study is to apply a virtual prototype between the real prototype and modeling stages ( figure 1 . 1 ) . Compared to the physical prototypes , virtual prototypes have fewer product details but greatly aid in saving manufacturing costs and assembly time [ 2 ] . Through an intuitive user interface , engineers can explore specific variable combinations related to human factors with greater flexibility than the traditional method . Engineers can also benefit from the active feedback collected from user studies , which can help them to verify the model during the early design stage while the physical prototype is not yet available . 3 Figure 1 . 1 : Conceptual paradigm of evolution from model to product ; the area represents product details . However , it usually takes long time for common users to accept any undeveloped technologies . Current haptic devices are still in developing stage and have great limitation in features such as maximum output force and workspace size . The maximum force of a haptic device is typically under 20N ( APPX . A ) which can be a problem when we render some high stiffness virtual objects . On the other hand , most haptic devices are not aimed for industrial design . The limited workspace is suitable for medical simulation where the motion of operator is small and only involves wrist and finger movement , but it could be a problem when we conduct haptic simulation in other area like mechanical structure design , which usually requires whole arm motion . In the thesis , we reviewed and compared various haptic devices currently available . For overall consideration , we compared features like the maximum force , workspace and price in chapter two and find Novint Falcon device is ideal for personal use . Inspired by the idea of virtual prototyping , we proposed a new complementary design paradigm called the haptic aided design ( HAD ) , which integrates the force feedback device into a CAD system to simulate the virtual prototypes used in the early stage of product design . This multimodal system with haptic feature offers users active feedback from human interaction and provide alternative to traditional modeling product real prototype virtual prototype model 4 procedure . In the thesis , we developed two preliminary HAD platforms to demonstrate feasibility of proposed design process . 1 . 2 . Literature Review Haptic technology , or haptic , has been identified as both a technology facilitator and a technology provider . As one branch of VR technology , the haptic system has already been applied in various fields such as aerospace , automotive and medical training . It is considered one of the most important components in future VR systems . In this section , we mainly review the current state of several research fields related to needle insertion simulator and haptic aided design . Section 1 . 2 . 1 lists the applications used in medical training and simulation . Section 1 . 2 . 2 describes the latest development of haptic aided design in three different areas . Work related to the medical training environment can be found in chapters 4 , where a preliminary needle insertion training environment was proposed . The haptic aided design concepts are also illustrated in detail in chapter 4 . Two case studies are conducted to support the validation of haptic aided design in different perspectives . 1 . 2 . 1 . Haptic Application in Medical Training and Simulation Medical error has always been a big concern in the public health care industry . According to the official report from the state administration of work safety , in China alone , more than 50 , 000 patients have died each year from medical errors [ 54 ] . The actual number of victims may be larger due to the self - reporting system . According to another report [ 13 ] regarding medical error in the United States , medical accidents in 2008 cost the US government more than 8 billion dollars . These tragedies quickly draw public attention to the current surgeon training platform . The traditional training system for surgeons requires much guided practice on animals or cadavers before surgeons are allowed to operate on living humans . However , practice on animals is not ideal due to the differences in organs temperature , blood pressure and tissue stiffness . Cadaver tests may be more accurate , but each cadaver can be used only once ; the concern for ethical issues is another reason for seeking alternative methods . Moreover , much 5 practice is need for a senior surgeon to maintain his or her skills . For example , in the case of amniocentesis operation which is used for prenatal diagnosis , the lack of practice after training may double the risk of fatal operations , according to the clinical data collected in previous work [ 12 ] . Another report on amniocentesis training [ 14 ] states that in order to maintain good performance during operation , surgeons should perform at least 50 amniocenteses each year , and a clinic unit should perform at least 500 per year . However , for clinics located in under - populated areas , it is not practical or even possible to find so many patients for the purpose of practicing . One solution to the problem stated above is to implement VR technology into medical training . Virtual reality has already shown its value in the medical training system by allowing trainees to manipulate tools , identify organs and feel the various kinds of reaction force between tools and simulated virtual objects . The advantage of virtual medical training is discussed extensively in the paper [ 11 ] . With the help of the proper haptic device and an augmented visual interface , apprentices can practice on a virtual patient without dedicated guidance from an expert and can also access uncommon and critical cases during their field training . Some fully developed applications of medical simulators include needle insertion , laparoscopy , palpation , endoscopy and arthroscopy . Previously developed simulators can be found in these works [ 15 ] ~ [ 20 ] . Magill and Anderson developed a 2D needle insertion simulator used to simulate the epidural needle insertion procedure . The main advantage of this prototype is integration of the physical model with software simulation , adding the palpation feature before epidural procedure . The limitation of this platform is lack of degree of freedom because it allows motion only in a fixed plane . B . Gonenc and H . Gurocak [ 16 ] developed a hybrid system that integrates needle insertion and scissor cutting in a compact interface . In this application , the author proposed a novel hybrid actuator that reduces the size of the simulator . This haptic platform can be used to render very high stiffness tissues such as bones and tendons . 6 Asadian and Kermani [ 18 ] proposed an estimation - based algorithm to build a needle insertion force model with a 5 - DOF manipulator . A 6 - DOF force sensor and a 5 - DOF position sensor are embedded into the needle shaft . This method utilizes multiple Kalman filters to estimate the control parameters online . The numerical iterative approach enables force evolution during the insertion procedure ; information about needle and tissue properties is not required in this model . One successful commercialized needle insertion platform is the Mediseus¬Æ Epidural Simulator ( figure 1 . 2 ) invented by Ross Horley . This platform is actually one of the applications of the SensAble PHANTOM Omni device . The author embeds a PHANTOM Omni device in a box and adapts the 3 - DOF force rendering end effector into a syringe manipulator , which has one translational and two rotary DOFs . Figure 1 . 2 : The Mediceus Epidural simulator [ 1 ] 1 . 2 . 2 . Haptic Aided Design Haptic aided design , as a part of virtual reality aided design , dates back to the early ‚Äô90s . This technology first drew the attention of large automotive companies [ 19 ] [ 38 ] [ 39 ] , who combine virtual realities with a haptic interface to produce a hybrid seating buck for ergonomic experiments . By replacing the less important variables with haptic components , companies can significantly reduce the cost of experiments and the time of assembly and disassembly . Although haptic aided design requires massive investment in software in the early stage , this technology is still widely embraced by the automotive industry for its overall economic value . However , most of these applications are impulsive and lack commonalities . Researchers of product engineering stated that these individual researches focused on specific cases instead of long - term vision [ 9 ] , 7 and most platforms are bulky and not applicable to small companies for more general application . With the emergence of various compact haptic devices in the early 20th century , computer - aided tools have been increasingly integrated with haptic units . SensAble launched its first commercialized 3D mouse tool - kit Freeform ¬Æ system in 2009 [ 1 ] . The Freeform system combines the Phantom series with CAD and computer aided manufacturing ( CAM ) tools , allowing users to explore in a 3D virtual environment and quickly establish complex sculpting models . It has proven helpful in bridging the gap between conventional CAD software and complex 3D sculpting and organic shapes . Designers can quickly trace the contours and add details with the Phantom joystick in 3D sculpting instead of building plots in the NURBS environment with a 2D input device . Another important application of haptic aided design is virtual assembly . The vision of virtual assembly is regarded as an extension of virtual reality aided design , and it was first proposed and studied systematically in the early 1990s . Jayaram [ 17 ] summarized the VR technologies that might be used in virtual assembly , validating this new development by listing the benefits to companies and designers : they shorten the design circle , offer an alternative design method at the early stage , reduce design expenses and so forth . Antonino [ 20 ] presented a detailed virtual assembly and maintenance process in 1999 . In the work , Antonino conducted an experiment to verify the application of virtual assembly . At this preliminary stage , lack of haptic feedback is a major problem , so the author used data gloves with tactile feedback to represent the collisions and ‚Äúclick force‚Äù in the assembly process . Much effort has been directed to integrating this technology with the new haptic devices booming in the early 21st century . Mishra and Suresh [ 18 ] reviewed the computation methods used in thin object simulation , and they proposed a dual representation algorithm to reduce the computation burden while also guaranteeing accuracy of simulation . The force feedback device they used in the case study is Novint Falcon , which is currently the most economic haptic system available . The dual representation algorithm is convenient to be adopted by other system and can be further utilized in beam and shell simulation . Simon Fraser University has also researched HAD integrations on Phantom Omni device . Zhang Jian and Payandeh [ 21 ] from Experimental Robotics Laboratory 8 proposed a novel HAD interface for mechanism design . In their application , users can intuitively change the parameters of a 4 - bar mechanism which is used to facilitate the amniocentesis procedure ; users can identify the best variables combination among various designs without mathematical optimizations . 1 . 3 . Objectives The main objective of the thesis is to illustrate and validate the HAD process on low cost platform Novint Falcon device . One of the main objectives of the research is to enhance the transparency of haptic rendering . In the thesis , we use software based gravity compensation to cancel the gravity effect at the grip ( end - effector ) . We first overview the source code of libralis library and then revise the interpolation algorithm applied to the points outside the cubic grid created by libralis . This new algorithm is termed as point - cloud based interpolation and it requires determining if the new created points lie inside the haptic workspace , so we analyze the configuration of Novint Falcon device and give inverse kinematics to calculate the joints angle with the position at the end - effector . If all joints are working in their range of motion , then the new point is added to the library for further use . As the most important objective of the thesis work , we propose two preliminary HAD interfaces to validate the integration of haptic device with CAD environment . In the first case study , we build a needle insertion interface which is used to simulate the axial force during the needle insertion process . Based on the haptic frame above we develop a multimodal design interface where human operators can manipulate the virtual slider - crank mechanism used for facilitating the needle insertion procedure . Users can intuitively change the parameters of the mechanism structure and find out the best combination through a user study . In the second case study , we simulate the opening and closing force of a refrigerator door . The feedback from users helps designers better understand the system and exclude the less important parameters to human factors in early design stage . This human - in - the - loop ( HITL ) methodology allows users to model haptic force feedback without collecting and analyzing the raw data from real prototypes testing . 9 1 . 4 . Contributions The contributions of the thesis are summarized as follows : Point - cloud - based gravity compensation . Preliminary test was conducted on the gravity compensation software libralis . The experiments show the libralis has poor performance at the boundary of haptic workspace . In order to solve this problem , we proposed a novel point - cloud - based interpolation procedure . Unlike the vertex creation method used in libralis , the vertices generated by new method can almost contain the whole workspace of Novint Falcon device . However , for simplicity and efficiency of the application , we only implement 4 points at each corner to eliminate the worst case scenario of the original libralis tests . Experiment result shows that the new method is sufficient to improve the performance of gravity compensation at the boundary condition . Establish a HAD interface to simulate the slider - crank mechanism with the Novint Falcon device . In this HAD environment , we build a multi - modal design interface where users can interact with virtual prototypes and feel the resistance force during the virtual needle insertion process . Users can intuitively explore the possible combination of mechanism parameters to minimize the overshoot of the needle insertion . We conduct users study to evaluate the effectiveness of the proposed HAD interface . Simulate the opening and closing of a refrigerator door . As another example of a HAD application with the Novint Falcon device , we discussed the feasibility of using haptic device to assist designers developing and verifying the force model during the early stage of design . The HAD scenario is haptic force simulation of opening and closing a refrigerator door . Users can choose various force models and define parameters with the control panel . The interactable force model abstraction allows designers to exclude less important parameters and gradually obtain a realistic force model in an iterative process . It also allows designers to verify their assumptions and obtain better understanding of the force model . 10 1 . 5 . Thesis Organization The thesis is organized as follows : chapter 1 introduces the general motivation and objective of the thesis . Chapter 2 provides an overview of related work to the research . In this chapter we mainly discuss the structure of the Novint Falcon device . We give inverse kinematics of its parallel structure which can be used in the interpolation method proposed in chapter 3 . The objective of chapter 3 is to eliminate the gravity effect to enhance the transparency of haptic interface by using software based compensation method . In this chapter , we analyze the performance of libralis software and propose a new interpolation method to eliminate the free - play effect of the joystick at the workspace boundary . Chapter 4 presents the HAD interface as the main objective of the thesis . In this chapter , we establish two HAD interfaces . The multimodal interface used in case study one is to help users to design mechanical structure in an intuitive way . The second HAD interface focuses on demonstrating how HAD can simplify the model and verify our design at early stage . Chapter 5 concludes the research and discuss the future work . 11 2 . Background Material This chapter aims to present current commercial haptic devices used in industry and research institutions . Section 2 . 1 gives an overview of existing haptic devices . Section 2 . 2 analyzes the structure of parallel mechanism used in design of Novint Falcon . 2 . 1 . Haptic Force Feedback Device Over the past 20 years , the haptic device ( force feedback device ) has drawn great interest from industry and research institutions as a tool to improve VR system . Currently , there are a number of haptic devices for different research purposes and development . This section reviews the criteria for systematizing haptic devices and briefly discusses their current design challenges . One distinct difference among haptic interfaces is whether they are tactile feedback or kinesthetic . A tactile feedback device ( figure 2 . 1 ) stimulates the contact of the skin to create tactile sensations , while a kinesthetic device creates force field to guide or inhibit body movement . The design of a tactile device is usually challenging because the stimulation density needs to be high , which makes the device bulky and less portable . Also most current tactile device uses passive touch , which feels unnatural . Quite different from tactile display , the kinesthetic device offers point - based interactions . Users hold the end - effector and feel the force generated by the actuators ( figure 2 . 2 ) . The main challenge of the design of the kinesthetic device is limited workspace and stiffness . Device with sufficient quality can be very expensive . For example , segma . 7 from Force Dimension costs nearly $ 80 , 000 and the maintenance cost is over $ 3000 per year . Another challenge of the kinesthetic device is its bulky structure and it is usually constrained to flat surface such as a desk . 12 Figure 2 . 1 : Tactile haptic device , illustration of tactile feedback Figure 2 . 2 : Kinesthetic device Phantom Omni from SensAble [ 1 ] Haptic devices for kinesthetic feedback can be categorized as either impedance display or admittance display . The difference of these two displays can be illustrated by equations in s - domain : F ( s ) = Z ( s ) X ( s ) ( 2 . 1 ) X ( s ) = Y ( s ) F ( s ) ( 2 . 2 ) The impedance control reads the position and sends force . Equation 2 . 1 represents the impedance control loop , which can be simplified as ‚Äúposition in , force out‚Äù ; most haptic devices adopt this control frame because it is simpler to design and cheaper 13 to produce than the one with admittance display . Figure 2 . 3b shows the typical haptic device using impedance control . Admittance control measures the force applied by the user and moves the haptic device in proportion to that force . Equation 2 . 2 represents admittance display , which enables high - resolution , steady motion . It is also excellent to create a high - stiffness virtual wall . The haptic master device from Moog FCS ( figure 2 . 3 ( a ) ) is a typical admittance display device . The maximum output force can be up to 250N , which is much more force than necessary in most surgical simulations . Moog applied this device in its commercial dental burr drilling simulation system , where stiff contacts must be correctly simulated [ 10 ] . ( a ) ( b ) Figure 2 . 3 ( a ) Moog FCS Robotic haptic master using admittance display [ 63 ] ( b ) Omega - 3 from Force Dimension using impedance display [ 62 ] The mechanical structures used in kinesthetic haptic devices can be divided into serial , parallel and hybrid mechanisms . The serial mechanism includes a single serial chain which connects end - effector to the base . It usually has a larger workspace , but the inertia of the manipulator is high because some of the actuators are located on moving joints . On the other hand , the parallel mechanism consists at least two kinematic chains which connect a moving platform to a fixed platform . It offers higher stiffness and dynamic performances due to its closed structure . The disadvantages of 14 the parallel mechanism include a smaller workspace , complex forward kinematic equation and a lower dexterity due to multiplicity of singularities inside its workspace . ( a ) ( b ) Figure 2 . 4 : ( a ) Serial structure haptic device Phantom premium from SensAble [ 1 ] ( b ) Parallel structure haptic device Delta . 6 from Force Dimension [ 62 ] In order to combine the advantages of both mechanical features , researchers developed the hybrid system , which integrates the parallel structure with the serial mechanism to obtain a larger workspace and higher stiffness . Simon Fraser University has devoted great effort to building a hybrid haptic device . Figure 2 . 5 illustrates a hybrid system [ 53 ] from Experimental Robotics Laboratory , Simon Fraser University . This device consists of a spherical parallel mechanism and a serial mechanism ( figure 2 . 5b ) ; these form the 6 - DoF motion and force feedback in a large workspace . 15 ( a ) ( b ) Figure 2 . 5 : ( a ) Prototype of serial / parallel 6DoF haptic device [ 53 ] ; ( b ) kinematic model of hybrid serial / parallel haptic device . 2 . 2 . Analysis of the Novint Falcon Structure In this section , we mainly discuss the kinematics of Novint Falcon device . Most works in this section are used to determine if a point lies inside the haptic workspace , which is the key procedure to the interpolation method proposed in chapter 3 . First we need to find out the mapping from haptic coordinate system to base coordinate system . In order to find this transformation , we use forward kinematics to calculate the position of end - effector in base frame when it stays at original point of haptic workspace ( this can be achieved by applying a virtual fixture at the original point ) . From the result , we get the transformation matrix from haptic frame to base coordinates frame . Given a point in haptic workspace , we can determine if it is reachable by the end - effector with three steps : ( 1 ) transform the position vector obtained from application to the base frame ; ( 2 ) transform the position vector to each reference frames attached to the limbs ; ( 3 ) use inverse kinematics to calculate joints angles of each limb . If all joints work in their range , then the point is reachable by the haptic device . 16 2 . 2 . 1 . Kinematic Configuration and Geometric Parameters The haptic device used in this thesis is the Novint Falcon ; it is based on the Delta - 3 robot configuration proposed by Thai [ 7 ] , where the end - effector has 3 translational DOFs . It is quite similar to the delta robot introduced by Clavel in 1987 [ 44 ] [ 45 ] , but Novint Falcon replaced the spherical joints with single DOF rotary joints to reduce the manufacturing cost of the robot . Figure 2 . 6 : Prototype and CAD model generated by the author of Novint Falcon [ 6 ] The Novint Falcon is actuated by three Mabuchi RS - 555PH - 15280 actuators that are monitored by a coaxial 4 - state encoder with 320 lines per revolution ( Appx . B ) . The torque is transmitted with a tensioned cable whose torque transmission ratio is as high as 7 . 62 : 1 [ 47 ] . The use of a cable instead of a gear system allows for very low friction and a low maintenance cost . The moving platform is linked to the base by three identical parallel limbs ( figure 2 . 7 ) . Each limb consists of a forearm and an upper arm . The forearm is a single link , illustrated in figure 2 . 7 . The upper arm consists of a planar 4 - bar parallelogram . The axes of rotation of each parallelogram are parallel to each other , and the lengths of its opposite links are equal to each other . In the thesis , view from front of Novint Falcon , we label three limbs as limb 1 , 2 , 3 ( the top most is limb 1 followed by limb 2 and 3 in clockwise ) . 17 Figure 2 . 7 : Front - view sketch of the parallel structure of the Delta - 3 robot proposed by Thai [ 7 ] Novint Falcon was created mainly for the gaming industry ; the Novint Company has provided very little information about modeling and control parameters for research purposes . In Ouellet and Hillier‚Äôs work [ 47 ] [ 48 ] , they gave some geometric features of Novint Falcon device , such as the dimensions of the links ( table 2 . 1 ) and inertial and actuation properties . The internal hardware list is also released in their work . 2 . 2 . 2 . Inverse Kinematics Inverse kinematics studies the mapping from Cartesian coordinates of the end effector to the set of joint angles at the actuators . Given the position of the moving platform , which is point P at the center of the end - effector , we calculate the possible solution of joint angles for each leg ( ùúÉ 1ùëñ ùúÉ 2ùëñ ùúÉ 3ùëñ ùëìùëúùëü ùëñ ùë°‚Ñé ùëèùëüùëéùëõùëê‚Ñé ) . In order to clarify the coordinate transformation matrices in this section , first we need to introduce the coordinate systems used in the transformation : 18 ( 1 ) Haptic frame , { H } . Point P is located at the center of end - effector . The position of point P obtained from application is in this frame . { H } originates at the point defined by Novint application ( figure 2 . 8 ) , but the exact location of the origin of { H } in the global frame is unknown and needs to be estimated . Figure 2 . 8 : CAD model generated by NX ( Unigraphics ) software . ( 2 ) Base frame , { B } . { B } is attached to the base at point O , which is the center of the fixed platform ( figure 2 . 8 ) . The U and V axes lie in the plane defined by three axes of actuated joints ( figure 2 . 9 ) . 19 Figure 2 . 9 : Diagram of base frame and reference frames attached to the actuated joints . ( 3 ) Limb reference frames ( figure 2 . 9 ) , { Ti } . { Ti } is the reference frame attached to the fixed platform at the point Ai for branch i , where Ai is located at the actuated joints . The Ui - axis is perpendicular to the axis of actuated joint at Ai , and at an angle ùúô ùëñ from the U - axis of frame { B } . The Vi - axis is along the axis of actuated joint . 20 Figure 2 . 10 : Geometric diagram of one branch of the device : point P locates at the center of end effector , and O is the original point of base frame located at the center of the fixed platform . Table 2 . 1 Geometric properties for links of Novint Falcon . Labels correspond to Figure 2 . 9 Dimension a b c d e f g r s Value ( mm ) 60 102 . 5 15 . 7 11 . 5 11 . 5 26 . 2 27 . 9 36 . 3 27 . 2 Given the position of point P in haptic frame ( XYZ ) , assuming the origin of { H } is ( ùë• 0 , ùë¶ 0 , ùëß 0 ) in the base frame , we can calculate the transformation of point P in the base frame { B } ( UVW ) : [ ùëù ùë¢ ùëù ùë£ ùëù ùë§ ] = [ ùëù ùë• ùëù ùë¶ ùëù ùëß ] + [ ùë• 0 ùë¶ 0 ùëß 0 ] Note there is an offset S at the base and an offset f at the moving platform in Vi direction , which makes the equations slightly different from the Delta - 3 robot in 21 Stamper‚Äôs thesis [ 8 ] . Thus the transformation of point P in the ( U ùëñ V ùëñ W ùëñ ) coordinates attached to point A ùëñ for leg i is as follows : [ ùëù ùë¢ùëñ ùëù ùë£ùëñ ùëù ùë§ùëñ ] = [ cos ( ùúô ùëñ ) sin ( ùúô ùëñ ) 0 ‚àísin ( ùúô ùëñ ) cos ( ùúô ùëñ ) 0 0 0 1 ] [ ùëù ùë¢ ùëù ùë£ ùëù ùë§ ] + [ ‚àíùëüùë†0 ] ( 2 . 3 ) Calculating with linkage parameters , expressions for ùëù ùë¢ùëñ , ùëù ùë£ùëñ ùëéùëõùëë ùëù ùë§ùëñ are given as follows : ùëù ùë¢ùëñ = a cos ( ùúÉ 1ùëñ ) ‚àí ùëê + [ ùëë + ùëí + ùëè ùë†ùëñùëõ ( ùúÉ 3ùëñ ) ] cos ( ùúÉ 2ùëñ ) , ( 2 . 4 ) ùëù ùë£ùëñ = ùëè ùëêùëúùë† ( ùúÉ 3ùëñ ) + ùëì , ( 2 . 5 ) ùëù ùë§ùëñ = a sin ( ùúÉ 1ùëñ ) + [ ùëë + ùëí + ùëè ùë†ùëñùëõ ( ùúÉ 3ùëñ ) ] sin ( ùúÉ 2ùëñ ) , ( 2 . 6 ) Two solutions are found in equation ( 2 . 5 ) for ùúÉ 3ùëñ : ùúÉ 3ùëñ = ¬±arccos ( ùëù ùë£ùëñ ‚àíùëì ùëè ) ( 2 . 7 ) For Novint Falcon , only a positive solution is considered , thus ùúÉ 3ùëñ = arccos ( ùëù ùë£ùëñ ‚àíùëì ùëè ) ( 2 . 8 ) With ùúÉ 3ùëñ known , the square of equation ( 2 . 4 ) and ( 2 . 6 ) can be summed to eliminate ùúÉ 2ùëñ through the Pythagorean relationship : ( ùëù ùë¢ùëñ + c ) 2 + ùëù ùë§ùëñ2 + ùëé 2 ‚àí 2ùëé ( ùëù ùë¢ùëñ + ùëê ) cos ( ùúÉ 1ùëñ ) ‚àí 2ùëéùëù ùë§ùëñ sin ( ùúÉ 1ùëñ ) = ( ùëë + ùëí ) 2 + 2 ( ùëë + ùëí ) ùëèùë†ùëñùëõ ( ùúÉ 3ùëñ ) + ùëè 2 sin 2 ( ùúÉ 3ùëñ ) ( 2 . 9 ) To transform equation ( 2 . 9 ) into a polynomial expression , a half - angle tangent is defined as follows : ùë° 1ùëñ = tan ( ùúÉ 1ùëñ 2 ) , ( 2 . 10 ) To produce the following relationship : 22 sin ( ùúÉ 1ùëñ ) = 2ùë° 1ùëñ 1 + ùë° 1ùëñ2 and cos ( ùúÉ 1ùëñ ) = 1‚àíùë° 1ùëñ2 1 + ùë° 1ùëñ2 ( 2 . 11 ) Substituting equation ( 2 . 11 ) into equation ( 2 . 9 ) , and simplifying the equation to produce the following : ùëô 2ùëñ ùë° 1ùëñ2 + ùëô 1ùëñ ùë° 1ùëñ + ùëô 0ùëñ = 0 , ( 2 . 12 ) Where : ùëô 0ùëñ = ùëù ùë§ùëñ2 + ùëù ùë¢ùëñ2 + 2ùëêùëù ùë¢ùëñ ‚àí 2ùëéùëù ùë¢ùëñ + ùëé 2 + ùëê 2 ‚àí ùëë 2 ‚àí e 2 ‚àí ùëè 2 sin ( ùúÉ 3ùëñ ) 2 ‚àí 2ùëèùëë ùë†ùëñùëõ ( ùúÉ 3ùëñ ) ‚àí 2ùëèùëí ùë†ùëñùëõ ( ùúÉ 3ùëñ ) ‚àí 2ùëëùëí ‚àí 2ùëéùëê , ( 2 . 13 ) ùëô 1ùëñ = ‚àí4ùëéùëù ùë§ùëñ , ( 2 . 14 ) ùëô 2ùëñ = ùëù ùë§ùëñ2 + ùëù ùë¢ùëñ2 + 2ùëêùëù ùë¢ùëñ + 2ùëéùëù ùë¢ùëñ + ùëé 2 + ùëê 2 ‚àí ùëë 2 ‚àí e 2 ‚àí ùëè 2 sin ( ùúÉ 3ùëñ ) 2 ‚àí 2ùëèùëë ùë†ùëñùëõ ( ùúÉ 3ùëñ ) ‚àí 2ùëèùëí ùë†ùëñùëõ ( ùúÉ 3ùëñ ) ‚àí 2ùëëùëí + 2ùëéùëê , ( 2 . 15 ) From equation 2 . 12 , we get two possible solutions for ùë° 1ùëñ : ùë° 1ùëñ = ‚àíùëô 1ùëñ ¬±‚àöùëô 1ùëñ2 ‚àí4ùëô 0ùëñ ùëô 2ùëñ 2ùëô 2ùëñ ( 2 . 16 ) For Novint Falcon , only one solution is possible due to the range of ùúÉ 1ùëñ : ùë° 1ùëñ = ‚àíùëô 1ùëñ ‚àí‚àöùëô 1ùëñ2 ‚àí4ùëô 0ùëñ ùëô 2ùëñ 2ùëô 2ùëñ ( 2 . 17 ) Then we get ùúÉ 1ùëñ = 2arctan ( ùë° 1ùëñ ) ( 2 . 18 ) With ùúÉ 1ùëñ and ùúÉ 3ùëñ known , ùúÉ 2ùëñ can be simply determined by equation ( 2 . 4 ) ùúÉ 2ùëñ = arccos ( ùëù ùë¢ùëñ ‚àíacos ( ùúÉ 1ùëñ ) + ùëê ùëë + ùëí + ùëèùë†ùëñùëõ ( ùúÉ 3ùëñ ) ) ( 2 . 19 ) 23 2 . 2 . 3 . Forward Kinematics Forward kinematics is used to calculate the end effector‚Äôs position given the actuators‚Äô angle values . Unlike with the serial mechanism , analyzing forward kinematics of the parallel structure is usually more difficult than inverse kinematics problems due to the multiple possible solutions found in large polynomial equations . The kinematic analysis of the Delta - 3 robot has already been studied extensively in Stamper‚Äôs work [ 8 ] . Stamper used Sylvester‚Äôs Dialytic Elimination procedure [ 46 ] to eliminate unknowns from large systems of equations . The method yields 32 solutions to the polynomials with only 16 of them kinematically reachable without joint limits . Ouellet [ 48 ] used the numerical method to calculate a set of simultaneous equations produced by series of intersecting spheres , and this approximation method simplifies Novint Falcon to a special case of Delta - 3 robot , where the linkage parameters are d = e = 0 . 24 3 . Gravity Compensation In this chapter , we use estimation - based gravity compensation method to cancel the gravity effect on the Novint Falcon device . In section 3 . 1 , we discuss the merits and drawbacks of three different gravity compensation methods and the reason we use estimation - based approach . In section 3 . 2 , we introduce the basic control model and recursion rules used in libralis and discuss its limitation on Novint Falcon device . In section 3 . 3 , we proposed a novel interpolation method called point - cloud - based interpolation . In section 3 . 4 , we conducted experiments using various grids ; then we integrate point cloud interpolation method with libralis to enhance the boundary performance of the software . 3 . 1 . Problem Description The resultant force perceived by user during haptic interaction is determined by the force from actuators and gravity force from mechanical structure . The gravity force of parallel mechanism changes non - uniformly in the task space . In simulation , the fidelity refers to the degree to which a model reproduces the real state of the physical object . If we don‚Äôt cancel the gravity in our application , this nonlinear factor will possibly cause loss of transparency of haptic interface and eventually affect the fidelity of haptic rendering . Unfortunately , due to the complexity of parallel mechanisms , achieving a stable compensation is usually a difficult task , especially when we are conducting experiments on Novint Falcon , whose original point in the haptic workspace is obscure in the world coordinates system . A lot of effort has been done in the literature [ 40 ] , [ 41 ] , [ 42 ] , [ 43 ] to cancel the gravity effect . The techniques in these works can be presented in three categories : ( 1 ) A method that calculates the kinematics and dynamics of the robotic device and gives model - based gravity compensation directly . ( 2 ) A method that uses a force sensor at the end effector to cancel the gravity force online . ( 3 ) An 25 estimation - based approach , which measures the gravity value on pre - set points and use interpolation method to approximate the gravity force in the task space . ( a ) ( b ) Figure 3 . 1 : Gravity compensation . ( a ) Resultant force perceived by users before gravity compensation ; ( b ) resultant force after gravity compensation . The first method gives precise gravity compensation , but it has several drawbacks : One must disassemble the device and measure each part if the manufacturer doesn‚Äôt provide detailed product information . In addition , it is difficult for users to update the compensation value each time the end effector or orientation of the robot is changed . Moreover , Novint Falcon doesn‚Äôt have a calibration pinhole , as does the Phantom or Omega series ; we can only estimate the mapping from its joint - space to the world coordinates system , making it more difficult for users to apply the model - based gravity calculation . The second method uses a force sensor at the end effector , and it is restricted to admittance control rendering which is not suitable for the impedance - based haptic device . The final approach uses estimation - based methodology to calculate the gravity force along the workspace . The key idea of this method is to estimate the gravity value at each vertex and interpolate the gravity value within a cubic element formed by 8 vertices . This method has several advantages : ( 1 ) independent of kinematics and gives an estimated relationship between gravity force and position in the task space ; ( 2 ) suitable for device displaced with any orientation ; ( 3 ) straight - forward and easier for users to apply costumed end - effector . With these reasons , we decided to adopt the third method to cancel the gravity effect of Novint Falcon . In the thesis , we give gravity compensation using the libralis SDK which is widely used in 3 - DOFs haptic devices . 26 However , the cubic grid created by libralis cannot contain the entire workspace of Novint Falcon and the performance at the workspace boundary falls quickly due to the simplified interpolation method . More details about the limitation of libralis are given in section 3 . 2 . In order to solve these problems , a point - cloud - based interpolation scheme is proposed here to obtain more precise gravity compensation with the Novint Falcon device . In the following section , we will first explain the basic model and algorithm used in the libralis library . 3 . 2 . Background Material of Libralis 3 . 2 . 1 . Summary Libralis is cross - platform , open source software used to cancel the gravity effect [ 50 ] . The current version is compatible with all existing 3DOFs haptic devices . It implements an estimation - based algorithm to linearize the nonlinear relationship between the apparent gravity and the position of the end effector in the task space . 3 . 2 . 2 . Model and Control Algorithm If we don‚Äôt cancel the gravity force , the nonlinear dynamic model can be expressed as follows : F ( X , XÃá ) = M ( X ) ùëãÃà + G ( X ) ( 3 . 1 ) Where X is in the end effector position , note that M ( X ) ‚àà ‚Ñù 3√ó3 , X , F ( X Ôºå ùëãÃá ) and G ( X ) ‚àà ‚Ñù 3 . We use the PD controller here to estimate the apparent gravity force at position X . Assuming that the apparent gravity force is exactly known , the force from actuators can be written as follows : F ( X , XÃá ) = K p ( X i ‚àí X ) ‚àí K d XÃá + G ( X ) ( 3 . 2 ) where ùêæ ùëù and ùêæ ùëë are proportional and derivative gain matrices . Combining equation 3 . 1 and 3 . 2 yields the nonlinear dynamic system : 27 M ( X ) ùëãÃà = K p ( X i ‚àí X ) ‚àí K d XÃá ( 3 . 3 ) An approach [ 52 ] called feedback linearization can cancel the nonlinear factor in equation 3 . 3 by choosing suitable values for K p and K d : K p = ùõΩ M ( X ) ; K d = ùõºM ( X ) ( 3 . 4 ) Substituting K p and K d in equation 3 . 3 and canceling the nonlinear parameter M ( X ) , we obtain a linear system : ùëãÃà = ùõΩ ( X i ‚àí X ) ‚àí ùõºXÃá ( 3 . 5 ) The controller parameters ùõº and ùõΩ are chosen according to the raise time ùëá ùë† and the overshoot ùëùÃÇ . Given the parameter set ‚å©ùëá ùë† , ùëùÃÇ‚å™ , we can obtain the value of ùõΩ , as seen in figure 3 . 2 . Then we can select ùõº using the curves in figure 3 . 3 using the previously chosen ùõΩ and ùëùÃÇ Figure 3 . 2 : The choice of parameter . The curves represent the relationship of T s and Œ≤ , parameterized with several value of overshoot pÃÇ [ 51 ] 28 Figure 3 . 3 : The choice of parameter Œ± . The curves represent the relationship of Œ± and Œ≤ , parameterized with several value of overshoot pÃÇ [ 51 ] As we can see from figure 3 . 2 and figure 3 . 3 , the parameters Œ± and Œ≤ determine the stability of PD controller and how fast it reaches a steady state . In this section , we assume the nonlinear terms G ( X ) , M ( X ) are known . Actually , these terms need to be determined by the recursion process described in the offline auto - calibration section . 3 . 2 . 3 . Offline Auto - calibration After the control parameters Œ± and Œ≤ are selected , we need create the grid which is used for gravity estimation in the offline auto - calibration phase . The libralis software allows us to define the grid dimensions and the length of each cubic unit . Figure 3 . 4 shows an example of the grid with 27 vertices . 29 Figure 3 . 4 : Grid with 27 interpolation points Contrary to the assumption we made above , the terms G ( X ) and M ( X ) are unknown here and are replaced with their estimates GÃÇ ( X ) and MÃÇ ( X ) . We update the value of GÃÇ ( X ) and MÃÇ ( X ) during the iterative procedure . The entire estimation process is illustrated by the flow diagram in figure 3 . 5 . Figure 3 . 5 : Flow diagram of the offline auto - calibration [ 51 ] 30 First , we need to define the initial condition of the first vertex ùëã 0 . ùê∫ÃÇ 0 ( ùëã 0 ) = [ 0 , 0 , 0 ] ùëá , ùëÄÃÇ 0 ( ùëã 0 ) = ùêæ ùëë ( 0 , 0 ) = ùêæ ùëù ( 0 , 0 ) = [ ‚àÖ ] 3√ó3 Using the PD controller we introduced in section 3 . 2 . 2 , we apply an initialization loop to move the end effector from the start point ùëã ùë† ( randomly chosen by user ) to the first grid vertex ùëã 0 . At the ùëò ùë°‚Ñé iteration of the initialization loop , the force applied to the end - effector is computed as follows : ùêπ ùëò ( ùëã , ùëã Ãá ) = ùêæ ùëù ( 0 , ùëò ) ( ùëã 0 ‚àí ùëã ) ‚àí ùêæ ùëë ( 0 , ùëò ) ùëã Ãá With increment of ùõø which is defined by users , we gradually increase the apparent mass : ùëÄÃÇ ùëò ( ùëã 0 ) = ùëÄÃÇ ùëò‚àí1 ( ùëã 0 ) + ùõøùêº With equation ( 3 . 4 ) , we update the value of ùêæ ùëù and ùêæ ùëë at the ùëò ùë°‚Ñé iteration : ùêæ ùëù ( 0 , ùëò ) = ùõΩùëÄÃÇ ùëò ( ùëã 0 ) ùêæ ùëë ( 0 , ùëò ) = ùõºùëÄÃÇ ùëò ( ùëã 0 ) We stop the initialization loop and replace it with the following recursion rules when | ùëã 0 ‚àí ùëã | ‚â§ ùúÜ | ùëã 0 ‚àí ùëã ùë† | , where ùúÜ is a user - defined parameter used to control the initialization loop end . { ùêπ ùëó ( ùëã , ùëãÃá ) = ùêæ ùëù ( ùëñ , ùëó ) ( ùëã ùëñ ‚àí ùëã ) ‚àí ùêæ ùëë ( ùëñ , ùëó ) ùëãÃá + ùê∫ÃÇ ùëó ( ùëã ùëñ ) ùê∫ÃÇ ùëó + 1 ( ùëã ùëñ ) = ùêæ ùëù ( ùëñ , ùëó ) ( ùëã ùëñ ‚àí ùëã ) + ùê∫ÃÇ ùëó ( ùëã ùëñ ) ùêæ ùëù ( ùëñ , ùëó + 1 ) = ùõΩùëÄÃÇ ùëó ( ùëã ùëñ ) ùêæ ùëë ( ùëñ , ùëó + 1 ) = ùõºùëÄÃÇ ùëó ( ùëã ùëñ ) ùëÄÃÇ ùëó ( ùëã ùëñ ) = ‚Äñùê∫ÃÇ ùëó ( ùëã ùëñ ) ‚Äñ ùëî ùêº where i , j means the ùëó ùë°‚Ñé iteration at vertex ùëã ùëñ . The stop condition is satisfied for vertex i when : 31 ‚Äñùê∫ÃÇ ùëó ( ùëã ùëñ ) ‚àí ùê∫ÃÖ ùëõùê∫ ‚Äñ ‚â§ ùúÄ ùê∫ In above relationship , ùê∫ÃÖ ùëõùê∫ is the average value over ùëõ ùê∫ samples . The iteration will stop when ùëõ ùê∫ consecutive samples fall in a sphere of radius ùúÄ ùê∫ . Note that ùëõ ùê∫ and ùúÄ ùê∫ are user - defined parameters . When the iteration at vertex i completes , we move to the next vertex , which is i + 1 , and a new initialization loop starts . 3 . 2 . 4 . Online Gravity Compensation Libralis uses trilinear interpolation within a cubic grid to compute the compensation term at point P . If point P lies inside the grid , we need to find the cube that contains point P and use the following equation to calculate the gravity online : Let ( ùë• ùëù , ùë¶ ùëù , ùëß ùëù ) be the coordinates of point P , which is inside the grid , and ( ùë• ùëò , ùë¶ ùëò , ùëß ùëò ) be the vertex of the active cube having minimum coordinates ( figure 3 . 6 ) which is located at the back - bottom - left corner of the cube ( figure 3 . 5 ) . The interpolation coefficients are computed as follows : { ùëè = 1 ùëô ùëê ( ùë• ùëù ‚àí ùë• ùëò ) ùëé = 1 ùëô ùëê ( ùëô ùëê ‚àí ùëè ) ùëë = 1 ùëô ùëê ( ùë¶ ùëù ‚àí ùë¶ ùëò ) ùëê = 1 ùëô ùëê ( ùëô ùëê ‚àí ùëë ) ùëì = 1 ùëô ùëê ( ùëß ùëù ‚àí ùëß ùëò ) ùëí = 1 ùëô ùëê ( ùëô ùëê ‚àí ùëì ) Figure 3 . 6 : The cube which contains the current point P . 32 The gravity terms estimated at each vertex of an active cube can be represented by G 0 ~ G 7 ‚àà ‚Ñù 3 , and then the compensation term at point P is computed as follows : G ( P ) = [ ùëí ùëê ùëé G 0 + ùëí ùëê ùëè G 1 + ùëí ùëë ùëé G 2 + ùëí ùëë ùëè G 3 + ùëì ùëê ùëé G 4 + ùëì ùëê ùëè G 5 + ùëì ùëë ùëé G 6 + ùëì ùëë ùëè G 7 ] If point P lies outside the grid , it is mapped onto the nearest point ùëÉÃÇ ( ùë•ÃÉ ùëù , ùë¶ÃÉ ùëù , ùëßÃÉ ùëù ) on the grid boundary ( figure 3 . 7 ) . We assume that point Q ( ùëû ùë• , ùëû ùë¶ , ùëû ùëß ) is the center of the grid and ùëô ùë• , ùëô ùë¶ , ùëô ùëß be the side length of the grid along axes x , y and z . Then the coordinates are computed as follows : { ùë•ÃÉ ùëù = ùëû ùë• + ùë†ùëñùëîùëõ ( ùë• ùëù ‚àí ùëû ùë• ) ùëô ùë• 2 ùë¶ÃÉ ùëù = ùëû ùë¶ + ùë†ùëñùëîùëõ ( ùë¶ ùëù ‚àí ùëû ùë¶ ) ùëô ùë¶ 2 ùëßÃÉ ùëù = ùëû ùëß + ùë†ùëñùëîùëõ ( ùëß ùëù ‚àí ùëû ùëß ) ùëô ùëß 2 Figure 3 . 7 : Figure illustrates the mapping on the grid boundary if the point P lies outside the grid 33 3 . 3 . Point - cloud - based Gravity Estimation 3 . 3 . 1 . Limitation of Libralis We noted in previous sections that the grid created by libralis doesn‚Äôt contain the entire workspace of the Novint falcon device . Actually , according to the workspace analysis done by Hiller [ 47 ] , the estimated volume of Novint Falcon‚Äô workspace is 7 . 9 √ó 10 ‚àí5 ùëö 3 , therefore the maximum cubic grid created by libralis ( 40X40X40 ùëöùëö 3 ) only takes up about 80 % of the total reachable workspace . We witnessed unstableness of the system when we increase the maximum cubic grid defined by libralis . This can be explained by fact that the performance of haptic device deteriorates quickly when the end - effector is near the workspace boundary ; The PD controllers used for moving the end - effector and estimating the gravity values may be affected by such deterioration . Moreover , if some of the vertices exceed the workspace boundary , offline auto - calibration usually ends up in an infinite loop . The nature of a parallel mechanism workspace determines that the normal grid creation method has limitation in improving the performance of gravity compensation . We need a more flexible vertex creation method that can contain as much workspace as possible . In the thesis we propose a novel interpolation method called point - cloud - based gravity compensation . In the following sections , the process of vertex creation and the scheme of the interpolation will be discussed in details . 3 . 3 . 2 . Creating Point Cloud The new method to create the vertices is quite different from the grid creation process in libralis . We start from the original point of the workspace and create new vertices in six directions ( x , - x , y , - y , z , - z ) in Cartesian coordinate system with distance P . After we have created the vertices , we check whether they are already recorded in the points file and whether the new vertices are within the reachable workspace . The schematic in Appx . D shows how to determine if the current point lies inside the workspace . If the vertex exceeds the workspace boundary , we replace it with a new vertex using length ŒªP , where Œª is a user - defined parameter ( 0 . 5 < Œª < 1 ) , and P is the original distance ( figure 3 . 8 ) . 34 Figure 3 . 8 : vertices creation process viewed from 2D ; if new vertex exceeds the workspace boundary , it will be replaced with one with ŒªP distance to the previous vertex . The vertices used for searching for the new vertices in the next loop are marked with a circle . If the vertex is still outside the workspace , we multiply the current distance by Œª and check the boundary condition again . This procedure is repeated until the new vertex falls within the workspace . No more extensions will be applied to the points that were created by the distance ùúÜ ùëõ ùëÉ ( n > 0 ) because these points are too close to workspace boundary . We assume these points plot the approximate boundary of the haptic workspace . The total number of vertices in the point cloud is determined by ùúÜ and P , where smaller ùúÜ and P yields more vertices . The detailed scheme of the point cloud creation can be illustrated in the following flow diagram ( figure 3 . 9 ) . Note that in order to make the points distribution more uniform along the workspace , we rank the new points according to when they are recorded and follow the ‚Äúfirst come , first serve basis‚Äù . The interpolation points can also be added manually , if there are special requirements . 35 Figure 3 . 9 : Conceptual diagram of point cloud creation ; point marked with flag = 1 is used to search for new vertices in the next loop . 36 3 . 3 . 3 . Interpolation Scheme A tri - linear interpolation is applied within a tetrahedron ( figure 3 . 10 ) . First we calculate the distance between the current point and each vertex in the point cloud and record the four nearest points . If these points are not in the same plane , we create a tetrahedron , used to calculate the gravity force at the end effector . Figure 3 . 10 : Trilinear interpolation within a tetrahedron 3 . 3 . 4 . Interpolation Algorithm Assume the gravity changes uniformly inside the current tetrahedron . Therefore , the gravity can be represented by the following equation : G = ùê¥ùëã + ùêµùëå + ùê∂ùëç + ùê∑ ( 3 . 6 ) Let ùê∫ 0 , ùê∫ 1 , ùê∫ 2 , ùê∫ 3 be the apparent gravity of the four points nearest to the current end effector . Thus , the relationship can be written in the matrix form : [ ùëã 0 ùëå 0 ùëã 1 ùëå 1 ùëç 0 1 ùëç 1 1 ùëã 2 ùëå 2 ùëã 3 ùëå 3 ùëç 2 1 ùëç 3 1 ] [ ùê¥ùêµùê∂ùê∑ ] = [ ùê∫ 0 ùê∫ 1 ùê∫ 2 ùê∫ 3 ] By inverting the matrix , the system of equations can be solved for A , B , C and D : [ ùê¥ùêµ ùê∂ ùê∑ ] = [ ùëã 0 ùëå 0 ùëã 1 ùëå 1 ùëç 0 1 ùëç 1 1 ùëã 2 ùëå 2 ùëã 3 ùëå 3 ùëç 2 1 ùëç 3 1 ] ‚àíùüè [ ùê∫ 0 ùê∫ 1 ùê∫ 2 ùê∫ 3 ] 37 Note that the four points cannot be coplanar , if they are , the inversion is not applicable . With A , B , C , D known , then the gravity force at end effector can be approximated with equation ( 3 . 6 ) . 3 . 3 . 5 . Integration of Point - cloud - based Interpolation with Libralis Point cloud interpolation has many advantages over the one used in libralis as we discussed in previous sections : ( 1 ) It shows higher precision at the boundary because it contains more workspace volume than libralis does ; ( 2 ) It is more flexible because users can manually add points if they want to enhance the precision at a desired area . However , this interpolation algorithm and the searching scheme consume more CPU time than libralis does . Table 3 . 1 compares the math operations used in each interpolation . Table 3 . 1 Math operation counts in each interpolation method Operation + / ‚àí √ó / √∑ Libralis method 13 30 Point cloud method 106 264 Considering the real - time gravity compensation is usually integrated with other haptic rendering codes , the online interpolation algorithm must be as fast as possible to avoid competing for CPU time with main haptic frame and graphic frame . In order to combine the merits from both algorithms , an integrated scheme is proposed and various experiments are conducted in section 3 . 4 to determine the parameters of grid . We decide to integrate the new interpolation method with libralis for the following reasons : ( 1 ) From the discussion above , the online interpolation algorithm used in libralis is faster than the method we proposed in section 3 . 3 . 4 ; the experiment in section 3 . 4 suggests libralis has satisfactory performance when the end - effector lies inside the grid created by libralis . 38 ( 2 ) The performance of gravity compensation using libralis deteriorates quickly when the end - effector moves out of the grid . The experiment in section 3 . 4 . 2 shows the performance of libralis on three kinds of points lying outside of the grid . The result suggests we must re - interpolate on some of these points to eliminate the worst case scenario of the libralis gravity compensation on Novint Falcon device . 3 . 4 . Preliminary Experiments on Libralis Software In this section , we are going to integrate the proposed interpolation method with libralis SDK . In section 3 . 4 . 1 , we investigate the influence of the vertices number to the performance of the gravity compensation . Section 3 . 4 . 2 integrates the point - cloud - based interpolation algorithm with libralis to enhance the boundary performance of gravity compensation . 3 . 4 . 1 . Performance Evaluation of Gravity Compensation using Libralis We conducted performance evaluations in this section to see how the density of vertices influences the precision of gravity compensation with libralis . We apply a force field on the end effector , which is rendered as a virtual fixture plane providing constraint force in Y direction ( figure 3 . 11 ) . The force is computed using an elastic model with stiffness k = 0 . 2N / mm . When the system achieves its stable state , the virtual penetration value ‚àÜY into the virtual fixture plane will be recorded . Ideally , ‚àÜY should be 0 if the gravity compensation equals to apparent gravity force . Here we use ‚àÜY to evaluate the performance of gravity compensation . 39 Figure 3 . 11 : A user - defined virtual fixture plane that provides constraint force in Y direction . Two sets of grid were created in our experiment : group 1 with 27 vertices ( figure 3 . 12a ) and group 2 with 125 vertices ( figure 3 . 12b ) . Note that we increased only the density of vertices , not the grid size , in group 2 . Both tests were run with same grid size , which is 40ùëöùëö ‚àó 40ùëöùëö ‚àó 40ùëöùëö . Grid with fewer vertices ( such as grid with 8 vertices ) is not chosen here for the consideration of the high non - linearity of the gravity force within a parallel mechanism . ( a ) ( b ) Figure 3 . 12 : Grids used in experiment ( a ) group one using grid with 27 vertices ; ( b ) group two using grid with 125 vertices . 40 The rest of parameters were set as follows : Œ± = 40 , Œ≤ = 800 , Œª = 0 . 5 , ùëõ ùë£ = 30 , ùúÄ ùë£ = 1 ùëöùëö ùë† , ùëõ ùê∫ = 20 , ùúÄ ùê∫ = 0 . 05 . We set a virtual fixture plane at Y = 0 . At each experiment , we evaluate 10 random points inside the grid and 10 random points outside the grid . The experiment results are shown in tables 3 . 2b . Table 3 . 2a : Offline auto - calibration time in experiments Group _ 1 Group _ 2 Offline estimation time ( s ) 312 1720 Table 3 . 2b : Errors of gravity approximation over test points inside the grid Gravity error ( N ) 1 2 3 4 5 6 7 8 9 10 Group _ 1 - 0 . 152 - 0 . 17 0 . 038 - 0 . 092 - 0 . 184 - 0 . 312 - 0 . 264 - 0 . 116 - 0 . 034 0 . 138 Group _ 2 - 0 . 252 - 0 . 054 - 0 . 21 - 0 . 094 - 0 . 194 - 0 . 268 - 0 . 18 - 0 . 222 0 . 196 - 0 . 124 Figure 3 . 13 : Mean absolute error of gravity approximation over 10 sample points inside the grid . Group 1 has 27 vertices and group 2 has 125 vertices . 41 Comparing the results of groups 1 and 2 and plotting the average mean errors of gravity compensation in figure 3 . 13 , we can see that there is no obvious enhancement in accuracy of gravity compensation if we increase the vertices number from 27 to 125 . The density of the vertices has little influence on the performance of gravity compensation . However , from table 3 . 2a , the offline estimation time used in group 2 is five times longer than the one used in group one . In order to save on offline estimation time , we opt to use 27 vertices in our experiment set . 3 . 4 . 2 . Integration of Point Cloud Method with libralis Test results of section 3 . 4 . 1 shows that the gravity compensation has few errors when the points are inside the grid . However , when the end effector moves out of the grid , the performance of gravity compensation deteriorates quickly . This is due to the mapping scheme applied in libralis when the points are outside the grid . In order to find an efficient way to enhance the performance of these points , a new scheme is proposed to integrate the libralis with the point cloud interpolation . In this method , different algorithms are applied according to the current position of the end - effector . For example , we still use 27 vertices created by libralis to interpolate the gravity compensation when the end effector is inside the grid . More evaluations must be conducted on the points outside the grid before we decide which of these points need to be interpolated with the new method . The grid we used in gravity compensation is a 40mm √ó 40mm √ó 40mm cube , centered at the origin point of haptic workspace . The vertex with the maximum coordinates value is ( 20 , 20 , 20 ) and the vertex with the minimum value is ( - 20 , - 20 , - 20 ) . The points outside the grid can be further separated into three categories : ( 1 ) type 1 has one coordinate exceeding the grid boundary ( e . g . , [ 10 , 30 , 10 ] ) ; ( 2 ) type 2 has two coordinates outside of the grid ( e . g . , [ 30 , - 30 , 10 ] ) ; type 3 has all three coordinates outside of the grid ( e . g . , [ 30 , 25 , 30 ] ) . We set the virtual fixture plane at Y = 30 with stiffness of k = 0 . 2N / mm and take 10 random points from each group to evaluate the performance of libralis on three types of points . The control parameters used here are Œ± = 40 , Œ≤ = 800 , Œª = 0 . 5 , ùëõ ùë£ = 30 , ùúÄ ùë£ = 1 ùëöùëö ùë† , ùëõ ùê∫ = 20 , ùúÄ ùê∫ = 0 . 05ùëÅ . 42 ( a ) Type 1 point ( b ) Type 2 point ( c ) Type 3 point Figure 3 . 14 : Illustration of three types of points outside the grid The results are plotted in one graph ( see figure 3 . 15 ) . Type 1 and type 2 points still have a satisfactory performance and their mean absolute errors of gravity approximation are under 0 . 25N . If the gravity compensation error is larger than the static friction of the mechanism , the end - effector will fail to stay static without support from external force ; we term this condition as free - play in this thesis and this is the worst case scenario which should be eliminated in the application . No free - play was observed when we released the virtual fixture plane on type 1 or type 2 points . The result shows that the gravity error over type 3 points is much higher than the ones of the type 1 and type 2 groups . We also observed free - play effect in the experiment of the type 3 points when we released the virtual fixture plane . Table 3 . 3 Errors of gravity compensation over three types of test points ( unit / N ) Sample 1 2 3 4 5 6 7 8 9 10 Type _ 1 - 0 . 22 0 . 124 - 0 . 174 - 0 . 232 - 0 . 098 - 0 . 142 - 0 . 148 - 0 . 05 - 0 . 3 0 . 22 Type _ 2 - 0 . 074 - 0 . 096 0 . 1 - 0 . 34 - 0 . 216 - 0 . 298 0 . 2 - 0 . 538 - 0 . 3 0 . 072 Type _ 3 - 0 . 232 - 0 . 46 - 0 . 44 - 0 . 426 0 . 584 - 0 . 98 0 . 258 - 0 . 456 - 0 . 282 - 0 . 62 43 Figure 3 . 15 : Mean absolute error of gravity approximation and related standard deviation , over three types of points outside the grid If we recall the mapping scheme of libralis when the end - effector lies outside of the grid , the cause of the large mean absolute errors in type - 3 points can be identified : libralis maps the point to its closest cubic side ( see discussion in section 3 . 2 . 4 ) , so the type 1 point is actually interpolated in the face of the cubic grid and has four control vertices ; the type 2 point is interpolated on the edge of the grid and has two control vertices ; the type 3 point is always mapped to the closest vertex at the corner of the grid , which means no interpolation is actually conducted on type 3 points , and their value is identical to the weight on the nearest vertex . According to the experiment result and analysis above , type 3 points can be classified as the worst - case scenario , and they need to be re - interpolated with the new algorithm . In our experiment , we define four vertices to interpolate the apparent gravity when the end - effector moves to coordinate ( x > 20 , y > 20 , z > 20 ) : one vertex at the corner X1 ( 20 , 20 , 20 ) ; three random points located on plane Y = 32 : X2 ( 29 . 44 , 32 , 23 . 45 ) , X3 ( 27 . 08 , 32 , 23 . 99 ) , X4 ( 33 . 03 , 32 , 21 . 66 ) . The gravity approximation errors are measured by applying virtual fixture planes with a stiffness of k = 1 . 2N / mm . The result is shown in table 3 . 5 . Noted that X1 is the vertex created by libralis , the apparent gravity at this point is measured directly in the offline auto - calibration phase ; thus we assume the gravity compensation error at this point is 0 . 44 Table 3 . 4 Gravity error at each point measured by the virtual fixture ( unit / N ) Œîùê∫ 1 Œîùê∫ 2 Œîùê∫ 3 Œîùê∫ 4 Error 0 - 0 . 516 - 0 . 528 - 0 . 276 We use gravity approximation error ‚ñ≥ G as the weight value at each vertex , in accordance with the interpolation algorithm in section 3 . 3 . 4 : [ ùê¥ùêµùê∂ùê∑ ] = [ ùëã 0 ùëå 0 ùëã 1 ùëå 1 ùëç 0 1 ùëç 1 1 ùëã 2 ùëå 2 ùëã 3 ùëå 3 ùëç 2 1 ùëç 3 1 ] ‚àíùüè [ Œîùê∫ 1 Œîùê∫ 2 Œîùê∫ 3 Œîùê∫ 4 ] = [ ùê¥ùêµùê∂ùê∑ ] = [ 20 20 29 . 44 32 20 1 23 . 45 1 27 . 08 32 33 . 03 32 23 . 99 1 21 . 66 1 ] ‚àíùüè [ 0 ‚àí0 . 516 ‚àí0 . 528 ‚àí0 . 276 ] = [ ‚àí0 . 047 0 . 060 ‚àí0 . 229 4 . 324 ] This yields the equation of gravity approximation error at the point P ( x > 20 , y > 20 , z > 20 ) : ‚ñ≥ G = ‚àí0 . 047x + 0 . 06y ‚àí 0 . 229z + 4 . 324 We define G 0 as the new gravity compensation value and G L as the approximation value given by libralis . Then the new gravity compensation value can be calculated as follows : G 0 = G L ‚àí‚ñ≥ G After the new interpolation method was applied to the type 3 points , we re - evaluated the performance of gravity compensation at the coordinates ( x > 20 , y > 20 , z > 20 ) . Following the same experiment setup , we record the gravity approximation errors at 10 random points ( table 3 . 5 ) . From figure 3 . 16 , we observed significant decreasing in standard deviation and the mean absolute error after we updated the new compensation value G 0 . Also during the experiment , no more free - play of the end - effector was observed when we released the virtual fixture . Table 3 . 5 : Compensation error of type 3 points after we updated the compensation value ( Unit / N ) Error 1 2 3 4 5 6 7 8 9 10 ‚ñ≥ G - 0 . 22 - 0 . 36 - 0 . 108 - 0 . 34 - 0 . 05 0 . 11 - 0 . 28 - 0 . 118 0 . 1032 - 0 . 238 45 Figure 3 . 16 : Mean absolute error of gravity compensation over the type 3 points . Test group 1 uses the original libralis method ; test group 2 uses the hybrid method which integrates the new interpolation algorithm with libralis . 3 . 5 . Summery In this chapter , the gravity compensation software ( libralis ) was investigated with regard to its performance on the Novint Falcon platform . As we can see from the results in table 3 . 3 , the points inside the grid have better performance than the ones outside the grid . Furthermore , performance deteriorates quickly if a point falls into the type _ 3 category . In order to enhance precision at the boundary and prevent free - play of the end effector , we proposed a new algorithm called point cloud interpolation . In section 3 . 3 , an automatic vertex creation scheme was presented . With this method , users can automatically create point cloud that contains the whole workspace . Users can also create points manually , and this procedure is adopted in the experiments in section 3 . 4 . 2 . The point cloud method has higher precision than libralis but is not as efficient . Section 3 . 4 . 2 can be considered a simple application of integrating the point cloud method to libralis . We manually create the points at the selected area and preprocess the parameters used in interpolation . The code maintains its efficiency while the performance of type 3 points increases . 46 4 . Haptic Aided Design This chapter investigates the feasibility of the proposed haptic aided design ( HAD ) process . In section 4 . 1 , we describe the motivation of chapter 4 . In section 4 . 2 , we give an overview of the HAD interface , including the layout and advantages of the HAD system . In section 4 . 3 and section 4 . 4 , two preliminary HAD interfaces are developed to validate the proposed HAD process . Section 4 . 5 is the summary of the entire chapter . 4 . 1 . Problem Descriptions Before the emergence of computer aided design ( CAD ) software , the design procedure was painful and costly . In the past , designers had to manually draw the drafts , and usually the quality was questionable due to the nature of manually drawing on paper . Sometimes a single mistake could ruin several months‚Äô worth of paperwork . Moreover , the prototype‚Äôs cost in manual design could be extremely high and was considered a major burden to medium or small corporations . The success in the application of CAD software has greatly aided in development of virtual reality aided design . Engineers nowadays can easily create , modify and optimize their 3D model in a virtual environment ( VE ) . Those convenient features can greatly influence the precision of final drafts and the productivity of the entire design process . With proper add - ons , sometimes we can even use CAD software to simulate the contact force between various virtual objects . For example , NX system from Siemens [ 26 ] offers a solution of multi - body dynamics and kinematics analysis of rigid body mechanism ; as yet such applications are limited to simple cases where the models of different objects can be explicitly defined . Over the last few decades , the term ‚Äúhuman factors ( ergonomics ) ‚Äù has become an important aspect of product engineering . Human factors investigate the interaction among users and other elements of the system for the purpose of improving user 47 experience and overall performance of the product [ 56 ] . However , such interaction can hardly be defined in virtual environment with current CAD software . In traditional product design procedure , a user experience evaluation is required as a complementary process for analyzing the human factor ; during this stage , various physical prototypes are needed to evaluate the user interaction . However , it could be both expensive and time - consuming to build these physical prototypes . Especially when testing on complex products that have multiple parts , the time spent on assembly and disassembly of the prototype could be a big issue . Moreover , these physical prototypes are not available until the product is ready for manufacturing . Consequently , the lag of user experience evaluation could affect the productivity of modern industrial design . Due to the challenges stated above , we adopt a new design process which integrates the haptic force feedback device with CAD system . In the thesis , we term this design process as ‚ÄúHaptic Aided Design ( HAD ) ‚Äù . With the aid of haptic device , users can interact with virtual prototype and modify the design parameters intuitively . More discussion of the advantage of the HAD system can be found in section 4 . 2 . In section 4 . 3 and section 4 . 4 we give two application of HAD to verify the feasibility of integrating haptic device with CAD interface . 4 . 2 . Overview of the HAD Procedure The HAD procedure can be considered as the integration of the haptic unit with the CAD environment . As a possible trend of VR system , this new technology brings many alternatives to CAD / CAM system design . For example , with the latest haptic rendering devices and collision detection algorithm , users can explore 3D environment and manipulate virtual objects directly , which is much more convenient than using traditional 2D input method . Figure 4 . 1 shows difference between the HAD and the traditional CAD procedure . We noted that HAD offers an interactive interface which allows users to manipulate the virtual prototypes through a haptic feedback device . This feature could possibly reduce the work during the real prototype evaluation ; and it allows designers to access the user experience evaluation at early design stage . Questions may arise with regard to the 48 feasibility and usability of virtual prototype in user experience evaluation . Indeed , the virtual prototype shows less product details than the real one . But with higher - precision haptic device and better simulation software , we can gradually reduce the proportion of physical prototypes used in future user experience evaluation . ( a ) ( b ) Figure 4 . 1 : Schemes represent two kinds of design process . ( a ) Traditional CAD process of industrial design , ( b ) Design process integrated with the HAD environment . The main advantages of the HAD interface are summarized as follows : ( 1 ) HAD can simplify the design work by implementing the design process in an intuitive way . It is welcomed by users who have no related background in modeling . Furthermore , this human - in - the - loop feature has prospective application in consumer - oriented design , where consumers can custom their own product with the aid of interactive VR system ; meanwhile , their perceptions of the product will be delivered to designers directly . Figure 4 . 2 shows a conceptual diagram of application in consumer - oriented design . If this is applicable , the HAD technology will significantly change the pattern of digital - shopping in future , where consumers can not only choose their favored 49 color or size , but also get a sensation of product such as the texture or weight information . Figure 4 . 2 : The architecture of HAD interface in consumer - oriented design ( 2 ) We create virtual prototypes as a supplement to the physical prototypes in user experience evaluation . Compared with the physical prototypes , testing with virtual prototypes is more efficient considering no assembly and disassembly are involved . As we already mentioned earlier in this section , this alternative prototyping method could save the time and cost of making real prototypes . ( 3 ) Designers can access the virtual prototypes in early design stage where real prototypes are not yet available . This feature could aid in establishing an effective iterative design process . Iterative design is a design methodology based on a cyclic process of prototyping , testing , analyzing , and refining a product [ 57 ] . Designers can recognize the flaws early and implement the change in an efficient and low - cost way . ( 4 ) Similar to CAD technologies , the HAD interface allows rapid communication of product information : the virtual prototype can be stored in digital form , which allows users to edit with ease ; these prototypes can be sent elsewhere quickly , which helps to speed communication between various industrial departments . 50 In the following sections , we will propose two applications which integrate the haptic device with the CAD environment , and some of these advantages will be validated in these case studies . 4 . 3 . Case Study One : Design of Injection - Aided Mechanism 4 . 3 . 1 . Motivation Needle insertion is one of the most common procedures in medical treatment . It is found in various medical processes for different purposes . For example , in a bone marrow exam , surgeons use a long needle to puncture the bone and extract bone marrow samples for a biopsy test . And in an amniocentesis procedure , physicians need to penetrate through the abdominal wall , uterus wall and amnion sac to obtain amniotic fluid . Some of these procedures are very dangerous and require that trainees undergo much practice before operating on a real human body . To provide a more flexible and economical training system , researchers have developed various virtual platforms for all of these training procedures [ 23 ] 24 ] [ 25 ] . Such platforms are rendered with one or multiple nonlinear boundaries representing the soft tissues , using either finite element method ( FEM ) or mesh - spring models . The elastic force , friction force and cutting force during the insertion can all be tuned using specific parameters , and the precision of the training system can be improved as data is collected from physical models . Inspired by these virtual training platforms , we decide to build a multi - modal interface with which users can design the mechanism used for facilitating the needle insertion procedure and test it in a virtual training environment . This interface consists of two parts : 1 ) A virtual needle insertion platform which can render reaction force of various layer of tissues . In the thesis , the realism of tissue is not the major concern and we use one - dimensional force model to render the resistance force when penetrating layer of skin tissue . This platform can be used to evaluate the performance of subcutaneous injection . Subcutaneous injection is required to insert the needle tip into the skin but above the muscle layer for slower absorption of medicine such as insulin and morphine . 51 The performance of such injection procedure is judged by the overshoot into the skin surface . 2 ) A mechanical design interface . In the thesis , a slider - crank mechanism is proposed to help the operator exercise better control during the needle insertion process . Through a dialogue box , users can change the configuration of the mechanism with ease . They can also manipulate the mechanism via the end effector of Novint Falcon to feel the resistance force from the needle tip . An informal user study was conducted to identify the best design via an intuitive method . We group the mechanism parameters and invite participants to test different parameter sets . During each trial , users are asked to stop as soon as they feel that the penetration completes , and the overshoot distance of the deformable surface is measured as criteria to judge the performance of the current mechanism configuration . 4 . 3 . 2 . Overview of HAD Interface Figure 4 . 3 shows the interface of our HAD platform . The needle insertion procedure is facilitated by using a slider - crank mechanism . A syringe is attached to the slider , and link 1 is attached to link 2 . The end - effector of Novint Falcon is represented by a small sphere in the virtual environment . On the left side of the figure 4 . 3 , we can see a virtual wall that represents the skin surface . 52 Figure . 4 . 3 : User interface of HAD platform in case study one When the small sphere gets close enough to the tip of link 1 ( see figure 4 . 4 ) , constraint force is applied which limits the movement of end - effector in a trajectory defined by the tip of link 1 . After that , the handle will follow the movement of the end - effector and users can manipulate the mechanism in the virtual environment . If the tip of the needle start to penetrate the skin layer represented by the virtual wall on the left ( figure 4 . 5 ) , users can feel the reaction force of tissue which is mapped from needle tip to the handle . For simplicity , we use one - dimensional force model to simulate the resistance force when we penetrate the skin . Considering that the needle strictly follows a linear path , this model is sufficient to simulate the axial - only force received by the needle tip . 53 Figure 4 . 4 : The sphere representing the end - effector of Falcon is attached to the handle . Figure 4 . 5 : The tip of needle is penetrating the skin layer . Figure 4 . 6 shows a schematic of slider - crank mechanism used in the HAD interface . Designers can adjust important linkage parameters to obtain a desired force profile that yields the best user performance . In our HAD environment , user performance is measured by the amount of overshoot into the skin surface ( figure 4 . 7 ) . L1 is the length of link 1 ; L2 is the length of link 2 ; L3 is the length of link 3 ; and Œ∏ is the angle between links 1 and 2 . D0 and D1 represent the damper coefficients of the virtual wall . D0 is the damper coefficient before the penetration , and D1 is the value after the 54 penetration . The combination of these two values can produce different reaction force on the virtual skin layer . The parameters ( L1 , L2 , L3 , D0 , D1 ) can be defined through the user interface shown on the right side of the main interface in figure 4 . 3 . Figure 4 . 6 : schematic of slider - crank mechanism 4 . 3 . 3 . Soft Tissue Modeling In this project , we use the one - dimensional needle insertion data collected by Leslie [ 28 ] . The skin puncture procedure is separated into three phases : ( 1 ) For p F x F ÔÄº ) ( , Skin pre - puncture : 3 2 ) ( 0025 . 0 ) ( 0046 . 0 ) ( 0116 . 0 0235 . 0 ) ( s s s X X X X X X x F ÔÄ≠ ÔÄ´ ÔÄ≠ ÔÄ≠ ÔÄ≠ ÔÄ´ ÔÄΩ ( 2 ) Skin puncture force : N F p 0372 . 6 ÔÄΩ ( 3 ) Skin post - puncture force : 2 ) ( 5287 . 0 ) ( 4516 . 0 0372 . 6 ) ( p p X X X X x F ÔÄ≠ ÔÄ≠ ÔÄ≠ ÔÄ´ ÔÄΩ 55 X is the current needle position , s X is the skin surface position , and p X is the puncture position . This procedure of needle insertion is illustrated in figure 4 . 7 . Figure 4 . 7 : Three stages of needle insertion process : contact , deform and puncture Figure 4 . 8 : Partial plot of resistance force according to Leslie‚Äôs test result [ 28 ] , from skin layer to muscles layer . From figure 4 . 8 , we note that the reaction force at the needle tip increases during penetration . During the deformable stage , the force model can be described as a spring - damper model . The reaction force ùêπ ùëÜ at this stage can be represented as follows : ùêπ ùëÜ = ùêæ ùëÜ ‚àô ‚àÜùëã ‚àí D 0 ‚ãÖ ùëâ ùë• , 56 where ùêæ ùëÜ is the spring constant at skin layer and ‚àÜùëã is the penetration depth into the skin tissue ; D 0 is the damper coefficient before the penetration and ùëâ ùë• is the velocity vector in direction of penetration . In the thesis , we set D 0 = 0 . This model can be described as : ùêπ ùëÜ = ùêæ ùëÜ ‚àô ‚àÜùëã Ks in above equation can be determined by the puncture force ùêπ ùëù and the puncture limit ùêπ ùëù : ùêæ ùë† = ùêπ ùëù ùëã ùëù = 0 . 431 ùëÅ / ùëöùëö When the force exceeds the puncture limit X p , there is a major drop in resistance force . Then the spring force is replaced by a viscosity component , which is dependent on tissue constant and penetration speed . Then the force model is represented as follows : ùêπ ùë† = ‚àíùê∑ 1 ‚ãÖ ùëâ ùë• , where ùê∑ 1 is the damping coefficient after the penetration and V is the velocity of the needle tip . The damper coefficient ùê∑ 1 is dependent on the needle gauge and tip - type [ 28 ] . Giving an accurate ùê∑ 1 is beyond the scope of the thesis . In this case study , we intuitively tuned the ùê∑ 1 value to guarantee that users do not feel obvious force transient after we removed the spring force . The resistance force is then mapped to the handle on the link one , where users can feel the resistance force by manipulating the end - effector of Novint Falcon . 4 . 3 . 4 . Mechanical Design and Simulation In the thesis , the mechanism used to aid in the needle insertion procedure should provide a linear path at some point where the needle can be attached . Although we can generate a linear path with some other 4 - bar mechanism , the end effector also rotates when it moves in an approximately linear path . For example , in Hoecken‚Äôs mechanism 57 ( figure 4 . 9 ) , if the needle is attached to the red bar , it will follow a linear path , but it also rotates‚Äîwhich is not the motion desired in this application . If we let the needle rotate freely on its path , the guidance force is needed to adjust its angle , which will increase the complexity of the mechanical design . Figure 4 . 9 : Hoecken‚Äôs mechanism The slider - crank mechanism , which transforms rotary motion into linear motion ( figure 4 . 10 ) , can easily achieve this goal . This straightforward mechanism guarantees that the needle tip will always move in a linear path , which is ideal for this HAD evaluation platform . 58 Figure 4 . 10 : Schematic of slider - crank mechanism By changing the parameters set ( L1 , L2 , L3 ) , we obtain various ratios of force at the needle to the force mapped to tip of link 1 . The force exerted on the end effector will be separated into two parts : ( 1 ) the reaction force mapped from the side of needle during penetration ; ( 2 ) the restriction force from the virtual fixture , which gives users a feeling that end - effector is restricted by a revolute joint ; more details about this constraint force are discussed in the following section . Note that the two forces are always perpendicular to each other . From figure 4 . 10 , we can calculate the force mapped from the needle tip . Fb is the reaction force from the base ; F4 is the resistance force on the needle tip during the penetration ; F1 is the force mapped to the handle of link 1 and the direction of F1 is on the tangent of a circular path . The scalar of F1 can be calculated as follows : 1 / ) 4 * 4 4 * ( 1 L H F X Fb F ÔÄ≠ ÔÄΩ In above equation , L1 is the length of link 1 , and H4 is the pre - set height from the slider to the upper base . X4 is the distance from the node on the slider to the Y axis , and this value will be calculated according to the current status of the mechanical structure . 59 4 . 3 . 5 . Virtual Fixture The virtual fixture is a programmable force field used to guide or prevent the user‚Äôs movement . In this case study , the movement at the end effector is restricted by link 1 , which has one - dimensional rotary movement . The constraint force preventing deviation from the circular path will be applied when the end - effector is attached to the tip of link 1 . We assume point P represents the end effector and point O is the nearest point on the circular path , then we obtain a vector PO‚Éó‚Éó‚Éó‚Éó‚Éó , which represents the current direction of the constraint force . This constraint force is computed as follows : F ùëê = ùëò ùëê ‚ãÖ PO‚Éó‚Éó‚Éó‚Éó‚Éó ‚àí ùê∑ùëê ‚ãÖ ùë£ where F ùëê is the constraint force and ùëò ùëê is the spring constant . We add a damper with coefficient Dc in the above equation to absorb system energy , thus yielding a more stable constraint force . Note that v is the velocity vector indicating the change of distance from P to the current nearest point O on the path ; v has the same direction as PO‚Éó‚Éó‚Éó‚Éó‚Éó‚Éó . Figure 4 . 11 : Virtual fixture at the tip of linkage 1 4 . 3 . 6 . Experiment Design and User Study The program is compiled using VS 2005 . Graphic models are built in OpenGL using the GLUT library , the interface is built using the GLUI library and the haptic frame is built using HDAL API , provided by the Novint Company . P O O P 60 Four participants ( two males and two females ) from Simon Fraser University are invited to this user study . All participants are right - handed . None of them has past experience with the haptic device . Before the trial , the subjects are allowed to familiarize themselves with the Novint Falcon device through several demo applications . Then they are asked to maneuver the end effector of the Novint Falcon device to conduct the needle insertion process ( see figure 4 . 12 ) . For each trial , participants are required to perform three experiments in a row , and their overshoot d is recorded for further analysis . Figure 4 . 12 : Hand gesture when we are manipulating the Falcon device in the experiment ( grasp ) ; then end - effector ( grid ball ) represents the tip of the link 1 . To find the optimum parameters set of the mechanism structure , we use overshoot d ( see figure 4 . 7 ) as the control parameter to evaluate the overall performance of the needle insertion facilitation device . The stop position is recorded when the velocity of the needle tip drops to the pre - set threshold . We grouped some parameter sets in table 4 . 1 to research which group has the best performance in assisting with needle insertion procedure . The parameter Œ∏ is angle of handle bar to the link2 . It can influence the gesture of the needle insertion . In this user study , four kinds of mechanism ( see figure 4 . 13 ) with different handle angles are tested for the comfortableness and overall performance . The general principle of grouping these 61 parameters is to increase the ratio of motion ( v1 / v4 ) gradually from top to bottom in the form . Table 4 . 1 Group of parameters Parameters L1 , L2 , L3 ( mm ) Angle Œ∏ ( degree ) Values 150 , 80 , 200 15 , 30 , 60 , 75 150 , 80 , 180 150 , 100 , 180 180 , 100 , 180 Figure 4 . 13 : Four different handle bar configurations , from left to right , the handle bar angles are 15 ¬∞ , 30 ¬∞ , 60 ¬∞ and 75 ¬∞ respectively . The test result is shown in table 4 . 2 . Each value is averaged over 10 repetitions . Note that the puncture distance Xp in this force model is approximately 13 mm ; any value less than Xp is considered as system error and should be excluded from data groups . The best combinations are marked with bold font in table 4 . 2 , and the worst combination is labeled with ‚Äústar‚Äù where the parameters are set with ( 150 , 100 , 180 , 15Àö ) . Upon closer examination of the data distribution , under the 60Àö column , users can achieve better performance with any linkage parameters . 62 Table 4 . 2 : Overshoot value during needle insertion of 16 samples ( mm ) Linkage parameters 15 ¬∞ 30 ¬∞ 60 ¬∞ 75 ¬∞ 150 , 80 , 200 28 20 22 24 150 , 80 , 180 30 18 17 15 150 , 100 , 180 35 ‚àó 30 15 20 180 , 100 , 180 32 25 16 18 4 . 3 . 7 . Discussion In the first case study , we propose a HAD interface used to design the mechanism for facilitating the needle insertion process . Users can change the parameters ( ùê∂ 0 , ùê∂ 1 , ùêæ ) to obtain the desired tissue property . On the other hand , the slider - crank mechanism can be configured with different handle - bar angles and linkage parameters . In our user studies , we group up these parameters to find the best combination . The performance of the needle insertion is judged by the maximum penetration distance d under the tissue layer . Result shows that with parameter Œ∏ = 60 ¬∞ , users can better maneuver the mechanism and have better performance of needle insertion process than with other angle configuration . From the experiment , we can see that HAD interface can help users to distinguish good and bad designs related to human factors . 63 4 . 4 . Case Study Two : Simulation of Virtual Refrigerator Door In the second case study , we simulate the opening and closing of a refrigerator door with the Novint Falcon device . This section primarily studies and demonstrates the feasibility of the HAD environment in aiding with force modeling during the early stage of design . A methodology named human - in - the - loop simulation is adopted to develop and evaluate the force modeling . 4 . 4 . 1 . Motivation In the first case study , we build a virtual skin tissue model based on the MTS puncture data collected by Leslie [ 28 ] . We recall that the friction force used in the post - puncture stage is based on an estimated coefficient value ( section 4 . 3 . 3 ) , which is not derived from any experimental result . Developing a conclusive friction force model with traditional discrete modeling process is usually challenging : it either needs a finite - element method or specific experiments to extract friction component [ 23 ] . The traditional force modeling process is exhibited in figure 4 . 14 . Figure 4 . 14 : traditional force modeling process 64 The above modeling process is not economical or efficient on low - fidelity simulator design . For example , in gaming industry , the haptic simulation focuses on perspective for entertainment instead of research purpose ; the short product lifecycle and high market demand call for a fast and effective solution for establishing simplified haptic models to represent various complex systems . A methodology named human - in - the - loop ( HITL ) simulation is adopted to facilitate the development of haptic simulation . HITL simulation , or termed as iterative simulation , always take human in the system design loop . The advantage of HITL is discussed extensively in literature [ 59 ] : ( 1 ) HITL is suitable for solving complex system with multiple dependencies , where designers can develop an iterative way to simplify the software abstraction . ( 2 ) Featured with active human interactions , HITL encourages users to identify the flaw of the design and offers them a level of access to the system variables . With active feedback from users , HITL methodology greatly aids in the system design when human factor is an important consideration . HITL is most commonly implemented in software engineering and product engineering . In the literature [ 60 ] , software engineers use Graph - Based Interface Language ( GRBIL ) tool to build a constructive simulation platform . This platform automatically records the activity of the users and compiles the behavior into operator models which can be used for human behavior prediction . In the work [ 61 ] , author proposed a novel decision - making process which helps users to plan the vehicle - route in time - critical situations . The process integrated with interactive - model shows higher flexibility than the automated solution . Inspired by the HITL systems stated above , we adopt a new haptic simulation process which uses iterative method to obtain desired force model . The process is illustrated in figure 4 . 15 . Compared with traditional simulation design loop , this new procedure requires no data collection and analysis ; it enables system cognition during the design loop which means designers get better understanding of the models involved after each user evaluation . 65 Figure 4 . 15 : Conceptual diagram of iterative simulation based on active human interaction In the following section , a haptic simulation platform is proposed to describe how HAD system facilitate the force modeling process and system cognition in the early stage of design . 4 . 4 . 2 . Overview of HAD Interface Figure 4 . 16 shows the main interface of our HAD platform . The white cubic object in the middle represents a virtual refrigerator viewed from the top . 66 Figure 4 . 16 : The configure dialogue of the HAD environment . A is the top view of a virtual refrigerator ; B marks the ratio buttons where users can choose different force models ; C marks the spinners where users can define five variables related to force model . The configure dialogue of the user interface lies on the left side of screen . The spinners at the bottom left ( figure 4 . 16c ) are used to configure the five variables used in the simulation . The variable D is the maximum displacement of the gasket in the opening phase with the seal still attached to the main body , and the unit for D is centimeters ; more details about this variable will be discussed in section 4 . 4 . 3 . M is the maximum magnetic force when the gasket is attached to the door and its unit is N . D ùëöùëñùëõ is the distance from metal on the main body to magnetic strip when the fridge door is fully sealed , and its unit is centimeters ( see figure 4 . 17 ) . Ko and Kc represent the spring constant of elastic component of the reaction force during the opening and closing phases separately , the unit for Ko and Kc is N / cm . Three radio buttons ( figure 4 . 16b ) on the top left allow operators to select the force models applied in the user study . Details of the three models are discussed in section 4 . 4 . 3 . 67 Figure 4 . 17 Diagram of fridge gasket where Dmin is illustrated . In the experiment , Users hold the end - effector of Novint Falcon and move in the direction of z axis of haptic workspace . Users feel the force feedback which represents the reaction force during the opening and closing phases . Figure 4 . 18 : Gesture of user when manipulating the end - effector in the simulation . 4 . 4 . 3 . Haptic Model of Reaction Force during Opening and Closing a Refrigerator Door In this section , we will analyse the force model used in the simulation . After each force component analysis , we give a description to the user - defined variables related to the force model . 68 We noted that the opening force is usually stronger than the closing force of the refrigerator door . The cause of such effect has not been fully investigated . In the literature [ 27 ] , a research group from Pohang University of Science and Technology proposed a force model in their refrigerator door simulator . The model used in this 1 - Dof haptic simulation system is the combination of a magnetic force and an elastic force along with a state variable which is used to define the current state of the fridge door . The total force feedback can be represented as follows : When Œ∏ is small ( Œ∏ < 10 ‚àò ) , the total reaction force exerted at the handle can be approximated to a force vector ùêπ ùë° in the z direction ( figure 4 . 19 ) . For simplicity of haptic rendering , we use ùêπ ùë° to model the reaction force in task space instead of joint space . Figure 4 . 19 : Top view of the reaction force exerted at the handle As we stated above , ùêπ ùë° is the function of z , which consists of elastic force , magnetic force and inertial force . The friction force caused by hinge is not considered in the proposed force model . We use the same state variable described in the literature [ 27 ] to define the force transition in haptic simulation , then ùêπ ùë° is represented as follows : ùêπ ùë° = ( 1 ‚àí ùê∂ ) ùêπ ùëí + ùê∂ùêπ ùëö + ùêπ ùëñ ( 4 . 4 . 1 ) where ùêπ ùë° is the total force , ùêπ ùëö is the magnetic force from the gasket , ùêπ ùëñ represents the inertial force of the fridge door and ùêπ ùëí is the elastic force controlled by state variable C . If C = 0 , the door is closed and the force is represented by an elastic force . If C = 1 , the door is open and the magnetic force takes control . The transition is controlled by the 69 threshold M ( maximum magnetic force ) and Œ∏ ( angle of fridge door ) . When the resultant external force ùêπ ùëíùë• exceeds M , variable C will be set to 1 ; when the rotation angle of the fridge door Œ∏ < 0 ( figure 4 . 19 ) , the variable C will be set to 0 . Inertial force In our force model , the inertial force is simplified to a one - dimensional force in z direction : F ùëñ = ùëöùëßÃà where m is the mass constant , and ùëßÃà is the projection of acceleration of the end - effector on the z axis . Magnetic Force The total magnetic force is computed by integrating the magnetic force with the metal over the four gasket segments . According to Maxwell equations , the pulling force of a single magnet to metal can be represented as follows : F = | ùêµ ‚ä• | 2 ùê¥ 2ùúá 0 ( 4 . 4 . 2 ) ùêµ ‚ä• is the normal component of a magnetic field applied to metal , and A is the area of surface . Figure 4 . 20 : The model for magnetic force computation 70 Supposing the magnetic force caused by the gasket is equivalent to the effect of a magnetic dipole centered at the gasket ( figure 4 . 20 ) . The z - component of magnetic field ùêµ ‚ä• can be estimated with the magnetic dipole equation [ 22 ] : | ùêµ ‚ä• | = ùúá 0 | ùëö | 4ùúã | ùëü ùëÄ | 3 ( 2ùëêùëúùë† 2 ùúÉ ùëö + ùë†ùëñùëõ 2 ùúÉ ùëö ) ( 4 . 4 . 3 ) By integrating the magnetic force over ùúÉ ùëö , we obtain the total magnetic force at handle contact point H : ùêπ ùëö = ùúá 0 ( ùëÄ | A ùëÄ | ) 2 A 32ùúã 2 ‚Ñé ùëê6 ‚à´ ùëêùëúùë† 6 ùúÉ ùëö ( ùúÉ ùëê ‚àíùúÉ ùëê 2ùëêùëúùë† 2 ùúÉ ùëö + ùë†ùëñùëõ 2 ùúÉ ùëö ) 2 ùëëùúÉ ùëö ( 4 . 4 . 4 ) where ùúá 0 is the permeability of air . Parameter A ùëÄ is the area of the gasket surface , and ‚Ñé ùëê is the distance from point P at the gasket to the metal . M is a dipole moment . ùúÉ ùëê is ùúÉ ùëö at the end of the gasket . Note that if the displacement is very small , the integration part of equation 4 . 4 . 11 can be approximated as a constant . For simplicity , the magnetic force can be regarded as function of the following : ùêπ ùëö = ùê∂ ùëö ‚Ñé ùëê6 , ( 4 . 4 . 5 ) where ùê∂ ùëö is a constant . If D ùëöùëñùëõ is the minimum value of ‚Ñé ùëê while the door is closed and M is maximum magnetic force , then we have following equations : M = ùê∂ ùëö ùê∑ ùëöùëñùëõ6 , ‚Ñé ùëê = ùê∑ ùëöùëñùëõ + ‚àÜùê∑ ùëù ( 4 . 4 . 6 ) 71 Figure 4 . 21 : Relationship of ‚àÜùê∑ ùëù and ‚àÜH . ‚àÜùê∑ ùëù and ‚àÜH are displacement of point P and H to their original locations when the door is close . ‚àÜùê∑ ùëù is the displacement of P in the z direction ( ‚àÜùê∑ ùëù = 0 when door is closed ) . We note that the magnetic dipole P is located at the center of the gasket , and then the displacement at point P is approximately half of the offset ‚àÜH at the handle contact point H ( figure 4 . 21 ) : ‚àÜùê∑ ùëù = 1 2 ‚àÜH ( 4 . 4 . 7 ) Substituting ( 4 . 4 . 6 ) and ( 4 . 4 . 7 ) into ( 4 . 4 . 5 ) , we obtain ùêπ ùëö as a function of ‚àÜùêª : ùêπ ùëö = M ‚àó ùê∑ ùëöùëñùëõ6 ( ùê∑ ùëöùëñùëõ + 1 / 2 ( ‚àÜùêª ) ) 6 In the simulation , we use M and ùê∑ ùëöùëñùëõ to obtain various magnetic force profile . Figure 4 . 22 shows the influence of parameters M and ùê∑ ùëöùëñùëõ on magnetic force . M determines the peak point of the force profile ; ùê∑ ùëöùëñùëõ affects how fast the magnetic force drops . 72 Figure 4 . 22 : Magnetic force when M = 10 . Plot shows the magnetic force profile when ùê∑ ùëöùëñùëõ = 0 . 5 , ùê∑ ùëöùëñùëõ = 0 . 8 , ùê∑ ùëöùëñùëõ = 1 . Elastic Force In the thesis , we assume the elastic force consists of two parts : The elastic force ùêπ ùëíùëî caused by deformation of the gaskets ; the elastic force ùêπ ùëíùëé cause by the atmospheric pressure offset when stretching a sealed container . ( 1 ) The elastic force caused by gaskets is relatively simple . We divide the gasket into four segments . Figure 4 . 23a shows the layout of the gaskets and their corresponding constants in figure 4 . 23b . 73 ( a ) ( b ) Figure 4 . 23 : ( a ) diagram of a refrigerator door and gasket , ( b ) spring force model of the gaskets When Œ∏ is small , the elastic force applied to the handle can be approximated as follows : ùêπ ùëíùëî = ùëò ùëî ‚àÜùêª ( 4 . 4 . 8 ) where ‚àÜùêª is the displacement at the handle in z axis , and ùëò ùëî is the effective spring constant of four parallel springs defined in figure 4 . 23b . ( 2 ) In the thesis , we assume the elastic force ùêπ ùëíùëé caused by pressure difference is essential in force modeling . Figure 4 . 24 exhibits the volume change during the opening phase , while the gasket is still sealed and no air leaks into the fridge , pulling on the door creates a pressure difference between the inside and outside while the seal stretches . 74 Figure 4 . 24 : Change of volume inside the fridge storage room . The left picture shows the static state when the fridge door is sealed . The right one illustrates the volume change during the opening phase while the magnetic strip still attached to the body . We assume the temperature inside the storage room stays same if the gaskets are sealed . According to ideal gas law , this sealed container fits the condition of isothermal process ( constant temperature ) . The relationship between volume and pressure inside a sealed tank can be expressed as follows : ùëâ ùëö ‚àô ùëÉ = ùëõùëÖùëá Where V m is the volume of the tank , P is pressure , R is the universal gas constant per mole , n is mole count and T is absolute temperature . In order to simplify the model , we assume that the temperature inside the fridge doesn‚Äôt change while the gasket is still well sealed . Then the opening force caused by volume change can be expressed as follows : ùêπ ùëíùëé = 1 2 ‚àó ‚àÜùëÉ ‚àó ùëÜ = ( ùëõùëÖùëá 2ùëâ ùëö ‚àí ùëõùëÖùëá 2ùëâ 0 ) ‚àó ùëÜ ( 4 . 4 . 9 ) 75 S is the area of the fridge door . ùëâ ùëö is the volume of the fridge‚Äôs storage room while the door is fully closed . ùëâ 0 is the volume while the fridge door is opening and the gasket is still sealed . Assume that the storage room has length l , depth d and height h ( figure 4 . 25 ) ; the volume can be written as follows : ùëâ ùëö = ùëô ‚àó ùëë ‚àó ‚Ñé ( 4 . 4 . 10 ) ùëâ 0 = ùëô ‚àó ‚Ñé ‚àó ( ùëë + ‚àÜùêª / 2 ) ( 4 . 4 . 11 ) Figure 4 . 25 : Dimension of a refrigerator ‚àÜùêª is the distance between the outer edge of the fridge door and the body ( see figure 4 . 24 ) . Substituting ( 4 . 4 . 10 ) and ( 4 . 4 . 11 ) into equation 4 . 4 . 9 , we get ùêπ ùëíùëé = ( ùëõùëÖùëá 2ùëô‚Ñéùëë ‚àí ùëõùëÖùëá 2ùëô‚Ñé ( ùëë + ‚àÜùêª / 2 ) ) ‚àô ùëÜ = ùëä ‚àô ‚àÜùêª 2ùëë + ‚àÜùêª ( 4 . 4 . 12 ) where W = ùëõùëÖùëáùëÜ 2ùëôùëë‚Ñé and can be considered as a constant . When d ‚â´ ‚àÜùêª , equation 4 . 4 . 12 can be simplified as follows : ùêπ ùëíùëé = ùëä ‚àô ‚àÜùêª 2ùëë = ùëò ùëé ‚àÜùêª ( 4 . 4 . 13 ) 76 This indicates the force caused by atmospheric pressure is also an elastic component . We can merge ùêπ ùëíùëé with ùêπ ùëíùëî to obtain the total elastic force during the opening phase : ùêπ ùëí = ùêπ ùëíùëé + ùêπ ùëíùëî = ( ùëò ùëé + ùëò ùëî ) ‚àÜùêª = ùêæ ùëú ‚àÜùêª ( 4 . 4 . 14 ) where ùêæ ùëú is the effective spring constant of the elastic component during the opening phase . The storage room is no longer a sealed tank system during the closing phase . Therefore , the elastic force during the closing phase only involves one component : ùêπ ùëí = ùêπ ùëíùëî = ùêæ ùëê ‚àÜùêª ( 4 . 4 . 15 ) ùêæ ùëê is the spring constant of the elastic component during the closing phase . In our simulation , ùêæ ùëú and ùêæ ùëê can be configured to produce various elastic force . The influence of ùêæ ùëú to the simulated opening force profile is illustrated in figure 4 . 26 . With higher stiffness , users can get less sensation to the force transient during the opening phase . The influence of ùêæ ùëê to the simulated closing force profile is illustrated in figure 4 . 27 . Higher stiffness of elastic component offers users a smoother contact to the refrigerator body . 77 ( a ) ( b ) Figure 4 . 26 : the simulated force profile in the opening phase , in both cases , M = 6N ; ùê∑ ùëöùëñùëõ = 1ùëêùëö ( a ) opening force with Ko = 30N / cm ( b ) opening force with Ko = 10N / cm . ( a ) ( b ) Figure 4 . 27 : the simulated force profile in the closing phase , arrow indicates moving direction , in both cases , M = 6N ; ùê∑ ùëöùëñùëõ = 1ùëêùëö ( a ) closing force with Kc = 10N / cm ( b ) closing force with Kc = 30N / cm . Revised Force Model Based on equation 4 . 4 . 1 , we propose two different force models for model revision . In user study section , we conducted various tests to evaluate the fidelity of the revised haptic models . 78 ( a ) We assume the inertial force in the haptic simulation is relatively small compared to other force components and it has little influence to the sensation of opening and closing force . In the first revised model , we remove the inertial force in equation 4 . 4 . 1 and obtained : ùêπ ùë° = ( 1 ‚àí ùê∂ ) ùêπ ùëí + ùê∂ùêπ ùëö ( 4 . 4 . 16 ) ( b ) In the second revised model , we removed the elastic component caused by atmospheric pressure , which makes ùêæ ùëú = ùêæ ùëê = ùëò ùëî , the total force is still in the form of equation ( 4 . 4 . 1 ) . In the control panel ( figure 4 . 16b ) , the radio buttons allow users to choose from three different force models : ForceModel _ 1 option is corresponding to the original model ; ForceModel _ 2 option is corresponding to the revised model ( a ) ; ForceModel _ 3 option is corresponding to the revised model ( b ) . The last variable D in the control panel describes the maximum displacement of the handle in the opening phase before the force transition occurs . In ideal circumstances , given the value of M and Ko , parameter D can be computed as follows : D = M ùêæ ùëú However , in above equation , we instinctively assume the gasket perform detachment uniformly during the opening phase . In reality , the part of gasket close to the handle always detaches first , which makes the force transition from elastic component to magnetic component happen sooner than in ideal circumstances ( see figure 4 . 28 ) . Note that D should always be set less than M ùêæ ùëú and it has no influence to the closing force . 79 ( a ) ( b ) Figure 4 . 28 : Influence of parameter D to the simulated force in the opening phase . In both cases , M = 8 , ùê∑ ùëöùëñùëõ = 1 , Ko = 10 ( a ) force profile under ideal circumstance ( b ) force profile with user - defined D , D = 0 . 5 4 . 4 . 4 . Experiment Design and User Study The user study is conducted through two experiments : the goal of the first one is to find out which force model has higher fidelity ; the goal of the second one is to adjust variables involved in the force model , and it also works as a complement to the whole HITL haptic simulation process . The participants in both experiments are students from Simon Fraser University : four females and four males between the ages of 20 and 35 . All participants are right - handed ; Three of them have experience in manipulating the haptic device . Only one has experience with the Novint Falcon device , which is used in these experiments . In all experiments , participants are asked to manipulate the end effector of the Novint Falcon haptic device , which represents the handle of a virtual refrigerator door . All participants are required to pull the virtual handle three times in a row and then less than 10 seconds later , they are asked to pull the real refrigerator door as a comparison basis . The sequence of test objects will be shuffled after each participant finishes the test . In experiment 1 , participants are asked to take the trials on three force models described in section 4 . 4 . 3 . Participants are also asked to compare the virtual fridge door 80 to a real one and score it based on realism of the simulator . The score of fidelity is scaled from 1 to 5 , with 5 representing the greatest fidelity and 1 representing the least fidelity of the haptic rendering . The score of fidelity is given separately for the opening and closing phases ( column c represents the closing stage , and column o represents the opening stage ) . The results of user evaluation are listed in table 4 . 3 . Table 4 . 3 : score of fidelity of three force models in experiment 1 ; column O is the score of the opening sensation and column C is the score of closing sensation , the description of three models are given in section 4 . 4 . 3 1 2 3 4 5 6 7 8 AVG o c o c o c o c o c o c o c o c o c Model _ 1 4 2 3 3 4 2 4 2 4 2 3 2 3 3 3 2 3 . 5 2 . 25 Model _ 2 3 1 3 2 4 3 3 2 3 3 4 1 3 2 3 3 3 . 25 2 . 125 Model _ 3 4 2 3 2 3 3 3 3 4 3 3 2 4 3 4 2 3 . 5 2 . 5 Figure 4 . 29 : Experiment 1 data histogram . Ordinate indicates average scores of three force models , scaled from 1 to 5 . Test results on three models show little difference in fidelity according to the participants‚Äô feedback . In the next experiment , we remove both inertial force and the atmospheric pressure component from the force model . 0 0 . 5 1 1 . 5 2 2 . 5 3 3 . 5 4 Model _ 1 Model _ 2 Model _ 3 Open Close 81 In experiment 2 , we group five variables used in the force model and invite participants to evaluate the fidelity of the haptic system . Sixteen objects are used in this trial , and the parameters of these objects are shown in table 4 . 4 . 2 . The results are shown in table 4 . 4 . 3 . The average score based on user feedback is shown in a histogram in figure 4 . 13 . Table 4 . 4 Parameters of 16 samples in experiment 2 . The meaning of parameters used here is explained in section 4 . 4 . 3 . A B C D E F G H I J K L M N O P D 1 1 1 . 4 1 . 4 1 1 1 . 5 1 . 5 0 . 5 0 . 5 0 . 7 0 . 7 1 1 1 . 4 1 . 4 M 10 10 10 10 15 15 15 15 20 20 20 20 25 25 25 25 Ko 10 10 7 7 15 15 10 10 20 20 13 13 25 25 17 17 Kc 10 10 7 7 15 15 10 10 20 20 13 13 25 25 17 17 Dmin 0 . 5 0 . 7 1 . 0 1 . 2 0 . 5 0 . 7 1 . 0 1 . 2 0 . 5 0 . 7 1 . 0 1 . 2 0 . 5 0 . 7 1 . 0 1 . 2 Table 4 . 5 Data sheet of user study of experiment 2 . The scores are given in two columns . Column O represents the opening phase , and column C represents the closing phase . A B C D E F G H I J K L M N O P o c o c o c o c o c o c o c o c o c o c o c o c o c o c o c o c 1 3 1 2 1 3 3 3 3 3 1 3 1 3 1 3 1 4 2 3 2 4 4 3 3 4 2 3 2 3 1 3 1 2 3 2 3 2 3 3 4 3 3 2 3 2 3 2 3 2 3 3 3 2 4 3 4 3 4 2 2 2 2 2 3 2 3 3 2 3 1 4 2 4 3 3 1 3 3 3 2 3 1 3 3 3 2 4 3 4 3 3 3 3 3 3 1 3 2 4 4 3 3 2 3 3 4 2 4 3 4 1 2 2 2 1 3 2 4 1 3 3 4 4 3 2 2 2 2 2 3 1 5 3 2 2 2 4 3 3 2 3 1 3 1 4 1 3 2 3 2 3 2 4 4 4 4 3 3 3 3 2 1 3 2 6 3 2 3 2 3 3 3 3 4 2 3 2 3 2 3 2 4 2 2 1 4 3 3 4 3 3 3 2 2 1 2 1 7 3 3 3 2 3 2 3 3 2 2 3 2 3 2 3 2 3 2 3 1 4 3 3 3 3 3 2 2 2 1 3 1 8 3 1 3 3 3 2 3 3 3 3 3 2 3 2 3 1 3 2 3 1 3 3 3 3 3 3 2 2 2 2 3 1 82 Figure 4 . 30 : The average scores in experiment 2 . The height of the solid fill bar represents the score of opening phase , and the height of the diagonal stripe fill bar represents the score of closing phase . 4 . 4 . 5 . Discussion As an informal user study , the results in the both experiments may not reflect the pattern because of the limited number of participants . More participants with different backgrounds are needed to evaluate the statistical significance of these experiments . In the thesis , for simplicity of the simulation loop , we assume that the scores given by the users can 100 % reflect their sensation to the force model . In experiment 1 , we compared three force models implemented with different force components . The first one contains both inertial force and atmospheric pressure component ; the second one excludes inertial force ; the third one excludes atmospheric pressure components . No significant differences ( figure 4 . 29 ) were observed among these models in scores of fidelity given by participants . The user feedback indicates that contribution of inertial and atmospheric pressure components to fidelity of the haptic simulation is negligible . 0 0 . 5 1 1 . 5 2 2 . 5 3 3 . 5 4 A B C D E F G H I J K L M N O P Open Close 83 In experiment 2 , we removed both inertial force and atmospheric pressure component in the force model , and we use four variables to render various force profile ( noted that Ko = Kc under this circumstance ) . The average score of system fidelity are shown in figure 4 . 30 . The category with user - defined D parameter ( D < M ùêæ ùëú ) shows higher fidelity than the one with default D value ( D = M ùêæ ùëú ) , which indicated parameter D is an important variable to render a realistic haptic sensation in this case study . From the description of variables in section 4 . 4 . 3 , D represents s the non - uniformity of gasket‚Äôs detachment . The results confirmed our assumption that during the opening phase , the gaskets detach non - uniformly . Groups with parameters set ( M = 25 , Dmin = 10 ) shows lowest fidelity . If we take a close look at the parameter value , the peak force in these groups already exceed the maximum output of Novint falcon device ; thus actuators will saturate and send undesired force to the end effector . The cause of low fidelity on these groups shows irrelevance to the force model itself . From this point of view , determining the effective initial parameters for iterative design requires comprehensive understanding of the multimodal system ( including the hardware and software ) . 4 . 5 . Summary In this chapter , we mainly investigate the feasibility of using haptic device to facilitate the design process . The multi - modal design interface developed in the first case study allows users to design and evaluate the model in an intuitive way . The second case study shows that haptic device can assist in the early stage of design . With active human interaction , designers can develop an effective iterative simulation process which helps them to determine the haptic model variables in discretized domain . 84 5 . Conclusions and Future Work 5 . 1 . Conclusions The main objective of the thesis is to investigate the feasibility of using force feedback device as an aid in design . The multi - modal design interface consists of three parts : a haptic feedback device , haptic rendering and basic visual rendering . In chapter 2 we gave an extensive overview of the haptic device ( Falcon ) used in the thesis , which helps us better understand the device configurations and limitation at fundamental level . In chapter 3 , we use approximation based gravity compensation method to cancel the apparent gravity force at the end - effector . In order to reduce the approximation error of libralis software , we proposed a conceptual interpolation scheme which consists of a grid creation procedure and a tetrahedron interpolation algorithm . In experiment , we successfully reduce the approximation error at the workspace boundary by integrating the new method with libralis . In chapter 4 , we propose two preliminary HAD interfaces to explore how a haptic device aid in the design process . In the first case study , we build a needle insertion interface which is used to simulate the axial force during the needle insertion process . Based on the haptic frame above we develop a user interface where human operators can manipulate the virtual slider - crank mechanism used for facilitating the needle insertion procedure . Users can configure the mechanism structures by modifying parameters in the control panel and find out their preferred design in an intuitive method . In the second case study , we simulate the opening and closing force of a refrigerator door . The feedback from user study helps designers to exclude the less important parameters to human factors in early design stage . This human - in - the - loop ( HITL ) methodology allows users to model haptic force feedback without collecting and analyzing the raw data from real prototype testing . It also enables system cognition during the iterative design loop . 85 5 . 2 . Future Work The experiment result of gravity compensation in chapter 2 shows high standard deviation which indicates low system transparency . The future work related to improving the transparency of Novint Falcon device has two directions : 1 ) establish a friction force model to compensate the friction force of the parallel mechanism ; 2 ) use embedded processor to control actuators in a real - time operating system to avoid any data loss . In our multi - modal design interface , only basic graphic rendering is provided . The force model used in the simulation is one - dimensional which greatly restricts its ability to handle more complicated situation . In future work , we expect to implement the multi - modal interface with a more sophisticated simulation platform . In our second case study , the variables used in the iterative simulation loop are grouped up and updated manually . Therefore , the efficiency of the iterative simulation is largely dependent on the logic and knowledge of the designers . The ultimate goal of iterative design is to ‚Äúinvite users in and take designers out‚Äù . Possible future work includes developing an inclusive manual of iterative design method or building an automated decision - making system with latest artificial Intelligence technology . 86 Bibliography [ 1 ] SensAble Technologies , Inc . , [ Online ] Available : http : / / www . sensable . com , [ Accessed : Nov . 23 , 2012 ] . [ 2 ] J . Schaaf , C . James , and F . L . Thompson , " System Concept Development with Virtual Prototyping . " in Proceedings of the 29th Simulation Conference , IEEE Computer Society , Dec . 7 - 10 , 1997 . pp . 941 ‚Äì 947 . [ 3 ] P . F . Jacobs , Rapid prototyping & manufacturing : fundamentals of stereolithography . New York : McGraw - Hill , 1992 , pp . 12 - 34 . [ 4 ] Rapid Prototyping , [ Online ] Available : http : / / en . wikipedia . org / wiki / Rapid _ prototyping , [ Accessed : Jan 12 , 2013 ] . [ 5 ] B . Roland . " Virtual Reality Technology‚ÄîAn Overview " in Product Engineering : Tools and methods based on virtual reality , D . Talaba , A . Amditis , Ed . , Dordrecht , The Netherlands : Springer , 2008 , pp . 21 ‚Äì 64 . [ 6 ] Novint Technologies , Inc . , [ Online ] Available : http : / / www . novint . com , [ Accessed : Nov 22 , 2012 ] . [ 7 ] L . W . Tsai and R . E . Stamper , " A parallel manipulator with only translational degrees of freedom , " Univ . Maryland , College Park , MD , Rep . TR 1997 - 72 , 1997 . [ 8 ] R . E . Stamper , " A three degree of freedom parallel manipulator with only translational degrees of freedom , " Ph . D . dissertation , Dept . Mech . Eng . , Univ . Maryland , College Park , MD , 1997 . [ 9 ] A . Amditis , B . Matthaios , and B . Roland , " Towards networked and structured VR European research area : intuition network of excellence and future research challenges . " MMI - Interaktiv , vol . 12 , pp . 43 , April , 2007 . [ 10 ] R . Q . Vanderlinde , P . Lammertse , E . Frederiksen , and B . Ruiter , ‚ÄúThe Hapticmaster , a New High - Performance Haptic Interface , ‚Äù in Proc . of Eurohaptics 2002 , 2002 , pp . 1 - 5 . [ 11 ] S . L . Springer and R . Gadh , " State - of - the - Art Virtual Reality Hardware for Computer - aided Design , " Journal of Intelligent Manufacturing , vol . 7 , no . 6 , pp . 457 - 465 , Dec 16 , 1996 . [ 12 ] N . Jacky , " Amniocentesis : Technique and Education , " Current Opinion in Obstetrics and Gynecology , vol . 22 , no . 2 , pp . 152 , April 22 , 2010 . 87 [ 13 ] HealthGrades , " Patient Safety Report ( April 8 , 2008 ) , Medical Errors Cost U . S . $ 8 . 8 Billion , " 2008 , [ Online ] Available : http : / / www . eurekalert . org / pub _ releases / 2008 - 04 / h - mec040308 . php , [ Accessed Jan . 08 , 2013 ] . [ 14 ] R . A . Welch , S . E . Soha , A . E . Wiktor , D . L . Van - Dyke , and W . B . Blessed , " Operator Experience and Sample Quality in Genetic Amniocentesis , " American Journal of Obstetrics and Gynecology , vol . 194 , no . 1 , pp . 189 - 191 , Jan , 2006 . [ 15 ] M . John , B . Anderson , G . Anderson , P . Hess , and S . Pratt , " Multi - Axis Mechanical Simulator for Epidural Needle Insertion , " Medical Simulation , vol . 3078 , pp . 267 - 276 , 2004 . [ 16 ] B . Gonenc and H . Gurocak , " Haptic Interface with Hybrid Actuator for Virtual Needle Insertion and Tissue Cutting , " presented at Haptics Symposium ( HAPTICS ) , 2012 IEEE , March 4 - 7 , 2012 , pp . 451 - 455 . [ 17 ] J . Sankar , H . I . Connacher and K . W . Lyons , " Virtual Assembly Using Virtual Reality Techniques , " Computer - Aided Design , vol . 29 , no . 8 , pp . 575 - 584 , 1997 . [ 18 ] M . Vikalp and K . Suresh , " A dual - representation strategy for the virtual assembly of thin deformable objects , " Virtual Reality , vol . 16 , no . 1 , pp . 3 - 14 , March 1 , 2012 . [ 19 ] Z . Peter , " Virtual Reality Aided Design : A survey of the use of VR in automotive industry , " in Product Engineering : Tools and methods based on virtual reality , D . Talaba , A . Amditis , Ed . , Dordrecht , The Netherlands : Springer , 2008 , pp . 277 - 296 . [ 20 ] G . Antonino and G . Zachmann , " Virtual reality as a tool for verification of assembly and maintenance processes , " Computers & Graphics , vol . 23 , no . 3 , pp . 389 - 403 , 1999 . [ 21 ] J . Zhang , S . Payandeh and J . Dill , " Haptic Aided Design : A case study , " Proceedings of 11th Symposium on Haptic Interfaces for Virtual Environment and Teleoperator Systems , March 22 - 23 , 2003 , pp . 254 ‚Äì 261 . [ 22 ] J . R . Reitz , Frederick J . Milford , and R . W . Christy , Foundations of electromagnetic theory , Reading , MA : Addison - Wesley Publishing Company , 2008 . [ 23 ] A . M . Okamura , C . Simone , and M . D . O ' Leary , " Force modeling for needle insertion into soft tissue , " IEEE Transactions on Biomedical Engineering , vol . 51 , no . 10 pp . 1707 - 1716 , Oct . 2004 . [ 24 ] Z . Rolf , W . Mueller , G . Fischer , and M . G√∂bel , " A virtual reality medical training system , " in Computer Vision , Virtual Reality and Robotics in Medicine , April 4 , 1995 , pp . 282 - 286 . [ 25 ] K . Uwe , H . K . Cakmak and H . Maa√ü , " Endoscopic surgery training using virtual reality and deformable tissue simulation , " Computers & Graphics , vol . 24 , no . 5 , pp . 671 - 682 , 2000 . 88 [ 26 ] Siemens Industry , Inc . , [ Online ] Available : http : / / www . plm . automation . siemens . com / en _ us / products / nx / , [ Accessed : Dec 12 , 2012 ] . [ 27 ] S . Sunghwan et al . , " Haptic simulation of refrigerator door , " in Haptics Symposium ( HAPTICS ) , 2012 IEEE , March 4 - 7 , 2012 , pp . 147 - 154 . [ 28 ] L . L . H . Holton , " Force models for needle insertion created from measured needle puncture data , " in Studies in Health Technology and Informatics , vol . 81 , Medicine Meets Virtual Reality 2001 , J . D . Westwood et al . , Ed . , Washington , DC : Amsterdam , 2001 , pp . 180 - 186 . [ 29 ] A . Ali , M . R . Kermani and R . V . Patel , " A novel force modeling scheme for needle insertion using multiple Kalman filters , " Instrumentation and Measurement , IEEE Transactions , vol . 61 , no . 2 , pp . 429 - 438 , 2012 . [ 30 ] F . Dirk , A . Mastmeyer and H . Handels , " GPU - Based Visualization of Deformable Volumetric Soft - Tissue for Real - Time Simulation of Haptic Needle Insertion . " Bildverarbeitung f√ºr die Medizin 2012 , T . Thomas , et al . , Ed . , Berlin , Germany : Springer Berlin - Heidelberg , 2012 , pp . 117 - 122 . [ 31 ] G . Paul , T . Krummel , R . Webster , M . Smith and D . Hutchens , " A prototype haptic lumbar puncture simulator , " in Studies in health technology and informatics , vol . 70 , Medicine Meets Virtual Reality 2000 , J . D . Westwood et al . , Ed . , Washington , DC : Amsterdam , 2000 , pp . 106 - 109 . [ 32 ] S . K . Saha , " Managing Technology CAD for Competitive Advantage : An efficient approach for integrated circuit fabrication technology development , " Engineering Management , IEEE Transactions , vol . 46 , no . 2 , pp . 221 - 229 , 1999 . [ 33 ] G . Michelle and B . A . Nardi , " Gardeners and gurus : patterns of cooperation among CAD users , " in Proceedings of the SIGCHI conference on Human factors in computing systems , May 3 - 7 , 1992 , pp . 107 ‚Äì 117 . [ 34 ] P . Jeffrey , Competitive advantage through people : Unleashing the power of the work force , Boston , MA : Harvard Business Press , 1996 . [ 36 ] C . Ericson , Real - time collision detection , Burlington , MA : Morgan Kaufmann , 2004 . [ 37 ] V . Auweraer , H . S . Donders , P . Mas and K . Janssens , " Breakthrough technologies for virtual prototyping of automotive and aerospace structures , " in Product Engineering : Tools and methods based on virtual reality , D . Talaba , A . Amditis , Ed . , Dordrecht , The Netherlands : Springer , 2008 , pp . 397 - 418 . [ 38 ] G . Grigore . " Fully - Isotropic Parallel Mechanisms - An Innovative Concept for Haptic Devices . " in Product Engineering : Tools and methods based on virtual reality , D . Talaba , A . Amditis , Ed . , Dordrecht , The Netherlands : Springer , 2008 , pp . 169 ‚Äì 194 . 89 [ 39 ] F . Zorriassatine , C . Wykes , R . Parkin and N . Gindy , " A survey of virtual prototyping techniques for mechanical product development , " Proceedings of the Institution of Mechanical Engineers , Part B : Journal of Engineering Manufacture , vol . 217 , no . 4 , pp . 513 ‚Äì 530 , 2003 . [ 40 ] D . Checcacci , , E . Sotgiu , A . Frisoli , C . A . Avizzano and M . Bergamasco , " Gravity compensation algorithms for parallel haptic interface , " presented at 11th IEEE International Workshop on Robot and Human Interactive Communication . Proceedings , Sept . 27 , 2002 . pp . 140 - 145 . [ 41 ] S . Moubarak , M . T . Pham , R . Moreau and T . Redarce , " Gravity compensation of an upper extremity exoskeleton , " presented at Engineering in Medicine and Biology Society ( EMBC ) , 2010 Annual International Conference of the IEEE , Aug . 31 - Sept . 4 , 2010 , pp . 4489 - 4493 . [ 42 ] A . H . A . Stienen , " Freebal : dedicated gravity compensation for the upper extremities , " in IEEE 10th International Conference on Rehabilitation Robotics , 2007 - - ICORR , June 13 - 15 , 2007 , pp . 804 - 808 . [ 43 ] O . Renaud , M . Guti√©rrez , D . Thalmann and F . Vexo , " Improving user comfort in haptic virtual environments through gravity compensation , " in Eurohaptics Conference , 2005 and Symposium on Haptic Interfaces for Virtual Environment and Teleoperator Systems , 2005 . World Haptics 2005 . First Joint , March 18 - 20 , pp . 401 - 409 . [ 44 ] K . Miller and R . Clavel , " The Lagrange - based model of Delta - 4 robot dynamics , " Robotersysteme , vol . 8 , no . 1 , pp . 49 - 54 , 1992 . [ 45 ] R . Clavel , " DELTA , a fast robot with parallel geometry , in 18 th International Symposium on Industrial Robots , 1988 , pp . 91 - 100 . [ 46 ] S . George , Lessons Introductory to the Modern Higher Algebra , New York City , NY : Chelsea Publishing Co . , 1964 . [ 47 ] S . Martin and N . Hillier , " Characterisation of the Novint Falcon haptic device for application as a robot manipulator , " in Proc . Australasian Conf . Robotics and Automation , Feb 12 , 2009 , pp . 1 - 9 . [ 48 ] K . Ouellet , Projet de fin d ' etudes engenie de la production automatisee , Technical report , University of Quebec , Montreal , QC , Rep . GPA - 792 , 2008 . [ 49 ] Libnifalcon SDK Specification , [ Online ] available : http : / / qdot . github . com / libnifalcon / , [ Accessed on Feb . 22 , 2013 ] . [ 50 ] Libralis Gravity Compensation SDK : [ Online ] available : http : / / libralis . dii . unisi . it / , [ Accessed on Feb . 22 , 2013 ] . [ 51 ] F . Alessandro , M . Fei , S . Mulatto , M . Pascale and D . Prattichizzo , " Autocalibrated gravity compensation for 3DoF impedance haptic devices , " presented at Proc . Haptics : Perception , Devices and Scenarios , Jun . 10 - 13 , 2008 , pp . 43 - 52 . 90 [ 52 ] H . K . Khalil , Nonlinear systems , Upper Saddle River , NJ : Prentice Hall , 2002 . [ 53 ] T . Li , and S . Payandeh , " Design of spherical parallel mechanisms for application to laparoscopic surgery , " Robotica , vol . 20 , no . 2 , pp . 133 - 138 , 2002 . [ 54 ] China Public Health Safety Report , [ Online ] available : http : / / www . chinasafety . gov . cn / newpage / , [ Accessed on Feb . 12 , 2013 ] . [ 55 ] K . A . Kaczmarek and P . B . Y . Rita , " Tactile displays , " in Virtual environments and advanced interface design , W . Barfield and T . A . Furness , Ed . , New York : Oxford Univ . Press Inc . , pp . 349 - 414 . [ 56 ] International ergonomics association , [ Online ] available : http : / / iea . cc / 01 _ what / What % 20is % 20Ergonomics . html , [ Accessed on April 10 , 2013 ] . [ 57 ] Iterative design , [ Online ] available : http : / / en . wikipedia . org / wiki / Iterative _ design , [ Accessed on April 10 , 2013 ] . [ 58 ] Subcutaneous injection , [ Online ] available : http : / / en . wikipedia . org / wiki / Subcutaneous _ injection , [ Accessed on April 10 , 2013 ] . [ 59 ] S . Narayanan and P . Kidambi , " Interactive Simulations : History , Features , and Trends " in Human - in - the - Loop Simulations , L . Rothrock and S . Narayanan , Ed . , London : Springer , 2011 , pp . 1 - 13 . [ 60 ] M . Matessa and W . Warwick , ‚ÄúVirtual and Constructive Simulations with the GRBIL Modeling Tool‚Äù in Human - in - the - Loop Simulations , L . Rothrock and S . Narayanan , Ed . , London : Springer , 2011 , pp . 55 - 67 . [ 61 ] S . Ganapathy , S . Prabhala , S . Narayanan , R . R . Hill and J . J . Gallimore , ‚ÄúInteractive Model - Based Decision Making for Time - Critical Vehicle Routing‚Äù in Human - in - the - Loop Simulations , L . Rothrock and S . Narayanan , Ed . , London : Springer , 2011 , pp . 203 - 220 . [ 62 ] Force Dimension inc . , [ Online ] available : http : / / www . forcedimension . com / omega3 - overview , [ Accessed on April 10 , 2013 ] . [ 63 ] Moog inc . , [ Online ] available : http : / / www . moog . com / products / haptics - robotics , [ Accessed on April 10 , 2013 ] . 91 Appendices 92 Appendix A . Specification of force feedback devices Table A . 1 Specifications of force feedback devices introduced in thesis . Lists include company names , device names , degree of freedom ( DOF ) , degree of force feedback , estimated workspace measured in millimeters , maximum force measured in Newton‚Äôs , torque in milli - newton - meter , stiffness measured in N / mm , and quote from products retailers given in US dollar , price may changes considering the time of writing . Company Device Degrees of freedom Degrees of force feedback Workspace ( mm ) Max force ( N ) / Toque ( Nmm ) Stiffness ( N / mm ) Price ( US $ ) SensAble Technologies Omni Desktop Premium 1 . 0 Premium 1 . 5 Premium 3 . 0 6 6 6 6 6 3 3 3 6 6 160x120x70 160x130x130 127x178x254 191x267x381 406x584x838 3 . 3 / 0 7 . 9 / 0 8 . 5 / 0 8 . 5 / 515 22 / 515 1 . 02 1 . 7 3 . 5 3 . 5 1 1 . 7k 9k 15k 20k - 43k 45k - 60k Novint Falcon 3 3 101x101x101 ~ 9 / 0 N / A 0 . 2k Force Dimension Omega 3 , 6 , 7 Sigma 7 Delta 3 Delta 6 3 , 6 , 7 7 3 6 3 7 3 6 160x160x110 190x190x190 360x360x300 360x360x300 12 / 8 . 0 20 / 400 20 / 200 20 / 200 14 . 5 N / A 15 15 12k - 20k 52k 19k 36k Moog FCS Robotics Haptic Master 3 3 1000x400x360 250 / 0 10 37k Immersion Corporation CyberForce CyberGrasp 6 5 3 5 304x304x495 Finger range 8 . 8 / 0 12 / NA N / A N / A 38k 38k Butterfly haptics Maglev 200 6 6 24x24x24 40 / 3600 50 30k Haption 6D desktop 3D 15 - 25 6D 35 - 45 6D 40 - 40 INCA 6D 6 6 6 6 6 6 3 6 6 6 129x120x120 500x644x350 1080x900x600 400x400x400 N / A 10 / 500 15 / 0 35 / 3000 100 / 1000 40 / 5000 2 . 5 2 2 . 5 N / A N / A 25k 21k 72k 102k 68k Mimics Mantis 6 3 325x270x260 15 . 2 / 0 5 . 5 8k 93 Appendix B . 1 . Specification of Novint falcon device and data sheets of hardware Figure B . 1 : ( a ) Photo of inner structure of Novint . These motors are directly linked to a 14 . 25 mm diameter drum with a 0 . 5 mm diameter cable . The radius of the forearm is 56 . 0mm ; it is coupled with the drum and tensioned by a spring at the end of the leg . ( b ) Sketch of the main arm actuated by the cable system . Figure B . 2 : Photo of DC motor and encoder 94 Appendix . B . 2 . Novint Falcon‚ÄîIntroduction and Basic Experiment Setup Novint Falcon is a 3 - DOF translational - only device from a company called Novint Technologies , Inc . This device was originally designed for the gaming industry and retails at CA $ 250 new or at CA $ 99 used . Compared to Omega - 3 from Force Dimension , which costs more than CA $ 20 , 000 , Novint Falcon has become an appealing alternative as a force - rendering device in simulation despite its reduction in stiffness and increased friction . The computer used in the experiments contains an AMD ( R ) dual core 2 . 0GHZ CPU and 3GB of RAM . The operating system installed on this computer is Microsoft Windows Vista . All experiments and data analyses are run under the Microsoft Visual Studio 2005 workstation . Programs are coded with Windows - only HDAL API , released by the Novint Company . HDAL API is a uniform interface supporting haptic control on all Novint company devices . However , users can choose libnifalcon [ 49 ] as an alternative API if they want to operate using the Linux system or want to have a better control over actuators . The interface uses an update rate of 1 kHz to maintain the force control . However , Hillier [ 47 ] observed a noticeable delay due to the low performance of the USB interface . Graphic rendering is accomplished using open graphics library ( OpenGL ) , which is a cross - language , cross - platform API used for drawing complex 2D or 3D graphic scenes with simple primitives . 95 Appendix C . Libralis Software Specification C . 1 User Interface of Libralis Figure C . 1 : Software main interface 96 Figure C . 2 Configuration window ( a ) ( b ) Figure C . 3 : Offline gravity estimation ( a ) Estimation dialogue ( b ) Monitor window 97 C . 2 Grid creation using libralis Figure C . 4 : Grid creation 98 Figure C . 5 Grid vertices ordering C . 3 Libralis SDK Setup Here is a simple example of reading compensation data from a file : 99 Here is an example of integration of libralis gravity compensation in c + + environment using callback ( ) function : 100 Appendix D . Schematic of Determining if a Point Lies Inside the Workspace Figure D . 1 : schematic of determining if a point lies inside the workspace . Workspace mentioned in the diagram is defined in chapter 2 .